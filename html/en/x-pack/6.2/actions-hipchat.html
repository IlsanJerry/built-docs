<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>HipChat Action
        | X-Pack for the Elastic Stack [6.2]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="X-Pack for the Elastic Stack [6.2]" /><link rel="up" href="actions.html" title="Actions" /><link rel="prev" href="actions-logging.html" title="Logging Action" /><link rel="next" href="actions-slack.html" title="Slack Action" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Legacy/XPack/Reference/6.2" /><meta name="DC.subject" content="X-Pack" /><meta name="DC.identifier" content="6.2" /><meta name="robots" content="noindex,nofollow" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">You are looking at documentation for an older release.  Not what you want? 
See the <a href="https://www.elastic.co/guide/en/elastic-stack-overview/current/index.html">current release documentation</a>.</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">X-Pack for the Elastic Stack
      [6.2]
    </a></span> » <span class="breadcrumb-link"><a href="xpack-alerting.html">Alerting on Cluster and Index Events</a></span> » <span class="breadcrumb-link"><a href="actions.html">Actions</a></span> » <span class="breadcrumb-node">HipChat Action</span></div><div class="navheader"><span class="prev"><a href="actions-logging.html">
              « 
              Logging Action</a>
           
        </span><span class="next">
           
          <a href="actions-slack.html">Slack Action
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="actions-hipchat"></a>HipChat Action</h2></div></div></div><p>Use the <code class="literal">hipchat</code> action to send messages to <a class="ulink" href="https://www.hipchat.com" target="_top">HipChat</a>
rooms or users. To send HipChat messages, you must
<a class="link" href="actions-hipchat.html#configuring-hipchat" title="Configuring HipChat Accounts">configure at least one HipChat account</a> in <code class="literal">elasticsearch.yml</code>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuring-hipchat-actions"></a>Configuring HipChat Actions</h3></div></div></div><p>You configure HipChat actions in a <code class="literal">actions</code> array. Action-specific attributes
are specified using the <code class="literal">hipchat</code> keyword. You must specify the <code class="literal">message</code>
attribute for all <code class="literal">hipchat</code> actions. If you omit the <code class="literal">account</code> attribute, the
message is sent using the default HipChat account configured in
<code class="literal">elasticsearch.yml</code>.</p><p>For example, the following action is configured to send messages using a HipChat
account that uses the <a class="link" href="actions-hipchat.html#hipchat-api-integration" title="Using the Hipchat Integration Profile">integration</a> profile. Because
this type of account can only send messages to a specific room, the only required
attribute is the message itself:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">"actions" : {
  "notify-hipchat" : {
    "transform" : { ... },
    "throttle_period" : "5m",
    "hipchat" : {
      "account" : "integration-account", <a id="CO42-1"></a><i class="conum" data-value="1"></i>
      "message" : {
        "body" : "Encountered  {{ctx.payload.hits.total}} errors in the last 5 minutes (facepalm)", <a id="CO42-2"></a><i class="conum" data-value="2"></i>
        "format" : "text",
        "color" : "red",
        "notify" : true
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO42-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>The name of a HipChat account configured in <code class="literal">elasticsearch.yml</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO42-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>The message you want to send to HipChat.</p></td></tr></table></div><p>To send messages with a HipChat account that uses the <a class="link" href="actions-hipchat.html#hipchat-api-user" title="Using the HipChat User Profile">user</a>
profile, you need to specify what rooms and users you want to send the message to.
For example, the following action is configured to send messages to the
<code class="literal">mission-control</code> and <code class="literal">devops</code> rooms as well as the user <code class="literal">website-admin@example.com</code>.
(To send to multiple users or rooms, specify an array of strings):</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">"actions" : {
  "notify-hipchat" : {
    "transform" : { ... },
    "throttle_period" : "5m",
    "hipchat" : {
      "account" : "user-account",
      "message" : {
        "room" : [ "mission-control", "devops" ],
        "user" : "website-admin@example.com",
        "body" : "Encountered  {{ctx.payload.hits.total}} errors in the last 5 minutes (facepalm)",
        "format" : "text",
        "color" : "red",
        "notify" : true
      }
    }
  }
}</pre></div><p>To send messages with a HipChat account that uses the <a class="link" href="actions-hipchat.html#hipchat-api-v1" title="Using the HipChat v1 Profile">v1</a>
profile, you need to specify what room or rooms you want to send the message to.
For example, the following action is configured to send messages to the
<code class="literal">server-status</code> room. (To send to multiple rooms, specify an array of strings.)</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">"actions" : {
  "notify-hipchat" : {
    "transform" : { ... },
    "throttle_period" : "5m",
    "hipchat" : {
      "account" : "v1-account",
      "message" : {
        "from" : "Watcher",
        "room" : [ "server-status", "infra-team" ],
        "body" : "Encountered  {{ctx.payload.hits.total}} errors in the last 5 minutes (facepalm)",
        "format" : "text",
        "color" : "red",
        "notify" : true
      }
    }
  }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="hipchat-action-attributes"></a>HipChat Action Attributes</h3></div></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="center" valign="top">Required</th><th align="left" valign="top">Default</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">account</code></p></td><td align="center" valign="top"><p>no</p></td><td align="left" valign="top"><p>Default account</p></td><td align="left" valign="top"><p>The HipChat account to use to send the message.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">proxy.host</code></p></td><td align="center" valign="top"><p>no</p></td><td align="left" valign="top"><p>-</p></td><td align="left" valign="top"><p>The proxy host to use (only in combination with <code class="literal">proxy.port</code>)</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">proxy.port</code></p></td><td align="center" valign="top"><p>no</p></td><td align="left" valign="top"><p>-</p></td><td align="left" valign="top"><p>The proxy port to use (only in combination with <code class="literal">proxy.host</code>)</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">message.body</code></p></td><td align="center" valign="top"><p>yes</p></td><td align="left" valign="top"><p>-</p></td><td align="left" valign="top"><p>The message content. Can contain up to 1000 characters.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">message.format</code></p></td><td align="center" valign="top"><p>no</p></td><td align="left" valign="top"><p>html</p></td><td align="left" valign="top"><p>The format of the message: <code class="literal">text</code> or <code class="literal">html</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">message.color</code></p></td><td align="center" valign="top"><p>no</p></td><td align="left" valign="top"><p>yellow</p></td><td align="left" valign="top"><p>The background color of the notification in the room:
                                                  <code class="literal">gray</code>, <code class="literal">green</code>, <code class="literal">purple</code>, <code class="literal">red</code>, <code class="literal">yellow</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">message.notify</code></p></td><td align="center" valign="top"><p>no</p></td><td align="left" valign="top"><p>false</p></td><td align="left" valign="top"><p>Indicates whether people in the room should be actively
                                                  notified</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">message.from</code></p></td><td align="center" valign="top"><p>no</p></td><td align="left" valign="top"><p>the watch ID</p></td><td align="left" valign="top"><p>The name that appears as the notification sender. Only
                                                  valid for accounts that use the v1 profile.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">message.room</code></p></td><td align="center" valign="top"><p>no</p></td><td align="left" valign="top"><p>-</p></td><td align="left" valign="top"><p>The rooms that the notification should go to. Accepts
                                                  a string value or an array of string values. Must be
                                                  specified when using the v1 profile. At least one room
                                                  or user must be specified when using the <code class="literal">user</code> profile.
                                                  Not valid for the <code class="literal">integration</code> profile.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">message.user</code></p></td><td align="center" valign="top"><p>no</p></td><td align="left" valign="top"><p>-</p></td><td align="left" valign="top"><p>The users that the notification should go to. Accepts
                                                  a string value or an array of string values. At least
                                                  one room or user must be specified when using the <code class="literal">user</code>
                                                  profile. Not valid for the <code class="literal">integration</code> or <code class="literal">v1</code> profiles.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="configuring-hipchat"></a>Configuring HipChat Accounts</h3></div></div></div><p>You configure the accounts Watcher can use to communicate with HipChat in the
<code class="literal">xpack.notification.hipchat</code> namespace in <code class="literal">elasticsearch.yml</code>. Both
<a class="ulink" href="https://www.hipchat.com/docs/api" target="_top">v1</a> and
<a class="ulink" href="https://www.hipchat.com/docs/apiv2" target="_top">v2</a> HipChat APIs are supported.</p><p>Watcher provides three HipChat API profiles:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="actions-hipchat.html#hipchat-api-integration" title="Using the Hipchat Integration Profile">integration</a></span></dt><dd>Sends messages to a specific room using HipChat’s v2 API
<a class="ulink" href="https://www.hipchat.com/docs/apiv2/method/send_room_notification" target="_top">Send room
notification</a>.</dd><dt><span class="term"><a class="link" href="actions-hipchat.html#hipchat-api-user" title="Using the HipChat User Profile">user</a></span></dt><dd>Sends messages as a particular user through the HipChat v2 API. Enables you to
send messages to arbitrary rooms or users.</dd><dt><span class="term"><a class="link" href="actions-hipchat.html#hipchat-api-v1" title="Using the HipChat v1 Profile">v1</a></span></dt><dd><p class="simpara">Sends messages to rooms using HipChat’s v1 API
<a class="ulink" href="https://www.hipchat.com/docs/api/method/rooms/message" target="_top">rooms/message</a>.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The <code class="literal">v1</code> profile is provided because it is simple to set up and this API
      is familiar to many users. That said, HipChat has deprecated the v1 API
      and is encouraging users to migrate to v2. Both the <code class="literal">integration</code> and
      <code class="literal">user</code> profiles are based on the HipChat v2 API.</p></div></div></dd></dl></div><p>If you configure multiple HipChat accounts, you either need to set a default
HipChat account or specify which account the notification should be sent with
in the <a class="link" href="actions-hipchat.html" title="HipChat Action">hipchat</a> action.</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">xpack.notification.hipchat:
  default_account: team1
  account:
    team1:
      ...
    team2:
      ...</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="hipchat-api-integration"></a>Using the Hipchat Integration Profile</h4></div></div></div><p>You can use the <code class="literal">integration</code> profile to send messages to specific rooms. When
you set an account’s profile to <code class="literal">integration</code>, the messages are sent through
HipChat’s v2 <a class="ulink" href="https://www.hipchat.com/docs/apiv2/method/send_room_notification" target="_top">
Send room notification</a> API.</p><p>When you use the <code class="literal">integration</code> profile, you need to configure a separate HipChat
account for each room you want to send messages—​the account configuration
contains a room-specific authentication token. Alternatively, you can use the
<a class="link" href="actions-hipchat.html#hipchat-api-user" title="Using the HipChat User Profile"><code class="literal">user</code></a> or <a class="link" href="actions-hipchat.html#hipchat-api-v1" title="Using the HipChat v1 Profile"><code class="literal">v1</code></a> profile to send messages
to multiple rooms.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The <code class="literal">integration</code> profile only supports sending messages to rooms, it does
      not support sending private messages. Use the <a class="link" href="actions-hipchat.html#hipchat-api-user" title="Using the HipChat User Profile"><code class="literal">user</code></a>
      profile to notify a particular HipChat user.</p></div></div><p>You need a room-specific authentication token to configure an <code class="literal">integration</code>
account. To generate an authentication token:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Log in to <a class="ulink" href="http://hipchat.com" target="_top">hipchat.com</a> or your HipChat server as a group
administrator.</li><li class="listitem">Go to <span class="strong strong"><strong>Group admin &gt; Rooms</strong></span>.</li><li class="listitem">Click the name of the room you want to send messages to.</li><li class="listitem">Click the <span class="strong strong"><strong>Tokens</strong></span> link.</li><li class="listitem"><p class="simpara">Enter a name for the token in the <span class="strong strong"><strong>Label</strong></span> field.</p><div class="informalfigure"><div class="mediaobject"><img src="images/hipchat-generate-room-token.jpg" alt="hipchat generate room token" /></div></div></li><li class="listitem">Select the <span class="strong strong"><strong>Send Notification</strong></span> scope.</li><li class="listitem">Click <span class="strong strong"><strong>Create</strong></span>.</li><li class="listitem"><p class="simpara">Copy the generated token so you can paste it into your HipChat account
configuration in <code class="literal">elasticsearch.yml</code>.</p><div class="informalfigure"><div class="mediaobject"><img src="images/hipchat-copy-room-token.jpg" alt="hipchat copy room token" /></div></div></li></ol></div><p>To configure a HipChat account that uses the <code class="literal">integration</code> profile:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Set the <code class="literal">type</code> to <code class="literal">integration</code>.</li><li class="listitem">Set <code class="literal">room</code> to the name of the room you want to send messages to.</li><li class="listitem">Set <code class="literal">auth_token</code> to the room-specific authentication token.</li></ol></div><p>For example, the following snippet configures an account called
<code class="literal">notify-monitoring</code> that sends messages to the <code class="literal">monitoring</code> room:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">xpack.notification.hipchat:
  account:
    notify-monitoring:
      profile: integration
      auth_token: 3eLB803Nyp7UBmegJwP1rMdUmzk5HqnzJCgflrhv
      room: monitoring</pre></div><p>You can also specify defaults for the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.2/notification-settings.html#hipchat-account-attributes" target="_top">
message attributes</a>:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">xpack.notification.hipchat:
  account:
    notify-monitoring:
      profile: integration
      auth_token: 3eLB803Nyp7UBmegJwP1rMdUmzk5HqnzJCgflrhv
      room: monitoring
      message:
        format: text
        color: blue
        notify: true</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="hipchat-api-user"></a>Using the HipChat User Profile</h4></div></div></div><p>You can use the <code class="literal">user</code> profile to send messages to rooms as well as individual
HipChat users. When you set an account’s profile to <code class="literal">user</code>, Watcher sends
messages as a particular user through the HipChat v2 API.</p><p>Before you can configure a <code class="literal">user</code> account, you need to:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Add a HipChat user for Watcher. When setting the user name, keep in mind that
the messages are sent on behalf of this user.</li><li class="listitem"><p class="simpara">Create an API token for the Watcher user:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">Log in to HipChat as the Watcher user.</li><li class="listitem">Go to <code class="literal">https://&lt;hipchat-server&gt;/account/api</code>. For example,
<code class="literal">https://www.hipchat.com/account/api</code>.</li><li class="listitem">Confirm the user password.</li><li class="listitem"><p class="simpara">Enter a name for the token in the <span class="strong strong"><strong>Label</strong></span> field.</p><div class="informalfigure"><div class="mediaobject"><img src="images/hipchat-generate-user-token.jpg" alt="hipchat generate user token" /></div></div></li></ol></div></li><li class="listitem">Select the <span class="strong strong"><strong>Send Notification</strong></span> and <span class="strong strong"><strong>Send Message</strong></span> scopes.</li><li class="listitem">Click <span class="strong strong"><strong>Create</strong></span>.</li><li class="listitem"><p class="simpara">Copy the generated token so you can paste it into your HipChat account
configuration in <code class="literal">elasticsearch.yml</code>.</p><div class="informalfigure"><div class="mediaobject"><img src="images/hipchat-copy-room-token.jpg" alt="hipchat copy room token" /></div></div></li></ol></div><p>To configure a HipChat account that uses the <code class="literal">user</code> profile:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Set the <code class="literal">type</code> to <code class="literal">user</code>.</li><li class="listitem">Set <code class="literal">user</code> to the email address associated with the Watcher user.</li><li class="listitem">Set <code class="literal">auth_token</code> to the Watcher user’s authentication token.</li></ol></div><p>For example, the following configuration creates an account called
<code class="literal">notify-monitoring</code> that sends messages to the <code class="literal">monitoring</code> room:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">xpack.notification.hipchat:
  account:
    notify-monitoring:
      profile: user
      auth_token: 3eLB803Nyp7UBmegJwP1rMdUmzk5HqnzJCgflrhv</pre></div><p>You can also specify defaults for the &lt;<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.2/notification-settings.html#hipchat-account-attributes" target="_top">
message attributes</a>:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">xpack.notification.hipchat:
  account:
    notify-monitoring:
      profile: user
      auth_token: 3eLB803Nyp7UBmegJwP1rMdUmzk5HqnzJCgflrhv
      message:
        format: text
        color: blue
        notify: true</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="hipchat-api-v1"></a>Using the HipChat v1 Profile</h4></div></div></div><p>You can use the <code class="literal">v1</code> profile to send messages to particular rooms. When you set
an account’s profile to <code class="literal">v1</code>, messages are sent through HipChat’s v1
<a class="ulink" href="https://www.hipchat.com/docs/api/method/rooms/message" target="_top">rooms/message</a> API.</p><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>The <code class="literal">v1</code> profile uses a deprecated API that is expected to be removed
          by HipChat in the future.</p></div></div><p>The <code class="literal">v1</code> profile only supports sending messages to rooms, it does not support
sending private messages. Use the <a class="link" href="actions-hipchat.html#hipchat-api-user" title="Using the HipChat User Profile"><code class="literal">user</code></a> profile to send
private messages to HipChat users.</p><p>Before you can configure a <code class="literal">v1</code> account, you need to generate a <code class="literal">v1</code> API token:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Log in to your HipChat server as a group admin.</li><li class="listitem">Go to <code class="literal">https://&lt;hipchat-server&gt;/admin/api</code>. For example,
<code class="literal">https://hipchat.com/admin/api</code>.</li><li class="listitem">Confirm your admin password.</li><li class="listitem"><p class="simpara">Select the <span class="strong strong"><strong>Notification</strong></span> type.</p><div class="informalfigure"><div class="mediaobject"><img src="images/hipchat-generate-v1-token.jpg" alt="hipchat generate v1 token" /></div></div></li><li class="listitem">Enter a name for the token in the <span class="strong strong"><strong>Label</strong></span> field.</li><li class="listitem">Click <span class="strong strong"><strong>Create</strong></span>.</li><li class="listitem"><p class="simpara">Copy the generated token so you can paste it into your HipChat account
configuration in <code class="literal">elasticsearch.yml</code>.</p><div class="informalfigure"><div class="mediaobject"><img src="images/hipchat-copy-v1-token.jpg" alt="hipchat copy v1 token" /></div></div></li></ol></div><p>To configure a HipChat account that uses the <code class="literal">v1</code> profile:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Set the <code class="literal">type</code> to <code class="literal">v1</code>.</li><li class="listitem">Set <code class="literal">auth_token</code> to the v1 authentication token you generated.</li></ol></div><p>For example, the following configuration creates an account called
<code class="literal">notify-monitoring</code>:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">xpack.notification.hipchat:
  account:
    notify-monitoring:
      profile: v1
      auth_token: 3eLB803Nyp7UBmegJwP1rMdUmzk5HqnzJCgflrhv</pre></div><p>You can also specify defaults for the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.2/notification-settings.html#hipchat-account-attributes" target="_top">
message attributes</a>.</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">xpack.notification.hipchat:
  account:
    notify-monitoring:
      profile: v1
      auth_token: 3eLB803Nyp7UBmegJwP1rMdUmzk5HqnzJCgflrhv
      message:
        format: text
        color: blue
        notify: true</pre></div></div></div></div><div class="navfooter"><span class="prev"><a href="actions-logging.html">
              « 
              Logging Action</a>
           
        </span><span class="next">
           
          <a href="actions-slack.html">Slack Action
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>
      </section>
    </div>

    
<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
window.initial_state = {}
</script>

  </body>
</html>
