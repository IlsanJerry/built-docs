<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Automating Report Generation
        | Kibana Guide [7.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Kibana Guide [7.1]" /><link rel="up" href="xpack-reporting.html" title="Reporting from Kibana" /><link rel="prev" href="reporting-getting-started.html" title="Getting Started" /><link rel="next" href="_deprecated_report_urls.html" title="Deprecated Report URLs" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Kibana/Reference/7.1" /><meta name="DC.subject" content="Kibana" /><meta name="DC.identifier" content="7.1" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana Guide
      [7.1]
    </a></span> » <span class="breadcrumb-link"><a href="xpack-reporting.html">Reporting from Kibana</a></span> » <span class="breadcrumb-node">Automating Report Generation</span></div><div class="navheader"><span class="prev"><a href="reporting-getting-started.html">
              « 
              Getting Started</a>
           
        </span><span class="next">
           
          <a href="_deprecated_report_urls.html">Deprecated Report URLs
               »
            </a></span></div><div class="xpack chapter"><div class="titlepage"><div><div><h2 class="title"><a id="automating-report-generation"></a>Automating Report Generation<a href="https://github.com/elastic/kibana/edit/7.1/docs/user/reporting/automating-report-generation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>You can automatically generate reports with Watcher, or by submitting
HTTP POST requests from a script.</p><p>To automatically generate reports with a watch, you need to configure
Watcher to trust the Kibana server’s certificate. For more information,
see <a class="link" href="securing-reporting.html" title="Securing the Reporting Endpoints">Securing Reporting</a>.</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>The interval between report requests must be longer than the time it
takes to generate the reports—otherwise, the report queue can back up. To
avoid this, increase the time between report requests.</p><p>By default, report generation times out if the report cannot be generated
within two minutes. If you are generating reports that contain many complex
visualizations or your machine is slow or under constant heavy load, it
might take longer than two minutes to generate a report. You can increase
the timeout by setting <code class="literal">xpack.reporting.queue.timeout</code> in <code class="literal">kibana.yml</code>.</p></div></div><p>To get the URL for triggering a report generation during a given time period:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Load the saved object.
</li><li class="listitem">
Use the timepicker to specify a relative or absolute time period.
</li><li class="listitem">
Click <span class="strong strong"><strong>Share</strong></span> in the Kibana toolbar.
</li><li class="listitem">
Select <span class="strong strong"><strong>PDF Reports</strong></span>.
</li><li class="listitem">
Click <span class="strong strong"><strong>Copy POST URL</strong></span>.
</li></ol></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The response from this request with be JSON, and will contain a <code class="literal">path</code> property
with a URL to use to download the generated report. When requesting that path,
you will get a 503 response if it’s not completed yet. In this case, retry after the
number of seconds in the <code class="literal">Retry-After</code> header in the response until the PDF is returned.</p></div></div><p>To configure a watch to email reports, you use the <code class="literal">reporting</code> attachment type
in an <code class="literal">email</code> action. For more information, see
<a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/7.1/actions-email.html#configuring-email" target="_top">Configuring Email Accounts</a>.</p><p>For example, the following watch generates a report that contains the
<span class="strong strong"><strong>Error Monitoring</strong></span> dashboard and emails the report every hour:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">PUT _watcher/watch/error_report
{
  "trigger" : {
    "schedule": {
      "interval": "1h"
    }
  },
  "actions" : {
    "email_admin" : { <a id="CO20-1"></a><i class="conum" data-value="1"></i>
      "email": {
        "to": "'Recipient Name &lt;recipient@example.com&gt;'",
        "subject": "Error Monitoring Report",
        "attachments" : {
          "error_report.pdf" : {
            "reporting" : {
              "url": "http://0.0.0.0:5601/api/reporting/generate/dashboard/Error-Monitoring?_g=(time:(from:now-1d%2Fd,mode:quick,to:now))", <a id="CO20-2"></a><i class="conum" data-value="2"></i>
              "retries":6, <a id="CO20-3"></a><i class="conum" data-value="3"></i>
              "interval":"1s", <a id="CO20-4"></a><i class="conum" data-value="4"></i>
              "auth":{ <a id="CO20-5"></a><i class="conum" data-value="5"></i>
                "basic":{
                  "username":"elastic",
                  "password":"changeme"
                }
              }
            }
          }
        }
      }
    }
  }
}</pre></div><div class="console_widget" data-snippet="snippets/automating-report-generation/1.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO20-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
You must configure at least one email account to enable Watcher to send email.
For more information, see
<a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/7.1/actions-email.html#configuring-email" target="_top">Configuring Email Accounts</a>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO20-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
This is an example Generation URL. You can copy and paste the URL for any
report from the Kibana UI.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO20-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
Optional, default is 40
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO20-4"><i class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>
Optional, default is 15s
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO20-5"><i class="conum" data-value="5"></i></a> </p></td><td valign="top" align="left"><p>
Provide user credentials for a user with permission to access Kibana and
X-Pack reporting.


</p></td></tr></table></div><p>For more information about configuring watches, see
<a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/7.1/how-watcher-works.html" target="_top">How Watcher Works</a>.</p></div><div class="navfooter"><span class="prev"><a href="reporting-getting-started.html">
              « 
              Getting Started</a>
           
        </span><span class="next">
           
          <a href="_deprecated_report_urls.html">Deprecated Report URLs
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
window.initial_state = {}</script>
  </body>
</html>
