<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Adding a choropleth layer
        | Kibana Guide [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Kibana Guide [master]" /><link rel="up" href="maps-getting-started.html" title="Getting started with Elastic Maps" /><link rel="prev" href="maps-create.html" title="Creating a new map" /><link rel="next" href="maps-add-elasticsearch-layer.html" title="Adding layers for Elasticsearch data" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Kibana/Reference/master" /><meta name="DC.subject" content="Kibana" /><meta name="DC.identifier" content="master" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana Guide
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="maps.html">Elastic Maps</a></span> » <span class="breadcrumb-link"><a href="maps-getting-started.html">Getting started with Elastic Maps</a></span> » <span class="breadcrumb-node">Adding a choropleth layer</span></div><div class="navheader"><span class="prev"><a href="maps-create.html">
              « 
              Creating a new map</a>
           
        </span><span class="next">
           
          <a href="maps-add-elasticsearch-layer.html">Adding layers for Elasticsearch data
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="maps-add-choropleth-layer"></a>Adding a choropleth layer<a href="https://github.com/elastic/kibana/edit/master/docs/maps/maps-getting-started.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>Now that you have a map, you’ll want to add layers to it.
The first layer you’ll add is a choropleth layer to shade world countries
by web log traffic. Darker shades symbolize countries with more web log traffic,
and lighter shades symbolize countries with less traffic.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_add_a_vector_layer_from_the_elastic_maps_service_source"></a>Add a vector layer from the Elastic Maps Service source<a href="https://github.com/elastic/kibana/edit/master/docs/maps/maps-getting-started.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
In the map legend, click <span class="strong strong"><strong>Add layer</strong></span>.
</li><li class="listitem">
Click the <span class="strong strong"><strong>Vector shapes</strong></span> data source.
</li><li class="listitem">
From the <span class="strong strong"><strong>Layer</strong></span> dropdown menu, select <span class="strong strong"><strong>World Countries</strong></span>.
</li><li class="listitem">
Click the <span class="strong strong"><strong>Add layer</strong></span> button.
</li><li class="listitem">
Set <span class="strong strong"><strong>Layer name</strong></span> to <code class="literal">Total Requests by Country</code>.
</li><li class="listitem">
Set <span class="strong strong"><strong>Layer transparency</strong></span> to 0.5.
</li></ol></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_join_the_vector_layer_with_the_sample_web_log_index"></a>Join the vector layer with the sample web log index<a href="https://github.com/elastic/kibana/edit/master/docs/maps/maps-getting-started.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>You now have a vector layer containing the world countries.
To symbolize countries by web traffic, you’ll need to augment the world country features with the count of Elasticsearch weblog documents originating from each country.
To do this, you’ll create a <a class="link" href="terms-join.html" title="Term join">terms join</a> to link the vector source <span class="strong strong"><strong>World Countries</strong></span> to
the Elasticsearch index <code class="literal">kibana_sample_data_logs</code> on the shared key iso2 = geo.src.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Click plus <span class="inlinemediaobject"><img src="maps/images/gs_plus_icon.png" alt="maps/images/gs_plus_icon.png" /></span> to the right of <span class="strong strong"><strong>Term Joins</strong></span> label.
</li><li class="listitem">
Click <span class="strong strong"><strong>Join --select--</strong></span>
</li><li class="listitem">
Set <span class="strong strong"><strong>Left field</strong></span> to <span class="strong strong"><strong>ISO 3166-1 alpha-2 code</strong></span>.
</li><li class="listitem">
Set <span class="strong strong"><strong>Right source</strong></span> to <span class="strong strong"><strong>kibana_sample_data_logs</strong></span>.
</li><li class="listitem">
Set <span class="strong strong"><strong>Right field</strong></span> to <span class="strong strong"><strong>geo.src</strong></span>.
</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_set_the_vector_style"></a>Set the vector style<a href="https://github.com/elastic/kibana/edit/master/docs/maps/maps-getting-started.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>All of the world countries are still a single color because the layer is using <a class="link" href="vector-style.html#maps-vector-style-static" title="Static styling">static styling</a>.
To shade the world countries based on which country is sending the most requests, you’ll need to use <a class="link" href="vector-style.html#maps-vector-style-data-driven" title="Data driven styling">data driven styling</a>.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Click <span class="inlinemediaobject"><img src="maps/images/gs_link_icon.png" alt="maps/images/gs_link_icon.png" /></span> to the right of <span class="strong strong"><strong>Fill color</strong></span>.
</li><li class="listitem">
Select the grey color ramp.
</li><li class="listitem">
In the field select input, select <span class="strong strong"><strong>count of kibana_sample_data_logs:geo.src</strong></span>.
</li><li class="listitem"><p class="simpara">
Click <span class="strong strong"><strong>Save &amp; close</strong></span>.
</p><p class="simpara">Your map now looks like this:</p><div class="screenshot informalfigure"><div class="mediaobject"><img src="maps/images/gs_add_cloropeth_layer.png" alt="maps/images/gs_add_cloropeth_layer.png" /></div></div></li></ol></div></div></div></div><div class="navfooter"><span class="prev"><a href="maps-create.html">
              « 
              Creating a new map</a>
           
        </span><span class="next">
           
          <a href="maps-add-elasticsearch-layer.html">Adding layers for Elasticsearch data
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
window.initial_state = {}</script>
  </body>
</html>
