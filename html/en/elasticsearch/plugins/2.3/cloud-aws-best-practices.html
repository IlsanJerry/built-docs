<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Best Practices in AWS
        | Elasticsearch Plugins and Integrations [2.3]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Plugins and Integrations [2.3]" /><link rel="up" href="cloud-aws.html" title="AWS Cloud Plugin" /><link rel="prev" href="cloud-aws-testing.html" title="Testing AWS" /><link rel="next" href="cloud-azure.html" title="Azure Cloud Plugin" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Plugins/2.3" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="2.3" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Plugins and Integrations
      [2.3]
    </a></span> » <span class="breadcrumb-link"><a href="discovery.html">Discovery Plugins</a></span> » <span class="breadcrumb-link"><a href="cloud-aws.html">AWS Cloud Plugin</a></span> » <span class="breadcrumb-node">Best Practices in AWS</span></div><div class="navheader"><span class="prev"><a href="cloud-aws-testing.html">
              « 
              Testing AWS</a>
           
        </span><span class="next">
           
          <a href="cloud-azure.html">Azure Cloud Plugin
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="cloud-aws-best-practices"></a>Best Practices in AWS<a href="https://github.com/elastic/elasticsearch/edit/2.3/docs/plugins/cloud-aws.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Collection of best practices and other information around running Elasticsearch on AWS.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_instancedisk"></a>Instance/Disk<a href="https://github.com/elastic/elasticsearch/edit/2.3/docs/plugins/cloud-aws.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>When selecting disk please be aware of the following order of preference:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="ulink" href="https://aws.amazon.com/efs/" target="_top">EFS</a> - Avoid as the sacrifices made to offer durability, shared storage, and grow/shrink come at performance cost, such file systems have been known to cause corruption of indices, and due to Elasticsearch being distributed and having built-in replication, the benefits that EFS offers are not needed.</li><li class="listitem"><a class="ulink" href="https://aws.amazon.com/ebs/" target="_top">EBS</a> - Works well if running a small cluster (1-2 nodes) and cannot tolerate the loss all storage backing a node easily or if running indices with no replicas. If EBS is used, then leverage provisioned IOPS to ensure performance.</li><li class="listitem"><a class="ulink" href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/InstanceStorage.html" target="_top">Instance Store</a> - When running clusters of larger size and with replicas the ephemeral nature of Instance Store is ideal since Elasticsearch can tolerate the loss of shards. With Instance Store one gets the performance benefit of having disk physically attached to the host running the instance and also the cost benefit of avoiding paying extra for EBS.</li></ul></div><p>Prefer <a class="ulink" href="https://aws.amazon.com/amazon-linux-ami/" target="_top">Amazon Linux AMIs</a> as since Elasticsearch runs on the JVM, OS dependencies are very minimal and one can benefit from the lightweight nature, support, and performance tweaks specific to EC2 that the Amazon Linux AMIs offer.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_networking"></a>Networking<a href="https://github.com/elastic/elasticsearch/edit/2.3/docs/plugins/cloud-aws.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Networking throttling takes place on smaller instance types in both the form of <a class="ulink" href="https://lab.getbase.com/how-we-discovered-limitations-on-the-aws-tcp-stack/" target="_top">bandwidth and number of connections</a>. Therefore if large number of connections are needed and networking is becoming a bottleneck, avoid <a class="ulink" href="https://aws.amazon.com/ec2/instance-types/" target="_top">instance types</a> with networking labeled as <code class="literal">Moderate</code> or <code class="literal">Low</code>.</li><li class="listitem">Multicast is not supported, even when in an VPC; the aws cloud plugin which joins by performing a security group lookup.</li><li class="listitem">When running in multiple <a class="ulink" href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html" target="_top">availability zones</a> be sure to leverage <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/master/allocation-awareness.html" target="_top">shard allocation awareness</a> so that not all copies of shard data reside in the same availability zone.</li><li class="listitem">Do not span a cluster across regions.  If necessary, use a tribe node.</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_misc"></a>Misc<a href="https://github.com/elastic/elasticsearch/edit/2.3/docs/plugins/cloud-aws.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">If you have split your nodes into roles, consider <a class="ulink" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html" target="_top">tagging the EC2 instances</a> by role to make it easier to filter and view your EC2 instances in the AWS console.</li><li class="listitem">Consider <a class="ulink" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/terminating-instances.html#Using_ChangingDisableAPITermination" target="_top">enabling termination protection</a> for all of your instances to avoid accidentally terminating a node in the cluster and causing a potentially disruptive reallocation.</li></ul></div></div></div><div class="navfooter"><span class="prev"><a href="cloud-aws-testing.html">
              « 
              Testing AWS</a>
           
        </span><span class="next">
           
          <a href="cloud-azure.html">Azure Cloud Plugin
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
