<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Writing analyzers
        | Elasticsearch.Net and NEST: the .NET clients [5.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch.Net and NEST: the .NET clients [5.x]" /><link rel="up" href="analysis.html" title="Analysis" /><link rel="prev" href="analysis.html" title="Analysis" /><link rel="next" href="testing-analyzers.html" title="Testing analyzers" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Clients/.Net/5.x" /><meta name="DC.subject" content="Clients" /><meta name="DC.identifier" content="5.x" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
  
<link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch.Net and NEST:  the .NET clients
      [5.x]
    </a></span> » <span class="breadcrumb-link"><a href="nest.html">NEST - High level client</a></span> » <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span> » <span class="breadcrumb-node">Writing analyzers</span></div><div class="navheader"><span class="prev"><a href="analysis.html">
              « 
              Analysis</a>
           
        </span><span class="next">
           
          <a href="testing-analyzers.html">Testing analyzers
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="writing-analyzers"></a>Writing analyzers<a href="https://github.com/elastic/elasticsearch-net/edit/5.x/docs/client-concepts/high-level/analysis/writing-analyzers.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>There are times when you would like to analyze text in a bespoke fashion, either by configuring
how one of Elasticsearch’s built-in <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/analysis-analyzers.html" target="_top">analyzers</a> works, or
by combining analysis components together to build a custom analyzer.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="analysis-chain"></a>The analysis chain<a href="https://github.com/elastic/elasticsearch-net/edit/5.x/docs/client-concepts/high-level/analysis/writing-analyzers.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>An analyzer is built of three components:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">0 or more character filters</li><li class="listitem">exactly 1 tokenizer</li><li class="listitem">0 or more token filters</li></ul></div><div class="informalfigure"><div class="mediaobject"><img src="analysis-chain.png" alt="analysis chain" /></div></div><p>Check out the Elasticsearch documentation on the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/analyzer-anatomy.html" target="_top">Anatomy of an analyzer</a>
to understand more.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_specifying_an_analyzer_on_a_field_mapping"></a>Specifying an analyzer on a field mapping<a href="https://github.com/elastic/elasticsearch-net/edit/5.x/docs/client-concepts/high-level/analysis/writing-analyzers.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>An analyzer can be specified on a <code class="literal">text</code> datatype field mapping when creating a new field on a type, usually
when creating the type mapping at index creation time, but also when adding a new field
using the Put Mapping API.</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>Although you can add new types to an index, or add new fields to a type, you <span class="strong strong"><strong>can’t</strong></span> add new analyzers
or make changes to existing fields. If you were to do so, the data that has already been indexed would be
incorrect and your searches would no longer work as expected.</p><p>When you need to make changes to existing fields, you should look at reindexing your data with the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/docs-reindex.html" target="_top">Reindex API</a></p></div></div><p>Here’s a simple example that specifies that the <code class="literal">name</code> field in Elasticsearch,
which maps to the <code class="literal">Name</code> POCO property on the <code class="literal">Project</code> type, uses the <code class="literal">whitespace</code> analyzer at index time</p><div class="pre_wrapper lang-csharp"><pre class="programlisting prettyprint lang-csharp">var createIndexResponse = _client.CreateIndex("my-index", c =&gt; c
    .Mappings(m =&gt; m
        .Map&lt;Project&gt;(mm =&gt; mm
            .Properties(p =&gt; p
                .Text(t =&gt; t
                    .Name(n =&gt; n.Name)
                    .Analyzer("whitespace")
                )
            )
        )
    )
);</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_configuring_a_built_in_analyzer"></a>Configuring a built-in analyzer<a href="https://github.com/elastic/elasticsearch-net/edit/5.x/docs/client-concepts/high-level/analysis/writing-analyzers.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Several built-in analyzers can be configured to alter their behaviour. For example, the
<code class="literal">standard</code> analyzer can be configured to support a list of stop words with the stop word token filter
it contains.</p><p>Configuring a built-in analyzer requires creating an analyzer based on the built-in one</p><div class="pre_wrapper lang-csharp"><pre class="programlisting prettyprint lang-csharp">var createIndexResponse = _client.CreateIndex("my-index", c =&gt; c
    .Settings(s =&gt; s
        .Analysis(a =&gt; a
            .Analyzers(aa =&gt; aa
                .Standard("standard_english", sa =&gt; sa
                    .StopWords("_english_") <a id="CO50-1"></a><i class="conum" data-value="1"></i>
                )
            )
        )
    )
    .Mappings(m =&gt; m
        .Map&lt;Project&gt;(mm =&gt; mm
            .Properties(p =&gt; p
                .Text(t =&gt; t
                    .Name(n =&gt; n.Name)
                    .Analyzer("standard_english") <a id="CO50-2"></a><i class="conum" data-value="2"></i>
                )
            )
        )
    )
);</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO50-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>Pre-defined list of English stopwords within Elasticsearch</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO50-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>Use the <code class="literal">standard_english</code> analyzer configured</p></td></tr></table></div><div class="pre_wrapper lang-javascript"><pre class="programlisting prettyprint lang-javascript">{
  "settings": {
    "analysis": {
      "analyzer": {
        "standard_english": {
          "type": "standard",
          "stopwords": [
            "_english_"
          ]
        }
      }
    }
  },
  "mappings": {
    "project": {
      "properties": {
        "name": {
          "type": "text",
          "analyzer": "standard_english"
        }
      }
    }
  }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_creating_a_custom_analyzer"></a>Creating a custom analyzer<a href="https://github.com/elastic/elasticsearch-net/edit/5.x/docs/client-concepts/high-level/analysis/writing-analyzers.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A custom analyzer can be composed when none of the built-in analyzers fit your needs. A custom analyzer
is built from the components that you saw in <a class="link" href="writing-analyzers.html#analysis-chain" title="The analysis chain">the analysis chain</a> and a
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/position-increment-gap.html" target="_top">position increment gap</a>,
that determines the size of gap that Elasticsearch should insert between array elements, when a
field can hold multiple values e.g. a <code class="literal">List&lt;string&gt;</code> POCO property.</p><p>For this example, imagine we are indexing programming questions, where the question content
is HTML and contains source code</p><div class="pre_wrapper lang-csharp"><pre class="programlisting prettyprint lang-csharp">public class Question
{
    public int Id { get; set; }
    public DateTimeOffset CreationDate { get; set; }
    public int Score { get; set; }
    public string Body { get; set; }
}</pre></div><p>Based on our domain knowledge of programming languages, we would like to be able to search questions
that contain <code class="literal">"C#"</code>, but using the <code class="literal">standard</code> analyzer, <code class="literal">"C#"</code> will be analyzed and produce the token
<code class="literal">"c"</code>. This won’t work for our use case as there will be no way to distinguish questions about
<code class="literal">"C#"</code> from questions about another popular programming language, <code class="literal">"C"</code>.</p><p>We can solve our issue with a custom analyzer</p><div class="pre_wrapper lang-csharp"><pre class="programlisting prettyprint lang-csharp">var createIndexResponse = _client.CreateIndex("questions", c =&gt; c
    .Settings(s =&gt; s
        .Analysis(a =&gt; a
            .CharFilters(cf =&gt; cf
                .Mapping("programming_language", mca =&gt; mca
                    .Mappings(new []
                    {
                        "c# =&gt; csharp",
                        "C# =&gt; Csharp"
                    })
                )
            )
            .Analyzers(an =&gt; an
                .Custom("question", ca =&gt; ca
                    .CharFilters("html_strip", "programming_language")
                    .Tokenizer("standard")
                    .Filters("standard", "lowercase", "stop")
                )
            )
        )
    )
    .Mappings(m =&gt; m
        .Map&lt;Question&gt;(mm =&gt; mm
            .AutoMap()
            .Properties(p =&gt; p
                .Text(t =&gt; t
                    .Name(n =&gt; n.Body)
                    .Analyzer("question")
                )
            )
        )
    )
);</pre></div><p>Our custom <code class="literal">question</code> analyzer will apply the following analysis to a question body</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">strip HTML tags</li><li class="listitem">map both <code class="literal">C#</code> and <code class="literal">c#</code> to <code class="literal">"CSharp"</code> and <code class="literal">"csharp"</code>, respectively (so the <code class="literal">#</code> is not stripped by the tokenizer)</li><li class="listitem">tokenize using the standard tokenizer</li><li class="listitem">filter tokens with the standard token filter</li><li class="listitem">lowercase tokens</li><li class="listitem">remove stop word tokens</li></ol></div><p>A <a class="link" href="full-text-queries.html" title="Full text queries">full text query</a> will also apply the same analysis to the query input against the
question body at search time, meaning when someone searches including the input <code class="literal">"C#"</code>, it will also be
analyzed and produce the token <code class="literal">"csharp"</code>, matching a question body that contains <code class="literal">"C#"</code> (as well as <code class="literal">"csharp"</code>
and case invariants), because the search time analysis applied is the same as the index time analysis.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_index_and_search_time_analysis"></a>Index and Search time analysis<a href="https://github.com/elastic/elasticsearch-net/edit/5.x/docs/client-concepts/high-level/analysis/writing-analyzers.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>With the previous example, we probably don’t want to apply the same analysis to the query input of a
full text query against a question body; we know for our problem domain that a query input is not going
to contain HTML tags, so we would like to apply different analysis at search time.</p><p>An analyzer can be specified when creating the field mapping to use at search time, in addition to an analyzer to
use at query time</p><div class="pre_wrapper lang-csharp"><pre class="programlisting prettyprint lang-csharp">var createIndexResponse = _client.CreateIndex("questions", c =&gt; c
    .Settings(s =&gt; s
        .Analysis(a =&gt; a
            .CharFilters(cf =&gt; cf
                .Mapping("programming_language", mca =&gt; mca
                    .Mappings(new[]
                    {
                        "c# =&gt; csharp",
                        "C# =&gt; Csharp"
                    })
                )
            )
            .Analyzers(an =&gt; an
                .Custom("index_question", ca =&gt; ca <a id="CO51-1"></a><i class="conum" data-value="1"></i>
                    .CharFilters("html_strip", "programming_language")
                    .Tokenizer("standard")
                    .Filters("standard", "lowercase", "stop")
                )
                .Custom("search_question", ca =&gt; ca <a id="CO51-2"></a><i class="conum" data-value="2"></i>
                    .CharFilters("programming_language")
                    .Tokenizer("standard")
                    .Filters("standard", "lowercase", "stop")
                )
            )
        )
    )
    .Mappings(m =&gt; m
        .Map&lt;Question&gt;(mm =&gt; mm
            .AutoMap()
            .Properties(p =&gt; p
                .Text(t =&gt; t
                    .Name(n =&gt; n.Body)
                    .Analyzer("index_question")
                    .SearchAnalyzer("search_question")
                )
            )
        )
    )
);</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO51-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>Use an analyzer at index time that strips HTML tags</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO51-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>Use an analyzer at search time that does not strip HTML tags</p></td></tr></table></div><p>With this in place, the text of a question body will be analyzed with the <code class="literal">index_question</code> analyzer
at index time and the input to a full text query on the question body field will be analyzed with
the <code class="literal">search_question</code> analyzer that does not use the <code class="literal">html_strip</code> character filter.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>A Search analyzer can also be specified per query i.e. use a different analyzer for a particular
request from the one specified in the mapping. This can be useful when iterating on and improving
your search strategy.</p><p>Take a look at the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/analyzer.html" target="_top">analyzer</a> documentation for more details around where analyzers can be specified
and the precedence for a given request.</p></div></div></div></div><div class="navfooter"><span class="prev"><a href="analysis.html">
              « 
              Analysis</a>
           
        </span><span class="next">
           
          <a href="testing-analyzers.html">Testing analyzers
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>

  
            <script type="text/javascript">
window.initial_state = {}
</script>
<script type="text/javascript" src="/guide/static/docs.js"></script>

            </body>
        
</html>
