<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Indexing
        | Elasticsearch.Net and NEST: the .NET clients [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch.Net and NEST: the .NET clients [master]" /><link rel="up" href="indexing.html" title="Indexing" /><link rel="prev" href="indexing.html" title="Indexing" /><link rel="next" href="ingest-nodes.html" title="Ingest Node" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Clients/.Net/master" /><meta name="DC.subject" content="Clients" /><meta name="DC.identifier" content="master" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
  
<link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch.Net and NEST:  the .NET clients
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="nest.html">NEST - High level client</a></span> » <span class="breadcrumb-link"><a href="indexing.html">Indexing</a></span> » <span class="breadcrumb-node">Indexing</span></div><div class="navheader"><span class="prev"><a href="indexing.html">
              « 
              Indexing</a>
           
        </span><span class="next">
           
          <a href="ingest-nodes.html">Ingest Node
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="indexing-documents"></a>Indexing<a href="https://github.com/elastic/elasticsearch-net/edit/master/docs/client-concepts/high-level/indexing/indexing-documents.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>NEST has a number of ways to index documents.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_single_documents"></a>Single documents<a href="https://github.com/elastic/elasticsearch-net/edit/master/docs/client-concepts/high-level/indexing/indexing-documents.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A single document can be indexed at a time, either synchronously or asynchronously.
These methods use the <code class="literal">IndexDocument</code> methods, which is a simple way to index single documents.</p><div class="pre_wrapper lang-csharp"><pre class="programlisting prettyprint lang-csharp">var person = new Person
{
    Id = 1,
    FirstName = "Martijn",
    LastName = "Laarman"
};

var indexResponse = client.IndexDocument(person); <a id="CO53-1"></a><i class="conum" data-value="1"></i>
if (!indexResponse.IsValid)
{
    // If the request isn't valid, we can take action here
}

var indexResponseAsync = await client.IndexDocumentAsync(person); <a id="CO53-2"></a><i class="conum" data-value="2"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO53-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>synchronous method that returns an IIndexResponse</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO53-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>asynchronous method that returns a Task&lt;IIndexResponse&gt; that can be awaited</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_single_documents_with_parameters"></a>Single documents with parameters<a href="https://github.com/elastic/elasticsearch-net/edit/master/docs/client-concepts/high-level/indexing/indexing-documents.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>If you need to set additional parameters when indexing you can use the fluent or object initializer syntax.
This will allow you finer control over the indexing of single documents.</p><div class="pre_wrapper lang-csharp"><pre class="programlisting prettyprint lang-csharp">var person = new Person
{
    Id = 1,
    FirstName = "Martijn",
    LastName = "Laarman"
};

client.Index(person, i =&gt; i.Index("people")); <a id="CO54-1"></a><i class="conum" data-value="1"></i>

client.Index(new IndexRequest&lt;Person&gt;(person, "people")); <a id="CO54-2"></a><i class="conum" data-value="2"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO54-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>fluent syntax</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO54-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>object initializer syntax</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_multiple_documents_with_indexmany"></a>Multiple documents with <code class="literal">IndexMany</code><a href="https://github.com/elastic/elasticsearch-net/edit/master/docs/client-concepts/high-level/indexing/indexing-documents.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Multiple documents can be indexed using the <code class="literal">IndexMany</code> and <code class="literal">IndexManyAsync</code> methods, again either synchronously or asynchronously, respectively.
These methods are specific to the NEST client and wrap calls to the <code class="literal">_bulk</code> endpoint, providing a convenient shortcut to indexing
multiple documents.</p><p>Please note, these methods index all documents in a single HTTP request, so for very large document collections it is not a recommended approach</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">consider using the <code class="literal">BulkAllObservable</code> helper instead.</li></ul></div><div class="pre_wrapper lang-csharp"><pre class="programlisting prettyprint lang-csharp">var people = new []
{
    new Person
    {
        Id = 1,
        FirstName = "Martijn",
        LastName = "Laarman"
    },
    new Person
    {
        Id = 2,
        FirstName = "Stuart",
        LastName = "Cam"
    },
    new Person
    {
        Id = 3,
        FirstName = "Russ",
        LastName = "Cam"
    }
};

var indexManyResponse = client.IndexMany(people); <a id="CO55-1"></a><i class="conum" data-value="1"></i>

if (indexManyResponse.Errors) <a id="CO55-2"></a><i class="conum" data-value="2"></i>
{
    foreach (var itemWithError in indexManyResponse.ItemsWithErrors) <a id="CO55-3"></a><i class="conum" data-value="3"></i>
    {
        Console.WriteLine("Failed to index document {0}: {1}", itemWithError.Id, itemWithError.Error);
    }
}

// Alternatively, documents can be indexed asynchronously
var indexManyAsyncResponse = await client.IndexManyAsync(people); <a id="CO55-4"></a><i class="conum" data-value="4"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO55-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>synchronous method that returns an IBulkResponse</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO55-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>the response can be inspected to see if any of the bulk operations resulted in an error</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO55-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>If there are errors, they can be enumerated and inspected</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO55-4"><i class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>asynchronous method that returns a Task&lt;IBulkResponse&gt; that can be awaited</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_multiple_documents_with_bulk"></a>Multiple documents with bulk<a href="https://github.com/elastic/elasticsearch-net/edit/master/docs/client-concepts/high-level/indexing/indexing-documents.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>If you require finer grained control over indexing many documents you can use the <code class="literal">Bulk</code> and <code class="literal">BulkAsync</code> methods and use the descriptors to
customise the bulk calls.</p><p>As with the <code class="literal">IndexMany</code> methods above, documents are sent to the <code class="literal">_bulk</code> endpoint in a single HTTP request.
This does mean that consideration will need to be given to the overall size of the HTTP request. For indexing large numbers
of documents it may be sensible to perform multiple separate <code class="literal">Bulk</code> calls.</p><div class="pre_wrapper lang-csharp"><pre class="programlisting prettyprint lang-csharp">var bulkIndexResponse = client.Bulk(b =&gt; b
    .Index("people")
    .IndexMany(people)); <a id="CO56-1"></a><i class="conum" data-value="1"></i>

// Alternatively, documents can be indexed asynchronously similar to IndexManyAsync
var asyncBulkIndexResponse = await client.BulkAsync(b =&gt; b
    .Index("people")
    .IndexMany(people)); <a id="CO56-2"></a><i class="conum" data-value="2"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO56-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>synchronous method that returns an IBulkResponse, the same as IndexMany and can be inspected in the same way for errors</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO56-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>asynchronous method that returns a Task&lt;IBulkResponse&gt; that can be awaited</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_multiple_documents_with_bulkallobservable_helper"></a>Multiple documents with <code class="literal">BulkAllObservable</code> helper<a href="https://github.com/elastic/elasticsearch-net/edit/master/docs/client-concepts/high-level/indexing/indexing-documents.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Using the <code class="literal">BulkAllObservable</code> helper allows you to focus on the overall objective of indexing, without having to
concern yourself with retry, backoff or chunking mechanics.
Multiple documents can be indexed using the <code class="literal">BulkAll</code> method and <code class="literal">Wait()</code> extension method.</p><p>This helper exposes functionality to automatically retry / backoff in the event of an indexing failure,
and to control the number of documents indexed in a single HTTP request. In the example below each request will contain 1000 documents,
chunked from the original input. In the event of a large number of documents this could result in many HTTP requests, each containing
1000 documents (the last request may contain less, depending on the total number).</p><p>The helper will also lazily enumerate an <code class="literal">IEnumerable&lt;T&gt;</code> collection, allowing you to index a large number of documents easily.</p><div class="pre_wrapper lang-csharp"><pre class="programlisting prettyprint lang-csharp">var bulkAllObservable = client.BulkAll(people, b =&gt; b
    .Index("people")
    .BackOffTime("30s") <a id="CO57-1"></a><i class="conum" data-value="1"></i>
    .BackOffRetries(2) <a id="CO57-2"></a><i class="conum" data-value="2"></i>
    .RefreshOnCompleted()
    .MaxDegreeOfParallelism(Environment.ProcessorCount)
    .Size(1000) <a id="CO57-3"></a><i class="conum" data-value="3"></i>
)
.Wait(TimeSpan.FromMinutes(15), next =&gt; <a id="CO57-4"></a><i class="conum" data-value="4"></i>
{
    // do something e.g. write number of pages to console
});</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO57-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>how long to wait between retries</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO57-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>how many retries are attempted if a failure occurs</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO57-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>items per bulk request</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO57-4"><i class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>perform the indexing and wait up to 15 minutes, whilst the BulkAll calls are asynchronous this is a blocking operation</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_advanced_bulk_indexing"></a>Advanced bulk indexing<a href="https://github.com/elastic/elasticsearch-net/edit/master/docs/client-concepts/high-level/indexing/indexing-documents.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The BulkAllObservable helper exposes a number of advanced features.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><code class="literal">BufferToBulk</code> allows for the customisation of individual operations within the bulk request before it is dispatched to the server.</li><li class="listitem"><code class="literal">RetryDocumentPredicate</code> enables fine control on deciding if a document that failed to be indexed should be retried.</li><li class="listitem"><code class="literal">DroppedDocumentCallback</code> in the event a document is not indexed, even after retrying, this delegate is called.</li></ol></div><div class="pre_wrapper lang-csharp"><pre class="programlisting prettyprint lang-csharp">client.BulkAll(people, b =&gt; b
      .BufferToBulk((descriptor, list) =&gt; <a id="CO58-1"></a><i class="conum" data-value="1"></i>
      {
          foreach (var item in list)
          {
              descriptor.Index&lt;Person&gt;(bi =&gt; bi
                  .Index(item.Id % 2 == 0 ? "even-index" : "odd-index") <a id="CO58-2"></a><i class="conum" data-value="2"></i>
                  .Document(item)
              );
          }
      })
      .RetryDocumentPredicate((item, person) =&gt; <a id="CO58-3"></a><i class="conum" data-value="3"></i>
      {
          return item.Error.Index == "even-index" &amp;&amp; person.FirstName == "Martijn";
      })
      .DroppedDocumentCallback((item, person) =&gt; <a id="CO58-4"></a><i class="conum" data-value="4"></i>
      {
          Console.WriteLine($"Unable to index: {item} {person}");
      }));</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO58-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>customise the individual operations in the bulk request before it is dispatched</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO58-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>Index each document into either even-index or odd-index</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO58-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>decide if a document should be retried in the event of a failure</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO58-4"><i class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>if a document cannot be indexed this delegate is called</p></td></tr></table></div></div></div><div class="navfooter"><span class="prev"><a href="indexing.html">
              « 
              Indexing</a>
           
        </span><span class="next">
           
          <a href="ingest-nodes.html">Ingest Node
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>

  
            <script type="text/javascript">
window.initial_state = {}
</script>
<script type="text/javascript" src="/guide/static/docs.js"></script>

            </body>
        
</html>
