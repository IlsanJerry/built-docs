<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Index Management Operations | Elasticsearch-PHP [5.0] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch-PHP [5.0]"/>
<link rel="up" href="index.html" title="Elasticsearch-PHP [5.0]"/>
<link rel="prev" href="php_json_objects.html" title="Dealing with JSON Arrays and Objects in PHP"/>
<link rel="next" href="_indexing_documents.html" title="Indexing Documents"/>
<meta name="DC.type" content="Learn/Docs/Clients/PHP/5.0"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="5.0"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
<strong>IMPORTANT</strong>: No additional bug fixes or documentation updates 
will be released for this version. For the latest information, see the 
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch-PHP [5.0]</a></span>
»
<span class="breadcrumb-node">Index Management Operations</span>
</div>
<div class="navheader">
<span class="prev">
<a href="php_json_objects.html">« Dealing with JSON Arrays and Objects in PHP</a>
</span>
<span class="next">
<a href="_indexing_documents.html">Indexing Documents »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="_index_management_operations"></a>Index Management Operations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/5.0/docs/index-operations.asciidoc">edit</a></h1>
</div></div></div>
<p>Index management operations allow you to manage the indices in your Elasticsearch cluster, such as creating, deleting and
updating indices and their mappings/settings.</p>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_create_an_index_2"></a>Create an index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/5.0/docs/index-operations.asciidoc">edit</a></h2>
</div></div></div>
<p>The index operations are all contained under a distinct namespace, separated from other methods that are on the root
client object.  As an example, let&#8217;s create a new index:</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">$client = ClientBuilder::create()-&gt;build();
$params = [
    'index' =&gt; 'my_index'
];

// Create the index
$response = $client-&gt;indices()-&gt;create($params);</pre>
</div>
<p>&#8203;<br></p>
<p>You can specify any parameters that would normally be included in a new index creation API.  All parameters that
would normally go in the request body are located in the <em>body</em> parameter:</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">$client = ClientBuilder::create()-&gt;build();
$params = [
    'index' =&gt; 'my_index',
    'body' =&gt; [
        'settings' =&gt; [
            'number_of_shards' =&gt; 3,
            'number_of_replicas' =&gt; 2
        ],
        'mappings' =&gt; [
            'my_type' =&gt; [
                '_source' =&gt; [
                    'enabled' =&gt; true
                ],
                'properties' =&gt; [
                    'first_name' =&gt; [
                        'type' =&gt; 'string',
                        'analyzer' =&gt; 'standard'
                    ],
                    'age' =&gt; [
                        'type' =&gt; 'integer'
                    ]
                ]
            ]
        ]
    ]
];


// Create the index with mappings and settings now
$response = $client-&gt;indices()-&gt;create($params);</pre>
</div>
<p>&#8203;<br></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_create_an_index_advanced_example"></a>Create an index (advanced example)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/5.0/docs/index-operations.asciidoc">edit</a></h2>
</div></div></div>
<p>This is a more complicated example of creating an index, showing how to define analyzers, tokenizers, filters and
index settings. Although essentially the same as the previous example, the more complicated example can be helpful
for "real world" usage of the client, since this particular syntax is easy to mess up.</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">$params = [
    'index' =&gt; 'reuters',
    'body' =&gt; [
        'settings' =&gt; [ <a id="CO8-1"></a><i class="conum" data-value="1"></i>
            'number_of_shards' =&gt; 1,
            'number_of_replicas' =&gt; 0,
            'analysis' =&gt; [ <a id="CO8-2"></a><i class="conum" data-value="2"></i>
                'filter' =&gt; [
                    'shingle' =&gt; [
                        'type' =&gt; 'shingle'
                    ]
                ],
                'char_filter' =&gt; [
                    'pre_negs' =&gt; [
                        'type' =&gt; 'pattern_replace',
                        'pattern' =&gt; '(\\w+)\\s+((?i:never|no|nothing|nowhere|noone|none|not|havent|hasnt|hadnt|cant|couldnt|shouldnt|wont|wouldnt|dont|doesnt|didnt|isnt|arent|aint))\\b',
                        'replacement' =&gt; '~$1 $2'
                    ],
                    'post_negs' =&gt; [
                        'type' =&gt; 'pattern_replace',
                        'pattern' =&gt; '\\b((?i:never|no|nothing|nowhere|noone|none|not|havent|hasnt|hadnt|cant|couldnt|shouldnt|wont|wouldnt|dont|doesnt|didnt|isnt|arent|aint))\\s+(\\w+)',
                        'replacement' =&gt; '$1 ~$2'
                    ]
                ],
                'analyzer' =&gt; [
                    'reuters' =&gt; [
                        'type' =&gt; 'custom',
                        'tokenizer' =&gt; 'standard',
                        'filter' =&gt; ['lowercase', 'stop', 'kstem']
                    ]
                ]
            ]
        ],
        'mappings' =&gt; [ <a id="CO8-3"></a><i class="conum" data-value="3"></i>
            '_default_' =&gt; [    <a id="CO8-4"></a><i class="conum" data-value="4"></i>
                'properties' =&gt; [
                    'title' =&gt; [
                        'type' =&gt; 'text',
                        'analyzer' =&gt; 'reuters',
                        'term_vector' =&gt; 'yes',
                        'copy_to' =&gt; 'combined'
                    ],
                    'body' =&gt; [
                        'type' =&gt; 'text',
                        'analyzer' =&gt; 'reuters',
                        'term_vector' =&gt; 'yes',
                        'copy_to' =&gt; 'combined'
                    ],
                    'combined' =&gt; [
                        'type' =&gt; 'text',
                        'analyzer' =&gt; 'reuters',
                        'term_vector' =&gt; 'yes'
                    ],
                    'topics' =&gt; [
                        'type' =&gt; 'text',
                        'index' =&gt; 'not_analyzed'
                    ],
                    'places' =&gt; [
                        'type' =&gt; 'text',
                        'index' =&gt; 'not_analyzed'
                    ]
                ]
            ],
            'my_type' =&gt; [  <a id="CO8-5"></a><i class="conum" data-value="5"></i>
                'properties' =&gt; [
                    'my_field' =&gt; [
                        'type' =&gt; 'text'
                    ]
                ]
            ]
        ]
    ]
];
$client-&gt;indices()-&gt;create($params);</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO8-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The top level <code class="literal">settings</code> contains config about the index (# of shards, etc) as well as analyzers</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO8-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">analysis</code> is nested inside of <code class="literal">settings</code>, and contains tokenizers, filters, char filters and analyzers</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO8-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p><code class="literal">mappings</code> is another element nested inside of <code class="literal">settings</code>, and contains the mappings for various types</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO8-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">_default_</code> type is a dynamic template that is applied to all fields that don&#8217;t have an explicit mapping</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO8-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">my_type</code> type is an example of a user-defined type that holds a single field, <code class="literal">my_field</code></p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_delete_an_index_2"></a>Delete an index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/5.0/docs/index-operations.asciidoc">edit</a></h2>
</div></div></div>
<p>Deleting an index is very simple:</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">$params = ['index' =&gt; 'my_index'];
$response = $client-&gt;indices()-&gt;delete($params);</pre>
</div>
<p>&#8203;<br></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_put_settings_api"></a>Put Settings API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/5.0/docs/index-operations.asciidoc">edit</a></h2>
</div></div></div>
<p>The Put Settings API allows you to modify any index setting that is dynamic:</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">$params = [
    'index' =&gt; 'my_index',
    'body' =&gt; [
        'settings' =&gt; [
            'number_of_replicas' =&gt; 0,
            'refresh_interval' =&gt; -1
        ]
    ]
];

$response = $client-&gt;indices()-&gt;putSettings($params);</pre>
</div>
<p>&#8203;<br></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_get_settings_api"></a>Get Settings API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/5.0/docs/index-operations.asciidoc">edit</a></h2>
</div></div></div>
<p>Get Settings API will show you the currently configured settings for one or more indexes:</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">// Get settings for one index
$params = ['index' =&gt; 'my_index'];
$response = $client-&gt;indices()-&gt;getSettings($params);

// Get settings for several indices
$params = [
    'index' =&gt; [ 'my_index', 'my_index2' ]
];
$response = $client-&gt;indices()-&gt;getSettings($params);</pre>
</div>
<p>&#8203;<br></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_put_mappings_api"></a>Put Mappings API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/5.0/docs/index-operations.asciidoc">edit</a></h2>
</div></div></div>
<p>The Put Mappings API allows you to modify or add to an existing index&#8217;s mapping.</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">// Set the index and type
$params = [
    'index' =&gt; 'my_index',
    'type' =&gt; 'my_type2',
    'body' =&gt; [
        'my_type2' =&gt; [
            '_source' =&gt; [
                'enabled' =&gt; true
            ],
            'properties' =&gt; [
                'first_name' =&gt; [
                    'type' =&gt; 'string',
                    'analyzer' =&gt; 'standard'
                ],
                'age' =&gt; [
                    'type' =&gt; 'integer'
                ]
            ]
        ]
    ]
];

// Update the index mapping
$client-&gt;indices()-&gt;putMapping($params);</pre>
</div>
<p>&#8203;<br></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_get_mappings_api"></a>Get Mappings API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/5.0/docs/index-operations.asciidoc">edit</a></h2>
</div></div></div>
<p>The Get Mappings API will return the mapping details about your indexes and types.  Depending on the mappings that you wish to retrieve, you can specify a number of combinations of index and type:</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">// Get mappings for all indexes and types
$response = $client-&gt;indices()-&gt;getMapping();

// Get mappings for all types in 'my_index'
$params = ['index' =&gt; 'my_index'];
$response = $client-&gt;indices()-&gt;getMapping($params);

// Get mappings for all types of 'my_type', regardless of index
$params = ['type' =&gt; 'my_type' ];
$response = $client-&gt;indices()-&gt;getMapping($params);

// Get mapping 'my_type' in 'my_index'
$params = [
    'index' =&gt; 'my_index'
    'type' =&gt; 'my_type'
];
$response = $client-&gt;indices()-&gt;getMapping($params);

// Get mappings for two indexes
$params = [
    'index' =&gt; [ 'my_index', 'my_index2' ]
];
$response = $client-&gt;indices()-&gt;getMapping($params);</pre>
</div>
<p>&#8203;<br></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_other_apis_in_the_indices_namespace"></a>Other APIs in the Indices Namespace<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/5.0/docs/index-operations.asciidoc">edit</a></h2>
</div></div></div>
<p>There are a number of other APIs in the indices namespace that allow you to manage your elasticsearch indexes (add/remove templates, flush segments, close indexes, etc).</p>
<p>If you use an IDE with autocompletion, you should be able to easily explore the indices namespace by typing:</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">$client-&gt;indices()-&gt;</pre>
</div>
<p>And perusing the list of available methods.  Alternatively, browsing the <code class="literal">\Elasticsearch\Namespaces\Indices.php</code> file will show you the full list of available method calls (as well as parameter lists in the comments for each method).</p>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="php_json_objects.html">« Dealing with JSON Arrays and Objects in PHP</a>
</span>
<span class="next">
<a href="_indexing_documents.html">Indexing Documents »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=default&elektra=docs&storm=top-video">Elasticsearch Service: Free Trial</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
