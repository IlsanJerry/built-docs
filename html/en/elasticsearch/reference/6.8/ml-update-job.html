<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Update jobs API
        | Elasticsearch Reference [6.8]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [6.8]" /><link rel="up" href="ml-apis.html" title="Machine learning APIs" /><link rel="prev" href="ml-update-filter.html" title="Update filter API" /><link rel="next" href="ml-update-snapshot.html" title="Update model snapshots API" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.8" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="6.8" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [6.8]
    </a></span> » <span class="breadcrumb-link"><a href="xpack-api.html">X-Pack APIs</a></span> » <span class="breadcrumb-link"><a href="ml-apis.html">Machine learning APIs</a></span> » <span class="breadcrumb-node">Update jobs API</span></div><div class="navheader"><span class="prev"><a href="ml-update-filter.html">
              « 
              Update filter API</a>
           
        </span><span class="next">
           
          <a href="ml-update-snapshot.html">Update model snapshots API
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="ml-update-job"></a>Update jobs API<a href="https://github.com/elastic/elasticsearch/edit/6.8/docs/reference/ml/apis/update-job.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>Updates certain properties of a job.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_request_74"></a>Request<a href="https://github.com/elastic/elasticsearch/edit/6.8/docs/reference/ml/apis/update-job.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><code class="literal">POST _xpack/ml/anomaly_detectors/&lt;job_id&gt;/_update</code></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_path_parameters_58"></a>Path Parameters<a href="https://github.com/elastic/elasticsearch/edit/6.8/docs/reference/ml/apis/update-job.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">job_id</code> (required)</span></dt><dd>(string) Identifier for the job</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_request_body_29"></a>Request Body<a href="https://github.com/elastic/elasticsearch/edit/6.8/docs/reference/ml/apis/update-job.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The following properties can be updated after the job is created:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th><th align="left" valign="top">Requires Restart</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">analysis_limits</code>: <code class="literal">model_memory_limit</code></p></td><td align="left" valign="top"><p>The approximate maximum amount of
memory resources required for analytical processing. See <a class="xref" href="ml-job-resource.html#ml-apilimits" title="Analysis Limits">Analysis Limits</a>.</p></td><td align="left" valign="top"><p>Yes</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">background_persist_interval</code></p></td><td align="left" valign="top"><p>Advanced configuration option. The time between
each periodic persistence of the model. See <a class="xref" href="ml-job-resource.html" title="Job resources">Job resources</a>.</p></td><td align="left" valign="top"><p>Yes</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">custom_settings</code></p></td><td align="left" valign="top"><p>Contains custom meta data about the job.</p></td><td align="left" valign="top"><p>No</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">description</code></p></td><td align="left" valign="top"><p>A description of the job. See <a class="xref" href="ml-job-resource.html" title="Job resources">Job resources</a>.</p></td><td align="left" valign="top"><p>No</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">detectors</code></p></td><td align="left" valign="top"><p>An array of <a class="link" href="ml-update-job.html#ml-detector-update" title="Detector Update Objects">detector update objects</a>.</p></td><td align="left" valign="top"><p>No</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">groups</code></p></td><td align="left" valign="top"><p>A list of job groups. See <a class="xref" href="ml-job-resource.html" title="Job resources">Job resources</a>.</p></td><td align="left" valign="top"><p>No</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">model_plot_config</code>: <code class="literal">enabled</code></p></td><td align="left" valign="top"><p>If true, enables calculation and storage of the
model bounds for each entity that is being analyzed.
See <a class="xref" href="ml-job-resource.html#ml-apimodelplotconfig" title="Model Plot Config">Model Plot Config</a>.</p></td><td align="left" valign="top"><p>No</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">model_snapshot_retention_days</code></p></td><td align="left" valign="top"><p>The time in days that model snapshots are
retained for the job. See <a class="xref" href="ml-job-resource.html" title="Job resources">Job resources</a>.</p></td><td align="left" valign="top"><p>Yes</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">renormalization_window_days</code></p></td><td align="left" valign="top"><p>Advanced configuration option. The period over
which adjustments to the score are applied, as new data is seen.
See <a class="xref" href="ml-job-resource.html" title="Job resources">Job resources</a>.</p></td><td align="left" valign="top"><p>Yes</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">results_retention_days</code></p></td><td align="left" valign="top"><p>Advanced configuration option. The number of days
for which job results are retained. See <a class="xref" href="ml-job-resource.html" title="Job resources">Job resources</a>.</p></td><td align="left" valign="top"><p>Yes</p></td></tr></tbody></table></div><p>For those properties that have <code class="literal">Requires Restart</code> set to <code class="literal">Yes</code> in this table,
if the job is open when you make the update, you must stop the data feed, close
the job, then restart the data feed and open the job for the changes to take
effect.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">You can update the <code class="literal">analysis_limits</code> only while the job is closed.</li><li class="listitem">The <code class="literal">model_memory_limit</code> property value cannot be decreased below the current usage.</li><li class="listitem">If the <code class="literal">memory_status</code> property in the <code class="literal">model_size_stats</code> object has a value
of <code class="literal">hard_limit</code>, this means that it was unable to process some data. You might
want to re-run this job with an increased <code class="literal">model_memory_limit</code>.</li></ul></div></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ml-detector-update"></a>Detector Update Objects<a href="https://github.com/elastic/elasticsearch/edit/6.8/docs/reference/ml/apis/update-job.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A detector update object has the following properties:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">detector_index</code></span></dt><dd>(integer) The identifier of the detector to update.</dd><dt><span class="term"><code class="literal">description</code></span></dt><dd>(string) The new description for the detector.</dd><dt><span class="term"><code class="literal">custom_rules</code></span></dt><dd>(array) The new list of <a class="link" href="ml-job-resource.html#ml-detector-custom-rule" title="Detector Custom Rule">rules</a> for the detector.</dd></dl></div><p>No other detector property can be updated.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_authorization_68"></a>Authorization<a href="https://github.com/elastic/elasticsearch/edit/6.8/docs/reference/ml/apis/update-job.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>You must have <code class="literal">manage_ml</code>, or <code class="literal">manage</code> cluster privileges to use this API.
For more information, see
<a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/6.8/security-privileges.html" target="_top">Security Privileges</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_examples_69"></a>Examples<a href="https://github.com/elastic/elasticsearch/edit/6.8/docs/reference/ml/apis/update-job.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The following example updates the <code class="literal">total-requests</code> job:</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">POST _xpack/ml/anomaly_detectors/total-requests/_update
{
  "description":"An updated job",
  "groups": ["group1","group2"],
  "model_plot_config": {
    "enabled": true
  },
  "analysis_limits": {
    "model_memory_limit": "1024mb"
  },
  "renormalization_window_days": 30,
  "background_persist_interval": "2h",
  "model_snapshot_retention_days": 7,
  "results_retention_days": 60,
  "custom_settings": {
    "custom_urls" : [{
      "url_name" : "Lookup IP",
      "url_value" : "http://geoiplookup.net/ip/$clientip$"
    }]
  }
}</pre></div><div class="console_widget" data-snippet="snippets/1562.console"></div><p>When the job is updated, you receive a summary of the job configuration
information, including the updated property values. For example:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
  "job_id": "total-requests",
  "job_type": "anomaly_detector",
  "job_version": "6.5.0",
  "groups": [
    "group1",
    "group2"
  ],
  "description": "An updated job",
  "create_time": 1518808660505,
  "analysis_config": {
    "bucket_span": "10m",
    "detectors": [
      {
        "detector_description": "Sum of total",
        "function": "sum",
        "field_name": "total",
        "detector_index": 0
      }
    ],
    "influencers": []
  },
  "analysis_limits": {
    "model_memory_limit": "1024mb",
    "categorization_examples_limit": 4
  },
  "data_description": {
    "time_field": "timestamp",
    "time_format": "epoch_ms"
  },
  "model_plot_config": {
    "enabled": true
  },
  "renormalization_window_days": 30,
  "background_persist_interval": "2h",
  "model_snapshot_retention_days": 7,
  "results_retention_days": 60,
  "custom_settings": {
    "custom_urls": [
      {
        "url_name": "Lookup IP",
        "url_value": "http://geoiplookup.net/ip/$clientip$"
      }
    ]
  },
  "results_index_name": "shared"
}</pre></div></div></div><div class="navfooter"><span class="prev"><a href="ml-update-filter.html">
              « 
              Update filter API</a>
           
        </span><span class="next">
           
          <a href="ml-update-snapshot.html">Update model snapshots API
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
window.initial_state = {}</script>
  </body>
</html>
