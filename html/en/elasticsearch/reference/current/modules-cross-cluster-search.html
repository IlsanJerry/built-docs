<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Search across clusters
        | Elasticsearch Reference [7.3]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [7.3]" /><link rel="up" href="index.html" title="Elasticsearch Reference [7.3]" /><link rel="prev" href="regexp-syntax.html" title="Regular expression syntax" /><link rel="next" href="modules-scripting.html" title="Scripting" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.3" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="7.3" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [7.3]
    </a></span> » <span class="breadcrumb-node">Search across clusters</span></div><div class="navheader"><span class="prev"><a href="regexp-syntax.html">
              « 
              Regular expression syntax</a>
           
        </span><span class="next">
           
          <a href="modules-scripting.html">Scripting
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="modules-cross-cluster-search"></a>Search across clusters<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/modules/cross-cluster-search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h1></div></div></div><p><span class="strong strong"><strong>Cross-cluster search</strong></span> lets you run a single search request against one or more
<a class="link" href="modules-remote-clusters.html" title="Remote clusters">remote clusters</a>. For example, you can use a cross-cluster search to
filter and analyze log data stored on clusters in different data centers.</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>Cross-cluster search requires <a class="link" href="modules-remote-clusters.html" title="Remote clusters">remote clusters</a>.</p></div></div><h2><a id="ccs-example"></a>Cross-cluster search examples<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/modules/cross-cluster-search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2><h3><a id="ccs-remote-cluster-setup"></a>Remote cluster setup<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/modules/cross-cluster-search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>To perform a cross-cluster search, you must have at least one remote cluster configured.</p><p>The following <a class="link" href="cluster-update-settings.html" title="Cluster Update Settings">cluster update settings</a> API request
adds three remote clusters:<code class="literal">cluster_one</code>, <code class="literal">cluster_two</code>, and <code class="literal">cluster_three</code>.</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "persistent": {
    "cluster": {
      "remote": {
        "cluster_one": {
          "seeds": [
            "127.0.0.1:9300"
          ]
        },
        "cluster_two": {
          "seeds": [
            "127.0.0.1:9301"
          ]
        },
        "cluster_three": {
          "seeds": [
            "127.0.0.1:9302"
          ]
        }
      }
    }
  }
}</pre></div><div class="console_widget" data-snippet="snippets/477.console"></div><h3><a id="ccs-search-remote-cluster"></a>Search a single remote cluster<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/modules/cross-cluster-search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The following <a class="link" href="search.html" title="Search APIs">search</a> API request searches the
<code class="literal">twitter</code> index on a single remote cluster, <code class="literal">cluster_one</code>.</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">GET /cluster_one:twitter/_search
{
  "query": {
    "match": {
      "user": "kimchy"
    }
  }
}</pre></div><div class="console_widget" data-snippet="snippets/478.console"></div><p>The API returns the following response:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
  "took": 150,
  "timed_out": false,
  "_shards": {
    "total": 1,
    "successful": 1,
    "failed": 0,
    "skipped": 0
  },
  "_clusters": {
    "total": 1,
    "successful": 1,
    "skipped": 0
  },
  "hits": {
    "total" : {
        "value": 1,
        "relation": "eq"
    },
    "max_score": 1,
    "hits": [
      {
        "_index": "cluster_one:twitter", <a id="CO154-1"></a><i class="conum" data-value="1"></i>
        "_type": "_doc",
        "_id": "0",
        "_score": 1,
        "_source": {
          "user": "kimchy",
          "date": "2009-11-15T14:12:12",
          "message": "trying out Elasticsearch",
          "likes": 0
        }
      }
    ]
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO154-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>The search response body includes the name of the remote cluster in the
<code class="literal">_index</code> parameter.</p></td></tr></table></div><h3><a id="ccs-search-multi-remote-cluster"></a>Search multiple remote clusters<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/modules/cross-cluster-search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The following <a class="link" href="search.html" title="Search APIs">search</a> API request searches the <code class="literal">twitter</code> index on
three clusters:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Your local cluster</li><li class="listitem">Two remote clusters, <code class="literal">cluster_one</code> and <code class="literal">cluster_two</code></li></ul></div><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">GET /twitter,cluster_one:twitter,cluster_two:twitter/_search
{
  "query": {
    "match": {
      "user": "kimchy"
    }
  }
}</pre></div><div class="console_widget" data-snippet="snippets/479.console"></div><p>The API returns the following response:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
  "took": 150,
  "timed_out": false,
  "num_reduce_phases": 4,
  "_shards": {
    "total": 3,
    "successful": 3,
    "failed": 0,
    "skipped": 0
  },
  "_clusters": {
    "total": 3,
    "successful": 3,
    "skipped": 0
  },
  "hits": {
    "total" : {
        "value": 3,
        "relation": "eq"
    },
    "max_score": 1,
    "hits": [
      {
        "_index": "twitter", <a id="CO155-1"></a><i class="conum" data-value="1"></i>
        "_type": "_doc",
        "_id": "0",
        "_score": 2,
        "_source": {
          "user": "kimchy",
          "date": "2009-11-15T14:12:12",
          "message": "trying out Elasticsearch",
          "likes": 0
        }
      },
      {
        "_index": "cluster_one:twitter", <a id="CO155-2"></a><i class="conum" data-value="2"></i>
        "_type": "_doc",
        "_id": "0",
        "_score": 1,
        "_source": {
          "user": "kimchy",
          "date": "2009-11-15T14:12:12",
          "message": "trying out Elasticsearch",
          "likes": 0
        }
      },
      {
        "_index": "cluster_two:twitter", <a id="CO155-3"></a><i class="conum" data-value="3"></i>
        "_type": "_doc",
        "_id": "0",
        "_score": 1,
        "_source": {
          "user": "kimchy",
          "date": "2009-11-15T14:12:12",
          "message": "trying out Elasticsearch",
          "likes": 0
        }
      }
    ]
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO155-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>This document’s <code class="literal">_index</code> parameter doesn’t include a cluster name. This
means the document came from the local cluster.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO155-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>This document came from <code class="literal">cluster_one</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO155-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>This document came from <code class="literal">cluster_two</code>.</p></td></tr></table></div><h2><a id="skip-unavailable-clusters"></a>Skip unavailable clusters<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/modules/cross-cluster-search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2><p>By default, a cross-cluster search returns an error if <span class="strong strong"><strong>any</strong></span> cluster in the request is
unavailable.</p><p>To skip an unavailable cluster during a cross-cluster search, set the
<a class="link" href="cluster-remote-info.html#skip-unavailable"><code class="literal">skip_unavailable</code></a> cluster setting to <code class="literal">true</code>.</p><p>The following <a class="link" href="cluster-update-settings.html" title="Cluster Update Settings">cluster update settings</a> API request
changes <code class="literal">cluster_two</code>'s <code class="literal">skip_unavailable</code> setting to <code class="literal">true</code>.</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">PUT _cluster/settings
{
  "persistent": {
    "cluster.remote.cluster_two.skip_unavailable": true
  }
}</pre></div><div class="console_widget" data-snippet="snippets/480.console"></div><p>If <code class="literal">cluster_two</code> is disconnected or unavailable during a cross-cluster search, Elasticsearch won’t
include matching documents from that cluster in the final results.</p><h2><a id="ccs-works"></a>How cross-cluster search works<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/modules/cross-cluster-search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2><p>Because cross-cluster search involves sending requests to remote clusters, any network delays
can impact search speed. To avoid slow searches, cross-cluster search offers two options for
handling network delays:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="modules-cross-cluster-search.html#ccs-min-roundtrips" title="Minimize network roundtrips">Minimize network roundtrips</a></span></dt><dd><p class="simpara">By default, Elasticsearch reduces the number of network roundtrips between remote
clusters. This reduces the impact of network delays on search speed. However,
Elasticsearch can’t reduce network roundtrips for large search requests, such as those
including a <a class="link" href="search-request-body.html#request-body-search-scroll" title="Scroll">scroll</a> or
<a class="link" href="search-request-body.html#request-body-search-inner-hits" title="Inner hits">inner hits</a>.</p><p class="simpara">See <a class="xref" href="modules-cross-cluster-search.html#ccs-min-roundtrips" title="Minimize network roundtrips">Minimize network roundtrips</a> to learn how this option works.</p></dd><dt><span class="term"><a class="link" href="modules-cross-cluster-search.html#ccs-unmin-roundtrips" title="Don’t minimize network roundtrips">Don’t minimize network roundtrips</a></span></dt><dd><p class="simpara">For search requests that include a scroll or inner hits, Elasticsearch sends multiple
outgoing and ingoing requests to each remote cluster. You can also choose this
option by setting the <a class="link" href="search.html" title="Search APIs">search</a> API’s
<a class="link" href="search-request-body.html#ccs-minimize-roundtrips"><code class="literal">ccs_minimize_roundtrips</code></a> parameter to <code class="literal">false</code>.
While typically slower, this approach may work well for networks with low
latency.</p><p class="simpara">See <a class="xref" href="modules-cross-cluster-search.html#ccs-unmin-roundtrips" title="Don’t minimize network roundtrips">Don’t minimize network roundtrips</a> to learn how this option works.</p></dd></dl></div><h3><a id="ccs-min-roundtrips"></a>Minimize network roundtrips<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/modules/cross-cluster-search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Here’s how cross-cluster search works when you minimize network roundtrips.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">You send a cross-cluster search request to your local cluster. A coordinating node in that
cluster receives and parses the request.</p><p class="simpara"><span class="inlinemediaobject"><img src="images/ccs/ccs-min-roundtrip-client-request.png" alt="ccs min roundtrip client request" /></span></p></li><li class="listitem"><p class="simpara">The coordinating node sends a single search request to each cluster, including
its own. Each cluster performs the search request independently.</p><p class="simpara"><span class="inlinemediaobject"><img src="images/ccs/ccs-min-roundtrip-cluster-search.png" alt="ccs min roundtrip cluster search" /></span></p></li><li class="listitem"><p class="simpara">Each remote cluster sends its search results back to the coordinating node.</p><p class="simpara"><span class="inlinemediaobject"><img src="images/ccs/ccs-min-roundtrip-cluster-results.png" alt="ccs min roundtrip cluster results" /></span></p></li><li class="listitem"><p class="simpara">After collecting results from each cluster, the coordinating node returns the
final results in the cross-cluster search response.</p><p class="simpara"><span class="inlinemediaobject"><img src="images/ccs/ccs-min-roundtrip-client-response.png" alt="ccs min roundtrip client response" /></span></p></li></ol></div><h3><a id="ccs-unmin-roundtrips"></a>Don’t minimize network roundtrips<a href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/modules/cross-cluster-search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Here’s how cross-cluster search works when you don’t minimize network roundtrips.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">You send a cross-cluster search request to your local cluster. A coordinating node in that
cluster receives and parses the request.</p><p class="simpara"><span class="inlinemediaobject"><img src="images/ccs/ccs-min-roundtrip-client-request.png" alt="ccs min roundtrip client request" /></span></p></li><li class="listitem"><p class="simpara">The coordinating node sends a <a class="link" href="search-shards.html" title="Search Shards API">search shards</a> API request to
each remote cluster.</p><p class="simpara"><span class="inlinemediaobject"><img src="images/ccs/ccs-min-roundtrip-cluster-search.png" alt="ccs min roundtrip cluster search" /></span></p></li><li class="listitem"><p class="simpara">Each remote cluster sends its response back to the coordinating node.
This response contains information about the indices and shards the cross-cluster search
request will be executed on.</p><p class="simpara"><span class="inlinemediaobject"><img src="images/ccs/ccs-min-roundtrip-cluster-results.png" alt="ccs min roundtrip cluster results" /></span></p></li><li class="listitem"><p class="simpara">The coordinating node sends a search request to each shard, including those in
its own cluster. Each shard performs the search request independently.</p><p class="simpara"><span class="inlinemediaobject"><img src="images/ccs/ccs-dont-min-roundtrip-shard-search.png" alt="ccs dont min roundtrip shard search" /></span></p></li><li class="listitem"><p class="simpara">Each shard sends its search results back to the coordinating node.</p><p class="simpara"><span class="inlinemediaobject"><img src="images/ccs/ccs-dont-min-roundtrip-shard-results.png" alt="ccs dont min roundtrip shard results" /></span></p></li><li class="listitem"><p class="simpara">After collecting results from each cluster, the coordinating node returns the
final results in the cross-cluster search response.</p><p class="simpara"><span class="inlinemediaobject"><img src="images/ccs/ccs-min-roundtrip-client-response.png" alt="ccs min roundtrip client response" /></span></p></li></ol></div></div><div class="navfooter"><span class="prev"><a href="regexp-syntax.html">
              « 
              Regular expression syntax</a>
           
        </span><span class="next">
           
          <a href="modules-scripting.html">Scripting
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

      </section>
    </div>

    
<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
  
            <script type="text/javascript">
window.initial_state = {}
</script>

            </body>
        
</html>
