<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ignore_above
        | Elasticsearch Reference [2.0]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Reference [2.0]" /><link rel="up" href="mapping-params.html" title="Mapping parameters" /><link rel="prev" href="geohash-prefix.html" title="geohash_prefix" /><link rel="next" href="ignore-malformed.html" title="ignore_malformed" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/2.0" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="2.0" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [2.0]
    </a></span> » <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span> » <span class="breadcrumb-link"><a href="mapping-params.html">Mapping parameters</a></span> » <span class="breadcrumb-node"><code class="literal">ignore_above</code></span></div><div class="navheader"><span class="prev"><a href="geohash-prefix.html">
              « 
              <code class="literal">geohash_prefix</code></a>
           
        </span><span class="next">
           
          <a href="ignore-malformed.html"><code class="literal">ignore_malformed</code>
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ignore-above"></a><code class="literal">ignore_above</code><a href="https://github.com/elastic/elasticsearch/edit/2.0/docs/reference/mapping/params/ignore-above.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Strings longer than the <code class="literal">ignore_above</code> setting will not be processed by the
<a class="link" href="analyzer.html" title="analyzer">analyzer</a> and will not be indexed. This is mainly useful for
<a class="link" href="mapping-index.html" title="index"><code class="literal">not_analyzed</code></a> string fields, which are typically used for
filtering, aggregations, and sorting.  These are structured fields and it
doesn’t usually make sense to allow very long terms to be indexed in these
fields.</p><div class="pre_wrapper lang-sense"><pre class="programlisting prettyprint lang-sense">PUT my_index
{
  "mappings": {
    "my_type": {
      "properties": {
        "message": {
          "type": "string",
          "index": "not_analyzed",
          "ignore_above": 20 <a id="CO188-3"></a><i class="conum" data-value="1"></i>
        }
      }
    }
  }
}

PUT my_index/my_type/1 <a id="CO188-4"></a><i class="conum" data-value="2"></i>
{
  "message": "Syntax error"
}

PUT my_index/my_type/2 <a id="CO188-5"></a><i class="conum" data-value="3"></i>
{
  "message": "Syntax error with some long stacktrace"
}

GET _search <a id="CO188-6"></a><i class="conum" data-value="4"></i>
{
  "aggs": {
    "messages": {
      "terms": {
        "field": "message"
      }
    }
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/92.sense"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO188-1"><i class="conum" data-value="1"></i></a> <a href="#CO188-2"><i class="conum" data-value="2"></i></a> <a href="#CO188-3"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>This field will ignore any string longer than 20 characters.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO188-4"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>This document is indexed successfully.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO188-5"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>This document will be indexed, but without indexing the <code class="literal">message</code> field.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO188-6"><i class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>Search returns both documents, but only the first is present in the terms aggregation.</p></td></tr></table></div><div class="tip admon"><div class="icon"></div><div class="admon_content"><p>The <code class="literal">ignore_above</code> setting is allowed to have different settings for
fields of the same name in the same index.  Its value can be updated on
existing fields using the <a class="link" href="indices-put-mapping.html" title="Put Mapping">PUT mapping API</a>.</p></div></div><p>This option is also useful for protecting against Lucene’s term byte-length
limit of <code class="literal">32766</code>.</p><div class="note admon"><div class="icon"></div><div class="admon_content"><p>The value for <code class="literal">ignore_above</code> is the <span class="emphasis"><em>character count</em></span>, but Lucene counts
bytes. If you use UTF-8 text with many non-ASCII characters, you may want to
set the limit to <code class="literal">32766 / 3 = 10922</code> since UTF-8 characters may occupy at most
3 bytes.</p></div></div></div><div class="navfooter"><span class="prev"><a href="geohash-prefix.html">
              « 
              <code class="literal">geohash_prefix</code></a>
           
        </span><span class="next">
           
          <a href="ignore-malformed.html"><code class="literal">ignore_malformed</code>
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=default&elektra=docs&storm=top-video">Elasticsearch Service: Free Trial</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
