<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Document API changes
        | Elasticsearch Reference [5.4]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Reference [5.4]" /><link rel="up" href="breaking-changes-5.0.html" title="Breaking changes in 5.0" /><link rel="prev" href="breaking_50_index_apis.html" title="Index APIs changes" /><link rel="next" href="breaking_50_settings_changes.html" title="Settings changes" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/5.4" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="5.4" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.4]
    </a></span> » <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span> » <span class="breadcrumb-link"><a href="breaking-changes-5.0.html">Breaking changes in 5.0</a></span> » <span class="breadcrumb-node">Document API changes</span></div><div class="navheader"><span class="prev"><a href="breaking_50_index_apis.html">
              « 
              Index APIs changes</a>
           
        </span><span class="next">
           
          <a href="breaking_50_settings_changes.html">Settings changes
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="breaking_50_document_api_changes"></a>Document API changes<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_0/docs.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_literal_refresh_literal_no_longer_supports_truthy_and_falsy_values"></a><code class="literal">?refresh</code> no longer supports truthy and falsy values<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_0/docs.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <code class="literal">?refresh</code> request parameter used to accept any value other than <code class="literal">false</code>,
<code class="literal">0</code>, <code class="literal">off</code>, and <code class="literal">no</code> to mean "make the changes from this request visible for
search immediately." Now it only accepts <code class="literal">?refresh</code> and <code class="literal">?refresh=true</code> to
mean that. You can set it to <code class="literal">?refresh=false</code> and the request will take no
refresh-related action. The same is true if you leave <code class="literal">refresh</code> off of the
url entirely. If you add <code class="literal">?refresh=wait_for</code> Elasticsearch will wait for the
changes to become visible before replying to the request but won’t take any
immediate refresh related action. See <a class="xref" href="docs-refresh.html" title="?refresh"><em><code class="literal">?refresh</code></em></a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_literal_created_literal_field_deprecated_in_the_index_api"></a><code class="literal">created</code> field deprecated in the Index API<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_0/docs.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <code class="literal">created</code> field has been deprecated in the Index API. It now returns
<code class="literal">result</code>, returning <code class="literal">"result": "created"</code> when it created a document and
<code class="literal">"result": "updated"</code> when it updated the document. This is also true for
<code class="literal">index</code> bulk operations.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_literal_found_literal_field_deprecated_in_the_delete_api"></a><code class="literal">found</code> field deprecated in the Delete API<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_0/docs.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <code class="literal">found</code> field has been deprecated in the Delete API. It now returns
<code class="literal">result</code>, returning <code class="literal">"result": "deleted"</code> when it deleted a document and
<code class="literal">"result": "not_found"</code> when it didn’t find the document. This is also true for
<code class="literal">delete</code> bulk operations.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_reindex_and_update_by_query"></a>Reindex and Update By Query<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_0/docs.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Before 5.0.0 <code class="literal">_reindex</code> and <code class="literal">_update_by_query</code> only retried bulk failures so
they used the following response format:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
   ...
   "retries": 10
   ...
}</pre></div><p>Where <code class="literal">retries</code> counts the number of bulk retries. Now they retry on search
failures as well and use this response format:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
   ...
   "retries": {
     "bulk": 10,
     "search": 1
   }
   ...
}</pre></div><p>Where <code class="literal">bulk</code> counts the number of bulk retries and <code class="literal">search</code> counts the number
of search retries.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_api"></a>get API<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_0/docs.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>As of 5.0.0 the get API will issue a refresh if the requested document has
been changed since the last refresh but the change hasn’t been refreshed yet. This
will also make all other changes visible immediately. This can have an impact on
performance if the same document is updated very frequently using a read modify update
pattern since it might create many small segments. This behavior can be disabled by
passing <code class="literal">realtime=false</code> to the get request.</p><p>The <code class="literal">fields</code> field has been renamed to <code class="literal">stored_fields</code></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_mget_api"></a>mget API<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_0/docs.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <code class="literal">fields</code> field has been renamed to <code class="literal">stored_fields</code></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_update_api"></a>update API<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_0/docs.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <code class="literal">fields</code> field has been deprecated. You should use <code class="literal">_source</code> to load the field from _source.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_bulk_api"></a>bulk API<a href="https://github.com/elastic/elasticsearch/edit/5.4/docs/reference/migration/migrate_5_0/docs.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <code class="literal">fields</code> field has been deprecated. You should use <code class="literal">_source</code> to load the field from _source.</p></div></div><div class="navfooter"><span class="prev"><a href="breaking_50_index_apis.html">
              « 
              Index APIs changes</a>
           
        </span><span class="next">
           
          <a href="breaking_50_settings_changes.html">Settings changes
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
