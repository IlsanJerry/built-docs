<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Important Elasticsearch configuration | Elasticsearch Reference [7.10] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.10]"/>
<link rel="up" href="setup.html" title="Set up Elasticsearch"/>
<link rel="prev" href="notification-settings.html" title="Watcher settings in Elasticsearch"/>
<link rel="next" href="system-config.html" title="Important System Configuration"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.10"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.10"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.10]</a></span>
»
<span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
»
<span class="breadcrumb-node">Important Elasticsearch configuration</span>
</div>
<div class="navheader">
<span class="prev">
<a href="notification-settings.html">« Watcher settings in Elasticsearch</a>
</span>
<span class="next">
<a href="system-config.html">Important System Configuration »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="important-settings"></a>Important Elasticsearch configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings.asciidoc">edit</a></h2>
</div></div></div>
<p>While Elasticsearch requires very little configuration, there are a number of
settings which need to be considered before going into production.</p>
<p>The following settings <span class="strong strong"><strong>must</strong></span> be considered before going to production:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="important-settings.html#path-settings" title="Path settings">Path settings</a>
</li>
<li class="listitem">
<a class="xref" href="important-settings.html#cluster-name" title="Cluster name setting">Cluster name setting</a>
</li>
<li class="listitem">
<a class="xref" href="important-settings.html#node-name" title="Node name setting">Node name setting</a>
</li>
<li class="listitem">
<a class="xref" href="important-settings.html#network.host" title="Network host setting">Network host settings</a>
</li>
<li class="listitem">
<a class="xref" href="important-settings.html#discovery-settings" title="Discovery and cluster formation settings">Discovery settings</a>
</li>
<li class="listitem">
<a class="xref" href="heap-size.html" title="Heap size settings">Heap size settings</a>
</li>
<li class="listitem">
<a class="xref" href="important-settings.html#heap-dump-path" title="JVM heap dump path setting">JVM heap dump path setting</a>
</li>
<li class="listitem">
<a class="xref" href="important-settings.html#gc-logging" title="GC logging settings">GC logging settings</a>
</li>
<li class="listitem">
<a class="xref" href="important-settings.html#es-tmpdir" title="Temporary directory settings">Temporary directory settings</a>
</li>
<li class="listitem">
<a class="xref" href="important-settings.html#error-file-path" title="JVM fatal error log setting">JVM fatal error log setting</a>
</li>
</ul>
</div>
<h3><a id="path-settings"></a>Path settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/path-settings.asciidoc">edit</a></h3>
<p>If you are using the <code class="literal">.zip</code> or <code class="literal">.tar.gz</code> archives, the <code class="literal">data</code> and <code class="literal">logs</code>
directories are sub-folders of <code class="literal">$ES_HOME</code>. If these important folders are left
in their default locations, there is a high risk of them being deleted while
upgrading Elasticsearch to a new version.</p>
<p>In production use, you will almost certainly want to change the locations of the
<code class="literal">path.data</code> and <code class="literal">path.logs</code> folders:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path:
  logs: /var/log/elasticsearch
  data: /var/data/elasticsearch</pre>
</div>
<p>The RPM and Debian distributions already use custom paths for <code class="literal">data</code> and <code class="literal">logs</code>.</p>
<p>The <code class="literal">path.data</code> settings can be set to multiple paths, in which case all paths
will be used to store data. However, the files belonging to a single shard will
all be stored on the same data path:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">path:
  data:
    - /mnt/elasticsearch_1
    - /mnt/elasticsearch_2
    - /mnt/elasticsearch_3</pre>
</div>
<h3><a id="cluster-name"></a>Cluster name setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/cluster-name.asciidoc">edit</a></h3>
<p>A node can only join a cluster when it shares its <code class="literal">cluster.name</code> with all the
other nodes in the cluster. The default name is <code class="literal">elasticsearch</code>, but you should
change it to an appropriate name that describes the purpose of the cluster.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cluster.name: logging-prod</pre>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Do not reuse the same cluster names in different environments.
Otherwise, nodes might join the wrong cluster.</p>
</div>
</div>
<h3><a id="node-name"></a>Node name setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/node-name.asciidoc">edit</a></h3>
<p>Elasticsearch uses <code class="literal">node.name</code> as a human-readable identifier for a
particular instance of Elasticsearch. This name is included in the response
of many APIs. The node name defaults to the hostname of the machine when
Elasticsearch starts, but can be configured explicitly in
<code class="literal">elasticsearch.yml</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">node.name: prod-data-2</pre>
</div>
<h3><a id="network.host"></a>Network host setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/network-host.asciidoc">edit</a></h3>
<p>By default, Elasticsearch binds to loopback addresses only such as <code class="literal">127.0.0.1</code>
and <code class="literal">[::1]</code>. This binding is sufficient to run a single development node on a
server.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>more than one node can be started from the same <code class="literal">$ES_HOME</code>
location on a single node. This setup can be useful for testing Elasticsearch&#8217;s
ability to form clusters, but it is not a configuration recommended for
production.</p>
</div>
</div>
<p>To form a cluster with nodes on other servers, your
node will need to bind to a non-loopback address. While there are many
<a class="xref" href="modules-network.html" title="Network settings">network settings</a>, usually all you need to configure is
<code class="literal">network.host</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">network.host: 192.168.1.10</pre>
</div>
<p>The <code class="literal">network.host</code> setting also understands some special values such as
<code class="literal">_local_</code>, <code class="literal">_site_</code>, <code class="literal">_global_</code> and modifiers like <code class="literal">:ip4</code> and <code class="literal">:ip6</code>. See
<a class="xref" href="modules-network.html#network-interface-values" title="Special values for network.host">Special values for <code class="literal">network.host</code></a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>When you provide a custom setting for <code class="literal">network.host</code>,
Elasticsearch assumes that you are moving from development mode to production
mode, and upgrades a number of system startup checks from warnings to
exceptions. See the differences between <a class="xref" href="system-config.html#dev-vs-prod" title="Development mode vs production mode">development and production modes</a>.</p>
</div>
</div>
<h3><a id="discovery-settings"></a>Discovery and cluster formation settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/discovery-settings.asciidoc">edit</a></h3>
<p>Configure two important discovery and cluster formation settings before going
to production so that nodes in the cluster can discover each other and elect a
master node.</p>
<h4><a id="unicast.hosts"></a><code class="literal">discovery.seed_hosts</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/discovery-settings.asciidoc">edit</a></h4>
<p>Out of the box, without any network configuration, Elasticsearch will bind to
the available loopback addresses and scan local ports <code class="literal">9300</code> to <code class="literal">9305</code> to
connect with other nodes running on the same server. This behavior provides an
auto-clustering experience without having to do any configuration.</p>
<p>When you want to form a cluster with nodes on other hosts, use the
<a class="xref" href="settings.html#static-cluster-setting">static</a> <code class="literal">discovery.seed_hosts</code> setting. This setting
provides a list of other nodes in the cluster
that are master-eligible and likely to be live and contactable to seed
the <a class="xref" href="modules-discovery-hosts-providers.html" title="Discovery">discovery process</a>. This setting
accepts a YAML sequence or array of the addresses of all the master-eligible
nodes in the cluster. Each address can be either an IP address or a hostname
that resolves to one or more IP addresses via DNS.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">discovery.seed_hosts:
   - 192.168.1.10:9300
   - 192.168.1.11 <a id="CO9-1"></a><i class="conum" data-value="1"></i>
   - seeds.mydomain.com <a id="CO9-2"></a><i class="conum" data-value="2"></i>
   - [0:0:0:0:0:ffff:c0a8:10c]:9301 <a id="CO9-3"></a><i class="conum" data-value="3"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The port is optional and defaults to <code class="literal">9300</code>, but can
be <a class="xref" href="modules-discovery-hosts-providers.html#built-in-hosts-providers" title="Seed hosts providers">overridden</a>.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>If a hostname resolves to multiple IP addresses, the node will attempt to
discover other nodes at all resolved addresses.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO9-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>IPv6 addresses must be enclosed in square brackets.</p>
</td>
</tr>
</table>
</div>
<p>If your master-eligible nodes do not have fixed names or addresses, use an
<a class="xref" href="modules-discovery-hosts-providers.html#built-in-hosts-providers" title="Seed hosts providers">alternative hosts provider</a> to find their addresses
dynamically.</p>
<h4><a id="initial_master_nodes"></a><code class="literal">cluster.initial_master_nodes</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/discovery-settings.asciidoc">edit</a></h4>
<p>When you start an Elasticsearch cluster for the first time, a
<a class="xref" href="modules-discovery-bootstrap-cluster.html" title="Bootstrapping a cluster">cluster bootstrapping</a> step
determines the set of master-eligible nodes whose votes are counted in the
first election. In <a class="xref" href="bootstrap-checks.html#dev-vs-prod-mode" title="Development vs. production mode">development mode</a>, with no discovery
settings configured, this step is performed automatically by the nodes
themselves.</p>
<p>Because auto-bootstrapping is <a class="xref" href="modules-discovery-quorums.html" title="Quorum-based decision making">inherently
unsafe</a>, when starting a new cluster in production
mode, you must explicitly list the master-eligible nodes whose votes should be
counted in the very first election. You set this list using the
<code class="literal">cluster.initial_master_nodes</code> setting.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>After the cluster forms successfully for the first time, remove the <code class="literal">cluster.initial_master_nodes</code> setting from each nodes'
configuration. Do not use this setting when
restarting a cluster or adding a new node to an existing cluster.</p>
</div>
</div>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">discovery.seed_hosts:
   - 192.168.1.10:9300
   - 192.168.1.11
   - seeds.mydomain.com
   - [0:0:0:0:0:ffff:c0a8:10c]:9301
cluster.initial_master_nodes: <a id="CO10-1"></a><i class="conum" data-value="1"></i>
   - master-node-a
   - master-node-b
   - master-node-c</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO10-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Identify the initial master nodes by their <a class="xref" href="important-settings.html#node-name" title="Node name setting"><code class="literal">node.name</code></a>, which
defaults to their hostname. Ensure that the value in
<code class="literal">cluster.initial_master_nodes</code> matches the <code class="literal">node.name</code> exactly. If you use a
fully-qualified domain name (FQDN) such as <code class="literal">master-node-a.example.com</code> for your
node names, then you must use the FQDN in this list. Conversely, if <code class="literal">node.name</code>
is a bare hostname without any trailing qualifiers, you must also omit the
trailing qualifiers in <code class="literal">cluster.initial_master_nodes</code>.</p>
</td>
</tr>
</table>
</div>
<p>See <a class="xref" href="modules-discovery-bootstrap-cluster.html" title="Bootstrapping a cluster">bootstrapping a cluster</a> and
<a class="xref" href="modules-discovery-settings.html" title="Discovery and cluster formation settings">discovery and cluster formation settings</a>.</p>
<h3><a id="heap-size-settings"></a>Heap size settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/heap-size.asciidoc">edit</a></h3>
<p>By default, Elasticsearch tells the JVM to use a heap with a minimum and maximum
size of 1 GB. When moving to production, it is important to configure heap size
to ensure that Elasticsearch has enough heap available.</p>
<p>Elasticsearch will assign the entire heap specified in
<a class="xref" href="jvm-options.html" title="Setting JVM options">jvm.options</a> via the <code class="literal">Xms</code> (minimum heap size) and <code class="literal">Xmx</code> (maximum
heap size) settings. These two settings must be equal to each other.</p>
<p>The value for these settings depends on the amount of RAM available on your
server:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Set <code class="literal">Xmx</code> and <code class="literal">Xms</code> to no more than 50% of your physical RAM. Elasticsearch requires
memory for purposes other than the JVM heap and it is important to leave
space for this. For instance, Elasticsearch uses off-heap buffers for efficient
network communication, relies on the operating system&#8217;s filesystem cache for
efficient access to files, and the JVM itself requires some memory too. It is
normal to observe the Elasticsearch process using more memory than the limit
configured with the <code class="literal">Xmx</code> setting.
</li>
<li class="listitem">
<p>Set <code class="literal">Xmx</code> and <code class="literal">Xms</code> to no more than the threshold that the JVM uses for
compressed object pointers (compressed oops). The exact threshold varies but
is near 32 GB. You can verify that you are under the threshold by looking for a line in the logs like the following:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">heap size [1.9gb], compressed ordinary object pointers [true]</pre>
</div>
</li>
<li class="listitem">
<p>Set <code class="literal">Xmx</code> and <code class="literal">Xms</code> to no more than the threshold for zero-based
compressed oops. The exact threshold varies but 26 GB is safe on most
systems and can be as large as 30 GB on some systems. You can verify that
you are under this threshold by starting Elasticsearch with the JVM options
<code class="literal">-XX:+UnlockDiagnosticVMOptions -XX:+PrintCompressedOopsMode</code> and looking for
a line like the following:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">heap address: 0x000000011be00000, size: 27648 MB, zero based Compressed Oops</pre>
</div>
<p>This line shows that zero-based compressed oops are enabled. If zero-based
compressed oops are not enabled, you&#8217;ll see a line like the following instead:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">heap address: 0x0000000118400000, size: 28672 MB, Compressed Oops with base: 0x00000001183ff000</pre>
</div>
</li>
</ul>
</div>
<p>The more heap available to Elasticsearch, the more memory it can use for its internal
caches, but the less memory it leaves available for the operating system to use
for the filesystem cache. Also, larger heaps can cause longer garbage
collection pauses.</p>
<p>Here is an example of how to set the heap size via a <code class="literal">jvm.options.d/</code> file:</p>
<div class="pre_wrapper lang-txt">
<pre class="programlisting prettyprint lang-txt">-Xms2g <a id="CO11-1"></a><i class="conum" data-value="1"></i>
-Xmx2g <a id="CO11-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO11-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Set the minimum heap size to 2g.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO11-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Set the maximum heap size to 2g.</p>
</td>
</tr>
</table>
</div>
<p>Using <code class="literal">jvm.options.d</code> is the preferred method for configuring the heap size for
production deployments.</p>
<p>It is also possible to set the heap size via the <code class="literal">ES_JAVA_OPTS</code> environment
variable. This is generally discouraged for production deployments but is useful
for testing because it overrides all other means of setting JVM options.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">ES_JAVA_OPTS="-Xms2g -Xmx2g" ./bin/elasticsearch <a id="CO12-1"></a><i class="conum" data-value="1"></i>
ES_JAVA_OPTS="-Xms4000m -Xmx4000m" ./bin/elasticsearch <a id="CO12-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO12-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Set the minimum and maximum heap size to 2 GB.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO12-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Set the minimum and maximum heap size to 4000 MB.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Configuring the heap for the <a class="xref" href="zip-windows.html#windows-service" title="Installing Elasticsearch as a Service on Windows">Windows service</a> is
different than the above. The values initially populated for the Windows
service can be configured as above but are different after the service has been
installed. Consult the <a class="xref" href="zip-windows.html#windows-service" title="Installing Elasticsearch as a Service on Windows">Windows service documentation</a> for
additional details.</p>
</div>
</div>
<h3><a id="heap-dump-path"></a>JVM heap dump path setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/heap-dump-path.asciidoc">edit</a></h3>
<p>By default, Elasticsearch configures the JVM to dump the heap on out of
memory exceptions to the default data directory. On <a class="xref" href="rpm.html" title="Install Elasticsearch with RPM">RPM</a> and
<a class="xref" href="deb.html" title="Install Elasticsearch with Debian Package">Debian</a> packages, the data directory is <code class="literal">/var/lib/elasticsearch</code>. On
<a class="xref" href="targz.html" title="Install Elasticsearch from archive on Linux or MacOS">Linux and MacOS</a> and <a class="xref" href="zip-windows.html" title="Install Elasticsearch with .zip on Windows">Windows</a> distributions,
the <code class="literal">data</code> directory is located under the root of the Elasticsearch installation.</p>
<p>If this path is not suitable for receiving heap dumps, modify the
<code class="literal">-XX:HeapDumpPath=...</code> entry in <a class="xref" href="jvm-options.html" title="Setting JVM options"><code class="literal">jvm.options</code></a>:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If you specify a directory, the JVM will generate a filename for the heap
dump based on the PID of the running instance.
</li>
<li class="listitem">
If you specify a fixed filename instead of a directory, the file must
not exist when the JVM needs to perform a heap dump on an out of memory
exception. Otherwise, the heap dump will fail.
</li>
</ul>
</div>
<h3><a id="gc-logging"></a>GC logging settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/gc-logging.asciidoc">edit</a></h3>
<p>By default, Elasticsearch enables garbage collection (GC) logs. These are configured in
<a class="xref" href="jvm-options.html" title="Setting JVM options"><code class="literal">jvm.options</code></a> and output to the same default location as
the Elasticsearch logs. The default configuration rotates the logs every 64 MB and
can consume up to 2 GB of disk space.</p>
<p>You can reconfigure JVM logging using the command line options described in
<a href="https://openjdk.java.net/jeps/158" class="ulink" target="_top">JEP 158: Unified JVM Logging</a>. Unless you
change the default <code class="literal">jvm.options</code> file directly, the Elasticsearch default
configuration is applied in addition to your own settings. To disable the
default configuration, first disable logging by supplying the
<code class="literal">-Xlog:disable</code> option, then supply your own command line options. This
disables <em>all</em> JVM logging, so be sure to review the available options
and enable everything that you require.</p>
<p>To see further options not contained in the original JEP, see
<a href="https://docs.oracle.com/en/java/javase/13/docs/specs/man/java.html#enable-logging-with-the-jvm-unified-logging-framework" class="ulink" target="_top">Enable
Logging with the JVM Unified Logging Framework</a>.</p>
<h4><a id="gc-logging-examples"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/gc-logging.asciidoc">edit</a></h4>
<p>Change the default GC log output location to <code class="literal">/opt/my-app/gc.log</code> by
  creating <code class="literal">$ES_HOME/config/jvm.options.d/gc.options</code> with some sample
  options:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell"># Turn off all previous logging configuratons
-Xlog:disable

# Default settings from JEP 158, but with `utctime` instead of `uptime` to match the next line
-Xlog:all=warning:stderr:utctime,level,tags

# Enable GC logging to a custom location with a variety of options
-Xlog:gc*,gc+age=trace,safepoint:file=/opt/my-app/gc.log:utctime,pid,tags:filecount=32,filesize=64m</pre>
</div>
<p>Configure an Elasticsearch <a class="xref" href="docker.html" title="Install Elasticsearch with Docker">Docker container</a> to send GC debug logs to
  standard error (<code class="literal">stderr</code>). This lets the container orchestrator
  handle the output. If using the <code class="literal">ES_JAVA_OPTS</code> environment variable,
  specify:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">MY_OPTS="-Xlog:disable -Xlog:all=warning:stderr:utctime,level,tags -Xlog:gc=debug:stderr:utctime"
docker run -e ES_JAVA_OPTS="$MY_OPTS" # etc</pre>
</div>
<h3><a id="es-tmpdir"></a>Temporary directory settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/es-tmpdir.asciidoc">edit</a></h3>
<p>By default, Elasticsearch uses a private temporary directory that the startup
script creates immediately below the system temporary directory.</p>
<p>On some Linux distributions, a system utility will clean files and directories
from <code class="literal">/tmp</code> if they have not been recently accessed. This behavior can lead to
the private temporary directory being removed while Elasticsearch is running if
features that require the temporary directory are not used for a long time.
Removing the private temporary directory causes problems if a feature that
requires this directory is subsequently used.</p>
<p>If you install Elasticsearch using the <code class="literal">.deb</code> or <code class="literal">.rpm</code> packages and run it
under <code class="literal">systemd</code>, the private temporary directory that Elasticsearch uses
is excluded from periodic cleanup.</p>
<p>If you intend to run the <code class="literal">.tar.gz</code> distribution on Linux or MacOS for
an extended period, consider creating a dedicated temporary
directory for Elasticsearch that is not under a path that will have old files
and directories cleaned from it. This directory should have permissions set
so that only the user that Elasticsearch runs as can access it. Then, set the
<code class="literal">$ES_TMPDIR</code> environment variable to point to this directory before starting
Elasticsearch.</p>
<h3><a id="error-file-path"></a>JVM fatal error log setting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.10/docs/reference/setup/important-settings/error-file.asciidoc">edit</a></h3>
<p>By default, Elasticsearch configures the JVM to write fatal error logs
to the default logging directory. On <a class="xref" href="rpm.html" title="Install Elasticsearch with RPM">RPM</a> and <a class="xref" href="deb.html" title="Install Elasticsearch with Debian Package">Debian</a> packages,
this directory is <code class="literal">/var/log/elasticsearch</code>. On <a class="xref" href="targz.html" title="Install Elasticsearch from archive on Linux or MacOS">Linux and MacOS</a> and <a class="xref" href="zip-windows.html" title="Install Elasticsearch with .zip on Windows">Windows</a> distributions, the <code class="literal">logs</code>
directory is located under the root of the Elasticsearch installation.</p>
<p>These are logs produced by the JVM when it encounters a fatal error, such as a
segmentation fault. If this path is not suitable for receiving logs,
modify the <code class="literal">-XX:ErrorFile=...</code> entry in <a class="xref" href="jvm-options.html" title="Setting JVM options"><code class="literal">jvm.options</code></a>.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="notification-settings.html">« Watcher settings in Elasticsearch</a>
</span>
<span class="next">
<a href="system-config.html">Important System Configuration »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
