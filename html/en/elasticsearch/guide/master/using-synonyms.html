<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using Synonyms
        | Elasticsearch: The Definitive Guide [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [master]" /><link rel="up" href="synonyms.html" title="Synonyms" /><link rel="prev" href="synonyms.html" title="Synonyms" /><link rel="next" href="synonym-formats.html" title="Formatting Synonyms" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/master" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="master" /><meta name="robots" content="noindex,nofollow" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">This information may not apply to the latest version of Elasticsearch.
For the most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="languages.html">Dealing with Human Language</a></span> » <span class="breadcrumb-link"><a href="synonyms.html">Synonyms</a></span> » <span class="breadcrumb-node">Using Synonyms</span></div><div class="navheader"><span class="prev"><a href="synonyms.html">
              « 
              Synonyms</a>
           
        </span><span class="next">
           
          <a href="synonym-formats.html">Formatting Synonyms
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using-synonyms"></a>Using Synonyms<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/260_Synonyms/20_Using_synonyms.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Synonyms can replace existing tokens or<a id="id-1.6.8.9.2.1" class="indexterm"></a>
<a id="id-1.6.8.9.2.2" class="indexterm"></a> be added to the token stream by using the<a id="id-1.6.8.9.2.3" class="indexterm"></a>
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/analysis-synonym-tokenfilter.html" target="_top"><code class="literal">synonym</code> token filter</a>:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "filter": {
        "my_synonym_filter": {
          "type": "synonym", <a id="CO179-1"></a><i class="conum" data-value="1"></i>
          "synonyms": [ <a id="CO179-2"></a><i class="conum" data-value="2"></i>
            "british,english",
            "queen,monarch"
          ]
        }
      },
      "analyzer": {
        "my_synonyms": {
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "my_synonym_filter" <a id="CO179-3"></a><i class="conum" data-value="3"></i>
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO179-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
First, we define a token filter of type <code class="literal">synonym</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO179-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
We discuss synonym formats in <a class="xref" href="synonym-formats.html" title="Formatting Synonyms">Formatting Synonyms</a>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO179-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
Then we create a custom analyzer that uses the <code class="literal">my_synonym_filter</code>.
</p></td></tr></table></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>Synonyms can be specified inline with the <code class="literal">synonyms</code> parameter, or in a
synonyms file that must<a id="id-1.6.8.9.5.1.2" class="indexterm"></a>
<a id="id-1.6.8.9.5.1.3" class="indexterm"></a> be present on every node in the cluster. The path to
the synonyms file should be specified with the <code class="literal">synonyms_path</code> parameter, and
should be either absolute or relative to the Elasticsearch <code class="literal">config</code> directory.
See <a class="xref" href="using-stopwords.html#updating-stopwords" title="Updating Stopwords">Updating Stopwords</a> for techniques that can be used to refresh the
synonyms list.</p></div></div><p>Testing our analyzer with the <code class="literal">analyze</code> API shows the following:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">GET /my_index/_analyze?analyzer=my_synonyms
Elizabeth is the English queen</pre></div><div class="pre_wrapper lang-text"><pre class="programlisting prettyprint lang-text">Pos 1: (elizabeth)
Pos 2: (is)
Pos 3: (the)
Pos 4: (british,english) <a id="CO180-1"></a><i class="conum" data-value="1"></i>
Pos 5: (queen,monarch) <a id="CO180-2"></a><i class="conum" data-value="2"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO180-1"><i class="conum" data-value="1"></i></a> <a href="#CO180-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
All synonyms occupy the same position as the original term.
</p></td></tr></table></div><p>A document like this will match queries for any of the following: <code class="literal">English queen</code>,
<code class="literal">British queen</code>, <code class="literal">English monarch</code>, or <code class="literal">British monarch</code>.
Even a phrase query will work, because the position of
each term has been preserved.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>Using the same <code class="literal">synonym</code> token filter at both index time and search time is
redundant.<a id="id-1.6.8.9.11.1.2" class="indexterm"></a>
<a id="id-1.6.8.9.11.1.3" class="indexterm"></a>  If, at index time, we replace <code class="literal">English</code> with the two terms
<code class="literal">english</code> and <code class="literal">british</code>, then at search time we need to search for only one of
those terms.  Alternatively, if we don’t use synonyms at index time, then at
search time, we would need to convert a query for <code class="literal">English</code> into a query for
<code class="literal">english OR british</code>.</p><p>Whether to do synonym expansion at search or index time can be a difficult
choice.  We will explore the options more in <a class="xref" href="synonyms-expand-or-contract.html" title="Expand or contract">Expand or contract</a>.</p></div></div></div><div class="navfooter"><span class="prev"><a href="synonyms.html">
              « 
              Synonyms</a>
           
        </span><span class="next">
           
          <a href="synonym-formats.html">Formatting Synonyms
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
window.initial_state = {}</script>
  </body>
</html>
