<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Mixed-Language Fields
        | Elasticsearch: The Definitive Guide [master]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [master]" /><link rel="up" href="language-intro.html" title="Getting Started with Languages" /><link rel="prev" href="one-lang-fields.html" title="One Language per Field" /><link rel="next" href="identifying-words.html" title="Identifying Words" /><meta name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/master" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="master" /><meta name="robots" content="noindex,nofollow" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">This information may not apply to the latest version of Elasticsearch.
For the most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="languages.html">Dealing with Human Language</a></span> » <span class="breadcrumb-link"><a href="language-intro.html">Getting Started with Languages</a></span> » <span class="breadcrumb-node">Mixed-Language Fields</span></div><div class="navheader"><span class="prev"><a href="one-lang-fields.html">
              « 
              One Language per Field</a>
           
        </span><span class="next">
           
          <a href="identifying-words.html">Identifying Words
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mixed-lang-fields"></a>Mixed-Language Fields<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/200_Language_intro/60_Mixed_language_fields.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Usually, documents that mix multiple languages in a single field come from
sources beyond your control, such as pages scraped from the Web:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{ "body": "Page not found / Seite nicht gefunden / Page non trouvée" }</pre></div><p>They are the most difficult type of multilingual document to handle correctly.
Although you can simply use the <code class="literal">standard</code> analyzer on all fields, your documents
will be less searchable than if you had used an appropriate stemmer. But of
course, you can’t choose just one stemmer—stemmers are language specific.
Or rather, stemmers are language and script specific.  As discussed in
<a class="xref" href="language-pitfalls.html#different-scripts" title="Stemmer per Script">Stemmer per Script</a>, if every language uses a different script, then
stemmers can be combined.</p><p>Assuming that your mix of languages uses the same script such as Latin, you have
three choices available to you:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Split into separate fields
</li><li class="listitem">
Analyze multiple times
</li><li class="listitem">
Use n-grams
</li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_split_into_separate_fields"></a>Split into Separate Fields<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/200_Language_intro/60_Mixed_language_fields.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The Compact Language Detector mentioned in <a class="xref" href="language-pitfalls.html#identifying-language" title="Identifying Language">Identifying Language</a> can tell
you which parts of the document are in which language.  You can split up the
text based on language and use the same approach as was used in
<a class="xref" href="one-lang-fields.html" title="One Language per Field">One Language per Field</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_analyze_multiple_times"></a>Analyze Multiple Times<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/200_Language_intro/60_Mixed_language_fields.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>If you primarily deal with a limited number of languages, you could use
multi-fields to analyze the text once per language:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">PUT /movies
{
  "mappings": {
    "title": {
      "properties": {
        "title": { <a id="CO133-1"></a><i class="conum" data-value="1"></i>
          "type": "text",
          "fields": {
            "de": { <a id="CO133-2"></a><i class="conum" data-value="2"></i>
              "type":     "text",
              "analyzer": "german"
            },
            "en": { <a id="CO133-3"></a><i class="conum" data-value="3"></i>
              "type":     "text",
              "analyzer": "english"
            },
            "fr": { <a id="CO133-4"></a><i class="conum" data-value="4"></i>
              "type":     "text",
              "analyzer": "french"
            },
            "es": { <a id="CO133-5"></a><i class="conum" data-value="5"></i>
              "type":     "text",
              "analyzer": "spanish"
            }
          }
        }
      }
    }
  }
}</pre></div><div class="console_widget" data-snippet="snippets/mixed-lang-fields/1.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO133-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
The main <code class="literal">title</code> field uses the <code class="literal">standard</code> analyzer.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO133-2"><i class="conum" data-value="2"></i></a> <a href="#CO133-3"><i class="conum" data-value="3"></i></a> <a href="#CO133-4"><i class="conum" data-value="4"></i></a> <a href="#CO133-5"><i class="conum" data-value="5"></i></a> </p></td><td valign="top" align="left"><p>
Each subfield applies a different language analyzer
    to the text in the <code class="literal">title</code> field.
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_use_n_grams"></a>Use n-grams<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/200_Language_intro/60_Mixed_language_fields.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>You could index all words as n-grams, using the same approach as
described in <a class="xref" href="ngrams-compound-words.html" title="Ngrams for Compound Words">Ngrams for Compound Words</a>.  Most inflections involve adding a
suffix (or in some languages, a prefix) to a word, so by breaking each word into
n-grams, you have a good chance of matching words that are similar
but not exactly the same. This can be combined with the <span class="emphasis"><em>analyze-multiple
times</em></span> approach to provide a catchall field for unsupported languages:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">PUT /movies
{
  "settings": {
    "analysis": {
      "filter": {
        "trigrams_filter": {
          "type": "ngram",
          "min_gram": 3,
          "max_gram": 3
        }
      },
      "analyzer": {
        "trigrams": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "trigrams_filter"
          ]
        }
      }
    }
  },
  "mappings": {
    "title": {
      "properties": {
        "title": {
          "type": "text",
          "fields": {
            "de": {
              "type": "text",
              "analyzer": "german"
            },
            "en": {
              "type": "text",
              "analyzer": "english"
            },
            "fr": {
              "type": "text",
              "analyzer": "french"
            },
            "es": {
              "type": "text",
              "analyzer": "spanish"
            },
            "general": { <a id="CO134-1"></a><i class="conum" data-value="1"></i>
              "type": "text",
              "analyzer": "trigrams"
            }
          }
        }
      }
    }
  }
}</pre></div><div class="console_widget" data-snippet="snippets/mixed-lang-fields/2.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO134-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">title.general</code> field uses the <code class="literal">trigrams</code> custom analyzer
    to index any language.
</p></td></tr></table></div><p>When querying the catchall <code class="literal">general</code> field, you can use
<code class="literal">minimum_should_match</code> to reduce the number of low-quality matches.  It may
also be necessary to boost the other fields slightly more than the <code class="literal">general</code>
field, so that matches on the main language fields are given more weight
than those on the <code class="literal">general</code> field:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">PUT /movies/movie/1
{ "title": "club de la lucha" }


PUT /movies/movie/2
{ "title": "Superhero Fight Club" }

GET /movies/movie/_search
{
    "query": {
        "multi_match": {
            "query":    "club de la lucha",
            "fields": [ "title*^1.5", "title.general" ], <a id="CO135-1"></a><i class="conum" data-value="1"></i>
            "type":     "most_fields",
            "minimum_should_match": "75%" <a id="CO135-2"></a><i class="conum" data-value="2"></i>
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/mixed-lang-fields/3.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO135-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
All <code class="literal">title</code> or <code class="literal">title.*</code> fields are given a slight boost over the
    <code class="literal">title.general</code> field.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO135-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">minimum_should_match</code> parameter reduces the number of low-quality
    matches returned, especially important for the <code class="literal">title.general</code> field.
</p></td></tr></table></div></div></div><div class="navfooter"><span class="prev"><a href="one-lang-fields.html">
              « 
              One Language per Field</a>
           
        </span><span class="next">
           
          <a href="identifying-words.html">Identifying Words
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
