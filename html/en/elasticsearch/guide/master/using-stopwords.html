<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using Stopwords
        | Elasticsearch: The Definitive Guide [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [master]" /><link rel="up" href="stopwords.html" title="Stopwords: Performance Versus Precision" /><link rel="prev" href="pros-cons-stopwords.html" title="Pros and Cons of Stopwords" /><link rel="next" href="stopwords-performance.html" title="Stopwords and Performance" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/master" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="master" /><meta name="robots" content="noindex,nofollow" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">This information may not apply to the latest version of Elasticsearch.
For the most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="languages.html">Dealing with Human Language</a></span> » <span class="breadcrumb-link"><a href="stopwords.html">Stopwords: Performance Versus Precision</a></span> » <span class="breadcrumb-node">Using Stopwords</span></div><div class="navheader"><span class="prev"><a href="pros-cons-stopwords.html">
              « 
              Pros and Cons of Stopwords</a>
           
        </span><span class="next">
           
          <a href="stopwords-performance.html">Stopwords and Performance
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using-stopwords"></a>Using Stopwords<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/20_Using_stopwords.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The removal of stopwords is <a id="id-1.6.7.12.2.1" class="indexterm"></a>
<a id="id-1.6.7.12.2.2" class="indexterm"></a>handled by the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/analysis-stop-tokenfilter.html" target="_top"><code class="literal">stop</code> token filter</a> which can be used
when <a id="id-1.6.7.12.2.4" class="indexterm"></a>creating a <code class="literal">custom</code> analyzer (see <a class="xref" href="using-stopwords.html#stop-token-filter" title="Using the stop Token Filter">Using the stop Token Filter</a>).
However, some out-of-the-box analyzers<a id="id-1.6.7.12.2.7" class="indexterm"></a>
<a id="id-1.6.7.12.2.8" class="indexterm"></a><a id="id-1.6.7.12.2.9" class="indexterm"></a>
<a id="id-1.6.7.12.2.10" class="indexterm"></a><a id="id-1.6.7.12.2.11" class="indexterm"></a>
<a id="id-1.6.7.12.2.12" class="indexterm"></a><a id="id-1.6.7.12.2.13" class="indexterm"></a>
<a id="id-1.6.7.12.2.14" class="indexterm"></a> come with the <code class="literal">stop</code> filter pre-integrated:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/analysis-lang-analyzer.html" target="_top">Language analyzers</a>
</span></dt><dd>
    Each language analyzer defaults to using the appropriate stopwords list
    for that language. For instance, the <code class="literal">english</code> analyzer uses the
    <code class="literal">_english_</code> stopwords list.
</dd><dt><span class="term">
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/analysis-standard-analyzer.html" target="_top"><code class="literal">standard</code> analyzer</a>
</span></dt><dd>
    Defaults to the empty stopwords list: <code class="literal">_none_</code>, essentially disabling
    stopwords.
</dd><dt><span class="term">
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/analysis-pattern-analyzer.html" target="_top"><code class="literal">pattern</code> analyzer</a>
</span></dt><dd>
    Defaults to <code class="literal">_none_</code>, like the <code class="literal">standard</code> analyzer.
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_stopwords_and_the_standard_analyzer"></a>Stopwords and the Standard Analyzer<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/20_Using_stopwords.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>To use custom stopwords in conjunction with <a id="id-1.6.7.12.4.2.1" class="indexterm"></a>
<a id="id-1.6.7.12.4.2.2" class="indexterm"></a><a id="id-1.6.7.12.4.2.3" class="indexterm"></a>
<a id="id-1.6.7.12.4.2.4" class="indexterm"></a>the <code class="literal">standard</code> analyzer, all we
need to do is to create a configured version of the analyzer and pass in the
list of <code class="literal">stopwords</code> that we require:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": { <a id="CO167-1"></a><i class="conum" data-value="1"></i>
          "type": "standard", <a id="CO167-2"></a><i class="conum" data-value="2"></i>
          "stopwords": [ "and", "the" ] <a id="CO167-3"></a><i class="conum" data-value="3"></i>
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO167-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
This is a custom analyzer called <code class="literal">my_analyzer</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO167-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
This analyzer is the <code class="literal">standard</code> analyzer with some custom configuration.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO167-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
The stopwords to filter out are <code class="literal">and</code> and <code class="literal">the</code>.
</p></td></tr></table></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>This same technique can be used to configure custom stopword lists for
any of the language analyzers.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="maintaining-positions"></a>Maintaining Positions<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/20_Using_stopwords.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The output from the <code class="literal">analyze</code> API<a id="id-1.6.7.12.5.2.2" class="indexterm"></a>
<a id="id-1.6.7.12.5.2.3" class="indexterm"></a> is quite interesting:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">GET /my_index/_analyze?analyzer=my_analyzer
The quick and the dead</pre></div><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">{
   "tokens": [
      {
         "token":        "quick",
         "start_offset": 4,
         "end_offset":   9,
         "type":         "&lt;ALPHANUM&gt;",
         "position":     1 <a id="CO168-1"></a><i class="conum" data-value="1"></i>
      },
      {
         "token":        "dead",
         "start_offset": 18,
         "end_offset":   22,
         "type":         "&lt;ALPHANUM&gt;",
         "position":     4 <a id="CO168-2"></a><i class="conum" data-value="2"></i>
      }
   ]
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO168-1"><i class="conum" data-value="1"></i></a> <a href="#CO168-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
Note the <code class="literal">position</code> of each token.
</p></td></tr></table></div><p>The stopwords have been filtered out, as expected, but the interesting part is
that the <code class="literal">position</code> of the<a id="id-1.6.7.12.5.6.2" class="indexterm"></a>
<a id="id-1.6.7.12.5.6.3" class="indexterm"></a>
<a id="id-1.6.7.12.5.6.4" class="indexterm"></a> two remaining terms is unchanged: <code class="literal">quick</code> is the
second word in the original sentence, and <code class="literal">dead</code> is the fifth. This is
important for phrase queries—if the positions of each term had been
adjusted, a phrase query for <code class="literal">quick dead</code> would have matched the preceding
example incorrectly.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="specifying-stopwords"></a>Specifying Stopwords<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/20_Using_stopwords.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Stopwords can be passed inline, as we did in <a id="id-1.6.7.12.6.2.1" class="indexterm"></a>
<a id="id-1.6.7.12.6.2.2" class="indexterm"></a>the previous example, by
specifying an array:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">"stopwords": [ "and", "the" ]</pre></div><p>The default stopword list for a particular language can be specified using the
<code class="literal">_lang_</code> notation:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">"stopwords": "_english_"</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>The predefined language-specific stopword<a id="id-1.6.7.12.6.6.1.1" class="indexterm"></a>
<a id="id-1.6.7.12.6.6.1.2" class="indexterm"></a> lists available in
Elasticsearch can be found in the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/analysis-stop-tokenfilter.html" target="_top"><code class="literal">stop</code> token filter</a> documentation.</p></div></div><p>Stopwords can be disabled by <a id="id-1.6.7.12.6.7.1" class="indexterm"></a>
<a id="id-1.6.7.12.6.7.2" class="indexterm"></a>specifying the special list: <code class="literal">_none_</code>.  For
instance, to use the <code class="literal">english</code> analyzer<a id="id-1.6.7.12.6.7.5" class="indexterm"></a>
<a id="id-1.6.7.12.6.7.6" class="indexterm"></a> without stopwords, you can do the
following:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_english": {
          "type":      "english", <a id="CO169-1"></a><i class="conum" data-value="1"></i>
          "stopwords": "_none_" <a id="CO169-2"></a><i class="conum" data-value="2"></i>
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO169-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">my_english</code> analyzer is based on the <code class="literal">english</code> analyzer.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO169-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
But stopwords are disabled.
</p></td></tr></table></div><p>Finally, stopwords can also be listed in a file with one word per line.  The
file must be present on all nodes in the cluster, and the path can be
specified<a id="id-1.6.7.12.6.10.1" class="indexterm"></a> with the <code class="literal">stopwords_path</code> parameter:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_english": {
          "type":           "english",
          "stopwords_path": "stopwords/english.txt" <a id="CO170-1"></a><i class="conum" data-value="1"></i>
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO170-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
The path to the stopwords file, relative to the Elasticsearch <code class="literal">config</code>
    directory
</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="stop-token-filter"></a>Using the stop Token Filter<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/20_Using_stopwords.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/analysis-stop-tokenfilter.html" target="_top"><code class="literal">stop</code> token filter</a> can be combined
with a tokenizer<a id="id-1.6.7.12.7.2.2" class="indexterm"></a>
<a id="id-1.6.7.12.7.2.3" class="indexterm"></a><a id="id-1.6.7.12.7.2.4" class="indexterm"></a>
<a id="id-1.6.7.12.7.2.5" class="indexterm"></a> and other token filters when you need to create a <code class="literal">custom</code>
analyzer.  For instance, let’s say that we wanted to <a id="id-1.6.7.12.7.2.7" class="indexterm"></a>
<a id="id-1.6.7.12.7.2.8" class="indexterm"></a><a id="id-1.6.7.12.7.2.9" class="indexterm"></a>create a Spanish analyzer
with the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A custom stopwords list
</li><li class="listitem">
The <code class="literal">light_spanish</code> stemmer
</li><li class="listitem">
The <a class="link" href="asciifolding-token-filter.html" title="You Have an Accent"><code class="literal">asciifolding</code> filter</a> to remove diacritics
</li></ul></div><p>We could set that up as follows:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "filter": {
        "spanish_stop": {
          "type":        "stop",
          "stopwords": [ "si", "esta", "el", "la" ]  <a id="CO171-1"></a><i class="conum" data-value="1"></i>
        },
        "light_spanish": { <a id="CO171-2"></a><i class="conum" data-value="2"></i>
          "type":     "stemmer",
          "language": "light_spanish"
        }
      },
      "analyzer": {
        "my_spanish": {
          "tokenizer": "spanish",
          "filter": [ <a id="CO171-3"></a><i class="conum" data-value="3"></i>
            "lowercase",
            "asciifolding",
            "spanish_stop",
            "light_spanish"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO171-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">stop</code> token filter takes the same <code class="literal">stopwords</code> and <code class="literal">stopwords_path</code>
    parameters as the <code class="literal">standard</code> analyzer.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO171-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
See <a class="xref" href="algorithmic-stemmers.html" title="Algorithmic Stemmers">Algorithmic Stemmers</a>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO171-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
The order of token filters is important, as explained next.
</p></td></tr></table></div><p>We have placed the <code class="literal">spanish_stop</code> filter after the <code class="literal">asciifolding</code> filter.<a id="id-1.6.7.12.7.7.3" class="indexterm"></a>
<a id="id-1.6.7.12.7.7.4" class="indexterm"></a> This
means that <code class="literal">esta</code>, <code class="literal">ésta</code>, and <code class="literal">está</code> will first have their diacritics
removed to become just <code class="literal">esta</code>, which will then be removed as a stopword. If,
instead, we wanted to remove <code class="literal">esta</code> and <code class="literal">ésta</code>, but not <code class="literal">está</code>, we
would have to put the <code class="literal">spanish_stop</code> filter <span class="emphasis"><em>before</em></span> the <code class="literal">asciifolding</code>
filter, and specify both words in the stopwords list.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="updating-stopwords"></a>Updating Stopwords<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/240_Stopwords/20_Using_stopwords.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A few techniques can be used to update the list of stopwords
used by an analyzer.<a id="id-1.6.7.12.8.2.1" class="indexterm"></a>
<a id="id-1.6.7.12.8.2.2" class="indexterm"></a><a id="id-1.6.7.12.8.2.3" class="indexterm"></a>
<a id="id-1.6.7.12.8.2.4" class="indexterm"></a> Analyzers are instantiated at index creation time, when a
node is restarted, or when a closed index is reopened.</p><p>If you specify stopwords inline with the <code class="literal">stopwords</code> parameter, your
only option is to close the index and update the analyzer configuration with the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/indices-update-settings.html#update-settings-analysis" target="_top">update index settings API</a>, then reopen
the index.</p><p>Updating stopwords is easier if you specify them in a file with the
<code class="literal">stopwords_path</code> parameter.<a id="id-1.6.7.12.8.4.2" class="indexterm"></a>  You can just update the file (on every node in
the cluster) and then force the analyzers to be re-created by either of these actions:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Closing and reopening the index
  (see <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/2.4/indices-open-close.html" target="_top">open/close index</a>), or
</li><li class="listitem">
Restarting each node in the cluster, one by one
</li></ul></div><p>Of course, updating the stopwords list will not change any documents that have
already been indexed. It will apply only to searches and to new or updated
documents.  To apply the changes to existing documents, you will need to
reindex your data. See <a class="xref" href="reindex.html" title="Reindexing Your Data">Reindexing Your Data</a>.</p></div></div><div class="navfooter"><span class="prev"><a href="pros-cons-stopwords.html">
              « 
              Pros and Cons of Stopwords</a>
           
        </span><span class="next">
           
          <a href="stopwords-performance.html">Stopwords and Performance
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

      </section>
    </div>

    
<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
window.initial_state = {}
</script>

  </body>
</html>
