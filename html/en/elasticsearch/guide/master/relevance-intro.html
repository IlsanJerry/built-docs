<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>What Is Relevance?
        | Elasticsearch: The Definitive Guide [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [master]" /><link rel="up" href="sorting.html" title="Sorting and Relevance" /><link rel="prev" href="multi-fields.html" title="String Sorting and Multifields" /><link rel="next" href="docvalues-intro.html" title="Doc Values Intro" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/master" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="master" /><meta name="robots" content="noindex,nofollow" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">This information may not apply to the latest version of Elasticsearch.
For the most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span> » <span class="breadcrumb-link"><a href="sorting.html">Sorting and Relevance</a></span> » <span class="breadcrumb-node">What Is Relevance?</span></div><div class="navheader"><span class="prev"><a href="multi-fields.html">
              « 
              String Sorting and Multifields</a>
           
        </span><span class="next">
           
          <a href="docvalues-intro.html">Doc Values Intro
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="relevance-intro"></a>What Is Relevance?<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/056_Sorting/90_What_is_relevance.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>We’ve mentioned that, by default, results are returned in descending order of
relevance.<a id="id-1.4.10.5.2.1" class="indexterm"></a>
<a id="id-1.4.10.5.2.2" class="indexterm"></a> But what is relevance? How is it calculated?</p><p>The relevance score of each document is represented by a positive floating-point number called the <code class="literal">_score</code>.<a id="id-1.4.10.5.3.2" class="indexterm"></a>
<a id="id-1.4.10.5.3.3" class="indexterm"></a> The higher the <code class="literal">_score</code>, the more relevant
the document.</p><p>A query clause generates a <code class="literal">_score</code> for each document.  How that score is
calculated depends on the type of query clause.<a id="id-1.4.10.5.4.2" class="indexterm"></a>
<a id="id-1.4.10.5.4.3" class="indexterm"></a> Different query clauses are
used for different purposes: a <code class="literal">fuzzy</code> query might determine the <code class="literal">_score</code> by
calculating how similar the spelling of the found word is to the original
search term; a <code class="literal">terms</code> query would incorporate the percentage of terms that
were found. However, what we usually mean by <span class="emphasis"><em>relevance</em></span> is the algorithm that we
use to calculate how similar the contents of a full-text field are to a full-text query string.</p><p>The standard <span class="emphasis"><em>similarity algorithm</em></span> used in Elasticsearch is<a id="id-1.4.10.5.5.2" class="indexterm"></a><a id="id-1.4.10.5.5.3" class="indexterm"></a>
<a id="id-1.4.10.5.5.4" class="indexterm"></a> known as  <span class="emphasis"><em>term
frequency/inverse document frequency</em></span>, or <span class="emphasis"><em>TF/IDF</em></span>, which takes the following
factors into<a id="id-1.4.10.5.5.7" class="indexterm"></a> account:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Term frequency
</span></dt><dd>
   How often does the term appear in the field? The more often, the more
  relevant. A field containing five mentions of the same term is more likely
  to be relevant than a field containing just one mention.
</dd><dt><span class="term">
Inverse document frequency
</span></dt><dd>
   How often does each term appear in the index? The more often, the <span class="emphasis"><em>less</em></span>
  relevant. Terms that appear in many documents have a lower <span class="emphasis"><em>weight</em></span> than
  more-uncommon terms.
</dd><dt><span class="term">
Field-length norm
</span></dt><dd>
   How long is the field? The longer it is, the less likely it is that words in
  the field will be relevant. A term appearing in a short <code class="literal">title</code> field
  carries more weight than the same term appearing in a long <code class="literal">content</code> field.
</dd></dl></div><p>Individual <a id="id-1.4.10.5.7.1" class="indexterm"></a>queries may combine the TF/IDF score with other factors
such as the term proximity in phrase queries, or term similarity in
fuzzy queries.</p><p>Relevance is not just about full-text search, though. It can equally be applied
to yes/no clauses, where the more clauses that match, the higher the
<code class="literal">_score</code>.</p><p>When multiple query clauses are combined using a compound query<a id="id-1.4.10.5.9.1" class="indexterm"></a>
<a id="id-1.4.10.5.9.2" class="indexterm"></a> like the
<code class="literal">bool</code> query, the <code class="literal">_score</code> from each of these query clauses is combined to
calculate the overall <code class="literal">_score</code> for the document.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>We have a whole chapter dedicated to relevance calculations and how to
bend them to your will: <a class="xref" href="controlling-relevance.html" title="Controlling Relevance"><em>Controlling Relevance</em></a>.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="explain"></a>Understanding the Score<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/056_Sorting/90_What_is_relevance.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>When debugging a complex query,<a id="id-1.4.10.5.11.2.1" class="indexterm"></a>
<a id="id-1.4.10.5.11.2.2" class="indexterm"></a><a id="id-1.4.10.5.11.2.3" class="indexterm"></a>
<a id="id-1.4.10.5.11.2.4" class="indexterm"></a> it can be difficult to understand
exactly how a <code class="literal">_score</code> has been calculated.  Elasticsearch
has the option of producing an <span class="emphasis"><em>explanation</em></span> with every search result,
by setting the <code class="literal">explain</code> parameter<a id="id-1.4.10.5.11.2.8" class="indexterm"></a> to <code class="literal">true</code>.</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">GET /_search?explain <a id="CO29-1"></a><i class="conum" data-value="1"></i>
{
   "query"   : { "match" : { "tweet" : "honeymoon" }}
}</pre></div><div class="sense_widget" data-snippet="snippets/056_Sorting/90_Explain.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO29-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">explain</code> parameter adds an explanation of how the <code class="literal">_score</code> was
    calculated to every result.
</p></td></tr></table></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Adding <code class="literal">explain</code> produces a lot<a id="id-1.4.10.5.11.6.1.2" class="indexterm"></a>
<a id="id-1.4.10.5.11.6.1.3" class="indexterm"></a> of output for every hit, which can look
overwhelming, but it is worth taking the time to understand what it all means.
Don’t worry if it doesn’t all make sense now; you can refer to this section
when you need it.  We’ll work through the output for one <code class="literal">hit</code> bit by bit.</p></div></div><p>First, we have the metadata that is returned on normal search requests:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
    "_index" :      "us",
    "_type" :       "tweet",
    "_id" :         "12",
    "_score" :      0.076713204,
    "_source" :     { ... trimmed ... },</pre></div><p>It adds information about the shard and the node that the document came from,
which is useful to know because term and document frequencies are calculated
per shard, rather than per index:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">    "_shard" :      1,
    "_node" :       "mzIVYCsqSWCG_M_ZffSs9Q",</pre></div><p>Then it provides the <code class="literal">_explanation</code>. Each <a id="id-1.4.10.5.11.11.2" class="indexterm"></a><a id="id-1.4.10.5.11.11.3" class="indexterm"></a>
<a id="id-1.4.10.5.11.11.4" class="indexterm"></a>entry contains a  <code class="literal">description</code>
that tells you what type of calculation is being performed, a <code class="literal">value</code>
that gives you the result of the calculation, and the <code class="literal">details</code> of any
subcalculations that were required:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">"_explanation": { <a id="CO30-1"></a><i class="conum" data-value="1"></i>
   "description": "weight(tweet:honeymoon in 0)
                  [PerFieldSimilarity], result of:",
   "value":       0.076713204,
   "details": [
      {
         "description": "fieldWeight in 0, product of:",
         "value":       0.076713204,
         "details": [
            {  <a id="CO30-2"></a><i class="conum" data-value="2"></i>
               "description": "tf(freq=1.0), with freq of:",
               "value":       1,
               "details": [
                  {
                     "description": "termFreq=1.0",
                     "value":       1
                  }
               ]
            },
            { <a id="CO30-3"></a><i class="conum" data-value="3"></i>
               "description": "idf(docFreq=1, maxDocs=1)",
               "value":       0.30685282
            },
            { <a id="CO30-4"></a><i class="conum" data-value="4"></i>
               "description": "fieldNorm(doc=0)",
               "value":        0.25,
            }
         ]
      }
   ]
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO30-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
Summary of the score calculation for <code class="literal">honeymoon</code>
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO30-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
Term frequency
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO30-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
Inverse document frequency
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO30-4"><i class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>
Field-length norm
</p></td></tr></table></div><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>Producing the <code class="literal">explain</code> output is expensive.<a id="id-1.4.10.5.11.14.1.2" class="indexterm"></a>
<a id="id-1.4.10.5.11.14.1.3" class="indexterm"></a> It is a debugging tool
only. Don’t leave it turned on in production.</p></div></div><p>The first part is the summary of the calculation. It tells us that it has
calculated the <span class="emphasis"><em>weight</em></span>—the <a id="id-1.4.10.5.11.15.2" class="indexterm"></a>
<a id="id-1.4.10.5.11.15.3" class="indexterm"></a><a id="id-1.4.10.5.11.15.4" class="indexterm"></a>
<a id="id-1.4.10.5.11.15.5" class="indexterm"></a>TF/IDF—of the term <code class="literal">honeymoon</code> in the field <code class="literal">tweet</code>, for document <code class="literal">0</code>.  (This is
an internal document ID and, for our purposes, can be ignored.)</p><p>It then provides details<a id="id-1.4.10.5.11.16.1" class="indexterm"></a><a id="id-1.4.10.5.11.16.2" class="indexterm"></a> of how the weight was calculated:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Term frequency
</span></dt><dd>
   How many times did the term <code class="literal">honeymoon</code> appear in the <code class="literal">tweet</code> field in
   this document?
</dd><dt><span class="term">
Inverse document frequency
</span></dt><dd>
   How many times did the term <code class="literal">honeymoon</code> appear in the <code class="literal">tweet</code> field
   of all documents in the index?
</dd><dt><span class="term">
Field-length norm
</span></dt><dd>
   How long is the <code class="literal">tweet</code> field in this document? The longer the field,
   the smaller this number.
</dd></dl></div><p>Explanations for more-complicated queries can appear to be very complex, but
really they just contain more of the same calculations that appear in the
preceding example. This information can be invaluable for debugging why search
results appear in the order that they do.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>The output from <code class="literal">explain</code> can be difficult to read in JSON, but it is easier
when it is formatted as YAML.<a id="id-1.4.10.5.11.19.1.2" class="indexterm"></a>
<a id="id-1.4.10.5.11.19.1.3" class="indexterm"></a><a id="id-1.4.10.5.11.19.1.4" class="indexterm"></a> Just add <code class="literal">format=yaml</code> to the query string.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="explain-api"></a>Understanding Why a Document Matched<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/056_Sorting/90_What_is_relevance.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>While the <code class="literal">explain</code> option adds an explanation for every result, you can use
the <code class="literal">explain</code> API to understand why one particular document matched or, more
important, why it <span class="emphasis"><em>didn’t</em></span> match.<a id="id-1.4.10.5.12.2.4" class="indexterm"></a>
<a id="id-1.4.10.5.12.2.5" class="indexterm"></a><a id="id-1.4.10.5.12.2.6" class="indexterm"></a></p><p>The path for the request is <code class="literal">/index/type/id/_explain</code>, as in the following:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">GET /us/tweet/12/_explain
{
   "query" : {
      "bool" : {
         "filter" : { "term" :  { "user_id" : 2           }},
         "must" :  { "match" : { "tweet" :   "honeymoon" }}
      }
   }
}</pre></div><div class="sense_widget" data-snippet="snippets/056_Sorting/90_Explain_API.json"></div><p>Along with the full explanation<a id="id-1.4.10.5.12.6.1" class="indexterm"></a>
<a id="id-1.4.10.5.12.6.2" class="indexterm"></a> that we saw previously, we also now have a
<code class="literal">description</code> element, which tells us this:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">"failure to match filter: cache(user_id:[2 TO 2])"</pre></div><p>In other words, our <code class="literal">user_id</code> filter clause is preventing the document from
matching.</p></div></div><div class="navfooter"><span class="prev"><a href="multi-fields.html">
              « 
              String Sorting and Multifields</a>
           
        </span><span class="next">
           
          <a href="docvalues-intro.html">Doc Values Intro
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

      </section>
    </div>

    
<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
  
            <script type="text/javascript">
window.initial_state = {}
</script>

            </body>
        
</html>
