<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Changing Similarities
        | Elasticsearch: The Definitive Guide [1.x]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [1.x]" /><link rel="up" href="controlling-relevance.html" title="Controlling Relevance" /><link rel="prev" href="pluggable-similarites.html" title="Pluggable Similarity Algorithms" /><link rel="next" href="relevance-conclusion.html" title="Relevance Tuning Is the Last 10%" /><meta name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/1.x" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="1.x" /><meta name="robots" content="noindex,nofollow" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">This information applies to version 1.x of Elasticsearch. For the
most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [1.x]
    </a></span> » <span class="breadcrumb-link"><a href="search-in-depth.html">Search in Depth</a></span> » <span class="breadcrumb-link"><a href="controlling-relevance.html">Controlling Relevance</a></span> » <span class="breadcrumb-node">Changing Similarities</span></div><div class="navheader"><span class="prev"><a href="pluggable-similarites.html">
              « 
              Pluggable Similarity Algorithms</a>
           
        </span><span class="next">
           
          <a href="relevance-conclusion.html">Relevance Tuning Is the Last 10%
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="changing-similarities"></a>Changing Similarities<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/170_Relevance/75_Changing_similarities.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The similarity algorithm can be set on a per-field basis.<a id="id-1.5.8.22.2.1" class="indexterm"></a><a id="id-1.5.8.22.2.2" class="indexterm"></a>  It’s just a matter
of specifying the chosen algorithm <a id="id-1.5.8.22.2.3" class="indexterm"></a>in the field’s mapping:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "mappings": {
    "doc": {
      "properties": {
        "title": {
          "type":       "string",
          "similarity": "BM25" <a id="CO122-1"></a><i class="conum" data-value="1"></i>
        },
        "body": {
          "type":       "string",
          "similarity": "default" <a id="CO122-2"></a><i class="conum" data-value="2"></i>
        }
      }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO122-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>The <code class="literal">title</code> field uses BM25 similarity.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO122-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>The <code class="literal">body</code> field uses the default similarity (see <a class="xref" href="practical-scoring-function.html" title="Lucene’s Practical Scoring Function">Lucene’s Practical Scoring Function</a>).</p></td></tr></table></div><p>Currently, it is not possible to change the <code class="literal">similarity</code> mapping for an
existing field.  You would need to reindex your data in order to do that.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_configuring_bm25"></a>Configuring BM25<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/170_Relevance/75_Changing_similarities.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Configuring a similarity is much <a id="id-1.5.8.22.6.2.1" class="indexterm"></a><a id="id-1.5.8.22.6.2.2" class="indexterm"></a>like configuring an analyzer. Custom
similarities can be specified when creating an index. For instance:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "similarity": {
      "my_bm25": { <a id="CO123-1"></a><i class="conum" data-value="1"></i>
        "type": "BM25",
        "b":    0 <a id="CO123-2"></a><i class="conum" data-value="2"></i>
      }
    }
  },
  "mappings": {
    "doc": {
      "properties": {
        "title": {
          "type":       "string",
          "similarity": "my_bm25" <a id="CO123-3"></a><i class="conum" data-value="3"></i>
        },
        "body": {
          "type":       "string",
          "similarity": "BM25" <a id="CO123-4"></a><i class="conum" data-value="4"></i>
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO123-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>Create a custom similarity called <code class="literal">my_bm25</code>, based on the built-in <code class="literal">BM25</code> similarity.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO123-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>Disable field-length normalization. See <a class="xref" href="pluggable-similarites.html#bm25-tunability" title="Tuning BM25">Tuning BM25</a>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO123-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>Field <code class="literal">title</code> uses the custom similarity <code class="literal">my_bm25</code>.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO123-4"><i class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>Field <code class="literal">body</code> uses the built-in similarity <code class="literal">BM25</code>.</p></td></tr></table></div><div class="tip admon"><div class="icon"></div><div class="admon_content"><p>A custom similarity can be updated by closing the index, updating the index settings,
     and reopening the index.  This allows you to experiment with different configurations
     without having to reindex your documents.</p></div></div></div></div><div class="navfooter"><span class="prev"><a href="pluggable-similarites.html">
              « 
              Pluggable Similarity Algorithms</a>
           
        </span><span class="next">
           
          <a href="relevance-conclusion.html">Relevance Tuning Is the Last 10%
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
