<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Luceneâ€™s Practical Scoring Function
        | Elasticsearch: The Definitive Guide [1.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [1.x]" /><link rel="up" href="controlling-relevance.html" title="Controlling Relevance" /><link rel="prev" href="scoring-theory.html" title="Theory Behind Relevance Scoring" /><link rel="next" href="query-time-boosting.html" title="Query-Time Boosting" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/1.x" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="1.x" /><meta name="robots" content="noindex,nofollow" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
    <link type="text/css" rel="stylesheet" href="/static/css/guide.css" />
  
<link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">This information applies to version 1.x of Elasticsearch. For the
most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [1.x]
    </a></span> Â» <span class="breadcrumb-link"><a href="search-in-depth.html">Search in Depth</a></span> Â» <span class="breadcrumb-link"><a href="controlling-relevance.html">Controlling Relevance</a></span> Â» <span class="breadcrumb-node">Luceneâ€™s Practical Scoring Function</span></div><div class="navheader"><span class="prev"><a href="scoring-theory.html">
              Â«Â 
              Theory Behind Relevance Scoring</a>
          Â 
        </span><span class="next">
          Â 
          <a href="query-time-boosting.html">Query-Time Boosting
              Â Â»
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="practical-scoring-function"></a>Luceneâ€™s Practical Scoring Function<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/170_Relevance/15_Practical_scoring.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>For multiterm queries, Lucene takes<a id="id-1.5.8.9.2.1" class="indexterm"></a>
<a id="id-1.5.8.9.2.2" class="indexterm"></a>
<a id="id-1.5.8.9.2.3" class="indexterm"></a><a id="id-1.5.8.9.2.4" class="indexterm"></a> the <a class="link" href="scoring-theory.html#boolean-model" title="Boolean Model">Boolean model</a>,
<a class="link" href="scoring-theory.html#tfidf" title="Term Frequency/Inverse Document Frequency (TF/IDF)">TF/IDF</a>, and the <a class="link" href="scoring-theory.html#vector-space-model" title="Vector Space Model">vector space model</a> and
combines <a id="id-1.5.8.9.2.8" class="indexterm"></a><a id="id-1.5.8.9.2.9" class="indexterm"></a> them in a single efficient package that collects matching
documents and scores them as it goes.</p><p>A multiterm query like</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">GET /my_index/doc/_search
{
  "query": {
    "match": {
      "text": "quick fox"
    }
  }
}</pre></div><p>is rewritten internally to look like this:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">GET /my_index/doc/_search
{
  "query": {
    "bool": {
      "should": [
        {"term": { "text": "quick" }},
        {"term": { "text": "fox"   }}
      ]
    }
  }
}</pre></div><p>The <code class="literal">bool</code> query implements the Boolean model and, in this example, will
include only documents that contain either the term <code class="literal">quick</code> or the term <code class="literal">fox</code> or
both.</p><p>As soon as a document matches a query, Lucene calculates its score for that
query, combining the scores of each matching term.  The formula used for
scoring is called the <span class="emphasis"><em>practical scoring function</em></span>.<a id="id-1.5.8.9.8.2" class="indexterm"></a> It looks intimidating, but
donâ€™t be put offâ€”most of the components you already know. It introduces a
few new elements that we discuss next.</p><pre class="literallayout">score(q,d)  =  <a id="CO107-1"></a><i class="conum" data-value="1"></i>
            queryNorm(q)  <a id="CO107-2"></a><i class="conum" data-value="2"></i>
          Â· coord(q,d)    <a id="CO107-3"></a><i class="conum" data-value="3"></i>
          Â· âˆ‘ (           <a id="CO107-4"></a><i class="conum" data-value="4"></i>
                tf(t in d)   <a id="CO107-5"></a><i class="conum" data-value="5"></i>
              Â· idf(t)Â²      <a id="CO107-6"></a><i class="conum" data-value="6"></i>
              Â· t.getBoost() <a id="CO107-7"></a><i class="conum" data-value="7"></i>
              Â· norm(t,d)    <a id="CO107-8"></a><i class="conum" data-value="8"></i>
            ) (t in q)    <a id="CO107-9"></a><i class="conum" data-value="9"></i></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO107-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
<code class="literal">score(q,d)</code> is the relevance score of document <code class="literal">d</code> for query <code class="literal">q</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO107-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
<code class="literal">queryNorm(q)</code> is the <a class="link" href="practical-scoring-function.html#query-norm" title="Query Normalization Factor"><span class="emphasis"><em>query normalization</em></span> factor</a> (new).
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO107-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
<code class="literal">coord(q,d)</code> is the <a class="link" href="practical-scoring-function.html#coord" title="Query Coordination"><span class="emphasis"><em>coordination</em></span> factor</a> (new).
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO107-4"><i class="conum" data-value="4"></i></a> <a href="#CO107-9"><i class="conum" data-value="9"></i></a> </p></td><td valign="top" align="left"><p>
The sum of the weights for each term <code class="literal">t</code> in the query <code class="literal">q</code> for document <code class="literal">d</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO107-5"><i class="conum" data-value="5"></i></a> </p></td><td valign="top" align="left"><p>
<code class="literal">tf(t in d)</code> is the <a class="link" href="scoring-theory.html#tf" title="Term frequency">term frequency</a> for term <code class="literal">t</code> in document <code class="literal">d</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO107-6"><i class="conum" data-value="6"></i></a> </p></td><td valign="top" align="left"><p>
<code class="literal">idf(t)</code> is the <a class="link" href="scoring-theory.html#idf" title="Inverse document frequency">inverse document frequency</a> for term <code class="literal">t</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO107-7"><i class="conum" data-value="7"></i></a> </p></td><td valign="top" align="left"><p>
<code class="literal">t.getBoost()</code> is the <a class="link" href="query-time-boosting.html" title="Query-Time Boosting"><span class="emphasis"><em>boost</em></span></a>  that has been
    applied to the query (new).
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO107-8"><i class="conum" data-value="8"></i></a> </p></td><td valign="top" align="left"><p>
<code class="literal">norm(t,d)</code> is the <a class="link" href="scoring-theory.html#field-norm" title="Field-length norm">field-length norm</a>, combined with the
    <a class="link" href="practical-scoring-function.html#index-boost" title="Index-Time Field-Level Boosting">index-time field-level boost</a>, if any. (new).
</p></td></tr></table></div><p>You should recognize <code class="literal">score</code>, <code class="literal">tf</code>, and <code class="literal">idf</code>. The  <code class="literal">queryNorm</code>, <code class="literal">coord</code>,
<code class="literal">t.getBoost</code>, and <code class="literal">norm</code> are new.</p><p>We will talk more about <a class="link" href="query-time-boosting.html" title="Query-Time Boosting">query-time boosting</a>  later in
this chapter, but first letâ€™s get query normalization, coordination, and
index-time field-level boosting out of the way.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="query-norm"></a>Query Normalization Factor<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/170_Relevance/15_Practical_scoring.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <span class="emphasis"><em>query normalization factor</em></span> (<code class="literal">queryNorm</code>) is <a id="id-1.5.8.9.13.2.3" class="indexterm"></a>
<a id="id-1.5.8.9.13.2.4" class="indexterm"></a><a id="id-1.5.8.9.13.2.5" class="indexterm"></a><a id="id-1.5.8.9.13.2.6" class="indexterm"></a>
<a id="id-1.5.8.9.13.2.7" class="indexterm"></a>an attempt to <span class="emphasis"><em>normalize</em></span> a
query so that the results from one query may be compared with the results of
another.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>Even though the intent of the query norm is to make results from different
queries comparable, it doesnâ€™t work very well. The only purpose of
the relevance <code class="literal">_score</code> is to sort the results of the current query in the
correct order. You should not try to compare the relevance scores from
different queries.</p></div></div><p>This factor is calculated at the beginning of the query. The actual
calculation depends on the queries involved, but a typical implementation is as follows:</p><pre class="literallayout">queryNorm = 1 / âˆšsumOfSquaredWeights <a id="CO108-1"></a><i class="conum" data-value="1"></i></pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO108-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">sumOfSquaredWeights</code> is calculated by adding together the IDF of each
    term in the query, squared.
</p></td></tr></table></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>The same query normalization factor is applied to every document, and you
have no way of changing it. For all intents and purposes, it can be ignored.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="coord"></a>Query Coordination<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/170_Relevance/15_Practical_scoring.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <span class="emphasis"><em>coordination factor</em></span> (<code class="literal">coord</code>) is used to<a id="id-1.5.8.9.14.2.3" class="indexterm"></a><a id="id-1.5.8.9.14.2.4" class="indexterm"></a><a id="id-1.5.8.9.14.2.5" class="indexterm"></a>
<a id="id-1.5.8.9.14.2.6" class="indexterm"></a> reward documents that contain a
higher percentage of the query terms. The more query terms that appear in
the document, the greater the chances that the document is a good match for
the query.</p><p>Imagine that we have a query for <code class="literal">quick brown fox</code>, and that the
weight for each term is 1.5.  Without the coordination factor, the score would
just be the sum of the weights of the terms in a document. For instance:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Document with <code class="literal">fox</code> â†’ score: 1.5
</li><li class="listitem">
Document with <code class="literal">quick fox</code> â†’ score: 3.0
</li><li class="listitem">
Document with <code class="literal">quick brown fox</code> â†’ score: 4.5
</li></ul></div><p>The coordination factor multiplies the score by the number of matching terms
in the document, and divides it by the total number of terms in the query.
With the coordination factor, the scores would be as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Document with <code class="literal">fox</code> â†’ score: <code class="literal">1.5 * 1 / 3</code> = 0.5
</li><li class="listitem">
Document with <code class="literal">quick fox</code> â†’ score: <code class="literal">3.0 * 2 / 3</code> = 2.0
</li><li class="listitem">
Document with <code class="literal">quick brown fox</code> â†’ score: <code class="literal">4.5 * 3 / 3</code> = 4.5
</li></ul></div><p>The coordination factor results in the document that contains all three terms
being much more relevant than the document that contains just two of them.</p><p>Remember that the query for <code class="literal">quick brown fox</code> is rewritten into a <code class="literal">bool</code> query
like this:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">GET /_search
{
  "query": {
    "bool": {
      "should": [
        { "term": { "text": "quick" }},
        { "term": { "text": "brown" }},
        { "term": { "text": "fox"   }}
      ]
    }
  }
}</pre></div><p>The <code class="literal">bool</code> query uses query coordination by default for all <code class="literal">should</code> clauses,
but it does allow you to disable coordination.  Why might you want to do this?
Well, usually the answer is, you donâ€™t.  Query coordination is usually a good
thing.  When you use a <code class="literal">bool</code> query to wrap several high-level queries like
the <code class="literal">match</code> query, it also makes sense to leave coordination enabled. The more
clauses that match, the higher the degree of overlap between your search
request and the documents that are returned.</p><p>However, in some advanced use cases, it might make sense to disable
coordination.  Imagine that you are looking for the synonyms <code class="literal">jump</code>, <code class="literal">leap</code>, and
<code class="literal">hop</code>.  You donâ€™t care how many of these synonyms are present, as they all
represent the same concept. In fact, only one of the synonyms is likely to be
present.  This would be a good case for disabling the coordination factor:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">GET /_search
{
  "query": {
    "bool": {
      "disable_coord": true,
      "should": [
        { "term": { "text": "jump" }},
        { "term": { "text": "hop"  }},
        { "term": { "text": "leap" }}
      ]
    }
  }
}</pre></div><p>When you use synonyms (see <a class="xref" href="synonyms.html" title="Synonyms"><em>Synonyms</em></a>), this is exactly what
happens internally: the rewritten query disables coordination for the
synonyms. <a id="id-1.5.8.9.14.13.2" class="indexterm"></a>
<a id="id-1.5.8.9.14.13.3" class="indexterm"></a>  Most use cases for disabling coordination are handled
automatically; you donâ€™t need to worry about it.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="index-boost"></a>Index-Time Field-Level Boosting<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/170_Relevance/15_Practical_scoring.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>We will talk about <span class="emphasis"><em>boosting</em></span> a fieldâ€”making it <a id="id-1.5.8.9.15.2.2" class="indexterm"></a>
<a id="id-1.5.8.9.15.2.3" class="indexterm"></a><a id="id-1.5.8.9.15.2.4" class="indexterm"></a>
<a id="id-1.5.8.9.15.2.5" class="indexterm"></a><a id="id-1.5.8.9.15.2.6" class="indexterm"></a>
<a id="id-1.5.8.9.15.2.7" class="indexterm"></a>more important than other
fieldsâ€”at query time in <a class="xref" href="query-time-boosting.html" title="Query-Time Boosting">Query-Time Boosting</a>.  It is also possible
to apply a boost to a field at index time.  Actually, this boost is applied to
every term in the field, rather than to the field itself.</p><p>To store this boost value in the index without using more space
than necessary, this field-level index-time boost is combined with the <a id="id-1.5.8.9.15.3.1" class="indexterm"></a>field-length norm (see  <a class="xref" href="scoring-theory.html#field-norm" title="Field-length norm">Field-length norm</a>) and stored in the index as a single byte.
This is the value returned by <code class="literal">norm(t,d)</code> in the preceding formula.</p><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>We strongly recommend against using field-level index-time boosts for a few
reasons:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Combining the boost with the field-length norm and storing it in a single
    byte means that the field-length norm loses precision. The result is that
    Elasticsearch is unable to distinguish between a field containing three words
    and a field containing five words.
</li><li class="listitem">
To change an index-time boost, you have to reindex all your documents.
    A query-time boost, on the other hand, can be changed with every query.
</li><li class="listitem">
If a field with an index-time boost has multiple values, the boost is
    multiplied by itself for every value, dramatically increasing
    the weight for that field.
</li></ul></div><p><a class="link" href="query-time-boosting.html" title="Query-Time Boosting">Query-time boosting</a> is a much simpler, cleaner, more
flexible option.</p></div></div><p>With query normalization, coordination, and index-time boosting out of the way,
we can now move on to the most useful tool for influencing the relevance
calculation: query-time boosting.<a id="id-1.5.8.9.15.5.1" class="indexterm"></a>
<a id="id-1.5.8.9.15.5.2" class="indexterm"></a>
<a id="id-1.5.8.9.15.5.3" class="indexterm"></a></p></div></div><div class="navfooter"><span class="prev"><a href="scoring-theory.html">
              Â«Â 
              Theory Behind Relevance Scoring</a>
          Â 
        </span><span class="next">
          Â 
          <a href="query-time-boosting.html">Query-Time Boosting
              Â Â»
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>

  
            <script type="text/javascript">
window.initial_state = {}
</script>
<script type="text/javascript" src="/guide/static/docs.js"></script>

            </body>
        
</html>
