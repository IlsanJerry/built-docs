<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Query DSL
        | Elasticsearch: The Definitive Guide [1.x]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [1.x]" /><link rel="up" href="full-body-search.html" title="Full-Body Search" /><link rel="prev" href="_empty_search.html" title="Empty Search" /><link rel="next" href="_queries_and_filters.html" title="Queries and Filters" /><meta name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/1.x" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="1.x" /><meta name="robots" content="noindex,nofollow" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">This information applies to version 1.x of Elasticsearch. For the
most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [1.x]
    </a></span> » <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span> » <span class="breadcrumb-link"><a href="full-body-search.html">Full-Body Search</a></span> » <span class="breadcrumb-node">Query DSL</span></div><div class="navheader"><span class="prev"><a href="_empty_search.html">
              « 
              Empty Search</a>
           
        </span><span class="next">
           
          <a href="_queries_and_filters.html">Queries and Filters
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-intro"></a>Query DSL<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/054_Query_DSL/60_Query_DSL.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The query DSL is a flexible, expressive search <a id="id-1.4.9.5.2.1" class="indexterm"></a>language that Elasticsearch
uses to expose most of the power of Lucene through a simple JSON interface. It
is what you should be using to write your queries in production. It makes your
queries more flexible, more precise, easier to read, and easier to debug.</p><p>To use the Query DSL, pass a query<a id="id-1.4.9.5.3.1" class="indexterm"></a> in the <code class="literal">query</code> parameter:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">GET /_search
{
    "query": YOUR_QUERY_HERE
}</pre></div><p>The <span class="emphasis"><em>empty search</em></span>—<code class="literal">{}</code>—is <a id="id-1.4.9.5.5.3" class="indexterm"></a>
<a id="id-1.4.9.5.5.4" class="indexterm"></a>functionally equivalent to using the
<code class="literal">match_all</code> query clause, which,<a id="id-1.4.9.5.5.6" class="indexterm"></a> as the name suggests, matches all documents:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">GET /_search
{
    "query": {
        "match_all": {}
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/054_Query_DSL/60_Empty_query.json"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_structure_of_a_query_clause"></a>Structure of a Query Clause<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/054_Query_DSL/60_Query_DSL.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A query clause typically<a id="id-1.4.9.5.8.2.1" class="indexterm"></a>
<a id="id-1.4.9.5.8.2.2" class="indexterm"></a> has this structure:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
    QUERY_NAME: {
        ARGUMENT: VALUE,
        ARGUMENT: VALUE,...
    }
}</pre></div><p>If it references one particular field, it has this structure:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
    QUERY_NAME: {
        FIELD_NAME: {
            ARGUMENT: VALUE,
            ARGUMENT: VALUE,...
        }
    }
}</pre></div><p>For instance, you can use a <code class="literal">match</code> query clause<a id="id-1.4.9.5.8.6.2" class="indexterm"></a> to find tweets that
mention <code class="literal">elasticsearch</code> in the <code class="literal">tweet</code> field:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
    "match": {
        "tweet": "elasticsearch"
    }
}</pre></div><p>The full search request would look like this:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">GET /_search
{
    "query": {
        "match": {
            "tweet": "elasticsearch"
        }
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/054_Query_DSL/60_Match_query.json"></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_combining_multiple_clauses"></a>Combining Multiple Clauses<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/054_Query_DSL/60_Query_DSL.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><span class="emphasis"><em>Query clauses</em></span> are simple building blocks<a id="id-1.4.9.5.9.2.2" class="indexterm"></a>
<a id="id-1.4.9.5.9.2.3" class="indexterm"></a> that can be combined with each
other to create complex queries. Clauses can be as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="emphasis"><em>Leaf clauses</em></span> (like the <code class="literal">match</code> clause) that<a id="id-1.4.9.5.9.3.1.1.3" class="indexterm"></a> are used to
  compare a field (or fields) to a query string.
</li><li class="listitem">
<span class="emphasis"><em>Compound</em></span> clauses that are used <a id="id-1.4.9.5.9.3.2.1.2" class="indexterm"></a>to combine other query clauses.
  For instance, a <code class="literal">bool</code> clause<a id="id-1.4.9.5.9.3.2.1.4" class="indexterm"></a> allows you to combine other clauses that
  either <code class="literal">must</code> match,  <code class="literal">must_not</code> match, or <code class="literal">should</code> match if possible:
</li></ul></div><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
    "bool": {
        "must":     { "match": { "tweet": "elasticsearch" }},
        "must_not": { "match": { "name":  "mary" }},
        "should":   { "match": { "tweet": "full text" }}
    }
}</pre></div><div class="sense_widget" data-snippet="snippets/054_Query_DSL/60_Bool_query.json"></div><p>It is important to note that a compound clause can combine <span class="emphasis"><em>any</em></span> other
query clauses, including other compound clauses. This means that compound
clauses can be nested within each other, allowing the expression
of very complex logic.</p><p>As an example, the following query looks for emails that contain
<code class="literal">business opportunity</code> and should either be starred, or be both in the Inbox
and not marked as spam:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
    "bool": {
        "must": { "match":      { "email": "business opportunity" }},
        "should": [
             { "match":         { "starred": true }},
             { "bool": {
                   "must":      { "folder": "inbox" }},
                   "must_not":  { "spam": true }}
             }}
        ],
        "minimum_should_match": 1
    }
}</pre></div><p>Don’t worry about the details of this example yet; we will explain in
full later. The important thing to take away is that a compound query
clause can combine multiple clauses—both leaf clauses and other
compound clauses—into a single query.</p></div></div><div class="navfooter"><span class="prev"><a href="_empty_search.html">
              « 
              Empty Search</a>
           
        </span><span class="next">
           
          <a href="_queries_and_filters.html">Queries and Filters
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
