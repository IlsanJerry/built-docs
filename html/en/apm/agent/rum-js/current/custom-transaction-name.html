<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Custom initial page load transaction names
        | APM Real User Monitoring JavaScript Agent Reference [4.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="APM Real User Monitoring JavaScript Agent Reference [4.x]" /><link rel="up" href="advanced-topics.html" title="Advanced Topics" /><link rel="prev" href="custom-transactions.html" title="Custom Transactions" /><link rel="next" href="troubleshooting.html" title="Troubleshooting" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/APM Real User Monitoring JavaScript Agent/Reference/4.x" /><meta name="DC.subject" content="APM" /><meta name="DC.identifier" content="4.x" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">APM Real User Monitoring JavaScript Agent Reference
      [4.x]
    </a></span> » <span class="breadcrumb-link"><a href="advanced-topics.html">Advanced Topics</a></span> » <span class="breadcrumb-node">Custom initial page load transaction names</span></div><div class="navheader"><span class="prev"><a href="custom-transactions.html">
              « 
              Custom Transactions</a>
           
        </span><span class="next">
           
          <a href="troubleshooting.html">Troubleshooting
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="custom-transaction-name"></a>Custom initial page load transaction names<a href="https://github.com/elastic/apm-agent-rum-js/edit/4.x/docs/custom-transaction-name.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Correctly setting initial page load transaction names is vital to ensuring the best experience when viewing application performance metrics in the Kibana UI.</p><p>Let’s look at an example to understand why. Here are a few URLs you might find on elastic.co:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">// Blog Posts
https://www.elastic.co/blog/reflections-on-three-years-in-the-elastic-public-sector
https://www.elastic.co/blog/say-heya-to-the-elastic-search-awards
https://www.elastic.co/blog/and-the-winner-of-the-elasticon-2018-training-subscription-drawing-is

// Documentation
https://www.elastic.co/guide/en/elastic-stack/current/index.html
https://www.elastic.co/guide/en/apm/get-started/current/index.html
https://www.elastic.co/guide/en/infrastructure/guide/current/index.html</pre></div><p>By default, <a class="link" href="transaction-api.html#transaction-name" title="transaction.name"><code class="literal">transaction.name</code></a> is set to <code class="literal">Unknown</code>.
This means that when viewing transactions in the Kibana UI,
all transactions will be grouped under the common transaction name of <code class="literal">Unknown</code>.
Grouping every transaction (especially unrelated ones) into one group doesn’t make much sense.
To fix this, you can use the API to change the default initial page load transaction name with the <a class="link" href="configuration.html#page-load-transaction-name" title="pageLoadTransactionName"><code class="literal">pageLoadTransactionName</code></a> configuration option.</p><p>A common (and easy) way to set transaction names,
is to use the <a class="link" href="configuration.html#page-load-transaction-name" title="pageLoadTransactionName"><code class="literal">pageLoadTransactionName</code></a> configuration option to set the transaction name to the page URL.
However, this solution won’t be helpful as-is.
Most URLs include unique names - like blog post titles, or query strings.
As a result, you’ll end up with a large number of different transaction names.
For this solution to work, you’ll need to strip away unique information and find commonality between your URLs.
Looking at the URLs above, all elastic.co blog posts have <code class="literal">/blog/</code> in the URL, and all docs have <code class="literal">/guide/</code> in the URL.
We can use these paths to set the initial page load transaction names to either <code class="literal">blog</code> or <code class="literal">guide</code>.
This process can then be expanded across your site to ensure common transactions are grouped correctly.</p><p>Based on our example URLs above, here’s a code snippet to illustrate this process:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">var parts = window.location.pathname.split('/'); <a id="CO1-1"></a><i class="conum" data-value="1"></i>
var pageName = window.location.pathname; <a id="CO1-2"></a><i class="conum" data-value="2"></i>
if (parts.length &gt; 0) {
    pageName = parts[1] <a id="CO1-3"></a><i class="conum" data-value="3"></i>
}
elasticApm.init({
    serviceName: "service-name",
    serverUrl: "server-url",
    pageLoadTransactionName: pageName <a id="CO1-4"></a><i class="conum" data-value="4"></i>
})</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>Grab the URL path and split it</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>Set a default <code class="literal">pageName</code></p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>Set the <code class="literal">pageName</code> to the first part of the pathname (in this example: <code class="literal">guide</code> or <code class="literal">blog</code>)</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-4"><i class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>Pass the <code class="literal">pageName</code> into the APM agent as a configuration option</p></td></tr></table></div></div><div class="navfooter"><span class="prev"><a href="custom-transactions.html">
              « 
              Custom Transactions</a>
           
        </span><span class="next">
           
          <a href="troubleshooting.html">Troubleshooting
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
window.initial_state = {}</script>
  </body>
</html>
