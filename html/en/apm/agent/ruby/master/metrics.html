<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Metrics
        | APM Ruby Agent Reference [master]
      | Elastic
    </title><link rel="home" href="index.html" title="APM Ruby Agent Reference [master]" /><link rel="up" href="index.html" title="APM Ruby Agent Reference [master]" /><link rel="prev" href="log-correlation.html" title="Log correlation" /><link rel="next" href="advanced.html" title="Advanced Topics" /><meta name="DC.type" content="Learn/Docs/APM Ruby Agent/Reference/master" /><meta name="DC.subject" content="APM" /><meta name="DC.identifier" content="master" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">APM Ruby Agent Reference
      [master]
    </a></span> » <span class="breadcrumb-node">Metrics</span></div><div class="navheader"><span class="prev"><a href="log-correlation.html">
              « 
              Log correlation</a>
           
        </span><span class="next">
           
          <a href="advanced.html">Advanced Topics
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="metrics"></a>Metrics<a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h1></div></div></div><p>The Ruby agent tracks various system and application metrics.
These metrics will be sent regularly to the APM Server and from there to Elasticsearch.
You can adjust the interval by setting <a class="link" href="configuration.html#config-metrics-interval" title="metrics_interval"><code class="literal">metrics_interval</code></a>.</p><p>The metrics will be stored in the <code class="literal">apm-*</code> index and have the <code class="literal">processor.event</code> property set to <code class="literal">metric</code>.</p><h3><a id="metrics-system"></a>System metrics<a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p><span class="strong strong"><strong>Note:</strong></span> Metrics from the Ruby agent are Linux only for now.</p><h4><a id="metric-system.cpu.total.norm.pct"></a><code class="literal">system.cpu.total.norm.pct</code><a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong strong"><strong>Type:</strong></span> Float</li><li class="listitem"><span class="strong strong"><strong>Format:</strong></span> Percent</li></ul></div><p>The percentage of CPU time in states other than Idle and IOWait,
normalised by the number of cores.</p><h4><a id="metric-system.memory.total"></a><code class="literal">system.memory.total</code><a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong strong"><strong>Type:</strong></span> Long</li><li class="listitem"><span class="strong strong"><strong>Format:</strong></span> Bytes</li></ul></div><p>The total memory of the system in bytes.</p><h4><a id="metric-system.memory.actual.free"></a><code class="literal">system.memory.actual.free</code><a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong strong"><strong>Type:</strong></span> Long</li><li class="listitem"><span class="strong strong"><strong>Format:</strong></span> Bytes</li></ul></div><p>Free memory of the system in bytes.</p><h4><a id="metric-system.process.cpu.total.norm.pct"></a><code class="literal">system.process.cpu.total.norm.pct</code><a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong strong"><strong>Type:</strong></span> Float</li><li class="listitem"><span class="strong strong"><strong>Format:</strong></span> Percent</li></ul></div><p>The percentage of CPU time spent by the process since the last event.
This value is normalized by the number of CPU cores and it ranges from 0 to 100%.</p><h4><a id="metric-system.process.memory.size"></a><code class="literal">system.process.memory.size</code><a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong strong"><strong>Type:</strong></span> Long</li><li class="listitem"><span class="strong strong"><strong>Format:</strong></span> Bytes</li></ul></div><p>The total virtual memory the process has.</p><h4><a id="metric-system.process.memory.rss.bytes"></a><code class="literal">system.process.memory.rss.bytes</code><a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong strong"><strong>Type:</strong></span> Long</li><li class="listitem"><span class="strong strong"><strong>Format:</strong></span> Bytes</li></ul></div><p>The Resident Set Size,
the amount of memory the process occupies in main memory (RAM).</p><h3><a id="metrics-ruby"></a>Ruby Metrics<a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><h4><a id="metric-ruby.gc.counts"></a><code class="literal">ruby.gc.count</code><a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong strong"><strong>Type:</strong></span> Integer</li><li class="listitem"><span class="strong strong"><strong>Format:</strong></span> Count</li></ul></div><p>The number of Garbage Collection runs since the process started.</p><h4><a id="metric-ruby.threads"></a><code class="literal">ruby.threads</code><a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong strong"><strong>Type:</strong></span> Integer</li><li class="listitem"><span class="strong strong"><strong>Format:</strong></span> Count</li></ul></div><p>The number of threads belonging to the current process.</p><h4><a id="metric-ruby.heap.slots.live"></a><code class="literal">ruby.heap.slots.live</code><a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong strong"><strong>Type:</strong></span> Integer</li><li class="listitem"><span class="strong strong"><strong>Format:</strong></span> Slots</li></ul></div><p>Current amount of heap slots that are live.</p><p><span class="strong strong"><strong>NB:</strong></span> Not currently supported on JRuby.</p><h4><a id="metric-ruby.heap.slots.free"></a><code class="literal">ruby.heap.slots.free</code><a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong strong"><strong>Type:</strong></span> Integer</li><li class="listitem"><span class="strong strong"><strong>Format:</strong></span> Slots</li></ul></div><p>Current amount of heap slots that are free.</p><p><span class="strong strong"><strong>NB:</strong></span> Not currently supported on JRuby.</p><h4><a id="metrics-ruby.heap.allocations.total"></a><code class="literal">ruby.heap.allocations.total</code><a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong strong"><strong>Type:</strong></span> Integer</li><li class="listitem"><span class="strong strong"><strong>Format:</strong></span> Objects</li></ul></div><p>Current amount of allocated objects on the heap.</p><p><span class="strong strong"><strong>NB:</strong></span> Not currently supported on JRuby.</p><h4><a id="metrics-ruby.gc.time"></a><code class="literal">ruby.gc.time</code><a href="https://github.com/elastic/apm-agent-ruby/edit/master/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="strong strong"><strong>Type:</strong></span> Float</li><li class="listitem"><span class="strong strong"><strong>Format:</strong></span> Seconds</li></ul></div><p>The total time spent in garbage collection.</p><p><span class="strong strong"><strong>NB:</strong></span> You need to enable Ruby’s GC Profiler for this to get reported.
You can do this at any time when your application boots by calling <code class="literal">GC::Profiler.enable</code>.</p></div><div class="navfooter"><span class="prev"><a href="log-correlation.html">
              « 
              Log correlation</a>
           
        </span><span class="next">
           
          <a href="advanced.html">Advanced Topics
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
