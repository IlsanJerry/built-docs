<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Troubleshooting | Ingest Management Guide [master] | Elastic</title>
<link rel="home" href="index.html" title="Ingest Management Guide [master]"/>
<link rel="up" href="index.html" title="Ingest Management Guide [master]"/>
<link rel="prev" href="elastic-agent-configuration.html" title="Configuration settings"/>
<meta name="DC.type" content="Learn/Docs/Ingest Management/Guide/master"/>
<meta name="DC.subject" content="Ingest Management"/>
<meta name="DC.identifier" content="master"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type='text/javascript'>
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id='ZN_emkP0oSe9Qrn7kF'><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Ingest Management Guide [master]</a></span>
»
<span class="breadcrumb-node">Troubleshooting</span>
</div>
<div class="navheader">
<span class="prev">
<a href="elastic-agent-configuration.html">« Configuration settings</a>
</span>
<span class="next">
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h1 class="title"><a id="ingest-management-troubleshooting"></a>Troubleshooting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h1>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>We have collected the most common known problems and frequently asked questions
here. If your question isn&#8217;t answered here, please review open issues in the
following GitHub repositories:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a href="https://github.com/elastic/kibana/issues" class="ulink" target="_top">Kibana</a>
</li>
<li class="listitem">
<a href="https://github.com/elastic/beats/issues" class="ulink" target="_top">Beats</a>
</li>
<li class="listitem">
<a href="https://github.com/elastic/package-registry/issues" class="ulink" target="_top">Elastic Package Registry</a>
</li>
</ul>
</div>
<p>Contact us in the <a href="https://discuss.elastic.co/tags/c/elastic-stack/81/stack-ingest-management" class="ulink" target="_top">discuss forum</a>. Your feedback is very valuable to us.</p>
<p><span class="strong strong"><strong>Common problems:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#ingest-manager-not-in-kibana" title="Ingest Manager is not listed in the Kibana side navigation">Ingest Manager is not listed in the Kibana side navigation</a>
</li>
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#ingest-management-setup-fails" title="The /api/ingest_management/setup endpoint returns an error because it can&#8217;t reach the package registry">The <code class="literal">/api/ingest_management/setup</code> endpoint returns an error because it can&#8217;t reach the package registry</a>
</li>
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#ingest-manager-app-crashes" title="Ingest Manager in Kibana crashes">Ingest Manager in Kibana crashes</a>
</li>
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#agent-enrollment-timeout" title="Elastic Agent enrollment fails on the host with Client.Timeout exceeded message">Elastic Agent enrollment fails on the host with <code class="literal">Client.Timeout exceeded</code> message</a>
</li>
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#es-apikey-failed" title="Elasticsearch authentication service fails with Authentication using apikey failed message">Elasticsearch authentication service fails with <code class="literal">Authentication using apikey failed</code> message</a>
</li>
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#process-not-root" title="Elastic Agent fails with Agent process is not root/admin or validation failed message">Elastic Agent fails with <code class="literal">Agent process is not root/admin or validation failed</code> message</a>
</li>
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#agent-hangs-while-unenrolling" title="Elastic Agent hangs while unenrolling">Elastic Agent hangs while unenrolling</a>
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Frequently asked questions:</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#enrolled-agent-not-showing-up" title="Why doesn&#8217;t my enrolled Agent show up in the Ingest Manager app?">Why doesn&#8217;t my enrolled Agent show up in the Ingest Manager app?</a>
</li>
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#where-are-the-agent-logs" title="Where does Elastic Agent store logs after startup?">Where does Elastic Agent store logs after startup?</a>
</li>
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#what-is-my-agent-config" title="What configuration is the Elastic Agent running?">What configuration is the Elastic Agent running?</a>
</li>
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#where-is-the-data-agent-is-sending" title="Why can&#8217;t I see the data Elastic Agent is sending?">Why can&#8217;t I see the data Elastic Agent is sending?</a>
</li>
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#i-deleted-my-agent" title="How do I restore an Elastic Agent that I deleted from Fleet?">How do I restore an Elastic Agent that I deleted from Fleet?</a>
</li>
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#i-rebooted-my-host" title="How do I restart Elastic Agent after rebooting my host?">How do I restart Elastic Agent after rebooting my host?</a>
</li>
<li class="listitem">
<a class="xref" href="ingest-management-troubleshooting.html#what-is-the-endpoint-package" title="What is the Elastic Endpoint Security integration in Ingest Manager?">What is the Elastic Endpoint Security integration in Ingest Manager?</a>
</li>
</ul>
</div>
<h3><a id="ingest-manager-not-in-kibana"></a>Ingest Manager is not listed in the Kibana side navigation<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>The Ingest Manager app is enabled by default. If you are unable to
see the app in Kibana, make sure it&#8217;s enabled.</p>
<p><span class="strong strong"><strong>To enable Ingest Manager on Elastic Cloud:</strong></span></p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to your deployment in the user console.
</li>
<li class="listitem">
Under the deployment name in the side navigation, click <span class="strong strong"><strong>Edit</strong></span>.
</li>
<li class="listitem">
<p>In the Kibana section, expand <span class="strong strong"><strong>User setting overrides</strong></span> and enter the
following setting:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.ingestManager.enabled: true</pre>
</div>
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Save</strong></span>.
</li>
</ol>
</div>
<p>Kibana will restart automatically. When Kibana is available, refresh the browser
to see the Ingest Manager app in the navigation menu.</p>
<p><span class="strong strong"><strong>To enable Ingest Manager on a self-managed cluster:</strong></span></p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>In the Elasticsearch configuration file, <code class="literal">config/elasticsearch.yml</code>, set the following
security settings to enable security and API keys:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.security.enabled: true
xpack.security.authc.api_key.enabled: true</pre>
</div>
</li>
<li class="listitem">
<p>In the Kibana configuration file, <code class="literal">config/kibana.yml</code>, enable Ingest Manager
and specify user credentials:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.ingestManager.enabled: true
xpack.ingestManager.fleet.tlsCheckDisabled: true <a id="CO5-1"></a><i class="conum" data-value="1"></i>
xpack.security.enabled: true
elasticsearch.username: "elastic" <a id="CO5-2"></a><i class="conum" data-value="2"></i>
elasticsearch.password: "abc123iUnbRftkABC123"</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO5-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>This setting is not required if you configure TLS checking.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO5-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Specify a user who is authorized to use Ingest Manager.</p>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>To set up passwords, you can use the documented Elasticsearch APIs or the
<code class="literal">elasticsearch-setup-passwords</code> command. For example:</p>
<p><code class="literal">./bin/elasticsearch-setup-passwords auto</code></p>
</div>
</div>
<p>After running the command, copy the Elastic user name to the Kibana config file.
Then restart Kibana.</p>
<h3><a id="ingest-management-setup-fails"></a>The <code class="literal">/api/ingest_management/setup</code> endpoint returns an error because it can&#8217;t reach the package registry<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>In order to install Integrations, the Ingest Manager app needs to connect to
an external service called the Elastic Package Registry. For this to work, the Kibana
server must be able to connect to <code class="literal">https://epr.elastic.co</code> on port 443.</p>
<h3><a id="ingest-manager-app-crashes"></a>Ingest Manager in Kibana crashes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>To find more about the error, open your browser&#8217;s development console, navigate
to the <span class="strong strong"><strong>Network</strong></span> tab, and refresh the page. One of the requests to the
Ingest Manager API will most likely have returned an error. If the error
message doesn&#8217;t give you enough information to fix the problem, please contact
us in the <a href="https://discuss.elastic.co/tags/c/elastic-stack/81/stack-ingest-management" class="ulink" target="_top">discuss forum</a>.</p>
<h3><a id="agent-enrollment-timeout"></a>Elastic Agent enrollment fails on the host with <code class="literal">Client.Timeout exceeded</code> message<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>Elastic Agent must be able to connect to the Kibana instance to enroll in Fleet.
If the agent is unable to connect, you will see the following failure:</p>
<div class="pre_wrapper lang-output">
<pre class="programlisting prettyprint lang-output">fail to enroll: fail to execute request to {kib}:Post http://kibana:5601/api/ingest_manager/fleet/agents/enroll?: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)</pre>
</div>
<p>This may occur if the host is unable to connect to Kibana. To troubleshoot the
problem:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Check for networking problems. Run the <code class="literal">ping</code> command from the host to confirm
that it can reach the Kibana instance.
</li>
<li class="listitem">
Verify that the URL and port you specified during enrollment are correct for
your environment.
</li>
<li class="listitem">
<p>Check the enrollment key that you specified during enrollment to confirm that
the key is valid. To do this:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In Ingest Manager, go to the Fleet tab and click <span class="strong strong"><strong>Enrollment Tokens</strong></span>.
</li>
<li class="listitem">
Click the eyeball icon to see the secret. The secret should match the string
that you used to enroll Elastic Agent on your host.
</li>
<li class="listitem">
If the secret doesn&#8217;t match, create a new enrollment token and use the new
token when you run the <code class="literal">elastic-agent enroll</code> command.
</li>
</ol>
</div>
</li>
</ol>
</div>
<h3><a id="es-apikey-failed"></a>Elasticsearch authentication service fails with <code class="literal">Authentication using apikey failed</code> message<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>Fleet requires an encryption key in order to save API keys and encrypt them in
Kibana. To provide an API key, set the <code class="literal">xpack.encryptedSavedObjects.encryptionKey</code>
property in the <code class="literal">kibana.yml</code> configuration file. For example:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">xpack.encryptedSavedObjects.encryptionKey: "something_at_least_32_characters"</pre>
</div>
<h3><a id="process-not-root"></a>Elastic Agent fails with <code class="literal">Agent process is not root/admin or validation failed</code> message<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>Make sure the user running Elastic Agent has root privileges. If you&#8217;re running
Elastic Agent in the foreground (and not as a service) on Linux or macOS, run the
agent under the root user, for example, <code class="literal">sudo</code> or <code class="literal">su</code>. Some integrations
require root privileges to collect sensitive data.</p>
<p>If you&#8217;re using the Elastic Endpoint integration, also make sure you&#8217;re
running Elastic Agent under the SYSTEM account.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you install Elastic Agent as a service as described in
<a class="xref" href="elastic-agent-installation.html" title="Install Elastic Agent">Install Elastic Agent</a>, Elastic Agent runs under the SYSTEM account by
default.</p>
</div>
</div>
<p>To run Elastic Agent under the SYSTEM account, you can:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Download <a href="https://docs.microsoft.com/en-us/sysinternals/downloads/psexec" class="ulink" target="_top">PsExec</a>
and extract the contents to a folder, for example, <code class="literal">d:\tools</code>.
</li>
<li class="listitem">
Open a command prompt as an Administrator (right-click the Command Prompt
icon and select <span class="strong strong"><strong>Run As Administrator</strong></span>).
</li>
<li class="listitem">
<p>From the command prompt, run Elastic Agent under the SYSTEM account:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">d:\tools\psexec.exe -sid "C:\Program Files\Elastic-Agent\elastic-agent.exe" run</pre>
</div>
</li>
</ol>
</div>
<h3><a id="agent-hangs-while-unenrolling"></a>Elastic Agent hangs while unenrolling<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>When you unenroll an agent, Fleet waits for acknowledgement from the agent
before it completes the unenrollment process. If Fleet doesn&#8217;t receive
acknowledgement, the status hangs at <code class="literal">unenrolling.</code></p>
<p>If this happens, select <span class="strong strong"><strong>Force unenroll</strong></span> from the <span class="strong strong"><strong>Actions</strong></span> menu in Fleet.</p>
<p>This will invalidate all API keys related to the agent and change the status to
<code class="literal">inactive</code> so that the agent no longer appears in Fleet.</p>
<h3><a id="enrolled-agent-not-showing-up"></a>Why doesn&#8217;t my enrolled Agent show up in the Ingest Manager app?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>If Elastic Agent was successfully enrolled, but doesn&#8217;t show up in the Fleet list,
it might not be started. You need to <a class="xref" href="run-elastic-agent.html" title="Run Elastic Agent">start Elastic Agent</a>.</p>
<h3><a id="where-are-the-agent-logs"></a>Where does Elastic Agent store logs after startup?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>When started successfully, Metricbeat logs are stored in
<code class="literal">data/logs/metricbeat</code> under the folder where Elastic Agent was started. If that log
path does not exist, Elastic Agent was unable to start Metricbeat, which is a
higher level problem to triage.</p>
<h3><a id="what-is-my-agent-config"></a>What configuration is the Elastic Agent running?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>To find the configuration file, inspect the <code class="literal">elastic-agent.yml</code> file in the
folder where you ran Elastic Agent. If you&#8217;re running the agent in Fleet mode, this
file contains the following citation:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">Management: mode: "fleet"</pre>
</div>
<p>The <code class="literal">action_store.yml</code> contains the entire, unencrypted configuration:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
To see the Elasticsearch location, look at <code class="literal">outputs:hosts</code>.
</li>
<li class="listitem">
To see the Elastic Agent version, look at the download folder and zip filenames.
</li>
</ul>
</div>
<p>This file also shows the version of all packages used by the current
configuration.</p>
<h3><a id="where-is-the-data-agent-is-sending"></a>Why can&#8217;t I see the data Elastic Agent is sending?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>If Elastic Agent is set up and running, but you don&#8217;t see data in Kibana:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Go to <span class="strong strong"><strong>Management &gt; Dev Tools</strong></span> in Kibana, and in the Console, search your
index for data. For example:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET metrics-*/_search</pre>
</div>
<div class="console_widget" data-snippet="snippets/1.console"></div>
<p>Or if you prefer, go to the <span class="strong strong"><strong>Discover</strong></span> app.</p>
</li>
<li class="listitem">
Look at the data that Elastic Agent has sent and see if the <code class="literal">name.host</code>
field contains your host machine name.
</li>
</ol>
</div>
<p>If you don&#8217;t see data for your host, it&#8217;s possible that the data is blocked
in the network, or that a firewall or security problem is preventing the Elastic Agent
from sending the data.</p>
<p>Although it&#8217;s redundant to install stand-alone Metricbeat, you might want to
try installing it to see if it&#8217;s able to send data successfully to Elasticsearch. For
more information, see
<a href="/guide/en/beats/metricbeat/master/metricbeat-installation-configuration.html" class="ulink" target="_top">Metricbeat quick start</a>.</p>
<p>If Metricbeat is able to send data to Elasticsearch, there is possibly a bug or
problem with Elastic Agent, and you should report it.</p>
<h3><a id="i-deleted-my-agent"></a>How do I restore an Elastic Agent that I deleted from Fleet?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>It&#8217;s ok, we&#8217;ve got your back! The data is still in Elasticsearch. To add Elastic Agent
to Fleet again, <a class="xref" href="stop-elastic-agent.html" title="Stop Elastic Agent">Stop Elastic Agent</a>, re-enroll it on the host, then
run Elastic Agent.</p>
<h3><a id="i-rebooted-my-host"></a>How do I restart Elastic Agent after rebooting my host?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>On Windows, if you used PowerShell to install Elastic Agent as a service, the agent
should still be running after rebooting the host.</p>
<p>On Linux, if you used the DEB or RPM packages, the agent should still be running
after rebooting the host.</p>
<p>On macOS, you need to restart Elastic Agent from the command line after
rebooting the host, or follow the steps described in
<a class="xref" href="elastic-agent-installation.html#elastic-agent-install-service-macos" title="Manually install Elastic Agent as a service on macOS">Manually install Elastic Agent as a service on macOS</a> to run the agent as a service.</p>
<p>Support for installing Elastic Agent as a service on all supported systems will be
available in a future release.</p>
<h3><a id="what-is-the-endpoint-package"></a>What is the Elastic Endpoint Security integration in Ingest Manager?<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/troubleshooting.asciidoc">edit</a></h3>
<p>The Elastic Endpoint Security integration provides protection on your Elastic Agent
controlled host. The integration monitors your host for security-related events,
allowing for investigation of security data through the Elastic Security
application in Kibana. The Elastic Endpoint Security integration is managed by
Elastic Agent in in the same way as other integrations. Try it out! For more
information, see the <a href="/guide/en/security/master/index.html" class="ulink" target="_top">Elastic Security solution
documentation</a>.</p>
<style>
.tabs {
  width: 100%;
}
[role="tablist"] {
  margin: 0 0 -0.1em;
  overflow: visible;
}
[role="tab"] {
  position: relative;
  padding: 0.3em 0.5em 0.4em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0.2em 0.2em 0 0;
  overflow: visible;
  font-family: inherit;
  font-size: inherit;
  background: hsl(220, 20%, 94%);
}
[role="tab"]:hover::before,
[role="tab"]:focus::before,
[role="tab"][aria-selected="true"]::before {
  position: absolute;
  bottom: 100%;
  right: -1px;
  left: -1px;
  border-radius: 0.2em 0.2em 0 0;
  border-top: 3px solid hsl(219, 1%, 72%);
  content: '';
}
[role="tab"][aria-selected="true"] {
  border-radius: 0;
  background: hsl(220, 43%, 99%);
  outline: 0;
}
[role="tab"][aria-selected="true"]:not(:focus):not(:hover)::before {
  border-top: 5px solid hsl(218, 96%, 48%);
}
[role="tab"][aria-selected="true"]::after {
  position: absolute;
  z-index: 3;
  bottom: -1px;
  right: 0;
  left: 0;
  height: 0.3em;
  background: hsl(220, 43%, 99%);
  box-shadow: none;
  content: '';
}
[role="tab"]:hover,
[role="tab"]:focus,
[role="tab"]:active {
  outline: 0;
  border-radius: 0;
  color: inherit;
}
[role="tab"]:hover::before,
[role="tab"]:focus::before {
  border-color: hsl(218, 96%, 48%);
}
[role="tabpanel"] {
  position: relative;
  z-index: 2;
  padding: 1em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0 0.2em 0.2em 0.2em;
  box-shadow: 0 0 0.2em hsl(219, 1%, 72%);
  background: hsl(220, 43%, 99%);
  margin-bottom: 1em;
}
[role="tabpanel"] p {
  margin: 0;
}
[role="tabpanel"] * + p {
  margin-top: 1em;
}
</style>

<script>
window.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll('[role="tab"]');
  const tabList = document.querySelector('[role="tablist"]');
  // Add a click event handler to each tab
  tabs.forEach(tab => {
    tab.addEventListener("click", changeTabs);
  });
  // Enable arrow navigation between tabs in the tab list
  let tabFocus = 0;
  tabList.addEventListener("keydown", e => {
    // Move right
    if (e.keyCode === 39 || e.keyCode === 37) {
      tabs[tabFocus].setAttribute("tabindex", -1);
      if (e.keyCode === 39) {
        tabFocus++;
        // If we're at the end, go to the start
        if (tabFocus >= tabs.length) {
          tabFocus = 0;
        }
        // Move left
      } else if (e.keyCode === 37) {
        tabFocus--;
        // If we're at the start, move to the end
        if (tabFocus < 0) {
          tabFocus = tabs.length - 1;
        }
      }
      tabs[tabFocus].setAttribute("tabindex", 0);
      tabs[tabFocus].focus();
    }
  });
});

function setActiveTab(target) {
  const parent = target.parentNode;
  const grandparent = parent.parentNode;
  // console.log(grandparent);
  // Remove all current selected tabs
  parent
    .querySelectorAll('[aria-selected="true"]')
    .forEach(t => t.setAttribute("aria-selected", false));
  // Set this tab as selected
  target.setAttribute("aria-selected", true);
  // Hide all tab panels
  grandparent
    .querySelectorAll('[role="tabpanel"]')
    .forEach(p => p.setAttribute("hidden", true));
  // Show the selected panel
  grandparent.parentNode
    .querySelector(`#${target.getAttribute("aria-controls")}`)
    .removeAttribute("hidden");
}

function changeTabs(e) {
  // get the containing list of the tab that was just clicked
  const tabList = e.target.parentNode;

  // get all of the sibling tabs
  const buttons = Array.apply(null, tabList.querySelectorAll('button'));

  // loop over the siblings to discover which index thje clicked one was
  const { index } = buttons.reduce(({ found, index }, button) => {
    if (!found && buttons[index] === e.target) {
      return { found: true, index };
    } else if (!found) {
      return { found, index: index + 1 };
    } else {
      return { found, index };
    }
  }, { found: false, index: 0 });

  // get the tab container
  const container = tabList.parentNode;
  // read the data-tab-group value from the container, e.g. "os"
  const { tabGroup } = container.dataset;
  // get a list of all the tab groups that match this value on the page
  const groups = document.querySelectorAll('[data-tab-group=' + tabGroup + ']');

  // for each of the found tab groups, find the tab button at the previously discovered index and select it for each group
  groups.forEach((group) => {
    const target = group.querySelectorAll('button')[index];
    setActiveTab(target);
  });
}
</script>
</div>
<div class="navfooter">
<span class="prev">
<a href="elastic-agent-configuration.html">« Configuration settings</a>
</span>
<span class="next">
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Get Started with Elasticsearch: Video</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&elektra=docs&storm=top-video">ELK for Logs & Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
