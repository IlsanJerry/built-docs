<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Create Deployment Templates
        | Elastic Cloud Enterprise Reference [2.0]
      | Elastic
    </title><link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.0]" /><link rel="up" href="ece-configuring-ece-templates.html" title="Configure Deployment Templates" /><link rel="prev" href="ece-configuring-ece-instance-configurations-create.html" title="Create Instance Configurations" /><link rel="next" href="ece-configure-templates-index-management.html" title="Configure index management" /><meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.0" /><meta name="DC.subject" content="ECE" /><meta name="DC.identifier" content="2.0" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference
      [2.0]
    </a></span> » <span class="breadcrumb-link"><a href="ece-configuring-ece.html">Configuring Your Installation</a></span> » <span class="breadcrumb-link"><a href="ece-configuring-ece-templates.html">Configure Deployment Templates</a></span> » <span class="breadcrumb-node">Create Deployment Templates</span></div><div class="navheader"><span class="prev"><a href="ece-configuring-ece-instance-configurations-create.html">
              « 
              Create Instance Configurations</a>
           
        </span><span class="next">
           
          <a href="ece-configure-templates-index-management.html">Configure index management
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ece-configuring-ece-create-templates"></a>Create Deployment Templates</h2></div></div></div><p>Elastic Cloud Enterprise comes with some deployment templates already built in, but you can create new deployment templates to address particular use cases that you might have.</p><p>For example: You might decide to create a new deployment template, if you have a specific search use case that requires Elasticsearch data nodes in a specific configuration that also includes machine learning for anomaly detection. If you need to create these deployments fairly frequently, you can create a deployment template once and deploy it as many times as you like. Or, create a single template for both your test and production deployments to ensure they are exactly the same.</p><h3><a id="ece-before_you_begin_6"></a>Before You Begin</h3><p>Before you start creating your own deployment templates, you should have:
<a class="link" href="ece-configuring-ece-tag-allocators.html" title="Tag Your Allocators">tagged your allocators</a> to tell ECE what kind of hardware you have available for Elastic Stack deployments. If the default instance configurations don’t provide what you need, you might also need to <a class="link" href="ece-configuring-ece-instance-configurations-create.html" title="Create Instance Configurations">create your own instance configurations</a> first.</p><h3><a id="ece-create_deployment_templates_in_the_ui"></a>Create deployment templates in the UI</h3><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<a class="link" href="ece-login.html" title="Log into the Cloud UI">Log into the Cloud UI</a>.
</li><li class="listitem">
From the <span class="strong strong"><strong>Platform</strong></span> menu, select <span class="strong strong"><strong>Templates</strong></span>.
</li><li class="listitem">
Click <span class="strong strong"><strong>Create template</strong></span>.
</li><li class="listitem"><p class="simpara">
Configure Elasticsearch by picking the node configurations that will be available in the template and by assigning their initial resources. You can:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Adjust the memory or storage assigned to instance configurations using our sliders. Increasing memory or storage also improves performance by increasing the CPU resources that get assigned relative to the size of the instance, meaning that a 32 GB instance gets twice as much CPU resources as a 16 GB one. These resources are just template defaults that can be adjusted further before you create actual deployments.
</li><li class="listitem">
Add fault tolerance (high availability) by using more than one availability zones.
</li><li class="listitem">
Add Elasticsearch user settings.
</li><li class="listitem"><p class="simpara">
Add and configure additional features, such as:
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
Dedicated master nodes
</li><li class="listitem">
Dedicated ingest nodes
</li><li class="listitem"><p class="simpara">
Machine learning nodes
</p><p class="simpara">For example: You can could create your template with a large Elasticsearch data node to handle data indexing, include a basic machine learning configuration to allow enabling anomaly detection later on, and then add Kibana to the template to enable data visualization.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>To create templates that support a hot-warm architecture, include more than one instance configuration for data nodes by clicking <span class="strong strong"><strong>Add data configuration</strong></span>. The option to edit index curation settings becomes available when at least two data configurations are part of the template.</p></div></div></li></ul></div></li></ul></div></li><li class="listitem">
Click <span class="strong strong"><strong>Next</strong></span>.
</li><li class="listitem">
If you added multiple Elasticsearch data configurations on the previous page, such as <code class="literal">data.default</code> and <code class="literal">data.highstorage</code>: <a class="link" href="ece-configure-templates-index-management.html" title="Configure index management">Configure index management</a>.
</li><li class="listitem">
Configure how Kibana gets included in your template. You can select if Kibana is included at all, what high availability options and sizes are available, and what user settings should always be specified.
</li><li class="listitem">
Give your deployment template a name and include a description that reflects its intended use.
</li><li class="listitem">
Click <span class="strong strong"><strong>Save and create template</strong></span>.
</li></ol></div><h3><a id="ece-configuring-ece-create-templates-continue"></a>Create deployment templates through the RESTful API:</h3><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
Obtain the existing deployment templates to see some examples of what the required JSON looks like. You can take the JSON for one of the existing templates and modify it to create a new template, similar to what gets shown in the next step.
</p><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">curl -k -X GET -u $USER<a id="CO4-1"></a><i class="conum" data-value="1"></i>:$PASSWORD<a id="CO4-2"></a><i class="conum" data-value="2"></i> https://$COORDINATOR_HOST<a id="CO4-3"></a><i class="conum" data-value="3"></i>:12443/api/v1/platform/configuration/templates/deployments</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO4-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
A user with sufficient privileges, such as the <code class="literal">admin</code> user
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO4-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
The password for the user
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO4-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
A host that you installed Elastic Cloud Enterprise on that holds the coordinator role, such as a host where you can log into the Cloud UI.
</p></td></tr></table></div></li><li class="listitem"><p class="simpara">
Post the JSON for your new deployment template.
</p><p class="simpara">The following example creates a deployment template that defaults to a highly available Elasticsearch cluster with 4 GB per node, a 16 GB machine learning node, and a 1 GB Kibana instance. Elasticsearch and Kibana use the default instance configurations, but the machine learning node is based on the custom instance configuration in our previous example.</p><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">curl -k -X POST -u USER:PASSWORD https://COORDINATOR_HOST:12443/api/v1/platform/configuration/templates/deployments/ -H 'content-type: application/json' -d '{
  "name": "Custom Elasticsearch and ML template",
  "description": "Custom template that includes Elasticsearch, machine learning, and Kibana",
  "cluster_template": {
    "plan": {
      "cluster_topology": [{
        "size": {
          "value": 4096,
          "resource": "memory"
        },
        "node_type": {
          "master": true,
          "data": true,
          "ingest": true
        },
        "instance_configuration_id": "data.default",
        "elasticsearch": {
          "user_settings_yaml": "",
          "node_attributes": {

          }
        },
        "zone_count": 3
      }, {
        "size": {
          "value": 16384,
          "resource": "memory"
        },
        "node_type": {
          "master": false,
          "data": false,
          "ingest": false,
          "ml": true
        },
        "instance_configuration_id": "b092529897194a45808ae70ec5270c6b",
        "elasticsearch": {

        },
        "zone_count": 1
      }],
      "elasticsearch": {

      }
    },
    "settings": {

    },
    "kibana": {
      "plan": {
        "cluster_topology": [{
          "instance_configuration_id": "kibana",
          "size": {
            "value": 1024,
            "resource": "memory"
          },
          "zone_count": 1
        }],
        "kibana": {
          "user_settings_yaml": ""
        }
      }
    }
  },
  "system_owned": false
}'</pre></div></li></ol></div><p>After you have saved your new template, you can start <a class="link" href="ece-create-deployment.html" title="Create Your Deployment">creating new deployments</a> with it.</p></div><div class="navfooter"><span class="prev"><a href="ece-configuring-ece-instance-configurations-create.html">
              « 
              Create Instance Configurations</a>
           
        </span><span class="next">
           
          <a href="ece-configure-templates-index-management.html">Configure index management
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
