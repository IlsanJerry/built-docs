<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Create LDAP provider profiles
        | Elastic Cloud Enterprise Reference [2.3]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.3]" /><link rel="up" href="ece-configure-rbac.html" title="Configure role-based access control" /><link rel="prev" href="ece-create-ad-profiles.html" title="Create Active Directory provider profiles" /><link rel="next" href="ece-create-saml-profiles.html" title="Create SAML provider profiles" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.3" /><meta name="DC.subject" content="ECE" /><meta name="DC.identifier" content="2.3" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference
      [2.3]
    </a></span> » <span class="breadcrumb-link"><a href="ece-securing-ece.html">Securing your installation</a></span> » <span class="breadcrumb-link"><a href="ece-configure-rbac.html">Configure role-based access control</a></span> » <span class="breadcrumb-node">Create LDAP provider profiles</span></div><div class="navheader"><span class="prev"><a href="ece-create-ad-profiles.html">
              « 
              Create Active Directory provider profiles</a>
           
        </span><span class="next">
           
          <a href="ece-create-saml-profiles.html">Create SAML provider profiles
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ece-create-ldap-profiles"></a>Create LDAP provider profiles</h2></div></div></div><p>If you use a Lightweight Directory Access Protocol (LDAP) server to authenticate users, you can specify the servers, parameters, and the search modes that Elastic Cloud Enterprise uses to locate user credentials. There are several sections to the profile:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Specify the <a class="link" href="ece-create-ldap-profiles.html#ece-ldap-general-settings">general LDAP settings</a>.
</li><li class="listitem">
Optional: Prepare the <a class="link" href="ece-create-ldap-profiles.html#ece-prepare-ldap-certificates" title="Prepare certificates">trusted CA certificates</a>.
</li><li class="listitem">
Supply the <a class="link" href="ece-create-ldap-profiles.html#ece-supply-ldap-bind-credentials" title="Supply the bind credentials">bind credentials</a>.
</li><li class="listitem">
Select the <a class="link" href="ece-create-ldap-profiles.html#ece-ldap-search-mode" title="Configure the search settings">search mode and group search</a> settings.
</li><li class="listitem">
Create <a class="link" href="ece-create-ldap-profiles.html#ece-ldap-role-mapping" title="Create role mappings">role mappings</a>, either to all users that match the profile or assign roles to specific groups.
</li><li class="listitem">
Add any <a class="link" href="ece-create-ldap-profiles.html#ece-ldap-custom-configuration" title="Custom configuration">custom configuration</a> advanced settings to the YAML file.
</li></ul></div><p><a id="ece-ldap-general-settings"></a>Begin the provider profile by adding the general settings:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<a class="link" href="ece-login.html" title="Log into the Cloud UI">Log into the Cloud UI</a>.
</li><li class="listitem">
Go to <span class="strong strong"><strong>Users</strong></span> and then <span class="strong strong"><strong>Authentication providers</strong></span>.
</li><li class="listitem">
From the <span class="strong strong"><strong>Add provider</strong></span> drop-down menu, select <span class="strong strong"><strong>LDAP</strong></span>.
</li><li class="listitem"><p class="simpara">
Provide a unique profile name. This name becomes the realm ID, with any spaces replaced by hyphens.
</p><p class="simpara">The name can be changed, but the realm ID cannot. The realm ID becomes part of the <a class="link" href="ece-create-ldap-profiles.html#ece-prepare-ldap-certificates" title="Prepare certificates">certificate bundle</a>.</p></li><li class="listitem"><p class="simpara">
Add one or more LDAP server URLs and the port. You can use LDAP or LDAPS, but you can’t use a mix of types.
</p><p class="simpara">Example: <code class="literal">ldaps://ldap.example.com:636</code></p></li><li class="listitem"><p class="simpara">
Choose how you want your load balancing to work:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Failover
</span></dt><dd>
If a LDAP server connection fails, the LDAP traffic is processed by the servers in the order they were entered. The first server that connects gets used for subsequent connections.
</dd><dt><span class="term">
DNS failover
</span></dt><dd>
The request is sent to a DNS hostname and the associated server IP addresses are searched in the order they are listed by the load balancer. Each request starts at the beginning of the IP address list, regardless of previous failures.
</dd><dt><span class="term">
Round robin
</span></dt><dd>
A server is chosen at random and the traffic connects to each server IP address until a connection is made.
</dd><dt><span class="term">
DNS round robin
</span></dt><dd>
The request is sent to a DNS hostname that is configured to with multiple IP addresses, rotating through until a connection is made.
</dd></dl></div></li></ol></div><h3><a id="ece-prepare-ldap-certificates"></a>Prepare certificates</h3><p>Though optional, you can add one or more certificate authorities (CAs) to validate user certificates with SSL/TLS. Connecting via SSL/TLS ensures that the identity of the LDAP server is authenticated before Elastic Cloud Enterprise transmits the user credentials and that the contents of the connection are encrypted. If the LDAP server also requires a client certificate for authentication then you will need to additionally include the client private key in the bundle for proof of identity.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
Provide the URL to the keystore ZIP file with the certificate(s) (optionally also containing the client private key if using client certificate authentication).
</p><p class="simpara">The bundle should be a ZIP file containing a single <code class="literal">keystore.ks</code> file in the directory <code class="literal">/ldap/:id/truststore</code>, where <code class="literal">:id</code> is the value of the <span class="strong strong"><strong>Realm ID</strong></span> field created in the <a class="link" href="ece-create-ldap-profiles.html#ece-ldap-general-settings">General settings</a>.</p></li><li class="listitem">
Select a truststore type.
</li><li class="listitem">
Add the password to access the truststore bundle.
</li></ol></div><h3><a id="ece-supply-ldap-bind-credentials"></a>Supply the bind credentials</h3><p>You can either select <span class="strong strong"><strong>Bind anonymously</strong></span> for user searches or you must specify the distinguished name (DN) of the user to bind and the bind password.</p><p>Bind settings are not used with search templates.</p><h3><a id="ece-ldap-search-mode"></a>Configure the search settings</h3><p>The profile can specify each of the details for a user search or use a template to perform LDAP queries.</p><p>To configure the user search:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Provide the <span class="strong strong"><strong>Base DN</strong></span> for the user or the group.
</li><li class="listitem"><p class="simpara">
Set the <span class="strong strong"><strong>Search scope</strong></span>:
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Sub-tree
</span></dt><dd>
Searches everything <span class="emphasis"><em>under</em></span> the base but not the base itself.
</dd><dt><span class="term">
One level
</span></dt><dd>
Searches for objects <span class="emphasis"><em>within</em></span> the base DN.
</dd><dt><span class="term">
Base
</span></dt><dd>
Uses only the base DN as the user object.
</dd></dl></div></li><li class="listitem">
Optional: Specify any additional query filters.
</li><li class="listitem">
Optional: You can specify an attribute such as <code class="literal">memberof</code> to apply the profile to all members who are included in that group and match the query or you could use <code class="literal">uniquemember</code> to limit the query further.
</li></ol></div><p>To search with a template:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Select <span class="strong strong"><strong>Template</strong></span>.
</li><li class="listitem">
Provide one or more <span class="strong strong"><strong>User DN templates</strong></span>.

</li></ol></div><h3><a id="ece-ldap-role-mapping"></a>Create role mappings</h3><p>When a user match is found, the role mapping assigns them privileges.</p><p>To assign all matched users a single role, select one of the <span class="strong strong"><strong>Default roles</strong></span>.</p><p>To assign roles according to the <span class="strong strong"><strong>User DN</strong></span> or <span class="strong strong"><strong>Group DN</strong></span>, use the <span class="strong strong"><strong>Add role mapping rule</strong></span> fields.</p><h3><a id="ece-ldap-custom-configuration"></a>Custom configuration</h3><p>You can add any additional settings to the <span class="strong strong"><strong>Advanced configuration</strong></span> YAML file. For example, if you need to ignore the SSL check in a testing environment, you might add <code class="literal">ssl.verification_mode: none</code>.</p></div><div class="navfooter"><span class="prev"><a href="ece-create-ad-profiles.html">
              « 
              Create Active Directory provider profiles</a>
           
        </span><span class="next">
           
          <a href="ece-create-saml-profiles.html">Create SAML provider profiles
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

      </section>
    </div>

    
<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
window.initial_state = {}
</script>

  </body>
</html>
