<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Protobuf codec plugin v1.0.2
        | Logstash Versioned Plugin Reference
      | Elastic
    </title><link rel="home" href="index.html" title="Logstash Versioned Plugin Reference" /><link rel="up" href="codec-protobuf-index.html" title="Versioned protobuf codec plugin docs" /><link rel="prev" href="v1.0.3-plugins-codecs-protobuf.html" title="Protobuf codec plugin v1.0.3" /><link rel="next" href="codec-rubydebug-index.html" title="Versioned rubydebug codec plugin docs" /><meta name="DC.type" content="Learn/Docs/Logstash/Plugin Reference" /><meta name="DC.subject" content="Logstash" /><meta name="DC.identifier" content="versioned_plugin_docs" /><meta name="robots" content="noindex,nofollow" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Logstash Versioned Plugin Reference</a></span> » <span class="breadcrumb-link"><a href="codec-plugins.html">Codec plugins</a></span> » <span class="breadcrumb-link"><a href="codec-protobuf-index.html">Versioned protobuf codec plugin docs</a></span> » <span class="breadcrumb-node">Protobuf codec plugin v1.0.2</span></div><div class="navheader"><span class="prev"><a href="v1.0.3-plugins-codecs-protobuf.html">
              « 
              Protobuf codec plugin v1.0.3</a>
           
        </span><span class="next">
           
          <a href="codec-rubydebug-index.html">Versioned rubydebug codec plugin docs
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="v1.0.2-plugins-codecs-protobuf"></a>Protobuf codec plugin v1.0.2</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Plugin version: v1.0.2</li><li class="listitem">Released on: 2017-06-23</li><li class="listitem"><a class="ulink" href="https://github.com/logstash-plugins/logstash-codec-protobuf/blob/v1.0.2/CHANGELOG.md" target="_top">Changelog</a></li></ul></div><p>For other versions, see the <a class="link" href="codec-protobuf-index.html" title="Versioned protobuf codec plugin docs">overview list</a>.</p><p>To learn more about Logstash, see the <a class="ulink" href="http://www.elastic.co/guide/en/logstash/current/index.html" target="_top">Logstash Reference</a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_getting_help_1184"></a>Getting Help</h3></div></div></div><p>For questions about the plugin, open a topic in the <a class="ulink" href="http://discuss.elastic.co" target="_top">Discuss</a> forums. For bugs or feature requests, open an issue in <a class="ulink" href="https://github.com/logstash-plugins/logstash-codec-protobuf" target="_top">Github</a>.
For the list of Elastic supported plugins, please consult the <a class="ulink" href="https://www.elastic.co/support/matrix#matrix_logstash_plugins" target="_top">Elastic Support Matrix</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_description_1168"></a>Description</h3></div></div></div><p>This codec converts protobuf encoded messages into logstash events and vice versa.</p><p>Requires the protobuf definitions as ruby files. You can create those using the [ruby-protoc compiler](<a class="ulink" href="https://github.com/codekitchen/ruby-protocol-buffers" target="_top">https://github.com/codekitchen/ruby-protocol-buffers</a>).</p><p>The following shows a usage example for decoding events from a kafka stream:</p><div class="pre_wrapper lang-ruby"><pre class="programlisting prettyprint lang-ruby">kafka
{
 zk_connect =&gt; "127.0.0.1"
 topic_id =&gt; "your_topic_goes_here"
 codec =&gt; protobuf
 {
   class_name =&gt; "Animal::Unicorn"
   include_path =&gt; ['/path/to/protobuf/definitions/UnicornProtobuf.pb.rb']
 }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="v1.0.2-plugins-codecs-protobuf-options"></a>Protobuf Codec Configuration Options</h3></div></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Setting</th><th align="left" valign="top">Input type</th><th align="left" valign="top">Required</th></tr></thead><tbody><tr><td align="left" valign="top"><p><a class="xref" href="v1.0.2-plugins-codecs-protobuf.html#v1.0.2-plugins-codecs-protobuf-class_name" title="class_name"><code class="literal">class_name</code></a></p></td><td align="left" valign="top"><p><a class="ulink" href="http://www.elastic.co/guide/en/logstash/current/configuration-file-structure.html#string" target="_top">string</a></p></td><td align="left" valign="top"><p>Yes</p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="v1.0.2-plugins-codecs-protobuf.html#v1.0.2-plugins-codecs-protobuf-include_path" title="include_path"><code class="literal">include_path</code></a></p></td><td align="left" valign="top"><p><a class="ulink" href="http://www.elastic.co/guide/en/logstash/current/configuration-file-structure.html#array" target="_top">array</a></p></td><td align="left" valign="top"><p>Yes</p></td></tr></tbody></table></div><p> </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="v1.0.2-plugins-codecs-protobuf-class_name"></a><code class="literal">class_name</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">This is a required setting.</li><li class="listitem">Value type is <a class="ulink" href="http://www.elastic.co/guide/en/logstash/current/configuration-file-structure.html#string" target="_top">string</a></li><li class="listitem">There is no default value for this setting.</li></ul></div><p>Name of the class to decode.
If your protobuf definition contains modules, prepend them to the class name with double colons like so:</p><div class="pre_wrapper lang-ruby"><pre class="programlisting prettyprint lang-ruby">class_name =&gt; "Foods::Dairy::Cheese"</pre></div><p>This corresponds to a protobuf definition starting as follows:</p><div class="pre_wrapper lang-ruby"><pre class="programlisting prettyprint lang-ruby">module Foods
   module Dairy
       class Cheese
           # here are your field definitions.</pre></div><p>If your class references other definitions: you only have to add the main class here.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="v1.0.2-plugins-codecs-protobuf-include_path"></a><code class="literal">include_path</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">This is a required setting.</li><li class="listitem">Value type is <a class="ulink" href="http://www.elastic.co/guide/en/logstash/current/configuration-file-structure.html#array" target="_top">array</a></li><li class="listitem">There is no default value for this setting.</li></ul></div><p>List of absolute pathes to files with protobuf definitions.
When using more than one file, make sure to arrange the files in reverse order of dependency so that each class is loaded before it is
refered to by another.</p><p>Example: a class <span class="emphasis"><em>Cheese</em></span> referencing another protobuf class <span class="emphasis"><em>Milk</em></span></p><div class="pre_wrapper lang-ruby"><pre class="programlisting prettyprint lang-ruby">module Foods
  module Dairy
        class Cheese
           set_fully_qualified_name "Foods.Dairy.Cheese"
           optional ::Foods::Cheese::Milk, :milk, 1
           optional :int64, :unique_id, 2
           # here be more field definitions</pre></div><p>would be configured as</p><div class="pre_wrapper lang-ruby"><pre class="programlisting prettyprint lang-ruby">include_path =&gt; ['/path/to/protobuf/definitions/Milk.pb.rb','/path/to/protobuf/definitions/Cheese.pb.rb']</pre></div><p>When using the codec in an output plugin:
* make sure to include all the desired fields in the protobuf definition, including timestamp.
  Remove fields that are not part of the protobuf definition from the event by using the mutate filter.
* the @ symbol is currently not supported in field names when loading the protobuf definitions for encoding. Make sure to call the timestamp field "timestamp"
  instead of "@timestamp" in the protobuf file. Logstash event fields will be stripped of the leading @ before conversion.</p></div></div></div><div class="navfooter"><span class="prev"><a href="v1.0.3-plugins-codecs-protobuf.html">
              « 
              Protobuf codec plugin v1.0.3</a>
           
        </span><span class="next">
           
          <a href="codec-rubydebug-index.html">Versioned rubydebug codec plugin docs
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/guide/static/jquery.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
