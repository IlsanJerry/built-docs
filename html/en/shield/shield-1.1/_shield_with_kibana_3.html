<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Shield with Kibana 3
        | Shield - Elasticsearch Security Plugin [shield-1.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Shield - Elasticsearch Security Plugin [shield-1.1]" /><link rel="up" href="clients.html" title="Integrating Shield with clients" /><link rel="prev" href="kibana.html" title="Kibana" /><link rel="next" href="_shield_with_kibana_4.html" title="Shield with Kibana 4" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Legacy/Shield/Reference/shield-1.1" /><meta name="DC.subject" content="Shield" /><meta name="DC.identifier" content="shield-1.1" /><meta name="robots" content="noindex,nofollow" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">From version 5.0 onward, Shield is part of X-Pack. For more information, see
<a href=https://www.elastic.co/guide/en/elastic-stack-overview/current/elasticsearch-security.html>
    Securing the Elastic Stack</a>. 
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Shield - Elasticsearch Security Plugin
      [shield-1.1]
    </a></span> » <span class="breadcrumb-link"><a href="clients.html">Integrating Shield with clients</a></span> » <span class="breadcrumb-node">Shield with Kibana 3</span></div><div class="navheader"><span class="prev"><a href="kibana.html">
              « 
              Kibana</a>
           
        </span><span class="next">
           
          <a href="_shield_with_kibana_4.html">Shield with Kibana 4
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_shield_with_kibana_3"></a>Shield with Kibana 3</h2></div></div></div><p>Shield and Kibana 3 have been tested together for recent versions of Chrome, Safari, and IE. This section describes
configuration changes and general information to ensure that the two products work together successfully for you.</p><p>Kibana 3 uses the <code class="literal">kibana-int</code> index to store saved dashboards. All users store dashboards in this index. Enable all
users to save and load dashboards from this index. When the Shield plugin is installed, users may be able to load
dashboards that access data in indices that they are not authorized to view. A user that loads such a dashboard
will receive a Kibana error stating that the disallowed index does not exist.</p><p>At the moment, there is no way to control which users can load which dashboards. We expect to address this
limitation with future versions of Shield and Kibana.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_kibana_configuration"></a>Kibana configuration</h3></div></div></div><p>Kibana will need to be informed that you wish use credentials. In Kibana’s <code class="literal">config.js</code> set the elasticsearch property:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">elasticsearch: {server: "http://YOUR_ELASTICSEARCH_SERVER:9200", withCredentials: true}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="cors"></a>Elasticsearch configuration</h3></div></div></div><p>HTTP authentication interacts with cross-origin resource sharing (CORS). Clusters that use CORS must send authentication
headers to the browser.</p><p>In the <code class="literal">elasticsearch.yml</code> file on all nodes, add the following configuration entries:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">http.cors.enabled: true
http.cors.allow-origin: "https://MYHOST:MYPORT"
http.cors.allow-credentials: true</pre></div><p>Note that in <code class="literal">http.cors.allow-origin</code>, <code class="literal">*</code> is disallowed for credentialed requests. You must enter the correct
protocol, hostname and port that would normally be entered into your browser.</p><p>Restart the nodes after modifying the configuration file. This change enables Elasticsearch to send the required
<code class="literal">Access-Control-Allow-Credentials</code> header.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>To learn more about enabling CORS, see <a class="ulink" href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/modules-http.html" target="_top">elasticsearch documentation</a>.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_shield_configuration"></a>Shield configuration</h3></div></div></div><p>Shield includes a default <a class="link" href="authorization.html#roles" title="Roles, Permissions and Privileges">role</a> for use with Kibana 3:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">kibana3:
  cluster: cluster:monitor/nodes/info
  indices:
    '*': indices:data/read/search, indices:data/read/get, indices:admin/get <a id="CO21-1"></a><i class="conum" data-value="1"></i>
    'kibana-int': indices:data/read/get, indices:data/read/search, indices:data/write/delete, indices:data/write/index,
                  create_index</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO21-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>This line gives the Kibana 3 user read access to indices in order to search and display the data in them. To
constrain this role’s access to specific indices, alter the wildcard.</p></td></tr></table></div><p>Kibana 3 uses the <code class="literal">kibana-int</code> index to save and load dashboards. This role definition allows the user to manage and
use the dashboards in the <code class="literal">kibana-int</code> index.</p><p>Kibana 3 uses the cluster permission to access the <code class="literal">/_nodes</code> endpoint in order to check the node version.</p><p>Elasticsearch recommends that you create one or more roles derived from this role. These new roles will include access to
indices specified by your organization’s goals and policies.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_ssltls_and_browsers"></a>SSL/TLS and browsers</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_trusting_certificates"></a>Trusting certificates</h4></div></div></div><p>As discussed in <a class="link" href="securing-nodes.html" title="Securing Nodes">Securing Nodes</a>, Shield supports adding SSL to the Elasticsearch HTTP interface.
When using Kibana, your browser verifies that the certificate received from the Elasticsearch node is trusted
before sending a request to the node. Establishing this trust requires that either your browser or operating
system trust the Certificate Authority (CA) that signed the node’s certificate. To use SSL with Shield and
Kibana 3, ensure that the browser or operating system has been configured to trust this CA.</p><p>The process to ensure this trust varies per organization. Some organizations will have pre-installed these CA
certificates into the operating system or the browser’s local certificate store. If this is the case, you will
not need to take any further action.</p><p>Other organizations will not have pre-installed the CA certificate. Or you may have created your own CA as discussed
in <a class="link" href="certificate-authority.html" title="Appendix 1. Running a Certificate Authority">Appendix 1</a>. In these cases, we recommend that you consult your local IT professional to
determine the recommended procedure for adding trusted CAs in your organization.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_working_with_source_builds_of_kibana_3"></a>Working with source builds of Kibana 3</h4></div></div></div><p>Some developers use Kibana 3 by pulling the software from our GitHub repository, and not using a built package
from our download site. If you do this, be sure to clear your browser’s cache after deploying Shield and
configuring the <code class="literal">http.cors.allow-credentials</code> parameter to avoid authentication errors with most browsers.</p></div></div></div><div class="navfooter"><span class="prev"><a href="kibana.html">
              « 
              Kibana</a>
           
        </span><span class="next">
           
          <a href="_shield_with_kibana_4.html">Shield with Kibana 4
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<script src='https://www.elastic.co/elastic-footer.js'></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>
<script type="text/javascript">
window.initial_state = {}</script>
  </body>
</html>
