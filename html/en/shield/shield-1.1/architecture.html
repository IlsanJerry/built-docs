<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Architecture Overview
        | Shield - Elasticsearch Security Plugin [shield-1.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Shield - Elasticsearch Security Plugin [shield-1.1]" /><link rel="up" href="index.html" title="Shield - Elasticsearch Security Plugin [shield-1.1]" /><link rel="prev" href="introduction.html" title="Introduction" /><link rel="next" href="quick-getting-started.html" title="Getting Started (Short Version)" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Legacy/Shield/Reference/shield-1.1" /><meta name="DC.subject" content="Shield" /><meta name="DC.identifier" content="shield-1.1" /><meta name="robots" content="noindex,nofollow" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  <div class="page_header">From version 5.0 onward, Shield is part of X-Pack. For more information, see
<a href=https://www.elastic.co/guide/en/elastic-stack-overview/current/elasticsearch-security.html>
    Securing the Elastic Stack</a>. 
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Shield - Elasticsearch Security Plugin
      [shield-1.1]
    </a></span> » <span class="breadcrumb-node">Architecture Overview</span></div><div class="navheader"><span class="prev"><a href="introduction.html">
              « 
              Introduction</a>
           
        </span><span class="next">
           
          <a href="quick-getting-started.html">Getting Started (Short Version)
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="architecture"></a>Architecture Overview</h1></div></div></div><p>Shield installs as a plugin into Elasticsearch. Once installed, the plugin intercepts inbound API calls in order to
enforce authentication and authorization. The plugin can also provide encryption using Secure Sockets Layer/Transport
Layer Security (SSL/TLS) for the network traffic to and from the Elasticsearch node. The plugin also uses the API
interception layer that enables authentication and authorization to provide audit logging capability.</p><h3><a id="_user_authentication"></a>User Authentication</h3><p>Shield defines a known set of users in order to authenticate users that make requests. These sets of users are defined
with an abstraction called a <span class="emphasis"><em>realm</em></span>. A realm is a user database configured for the use of the Shield plugin. The
supported realms are <span class="emphasis"><em>esusers</em></span> and <span class="emphasis"><em>LDAP</em></span>.</p><p>In the  <span class="emphasis"><em>esusers</em></span> realm, users exist exclusively within the Elasticsearch cluster. With the <span class="emphasis"><em>esusers</em></span> realm, the
administrator manages users with <a class="link" href="esusers.html" title="esusers - Internal File Based Authentication">tools provided by Elasticsearch</a>, and all the user operations occur within
the Elasticsearch cluster. Users authenticate with a username and password pair.</p><p>In the <span class="emphasis"><em>LDAP</em></span> realm, the administrator manages users with the tools provided by the LDAP vendor. Elasticsearch
authenticates users by accessing the configured LDAP server. Users authenticate with a username and password pair. Shield
also enables mapping LDAP groups to roles in Shield (more on roles below).</p><p>Your application can be a user in a Shield realm. Elasticsearch Clients authenticate to the cluster by providing a
username and password pair (a.k.a <span class="emphasis"><em>Authentication Token</em></span>) with each request. To learn more on how different clients
can authenticate, see <a class="link" href="clients.html" title="Integrating Shield with clients">Clients</a>.</p><h3><a id="_authorization"></a>Authorization</h3><p>Shield’s data model for action authorization consists of these elements:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><span class="emphasis"><em>Secured Resource</em></span>,   a resource against which security permissions are defined, including the cluster, an index/alias,
or a set of indices/aliases in the cluster</li><li class="listitem"><span class="emphasis"><em>Privilege</em></span>,          one or more actions that a user may execute against a secured resource. This includes named groups of
actions (e.g. <span class="emphasis"><em>read</em></span>), or a set specific actions (e.g. indices:/data/read/percolate)</li><li class="listitem"><span class="emphasis"><em>Permissions</em></span>,        one or more privileges against a secured resource (e.g. <span class="emphasis"><em>read on the "products" index</em></span>)</li><li class="listitem"><span class="emphasis"><em>Role</em></span>,               named sets of permissions</li><li class="listitem"><span class="emphasis"><em>Users</em></span>,              entities which may be assigned zero or more roles, authorizing them to perform the actions on the secure
resources described in the union of their roles</li></ul></div><p>A secure Elasticsearch cluster manages the privileges of users through <a class="link" href="authorization.html#roles" title="Roles, Permissions and Privileges"><span class="emphasis"><em>roles</em></span></a>. A role has a unique name and identifies
a set of permissions that translate to privileges on resources. A user can have an arbitrary number of roles. There are
two types of permissions: <span class="emphasis"><em>cluster</em></span> and <span class="emphasis"><em>index</em></span>. The total set of permissions that a user has is defined by union of the
permissions in all its roles.</p><p>Depending on the realm used, Shield provides the appropriate means to assign roles to users.</p><h3><a id="_node_authentication_and_channel_encryption"></a>Node Authentication and Channel Encryption</h3><p>Nodes communicate to other nodes over port 9300. With Shield, you can use SSL/TLS to wrap this communication. When
SSL/TLS is enabled, the nodes validate each other’s certificates, establishing trust between the nodes. This validation
prevents unauthenticated nodes from joining the cluster. Communications between nodes in the cluster are also encrypted
when SSL/TLS is in use.</p><p>Users are responsible for generating and installing their own certificates.</p><p>You can choose a variety of ciphers for encryption. See the <a class="link" href="ciphers.html" title="Enabling Cipher Suites for Stronger Encryption"><span class="emphasis"><em>Adding Ciphers to Java for Stronger Encryption</em></span></a>
section for details.</p><p>For more information on how to secure nodes see <a class="link" href="securing-nodes.html" title="Securing Nodes">Securing Nodes</a>.</p><h3><a id="_ip_filtering"></a>IP Filtering</h3><p>Shield provides IP-based access control for Elasticsearch nodes. This access control allows you to restrict which
other servers, via their IP address, can connect to your Elasticsearch nodes and make requests. For example, you can
configure Shield to allow access to the cluster only from your application servers. The configuration provides for
whitelisting and blacklisting of subnets, specific IP addresses, and DNS domains. To read more about IP filtering see
<a class="link" href="ip-filtering.html" title="IP filtering">IP filtering</a>.</p><h3><a id="_auditing"></a>Auditing</h3><p>The <a class="link" href="auditing.html" title="Auditing">audit functionality</a> in a secure Elasticsearch cluster logs particular events and activity on that
cluster. The events logged include authentication attempts, including granted and denied access.</p></div><div class="navfooter"><span class="prev"><a href="introduction.html">
              « 
              Introduction</a>
           
        </span><span class="next">
           
          <a href="quick-getting-started.html">Getting Started (Short Version)
               »
            </a></span></div>
                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'></div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>
      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script type="text/javascript" src="/guide/static/docs.js"></script>

<script type="text/javascript">
window.initial_state = {}</script>
  </body>
</html>
