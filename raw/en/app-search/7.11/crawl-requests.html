<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Crawl Requests API | Elastic App Search Documentation [7.11] | Elastic</title>
<link rel="home" href="index.html" title="Elastic App Search Documentation [7.11]"/>
<link rel="up" href="api-reference.html" title="API Reference"/>
<link rel="prev" href="credentials.html" title="Credentials API"/>
<link rel="next" href="curations.html" title="Curations API"/>
<meta name="DC.type" content="Learn/Docs/App Search/Guide/7.11"/>
<meta name="DC.subject" content="App Search"/>
<meta name="DC.identifier" content="7.11"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic App Search Documentation [7.11]</a></span>
»
<span class="breadcrumb-link"><a href="api-reference.html">API Reference</a></span>
»
<span class="breadcrumb-node">Crawl Requests API</span>
</div>
<div class="navheader">
<span class="prev">
<a href="credentials.html">« Credentials API</a>
</span>
<span class="next">
<a href="curations.html">Curations API »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="crawl-requests"></a>Crawl Requests API<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/app-search-docs/api-reference/crawler/crawl-requests.asciidoc">edit</a></h2>
</div></div></div>
<p>Each crawl, performed by the Enterprise Search Crawler has an associated <span class="strong strong"><strong>crawl request</strong></span> object. The Crawl Requests API allows operators to create new crawl requests and to view and control the state of existing crawl requests.</p>
<p><span class="strong strong"><strong>TODO: Add a note about the beta status of the API.</strong></span></p>
<p>The following operations are supported on the Crawl Requests API:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="crawl-requests.html#crawl-requests-get-active" title="Get Current Active Crawl Request">Get Current Active Crawl Request</a>
</li>
<li class="listitem">
<a class="xref" href="crawl-requests.html#crawl-requests-cancel" title="Cancel an Active Crawl">Cancel an Active Crawl</a>
</li>
<li class="listitem">
<a class="xref" href="crawl-requests.html#crawl-requests-list" title="List Crawl Requests">List Crawl Requests</a>
</li>
<li class="listitem">
<a class="xref" href="crawl-requests.html#crawl-requests-create" title="Create a New Crawl Request">Create a New Crawl Request</a>
</li>
<li class="listitem">
<a class="xref" href="crawl-requests.html#crawl-request-view" title="View Details for a Crawl Request">View Details for a Crawl Request</a>
</li>
</ul>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_a_note_on_scoping"></a>A Note on Scoping<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/app-search-docs/api-reference/crawler/crawl-requests.asciidoc">edit</a></h3>
</div></div></div>
<p>All endpoints within the Crawl Requests API are scoped to a particular App Search engine. The engine is identified by the engine name value provided in the URL of the request. If an engine could not be found for any API request, an empty HTTP 404 response will be returned.</p>
<hr>
<h4><a id="crawl-requests-get-active"></a>Get Current Active Crawl Request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/app-search-docs/api-reference/crawler/crawl-requests.asciidoc">edit</a></h4>
<p>Returns a crawl request object for an active crawl or returns an HTTP 404 response if there is no active crawl for a given App Search engine.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">GET /api/as/v0/engines/{ENGINE_NAME}/crawler/crawl_requests/active</pre>
</div>
<p>For successful calls, the response is going to look like this:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "601b21adbeae67679b3b760a",
  "status": "running",
  "created_at": "Wed, 03 Feb 2021 22:20:29 +0000",
  "begun_at": "Wed, 03 Feb 2021 22:20:31 +0000",
  "completed_at": null
}</pre>
</div>
<p>For cases, when there is no active crawl for a given engine, the API responds with a 404 error:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 404 Not Found
{
  "error": "There are no active crawl requests for this engine"
}</pre>
</div>
<h4><a id="crawl-requests-cancel"></a>Cancel an Active Crawl<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/app-search-docs/api-reference/crawler/crawl-requests.asciidoc">edit</a></h4>
<p>Cancels an active crawl for a given App Search engine or returns an HTTP 404 response if there is no active crawl for a given App Search engine.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>It may take some time for the crawler to detect the cancellation request and gracefully stop the crawl. During the time, the status of the crawl request will remain <code class="literal">canceling</code>.</p>
</div>
</div>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">POST /api/as/v0/engines/{ENGINE_NAME}/crawler/crawl_requests/active/cancel</pre>
</div>
<p>In case of success, the response contains a single crawl request object with a <code class="literal">canceling</code> state:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "601b21adbeae67679b3b760a",
  "status": "canceling",
  "created_at": "Wed, 03 Feb 2021 22:20:29 +0000",
  "begun_at": "Wed, 03 Feb 2021 22:20:31 +0000",
  "completed_at": null
}</pre>
</div>
<p>For cases, when there is no active crawl for a given engine, the API responds with a 404 error:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 404 Not Found
{
  "error": "There are no active crawl requests for this engine"
}</pre>
</div>
<h4><a id="crawl-requests-list"></a>List Crawl Requests<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/app-search-docs/api-reference/crawler/crawl-requests.asciidoc">edit</a></h4>
<p>Returns a list of the most recent crawl requests for a given engine. The number of items returned (default: 10) can be changed by using the <code class="literal">limit</code> argument.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">GET /api/as/v0/engines/{ENGINE_NAME}/crawler/crawl_requests
GET /api/as/v0/engines/{ENGINE_NAME}/crawler/crawl_requests?limit=25</pre>
</div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
[
  {
    "id": "601b21adbeae67679b3b760a",
    "status": "running",
    "created_at": "Wed, 03 Feb 2021 22:20:29 +0000",
    "begun_at": "Wed, 03 Feb 2021 22:20:31 +0000",
    "completed_at": null
  },
  {
    "id": "60147e93beae67bf7ef72e86",
    "status": "success",
    "created_at": "Fri, 29 Jan 2021 21:30:59 +0000",
    "begun_at": "Fri, 29 Jan 2021 21:31:00 +0000",
    "completed_at": "Fri, 29 Jan 2021 21:35:20 +0000"
  },
  {
    "id": "60146c07beae67f397300128",
    "status": "canceled",
    "created_at": "Fri, 29 Jan 2021 20:11:51 +0000",
    "begun_at": "Fri, 29 Jan 2021 20:11:52 +0000",
    "completed_at": "Fri, 29 Jan 2021 20:12:51 +0000"
  }
]</pre>
</div>
<h4><a id="crawl-requests-create"></a>Create a New Crawl Request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/app-search-docs/api-reference/crawler/crawl-requests.asciidoc">edit</a></h4>
<p>Requests a new crawl for a given App Search engine. If there is already an active crawl, the request returns an HTTP 400 response with an error message.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">POST /api/as/v0/engines/{ENGINE_NAME}/crawler/crawl_requests</pre>
</div>
<p>In case of success, the response contains a single crawl request object with a <code class="literal">pending</code> state:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "601b21adbeae67679b3b760a",
  "status": "pending",
  "created_at": "Wed, 03 Feb 2021 22:20:29 +0000",
  "begun_at": null,
  "completed_at": null
}</pre>
</div>
<p>When there is already an active crawl, the API returns an HTTP 400 response:</p>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json">400 Bad Request
{
  "error": "There is an active crawl for the engine \"your-engine\", please wait for it to finish or abort it before requesting another one"
}</pre>
</div>
<h4><a id="crawl-request-view"></a>View Details for a Crawl Request<a class="edit_me edit_me_private" rel="nofollow" title="Editing on GitHub is available to Elastic" href="https://github.com/elastic/enterprise-search-pubs/edit/7.11/app-search-docs/api-reference/crawler/crawl-requests.asciidoc">edit</a></h4>
<p>Returns details of a given crawl request. The crawl request is identified with a unique Crawl Request ID value.</p>
<div class="pre_wrapper lang-bash">
<pre class="programlisting prettyprint lang-bash">GET /api/as/v0/engines/{ENGINE_NAME}/crawler/crawl_requests/{CRAWL_REQUEST_ID}</pre>
</div>
<div class="pre_wrapper lang-json">
<pre class="programlisting prettyprint lang-json"># 200 OK
{
  "id": "60147e93beae67bf7ef72e86",
  "status": "success",
  "created_at": "Fri, 29 Jan 2021 21:30:59 +0000",
  "begun_at": "Fri, 29 Jan 2021 21:31:00 +0000",
  "completed_at": "Fri, 29 Jan 2021 21:35:20 +0000"
}</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="credentials.html">« Credentials API</a>
</span>
<span class="next">
<a href="curations.html">Curations API »</a>
</span>
</div>
</div>
</body>
</html>
