<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>8.0 | Elastic Security Solution [8.1] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Security Solution [8.1]"/>
<link rel="up" href="release-notes.html" title="Release notes"/>
<link rel="prev" href="release-notes.html" title="Release notes"/>
<link rel="next" href="prebuilt-rule-0-13-1-prebuilt-rules-0-13-1-appendix.html" title="Appendix A: Downloadable rule update v0.13.1"/>
<meta name="DC.type" content="Learn/Docs/Security/Guide/8.1"/>
<meta name="DC.subject" content="Security"/>
<meta name="DC.identifier" content="8.1"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic Security Solution [8.1]</a></span>
»
<span class="breadcrumb-link"><a href="release-notes.html">Release notes</a></span>
»
<span class="breadcrumb-node">8.0</span>
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes.html">« Release notes</a>
</span>
<span class="next">
<a href="prebuilt-rule-0-13-1-prebuilt-rules-0-13-1-appendix.html">Appendix A: Downloadable rule update v0.13.1 »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="release-notes-header-8.0.0"></a>8.0<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.1/docs/release-notes/8.0.asciidoc">edit</a></h2>
</div></div></div>
<h3><a id="release-notes-8.0.0"></a>8.0.0<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.1/docs/release-notes/8.0.asciidoc">edit</a></h3>
<h4><a id="known-issues-8.0.0"></a>Known issues<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.1/docs/release-notes/8.0.asciidoc">edit</a></h4>
<p><span class="strong strong"><strong>Case migration errors might be logged when upgrading</strong></span></p>
<p>You might find the <code class="literal">Failed to migrate user action alerts</code> error message in your Kibana migration logs when upgrading to Elastic Stack version 8.0.0. This error is incorrectly logged when migrating cases and can be ignored (<a href="https://github.com/elastic/kibana/pull/124950" class="ulink" target="_top">#124950</a>).</p>
<p>Here is an example of an error message you might encounter:</p>
<pre class="screen">[2022-02-07T20:25:58.614+00:00][ERROR][savedobjects-service] Failed to migrate user action alerts with doc id: 7420fe08-c2ed-51d2-b077-46deb4bf76c9 version: 8.0.0 error: Unexpected token in JSON at position 0</pre>
<p><span class="strong strong"><strong>Existing or new rules that use the legacy alerts index may temporarily fail after upgrading</strong></span></p>
<p>After you upgrade to Elastic Stack version 8.0.0, existing and new rules might fail to execute  if their source index is configured to use a legacy alert index pattern created in Elastic Stack version 7.x (<code class="literal">.siem-signals-&lt;space-id&gt;</code>). Rule failures will likely cause detection gaps, which will be proportional in time to the scheduled interval of the rule. Rules will start to successfully execute after legacy alerts are no longer within the scheduled time period queried by the rule. Despite this automatic correction, coverage gaps might still remain (<a href="https://github.com/elastic/kibana/pull/124327" class="ulink" target="_top">#124327</a>).</p>
<p><span class="strong strong"><strong>The Threat Intel Filebeat Module (v8.x) Indicator Match rule query is misconfigured</strong></span></p>
<p>The indicator index query of the prebuilt rule is misconfigured and will prevent the rule from generating alerts (<a href="https://github.com/elastic/kibana/pull/121045" class="ulink" target="_top">#121045</a>, <a href="https://github.com/elastic/kibana/pull/1560" class="ulink" target="_top">#1560</a>). To resolve this, duplicate the rule and update its settings:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to the Rules table (<span class="strong strong"><strong>Detect &#8594; Rules</strong></span>).
</li>
<li class="listitem">
<p>Locate the Threat Intel Filebeat Module (v8.x) Indicator Match prebuilt rule.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can search for the rule by entering the rule name in the Rule table&#8217;s search bar.</p>
</div>
</div>
</li>
<li class="listitem">
Click the rule to view the rule details.
</li>
<li class="listitem">
Click the actions menu, then click <span class="strong strong"><strong>Duplicate rule</strong></span>.
</li>
<li class="listitem">
<p>Go to the <span class="strong strong"><strong>Indicator index query</strong></span> field and update the query by removing <code class="literal">event.dataset:ti_*</code> and replacing it with <code class="literal">event.module:threatintel</code>. For reference, the correct query is:</p>
<pre class="screen">`@timestamp &gt;= "now-30d" and event.module:threatintel and (threat.indicator.file.hash.*:* or threat.indicator.file.pe.imphash:* or threat.indicator.ip:* or threat.indicator.registry.path:* or threat.indicator.url.full:*)`</pre>
</li>
<li class="listitem">
Under the <span class="strong strong"><strong>Indicator index query</strong></span> field, update the query&#8217;s filters by removing <code class="literal">event.dataset:ti_*</code> and replacing it with <code class="literal">event.module:threatintel</code>.
</li>
<li class="listitem">
Save the changes.
</li>
<li class="listitem">
Activate the rule.
</li>
</ol>
</div>
<h4><a id="upgrade-reqs-8.0.0"></a>Upgrade requirements<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.1/docs/release-notes/8.0.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Rules must be manually disabled before upgrading to Elastic Stack version 8.0.0, and then manually enabled after the process completes to avoid gaps in rule coverage. Refer to <a class="xref" href="upgrade-intro.html" title="Upgrade Elastic Security">Upgrade Elastic Security</a> for more information.
</li>
<li class="listitem">
<p>To make the <span class="strong strong"><strong>Data view</strong></span> option appear in an environment with legacy alerts, a user with elevated role privileges must visit the Elastic Security app, open a page that displays alert data (such as the Overview page), then refresh the page. The user&#8217;s role privileges must allow them to enable the detections feature in a Kibana space. Refer to <a class="xref" href="detections-permissions-section.html#enable-detections-ui" title="Enable and access detections">Enable and access detections</a> for more information.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If new alerts are generated in an upgraded environment without legacy alerts, refreshing any page with alert data in Elastic Security will make the <span class="strong strong"><strong>Data view</strong></span> option appear in the Elastic Security UI.</p>
</div>
</div>
</li>
<li class="listitem">
The system index for detection alerts has been renamed from <code class="literal">.siem-signals-*</code> to <code class="literal">.alerts-security.alerts-*</code> and is now a hidden index. As such, the schema used for alert documents in Elastic Security has changed. Users that access documents in the <code class="literal">.siem-signals</code> indices via the Elastic Security API must modify their API queries and scripts to operate properly on the new 8.0 alert documents. The new schema is available at <a class="xref" href="alert-schema.html" title="Alert schema">Alert schema</a>.
</li>
<li class="listitem">
To view alerts, users need <code class="literal">manage</code>, <code class="literal">write</code>, <code class="literal">read</code>, and <code class="literal">view_index_metadata</code> privileges to two new indices, <code class="literal">.alerts-security.alerts</code> and <code class="literal">.internal.alerts-security.alerts</code>. Existing users who are upgrading to 8.0 can retain their privileges to the <code class="literal">.siem-signals</code> index. Refer to <a class="xref" href="detections-permissions-section.html" title="Detections prerequisites and requirements">Detections prerequisites and requirements</a> for more information.
</li>
<li class="listitem">
To <a class="xref" href="rules-ui-create.html#preview-rules" title="Preview your rule (optional)">preview rules</a>, users need <code class="literal">read</code> access to the new <code class="literal">.preview.alerts-security.alerts</code> index. Refer to <a class="xref" href="detections-permissions-section.html" title="Detections prerequisites and requirements">Detections prerequisites and requirements</a> for more information.
</li>
<li class="listitem">
New Full Disk Access approval is needed when deploying Elastic Endpoint on macOS. Refer to [deploy-elastic-endpoint] for information.
</li>
<li class="listitem">
<p>Changes to the indicator match rule&#8217;s <a class="xref" href="rules-ui-create.html#rule-ui-advanced-params" title="Configure advanced rule settings (optional)">default threat indicator path</a> might require you to update existing rules, or create new ones, after upgrading to Elastic Stack version 8.0.0. Be mindful of the following:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If an indicator match rule&#8217;s default threat indicator path was not defined before the upgrade, it will default to <code class="literal">threatintel.indicator</code> after the upgrade. This allows the rule to continue using indicator data ingested by Filebeat version 7.x. If a custom value was defined before the upgrade, the value will not change.
</li>
<li class="listitem">
If an existing indicator match rule was configured to use threat indicator indices generated from Filebeat version 7.x, updating the default threat indicator path to <code class="literal">threat.indicator</code> after you upgrade to Elastic Stack version 8.0.0 and Elastic Agent or Filebeat version 8.0.0 configures the rule to use threat indicator indices generated by those later versions.
</li>
<li class="listitem">
You must create separate rules to query threat intelligence indices created by Filebeat version 7.x and version 8.0.0 because each version requires a different default threat indicator path value.
</li>
</ul>
</div>
</li>
</ul>
</div>
<h4><a id="breaking-changes-8.0.0"></a>Breaking Changes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.1/docs/release-notes/8.0.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Removes the trusted application API. The trusted application interface retains current functionality, but now uses the exception list API (<a href="https://github.com/elastic/kibana/pull/120134" class="ulink" target="_top">#120134</a>).
</li>
<li class="listitem">
Removes the list endpoint metadata API (<a href="https://github.com/elastic/kibana/pull/119401" class="ulink" target="_top">#119401</a>).
</li>
<li class="listitem">
<p>Lets you grant privileges for cases separately from Elastic Security privileges (<a href="https://github.com/elastic/kibana/pull/113573" class="ulink" target="_top">#113573</a>, <a href="https://github.com/elastic/kibana/pull/112980" class="ulink" target="_top">#112980</a>). As a result of this change, you must update case privileges for existing roles <em>before</em> upgrading to Elastic Stack 8.0.0. Follow these steps:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Open the main menu and click <span class="strong strong"><strong>Management &#8594; Stack Management &#8594; Stack &#8594; Upgrade Assistant</strong></span>.
</li>
<li class="listitem">
From the Upgrade Assistant page, review the Kibana deprecation warnings. A message prompts you to update role privileges because of changes to the Elastic Security Cases feature.
</li>
<li class="listitem">
Click the message to open it, then click <span class="strong strong"><strong>Quick resolve</strong></span>.
</li>
<li class="listitem">
Refresh the page to verify the deprecation was resolved, then return to the guided steps on the Upgrade Assistant page.
</li>
</ol>
</div>
</li>
</ul>
</div>
<h4><a id="new-features-8.0.0"></a>Features<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.1/docs/release-notes/8.0.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Shows all historical alerts for a given rule on the rule details page, including those associated with previous versions of the rule (<a href="https://github.com/elastic/kibana/pull/120053" class="ulink" target="_top">#120053</a>).
</li>
<li class="listitem">
Enhances the UI and functionality for the Rules and Rule Monitoring tables and enables actions on the Rule Monitoring table (<a href="https://github.com/elastic/kibana/pull/119644" class="ulink" target="_top">#119644</a>).
</li>
<li class="listitem">
The Threat Intelligence view supports Elastic Agent, Filebeat, and custom integrations (<a href="https://github.com/elastic/kibana/pull/116175" class="ulink" target="_top">#116175</a>).
</li>
<li class="listitem">
Allows exception lists to be exported and imported with detection rules (<a href="https://github.com/elastic/kibana/pull/115144" class="ulink" target="_top">#115144</a>, <a href="https://github.com/elastic/kibana/pull/118816" class="ulink" target="_top">#118816</a>).
</li>
</ul>
</div>
<h4><a id="bug-fixes-8.0.0"></a>Bug fixes and enhancements<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.1/docs/release-notes/8.0.asciidoc">edit</a></h4>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Enhances the UI for the Exceptions table; improves how dates are displayed in the Rules and Exceptions tables (<a href="https://github.com/elastic/kibana/pull/117643" class="ulink" target="_top">#117643</a>, <a href="https://github.com/elastic/kibana/pull/118940" class="ulink" target="_top">#118940</a>).
</li>
<li class="listitem">
Updates the mappings of the rule registry to ECS version 8.0.0 so that detection rules can process ECS version 8.0.0 data (<a href="https://github.com/elastic/kibana/pull/123012" class="ulink" target="_top">#123012</a>).
</li>
<li class="listitem">
Allows you to create and add runtime fields from the Alert and Timeline tables (<a href="https://github.com/elastic/kibana/pull/117627" class="ulink" target="_top">#117627</a>, <a href="https://github.com/elastic/kibana/pull/114806" class="ulink" target="_top">#114806</a>).
</li>
<li class="listitem">
Enhances the Data view selection UI and hides the Data view dropdown when no data is present (<a href="https://github.com/elastic/kibana/pull/117601" class="ulink" target="_top">#117601</a>, <a href="https://github.com/elastic/kibana/pull/119956" class="ulink" target="_top">#119956</a>).
</li>
<li class="listitem">
Enhances previews and error flagging during rule creation (<a href="https://github.com/elastic/kibana/pull/116374" class="ulink" target="_top">#116374</a>).
</li>
<li class="listitem">
Updates rule actions to use <code class="literal">kibana.alert.*</code> fields instead of <code class="literal">signals.*</code> fields (<a href="https://github.com/elastic/kibana/pull/116491" class="ulink" target="_top">#116491</a>).
</li>
<li class="listitem">
Changes the insufficient permissions message type from an error to a warning (<a href="https://github.com/elastic/kibana/pull/123777" class="ulink" target="_top">#123777</a>).
</li>
<li class="listitem">
Fixes typos in the success messages that appear after you close Timelines or Timeline templates (<a href="https://github.com/elastic/kibana/pull/123258" class="ulink" target="_top">#123258</a>).
</li>
<li class="listitem">
Updates the Exceptions table header and Export button (<a href="https://github.com/elastic/kibana/pull/122870" class="ulink" target="_top">#122870</a>).
</li>
<li class="listitem">
Fixes a bug that could break a rule’s details page after you edited, activated, or deactivated the rule (<a href="https://github.com/elastic/kibana/pull/122024" class="ulink" target="_top">#122024</a>).
</li>
<li class="listitem">
Fixes an overlap between the rule query text field and Timeline banner (<a href="https://github.com/elastic/kibana/pull/121967" class="ulink" target="_top">#121967</a>, <a href="https://github.com/elastic/kibana/pull/121127" class="ulink" target="_top">#121127</a>).
</li>
<li class="listitem">
Adds support for the <code class="literal">threat.feed.name</code> field in the alert details flyout and Timeline view (<a href="https://github.com/elastic/kibana/pull/120250" class="ulink" target="_top">#120250</a>).
</li>
<li class="listitem">
Adds the default threat indicator path (<code class="literal">threat_indicator_path</code>) to indicator match rules where it was missing (<a href="https://github.com/elastic/kibana/pull/118962" class="ulink" target="_top">#118962</a>).
</li>
<li class="listitem">
Adds a default value for the threat indicator path that indicator match rules use when creating indicator match rules from the Elastic Security app UI or the create rule API (<a href="https://github.com/elastic/kibana/pull/118821" class="ulink" target="_top">#118821</a>).
</li>
<li class="listitem">
Enhances the Endpoint details flyout UI (<a href="https://github.com/elastic/kibana/pull/117987" class="ulink" target="_top">#117987</a>).
</li>
<li class="listitem">
Fixes a bug that prevented you from clearing a connector’s <code class="literal">Additional comments</code> field (<a href="https://github.com/elastic/kibana/pull/117901" class="ulink" target="_top">#117901</a>).
</li>
<li class="listitem">
Allows you to modify the default threat indicator path for the Threat Intel Filebeat Module (v7.x) Indicator Match prebuilt rule (<a href="https://github.com/elastic/kibana/pull/116583" class="ulink" target="_top">#116583</a>).
</li>
</ul>
</div>
<h3><a id="release-notes-8.0.0-rc2"></a>8.0.0-rc2<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.1/docs/release-notes/8.0.asciidoc">edit</a></h3>
<h4><a id="known-issues-8.0.0-rc2"></a>Known issues<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/security-docs/edit/8.1/docs/release-notes/8.0.asciidoc">edit</a></h4>
<p><span class="strong strong"><strong>The Data view option might not display in upgraded environments with legacy alerts</strong></span></p>
<p>To make the <span class="strong strong"><strong>Data view</strong></span> option appear, a user with elevated role privileges must visit the Elastic Security app, open a page that displays alert data (such as the Overview page), then refresh the page. (<a href="https://github.com/elastic/kibana/pull/121390" class="ulink" target="_top">#121390</a>).</p>
<p>The role must have the following privileges:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Cluster privileges</strong></span>: The <code class="literal">manage</code> privilege
</li>
<li class="listitem">
<p><span class="strong strong"><strong>Index privileges</strong></span>: The <code class="literal">manage</code>, <code class="literal">write</code>,<code class="literal">read</code>, and <code class="literal">view_index_metadata</code> index privileges for the following system indices where <code class="literal">&lt;space-id&gt;</code> is the Kibana space name:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">.siem-signals-&lt;space-id&gt;</code>
</li>
<li class="listitem">
<code class="literal">.lists-&lt;space-id&gt;</code>
</li>
<li class="listitem">
<code class="literal">.items-&lt;space-id&gt;</code>
</li>
<li class="listitem">
<code class="literal">.alerts-security.alerts-&lt;space-id&gt;</code>
</li>
<li class="listitem">
<code class="literal">.internal.alerts-security.alerts-&lt;space-id&gt;-*</code>
</li>
</ul>
</div>
</li>
<li class="listitem">
<span class="strong strong"><strong>Kibana space</strong></span>: <code class="literal">All</code> privileges for the <code class="literal">Security</code> feature (visit
<a href="/guide/en/kibana/8.1/xpack-spaces.html#spaces-control-user-access" class="ulink" target="_top">Feature access based on user privileges</a> for more information)
</li>
</ul>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If new alerts are generated in an upgraded environment without legacy alerts, refreshing any page with alert data in Elastic Security will make the <span class="strong strong"><strong>Data view</strong></span> option appear in the Elastic Security UI.</p>
</div>
</div>
<p><span class="strong strong"><strong>Detection rules may not generate alerts after upgrading to Elastic Stack 8.0.0</strong></span></p>
<p>If you do not manually disable rules before upgrading to Elastic Stack version 8.0.0, they&#8217;re automatically disabled during the upgrade process and must be manually re-enabled after the process completes. Failure to do so could cause a gap in rule coverage (<a href="https://github.com/elastic/kibana/pull/120906" class="ulink" target="_top">#120906</a>).</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To use the Elastic Security API to re-enable rules, refer to <a class="xref" href="bulk-actions-rules-api.html" title="Bulk rule actions">Bulk rule actions</a>.</p>
</div>
</div>
<p>To re-enable your rules from the Rules page:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Go to the All rules table (<span class="strong strong"><strong>Detect &#8594; Rules</strong></span>).
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Select all (number) rules</strong></span> <span class="strong strong"><strong>Rule</strong></span> select all rules.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Bulk actions &#8594; Activate Selected</strong></span> to re-enable all rules.
</li>
</ol>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="release-notes.html">« Release notes</a>
</span>
<span class="next">
<a href="prebuilt-rule-0-13-1-prebuilt-rules-0-13-1-appendix.html">Appendix A: Downloadable rule update v0.13.1 »</a>
</span>
</div>
</div>
</body>
</html>
