<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Upgrading on Elastic Cloud | Installation and Upgrade Guide [8.0] | Elastic</title>
<link rel="home" href="index.html" title="Installation and Upgrade Guide [8.0]"/>
<link rel="up" href="upgrading-elastic-stack.html" title="Upgrading the Elastic Stack"/>
<link rel="prev" href="upgrading-elastic-stack.html" title="Upgrading the Elastic Stack"/>
<link rel="next" href="upgrading-elastic-stack-on-prem.html" title="Upgrading on-prem"/>
<meta name="DC.type" content="Learn/Docs/Elastic Stack/Installation and Upgrade/8.0"/>
<meta name="DC.subject" content="Elastic Stack"/>
<meta name="DC.identifier" content="8.0"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Installation and Upgrade Guide [8.0]</a></span>
»
<span class="breadcrumb-link"><a href="upgrading-elastic-stack.html">Upgrading the Elastic Stack</a></span>
»
<span class="breadcrumb-node">Upgrading on Elastic Cloud</span>
</div>
<div class="navheader">
<span class="prev">
<a href="upgrading-elastic-stack.html">« Upgrading the Elastic Stack</a>
</span>
<span class="next">
<a href="upgrading-elastic-stack-on-prem.html">Upgrading on-prem »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="upgrade-elastic-stack-for-elastic-cloud"></a>Upgrading on Elastic Cloud<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/8.0/docs/en/install-upgrade/upgrading-stack-cloud.asciidoc">edit</a></h2>
</div></div></div>
<p>A single click in the Elastic Cloud console can upgrade a cluster to a newer
version, add more processing capacity, change plugins, and enable or disable
high availability, all at the same time. During the upgrade process,
Elasticsearch, Kibana, and all of your deployment components are upgraded simultaneously.</p>
<p>Although upgrading your Elastic Cloud deployments is easy, you still need to
address breaking changes that affect your application. Minor version upgrades,
upgrades from 6.8 to 8.0.0-rc1, and all other cluster configuration
changes can be performed with no downtime.</p>
<h3><a id="_prepare_for_the_upgrade"></a>Prepare for the upgrade<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/8.0/docs/en/install-upgrade/upgrading-stack-cloud.asciidoc">edit</a></h3>
<p>To avoid downtime when a full cluster restart is required:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Provision an additional cluster with the new Elasticsearch version, reindex
your data, and send index requests to both clusters temporarily.
</li>
<li class="listitem">
Verify that the new cluster performs as expected, fix any problems, and then
permanently swap in the new cluster.
</li>
<li class="listitem">
Delete the old cluster to stop incurring additional costs. You are billed
only for the time that the new cluster runs in parallel with your old cluster.
Usage is billed on an hourly basis.
</li>
</ol>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elastic Cloud only supports upgrades to released versions. Preview
releases and master snapshots are not supported.</p>
</div>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot downgrade after upgrading, so plan ahead to make sure that your applications still work after upgrading. For more information on changes that might affect your applications, check <a class="xref" href="elastic-stack-breaking-changes.html" title="Breaking changes"><em>Breaking changes</em></a>.</p>
</div>
</div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
The Upgrade Assistant
</span>
</dt>
<dd>
When you upgrade on Elastic Cloud, the deprecation API runs automatically to retrieve information about the cluster, node, and index-level settings that need to be removed or changed. If there are any deprecation issues that would prevent the upgraded deployment from successfully performing, the upgrade fails. To resolve the deprecation issues, use the <a href="/guide/en/kibana/8.0/upgrade-assistant.html" class="ulink" target="_top">Upgrade Assistant</a> in Kibana. If any indices in your Elasticsearch clusters need to be reindexed, the Upgrade Assistant will guide you through the steps.
</dd>
<dt>
<span class="term">
Snapshot behavior during upgrades
</span>
</dt>
<dd>
<p>
To keep your data safe, a snapshot is taken automatically before any changes are made to your cluster. After a major version upgrade is complete, and the first successful snapshot with the new major version is available, all snapshots taken with the previous version of Elasticsearch are removed.
</p>
<p>For example, before upgrading from Elasticsearch version 7.x to version 8.x, a snapshot is taken. After the upgrade to version 8.x is complete, and an 8.x snapshot is available, all snapshots taken with version 7.x are removed.</p>
<p>On Elastic Cloud Enterprise, you need to <a href="/guide/en/cloud-enterprise/current/ece-manage-repositories.html" class="ulink" target="_top">configure a snapshot repository</a> to enable snapshots.</p>
</dd>
<dt>
<span class="term">
Review breaking changes
</span>
</dt>
<dd>
<p>
Major version upgrades can include changes that expose the upgrading process to possible risk. A breaking change is the result of a functional change between major Elasticsearch versions, and requires you to perform additional steps to ensure that you can use the new version as intended.
</p>
<p>Review the <a class="xref" href="elastic-stack-breaking-changes.html" title="Breaking changes"><em>Breaking changes</em></a> and upgrade your code to work
with 8.0.0-rc1.</p>
</dd>
<dt>
<span class="term">
Review known issues
</span>
</dt>
<dd>
<p>
The following known issues apply to the Elastic Stack 8.x releases:
</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
There are deprecated APIs that are still available for use. If you see warnings in the Elasticsearch Service or Elastic Cloud Enterprise logs about the deprecated APIs, you can ignore them.
</li>
<li class="listitem">
Elasticsearch Service and Elastic Cloud Enterprise do not support the ability to upgrade to or from release candidate builds, such as 8.0.0-rc1.
</li>
<li class="listitem">
For Elasticsearch 7.8 and later the Index Lifecycle Managment (ILM) API is always enabled, even if the cluster is still using the deprecated index curation. If index curation and ILM are both configured to process the same indices the outcome can be unpredictable. As other stack products default to using ILM when it is available in Elasticsearch, we strongly encourage you to <a href="/guide/en/cloud/current/ec-migrate-index-management.html" class="ulink" target="_top">Migrate to index lifecycle management</a>. ILM also has a superior feature set.
</li>
</ul>
</div>
</dd>
<dt>
<span class="term">
Update the security realm settings
</span>
</dt>
<dd>
<p>
During the upgrade process, you are prompted to update the security realm settings when your <code class="literal">user_settings</code> include a <code class="literal">xpack.security.authc.realms</code> value.
</p>
<p>There are two settings that prompt you to update:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If the security realm settings are located in <code class="literal">user_settings_override</code>, contact support to help you upgrade.
</li>
<li class="listitem">
<p>If the security realm settings are located in <code class="literal">user_settings</code>, you&#8217;ll receive a message that allows you to modify these settings.</p>
<p>To modify the <code class="literal">user_settings</code>:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
On the <span class="strong strong"><strong>Update security realm settings</strong></span> window, edit the settings.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Update settings</strong></span>.
</li>
</ol>
</div>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<h3><a id="_perform_the_upgrade"></a>Perform the upgrade<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/8.0/docs/en/install-upgrade/upgrading-stack-cloud.asciidoc">edit</a></h3>
<p>Log in to your Elastic Cloud environment:</p>
<style>
.tabs {
  width: 100%;
}
[role="tablist"] {
  margin: 0 0 -0.1em;
  overflow: visible;
}
[role="tab"] {
  position: relative;
  padding: 0.3em 0.5em 0.4em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0.2em 0.2em 0 0;
  overflow: visible;
  font-family: inherit;
  font-size: inherit;
  background: hsl(220, 20%, 94%);
}
[role="tab"]:hover::before,
[role="tab"]:focus::before,
[role="tab"][aria-selected="true"]::before {
  position: absolute;
  bottom: 100%;
  right: -1px;
  left: -1px;
  border-radius: 0.2em 0.2em 0 0;
  border-top: 3px solid hsl(219, 1%, 72%);
  content: '';
}
[role="tab"][aria-selected="true"] {
  border-radius: 0;
  background: hsl(220, 43%, 99%);
  outline: 0;
}
[role="tab"][aria-selected="true"]:not(:focus):not(:hover)::before {
  border-top: 5px solid hsl(218, 96%, 48%);
}
[role="tab"][aria-selected="true"]::after {
  position: absolute;
  z-index: 3;
  bottom: -1px;
  right: 0;
  left: 0;
  height: 0.3em;
  background: hsl(220, 43%, 99%);
  box-shadow: none;
  content: '';
}
[role="tab"]:hover,
[role="tab"]:focus,
[role="tab"]:active {
  outline: 0;
  border-radius: 0;
  color: inherit;
}
[role="tab"]:hover::before,
[role="tab"]:focus::before {
  border-color: hsl(218, 96%, 48%);
}
[role="tabpanel"] {
  position: relative;
  z-index: 2;
  padding: 1em;
  border: 1px solid hsl(219, 1%, 72%);
  border-radius: 0 0.2em 0.2em 0.2em;
  box-shadow: 0 0 0.2em hsl(219, 1%, 72%);
  background: hsl(220, 43%, 99%);
  margin-bottom: 1em;
}
[role="tabpanel"] p {
  margin: 0;
}
[role="tabpanel"] * + p {
  margin-top: 1em;
}
</style>
<script>
window.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll('[role="tab"]');
  const tabList = document.querySelector('[role="tablist"]');
  // Add a click event handler to each tab
  tabs.forEach(tab => {
    tab.addEventListener("click", changeTabs);
  });
  // Enable arrow navigation between tabs in the tab list
  let tabFocus = 0;
  tabList.addEventListener("keydown", e => {
    // Move right
    if (e.keyCode === 39 || e.keyCode === 37) {
      tabs[tabFocus].setAttribute("tabindex", -1);
      if (e.keyCode === 39) {
        tabFocus++;
        // If we're at the end, go to the start
        if (tabFocus >= tabs.length) {
          tabFocus = 0;
        }
        // Move left
      } else if (e.keyCode === 37) {
        tabFocus--;
        // If we're at the start, move to the end
        if (tabFocus < 0) {
          tabFocus = tabs.length - 1;
        }
      }
      tabs[tabFocus].setAttribute("tabindex", 0);
      tabs[tabFocus].focus();
    }
  });
});
function setActiveTab(target) {
  const parent = target.parentNode;
  const grandparent = parent.parentNode;
  // console.log(grandparent);
  // Remove all current selected tabs
  parent
    .querySelectorAll('[aria-selected="true"]')
    .forEach(t => t.setAttribute("aria-selected", false));
  // Set this tab as selected
  target.setAttribute("aria-selected", true);
  // Hide all tab panels
  grandparent
    .querySelectorAll('[role="tabpanel"]')
    .forEach(p => p.setAttribute("hidden", true));
  // Show the selected panel
  grandparent.parentNode
    .querySelector(`#${target.getAttribute("aria-controls")}`)
    .removeAttribute("hidden");
}
function changeTabs(e) {
  // get the containing list of the tab that was just clicked
  const tabList = e.target.parentNode;

  // get all of the sibling tabs
  const buttons = Array.apply(null, tabList.querySelectorAll('button'));

  // loop over the siblings to discover which index thje clicked one was
  const { index } = buttons.reduce(({ found, index }, button) => {
    if (!found && buttons[index] === e.target) {
      return { found: true, index };
    } else if (!found) {
      return { found, index: index + 1 };
    } else {
      return { found, index };
    }
  }, { found: false, index: 0 });

  // get the tab container
  const container = tabList.parentNode;
  // read the data-tab-group value from the container, e.g. "os"
  const { tabGroup } = container.dataset;
  // get a list of all the tab groups that match this value on the page
  const groups = document.querySelectorAll('[data-tab-group=' + tabGroup + ']');

  // for each of the found tab groups, find the tab button at the previously discovered index and select it for each group
  groups.forEach((group) => {
    const target = group.querySelectorAll('button')[index];
    setActiveTab(target);
  });
}
</script>
<div class="tabs" data-tab-group="os">
  <div role="tablist" aria-label="cloud-login">
    <button role="tab"
            aria-selected="true"
            aria-controls="ess-tab-cloud-login"
            id="ess-cloud-login">
      Elasticsearch Service
    </button>
    <button role="tab"
            aria-selected="false"
            aria-controls="ece-tab-cloud-login"
            id="ece-cloud-login">
      Elastic Cloud Enterprise
    </button>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="ess-tab-cloud-login"
       aria-labelledby="ess-cloud-login">
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Log in to the <a href="https://cloud.elastic.co/?baymax=docs-body&amp;elektra=docs" class="ulink" target="_top">Elasticsearch Service Console</a>.
</li>
<li class="listitem">
<p>Select your deployment on the home page in the Elasticsearch Service card or go to the deployments page.</p>
<p>Narrow your deployments by name, ID, or choose from several other filters. To customize your view, use a combination of filters, or change the format from a grid to a list.</p>
</li>
</ol>
</div>
  </div>
  <div tabindex="0"
       role="tabpanel"
       id="ece-tab-cloud-login"
       aria-labelledby="ece-cloud-login"
       hidden="">
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<a href="/guide/en/cloud-enterprise/current/ece-login.html" class="ulink" target="_top">Log into the Cloud UI</a>
</li>
<li class="listitem">
<p>On the deployments page, select your deployment.</p>
<p>Narrow the list by name, ID, or choose from several other filters. To further define the list, use a combination of filters.</p>
</li>
</ol>
</div>
  </div>
</div>
<p>Follow these steps to upgrade your stack version:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
In the <span class="strong strong"><strong>Deployment version</strong></span> section, click <span class="strong strong"><strong>Upgrade</strong></span>.
</li>
<li class="listitem">
<p>Select a new version.</p>
<p>If you perform a major version upgrade and any incompatibilities are detected, the UI provides a link to the Upgrade Assistant in Kibana, which checks for deprecated settings in your cluster and indices and helps you to resolve them. After resolving any issues, return to the deployments page, select your deployment, click <span class="strong strong"><strong>Upgrade</strong></span> as you did previously, and select a version to restart the upgrade process. Any incompatibilities should now be resolved.</p>
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Upgrade</strong></span> and then <span class="strong strong"><strong>Confirm upgrade</strong></span>. The new configuration takes a few minutes to create.
</li>
<li class="listitem">
If you are upgrading to version 6.6 and earlier, major upgrades require a full cluster restart to complete the upgrade process.
</li>
</ol>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="upgrading-elastic-stack.html">« Upgrading the Elastic Stack</a>
</span>
<span class="next">
<a href="upgrading-elastic-stack-on-prem.html">Upgrading on-prem »</a>
</span>
</div>
</div>
</body>
</html>
