<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Using Environment Variables in the Configuration
        | Logstash Reference [6.3]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Logstash Reference [6.3]" /><link rel="up" href="configuration.html" title="Configuring Logstash" /><link rel="prev" href="event-dependent-configuration.html" title="Accessing Event Data and Fields in the Configuration" /><link rel="next" href="config-examples.html" title="Logstash Configuration Examples" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Logstash/Reference/6.3" /><meta xmlns="" name="DC.subject" content="Logstash" /><meta xmlns="" name="DC.identifier" content="6.3" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Logstash Reference
      [6.3]
    </a></span> » <span class="breadcrumb-link"><a href="configuration.html">Configuring Logstash</a></span> » <span class="breadcrumb-node">Using Environment Variables in the Configuration</span></div><div xmlns="" class="navheader"><span class="prev"><a href="event-dependent-configuration.html">
              « 
              Accessing Event Data and Fields in the Configuration</a>
           
        </span><span class="next">
           
          <a href="config-examples.html">Logstash Configuration Examples
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="environment-variables"></a>Using Environment Variables in the Configuration<a xmlns="" href="https://github.com/elastic/logstash/edit/6.3/docs/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_overview"></a>Overview<a xmlns="" href="https://github.com/elastic/logstash/edit/6.3/docs/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">You can set environment variable references in the configuration for Logstash plugins by using <code class="literal">${var}</code>.</li><li class="listitem">At Logstash startup, each reference will be replaced by the value of the environment variable.</li><li class="listitem">The replacement is case-sensitive.</li><li class="listitem">References to undefined variables raise a Logstash configuration error.</li><li class="listitem">You can give a default value by using the form <code class="literal">${var:default value}</code>. Logstash uses the default value if the
environment variable is undefined.</li><li class="listitem">You can add environment variable references in any plugin option type : string, number, boolean, array, or hash.</li><li class="listitem">Environment variables are immutable. If you update the environment variable, you’ll have to restart Logstash to pick up the updated value.</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_examples"></a>Examples<a xmlns="" href="https://github.com/elastic/logstash/edit/6.3/docs/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The following examples show you how to use environment variables to set the values of some commonly used
configuration options.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_setting_the_tcp_port"></a>Setting the TCP Port<a xmlns="" href="https://github.com/elastic/logstash/edit/6.3/docs/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here’s an example that uses an environment variable to set the TCP port:</p><div xmlns="" class="pre_wrapper lang-ruby"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-ruby">input {
  tcp {
    port =&gt; "${TCP_PORT}"
  }
}</pre></div><p>Now let’s set the value of <code class="literal">TCP_PORT</code>:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">export TCP_PORT=12345</pre></div><p>At startup, Logstash uses the following configuration:</p><div xmlns="" class="pre_wrapper lang-ruby"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-ruby">input {
  tcp {
    port =&gt; 12345
  }
}</pre></div><p>If the <code class="literal">TCP_PORT</code> environment variable is not set, Logstash returns a configuration error.</p><p>You can fix this problem by specifying a default value:</p><div xmlns="" class="pre_wrapper lang-ruby"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-ruby">input {
  tcp {
    port =&gt; "${TCP_PORT:54321}"
  }
}</pre></div><p>Now, instead of returning a configuration error if the variable is undefined, Logstash uses the default:</p><div xmlns="" class="pre_wrapper lang-ruby"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-ruby">input {
  tcp {
    port =&gt; 54321
  }
}</pre></div><p>If the environment variable is defined, Logstash uses the value specified for the variable instead of the default.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_setting_the_value_of_a_tag"></a>Setting the Value of a Tag<a xmlns="" href="https://github.com/elastic/logstash/edit/6.3/docs/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here’s an example that uses an environment variable to set the value of a tag:</p><div xmlns="" class="pre_wrapper lang-ruby"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-ruby">filter {
  mutate {
    add_tag =&gt; [ "tag1", "${ENV_TAG}" ]
  }
}</pre></div><p>Let’s set the value of <code class="literal">ENV_TAG</code>:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">export ENV_TAG="tag2"</pre></div><p>At startup, Logstash uses the following configuration:</p><div xmlns="" class="pre_wrapper lang-ruby"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-ruby">filter {
  mutate {
    add_tag =&gt; [ "tag1", "tag2" ]
  }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_setting_a_file_path"></a>Setting a File Path<a xmlns="" href="https://github.com/elastic/logstash/edit/6.3/docs/static/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Here’s an example that uses an environment variable to set the path to a log file:</p><div xmlns="" class="pre_wrapper lang-ruby"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-ruby">filter {
  mutate {
    add_field =&gt; {
      "my_path" =&gt; "${HOME}/file.log"
    }
  }
}</pre></div><p>Let’s set the value of <code class="literal">HOME</code>:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">export HOME="/path"</pre></div><p>At startup, Logstash uses the following configuration:</p><div xmlns="" class="pre_wrapper lang-ruby"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-ruby">filter {
  mutate {
    add_field =&gt; {
      "my_path" =&gt; "/path/file.log"
    }
  }
}</pre></div></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="event-dependent-configuration.html">
              « 
              Accessing Event Data and Fields in the Configuration</a>
           
        </span><span class="next">
           
          <a href="config-examples.html">Logstash Configuration Examples
               »
            </a></span></div></body></html>