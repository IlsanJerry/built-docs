<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>graphite
        | Logstash Reference [5.0]
      | Elastic
    </title><link rel="home" href="index.html" title="Logstash Reference [5.0]" /><link rel="up" href="output-plugins.html" title="Output plugins" /><link rel="prev" href="plugins-outputs-google_cloud_storage.html" title="google_cloud_storage" /><link rel="next" href="plugins-outputs-graphtastic.html" title="graphtastic" /><meta name="DC.type" content="Learn/Docs/Logstash/Reference/5.0" /><meta name="DC.subject" content="Logstash" /><meta name="DC.identifier" content="5.0" /><meta name="robots" content="noindex,nofollow" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Logstash Reference
      [5.0]
    </a></span> » <span class="breadcrumb-link"><a href="output-plugins.html">Output plugins</a></span> » <span class="breadcrumb-node">graphite</span></div><div class="navheader"><span class="prev"><a href="plugins-outputs-google_cloud_storage.html">
              « 
              google_cloud_storage</a>
           
        </span><span class="next">
           
          <a href="plugins-outputs-graphtastic.html">graphtastic
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="plugins-outputs-graphite"></a>graphite</h2></div></div></div><p>This output allows you to pull metrics from your logs and ship them to
Graphite. Graphite is an open source tool for storing and graphing metrics.</p><p>An example use case: Some applications emit aggregated stats in the logs
every 10 seconds. Using the grok filter and this output, it is possible to
capture the metric values from the logs and emit them to Graphite.</p><p> </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_synopsis_67"></a>Synopsis</h3></div></div></div><p>This plugin supports the following configuration options:</p><p>Required configuration options:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">graphite {
}</pre></div><p>Available configuration options:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top">Setting</th><th align="left" valign="top">Input type</th><th align="left" valign="top">Required</th><th align="left" valign="top">Default value</th></tr></thead><tbody><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-codec" title="codec"><code class="literal">codec</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#codec" title="Codec">codec</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">"plain"</code></code></p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-exclude_metrics" title="exclude_metrics"><code class="literal">exclude_metrics</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#array" title="Array">array</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">["%{[^}]+}"]</code></code></p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-fields_are_metrics" title="fields_are_metrics"><code class="literal">fields_are_metrics</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">false</code></code></p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-host" title="host"><code class="literal">host</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#string" title="String">string</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">"localhost"</code></code></p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-include_metrics" title="include_metrics"><code class="literal">include_metrics</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#array" title="Array">array</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">[".*"]</code></code></p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-metrics" title="metrics"><code class="literal">metrics</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#hash" title="Hash">hash</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">{}</code></code></p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-metrics_format" title="metrics_format"><code class="literal">metrics_format</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#string" title="String">string</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">"*"</code></code></p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-nested_object_separator" title="nested_object_separator"><code class="literal">nested_object_separator</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#string" title="String">string</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">"."</code></code></p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-port" title="port"><code class="literal">port</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#number" title="Number">number</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">2003</code></code></p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-reconnect_interval" title="reconnect_interval"><code class="literal">reconnect_interval</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#number" title="Number">number</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">2</code></code></p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-resend_on_failure" title="resend_on_failure"><code class="literal">resend_on_failure</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">false</code></code></p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-timestamp_field" title="timestamp_field"><code class="literal">timestamp_field</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#string" title="String">string</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">"@timestamp"</code></code></p></td></tr><tr><td align="left" valign="top"><p><a class="xref" href="plugins-outputs-graphite.html#plugins-outputs-graphite-workers" title="workers"><code class="literal">workers</code></a></p></td><td align="left" valign="top"><p><a class="link" href="configuration-file-structure.html#number" title="Number">number</a></p></td><td align="left" valign="top"><p>No</p></td><td align="left" valign="top"><p><code class="literal"><code class="literal">1</code></code></p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_details_68"></a>Details</h3></div></div></div><p> </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-codec"></a><code class="literal">codec</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#codec" title="Codec">codec</a></li><li class="listitem">Default value is <code class="literal">"plain"</code></li></ul></div><p>The codec used for output data. Output codecs are a convenient method for encoding your data before it leaves the output, without needing a separate filter in your Logstash pipeline.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-debug"></a><code class="literal">debug</code>  (DEPRECATED)</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">DEPRECATED WARNING: This configuration item is deprecated and may not be available in future versions.</li><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></li><li class="listitem">Default value is <code class="literal">false</code></li></ul></div><p>Enable debug output.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-exclude_metrics"></a><code class="literal">exclude_metrics</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#array" title="Array">array</a></li><li class="listitem">Default value is <code class="literal">["%{[^}]+}"]</code></li></ul></div><p>Exclude regex matched metric names, by default exclude unresolved %{field} strings.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-fields_are_metrics"></a><code class="literal">fields_are_metrics</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></li><li class="listitem">Default value is <code class="literal">false</code></li></ul></div><p>An array indicating that these event fields should be treated as metrics
and will be sent verbatim to Graphite. You may use either <code class="literal">fields_are_metrics</code>
or <code class="literal">metrics</code>, but not both.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-host"></a><code class="literal">host</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#string" title="String">string</a></li><li class="listitem">Default value is <code class="literal">"localhost"</code></li></ul></div><p>The hostname or IP address of the Graphite server.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-include_metrics"></a><code class="literal">include_metrics</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#array" title="Array">array</a></li><li class="listitem">Default value is <code class="literal">[".*"]</code></li></ul></div><p>Include only regex matched metric names.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-metrics"></a><code class="literal">metrics</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#hash" title="Hash">hash</a></li><li class="listitem">Default value is <code class="literal">{}</code></li></ul></div><p>The metric(s) to use. This supports dynamic strings like %{host}
for metric names and also for values. This is a hash field with key
being the metric name, value being the metric value. Example:</p><div class="pre_wrapper lang-ruby"><pre class="programlisting prettyprint lang-ruby">    metrics =&gt; { "%{host}/uptime" =&gt; "%{uptime_1m}" }</pre></div><p>The value will be coerced to a floating point value. Values which cannot be
coerced will be set to zero (0). You may use either <code class="literal">metrics</code> or <code class="literal">fields_are_metrics</code>,
but not both.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-metrics_format"></a><code class="literal">metrics_format</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#string" title="String">string</a></li><li class="listitem">Default value is <code class="literal">"*"</code></li></ul></div><p>Defines the format of the metric string. The placeholder <span class="emphasis"><em>*</em></span> will be
replaced with the name of the actual metric.</p><div class="pre_wrapper lang-ruby"><pre class="programlisting prettyprint lang-ruby">    metrics_format =&gt; "foo.bar.*.sum"</pre></div><div class="note admon"><div class="icon"></div><div class="admon_content"><p>If no metrics_format is defined, the name of the metric will be used as fallback.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-nested_object_separator"></a><code class="literal">nested_object_separator</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#string" title="String">string</a></li><li class="listitem">Default value is <code class="literal">"."</code></li></ul></div><p>When hashes are passed in as values they are broken out into a dotted notation
For instance if you configure this plugin with
# [source,ruby]
    metrics ⇒ "mymetrics"</p><p>and "mymetrics" is a nested hash of <span class="emphasis"><em>{a ⇒ 1, b ⇒ { c ⇒ 2 }}</em></span>
this plugin will generate two metrics: a ⇒ 1, and b.c ⇒ 2 .
If you’ve specified a <span class="emphasis"><em>metrics_format</em></span> it will respect that,
but you still may want control over the separator within these nested key names.
This config setting changes the separator from the <span class="emphasis"><em>.</em></span> default.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-port"></a><code class="literal">port</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#number" title="Number">number</a></li><li class="listitem">Default value is <code class="literal">2003</code></li></ul></div><p>The port to connect to on the Graphite server.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-reconnect_interval"></a><code class="literal">reconnect_interval</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#number" title="Number">number</a></li><li class="listitem">Default value is <code class="literal">2</code></li></ul></div><p>Interval between reconnect attempts to Carbon.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-resend_on_failure"></a><code class="literal">resend_on_failure</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#boolean" title="Boolean">boolean</a></li><li class="listitem">Default value is <code class="literal">false</code></li></ul></div><p>Should metrics be resent on failure?</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-timestamp_field"></a><code class="literal">timestamp_field</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#string" title="String">string</a></li><li class="listitem">Default value is <code class="literal">"@timestamp"</code></li></ul></div><p>Use this field for the timestamp instead of <span class="emphasis"><em>@timestamp</em></span> which is the
default. Useful when backfilling or just getting more accurate data into
graphite since you probably have a cache layer infront of Logstash.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="plugins-outputs-graphite-workers"></a><code class="literal">workers</code></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Value type is <a class="link" href="configuration-file-structure.html#number" title="Number">number</a></li><li class="listitem">Default value is <code class="literal">1</code></li></ul></div><p>The number of workers to use for this output.
Note that this setting may not be useful for all outputs.</p></div></div></div><div class="navfooter"><span class="prev"><a href="plugins-outputs-google_cloud_storage.html">
              « 
              google_cloud_storage</a>
           
        </span><span class="next">
           
          <a href="plugins-outputs-graphtastic.html">graphtastic
               »
            </a></span></div></body></html>
