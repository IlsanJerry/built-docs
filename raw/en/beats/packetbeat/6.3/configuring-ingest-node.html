<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Parse data by using ingest node
        | Packetbeat Reference [6.3]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Packetbeat Reference [6.3]" /><link rel="up" href="configuring-howto-packetbeat.html" title="Configuring Packetbeat" /><link rel="prev" href="add-host-metadata.html" title="Add Host metadata" /><link rel="next" href="packetbeat-geoip.html" title="Export GeoIP Information" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Packetbeat/Reference/6.3" /><meta xmlns="" name="DC.subject" content="Packetbeat" /><meta xmlns="" name="DC.identifier" content="6.3" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Packetbeat Reference
      [6.3]
    </a></span> » <span class="breadcrumb-link"><a href="configuring-howto-packetbeat.html">Configuring Packetbeat</a></span> » <span class="breadcrumb-node">Parse data by using ingest node</span></div><div xmlns="" class="navheader"><span class="prev"><a href="add-host-metadata.html">
              « 
              Add Host metadata</a>
           
        </span><span class="next">
           
          <a href="packetbeat-geoip.html">Export GeoIP Information
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="configuring-ingest-node"></a>Parse data by using ingest node<a xmlns="" href="https://github.com/elastic/beats/edit/6.3/libbeat/docs/shared-config-ingest.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>When you use Elasticsearch for output, you can configure Packetbeat to use
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.3/ingest.html" target="_top">ingest node</a> to pre-process documents before the
actual indexing takes place in Elasticsearch. Ingest node is a convenient
processing option when you want to do some extra processing on your data, but
you do not require the full power of Logstash. For example, you can create an
ingest node pipeline in Elasticsearch that consists of one processor that
removes a field in a document followed by another processor that renames a
field.</p><p>After defining the pipeline in Elasticsearch, you simply configure Packetbeat
to use the pipeline. To configure Packetbeat, you specify the pipeline ID in
the <code class="literal">parameters</code> option under <code class="literal">elasticsearch</code> in the <code class="literal">packetbeat.yml</code> file:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">output.elasticsearch:
  hosts: ["localhost:9200"]
  pipeline: my_pipeline_id</pre></div><p>For example, let’s say that you’ve defined the following pipeline in a file
named <code class="literal">pipeline.json</code>:</p><div xmlns="" class="pre_wrapper lang-json"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-json">{
    "description": "Test pipeline",
    "processors": [
        {
            "lowercase": {
                "field": "beat.name"
            }
        }
    ]
}</pre></div><p>To add the pipeline in Elasticsearch, you would run:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">curl -H 'Content-Type: application/json' -XPUT 'http://localhost:9200/_ingest/pipeline/test-pipeline' -d@pipeline.json</pre></div><p>Then in the <code class="literal">packetbeat.yml</code> file, you would specify:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">output.elasticsearch:
  hosts: ["localhost:9200"]
  pipeline: "test-pipeline"</pre></div><p>When you run Packetbeat, the value of <code class="literal">beat.name</code> is converted to lowercase before indexing.</p><p>For more information about defining a pre-processing pipeline, see the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.3/ingest.html" target="_top">Ingest Node</a> documentation.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="add-host-metadata.html">
              « 
              Add Host metadata</a>
           
        </span><span class="next">
           
          <a href="packetbeat-geoip.html">Export GeoIP Information
               »
            </a></span></div></body></html>