<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Recording a Trace
        | Packetbeat Reference [1.0.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Packetbeat Reference [1.0.1]" /><link rel="up" href="_troubleshooting.html" title="Troubleshooting" /><link rel="prev" href="_running_in_the_foreground_and_enabling_debugging.html" title="Running in the Foreground and Enabling Debugging" /><link rel="next" href="_developer_guide_adding_a_new_protocol.html" title="Developer Guide: Adding a New Protocol" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Packetbeat/Reference/1.0.1" /><meta xmlns="" name="DC.subject" content="Packetbeat" /><meta xmlns="" name="DC.identifier" content="1.0.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Packetbeat Reference
      [1.0.1]
    </a></span> » <span class="breadcrumb-link"><a href="_troubleshooting.html">Troubleshooting</a></span> » <span class="breadcrumb-node">Recording a Trace</span></div><div xmlns="" class="navheader"><span class="prev"><a href="_running_in_the_foreground_and_enabling_debugging.html">
              « 
              Running in the Foreground and Enabling Debugging</a>
           
        </span><span class="next">
           
          <a href="_developer_guide_adding_a_new_protocol.html">Developer Guide: Adding a New Protocol
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_recording_a_trace"></a>Recording a Trace<a xmlns="" href="https://github.com/elastic/beats/edit/1.0.1/packetbeat/docs/troubleshooting.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>If you are having an issue, it’s often useful to record a full network trace
and send it to us. It will help us reproduce the issue, and we can also add it
to our automatic regression tests so that the problem never reoccurs. A trace
of 10-20 seconds is usually enough. To record the trace, you can use the following Packetbeat command:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">packetbeat -e -dump trace.pcap</pre></div><p>This command executes Packetbeat in normal mode (all processing happens as usual), but
at the same time, it records all packets in libpcap format in the <code class="literal">trace.pcap</code>
file. If there’s a particular error message you want us to investigate, please
keep the trace running until the error shows up (it will printed on standard
error).</p><div xmlns="" class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">PCAP files can be large. Please monitor the disk usage while doing the
dump to make sure you don’t run out of disk space. Whenever possible, we
recommend recording the trace on a non-production machine.</p></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="_running_in_the_foreground_and_enabling_debugging.html">
              « 
              Running in the Foreground and Enabling Debugging</a>
           
        </span><span class="next">
           
          <a href="_developer_guide_adding_a_new_protocol.html">Developer Guide: Adding a New Protocol
               »
            </a></span></div></body></html>