<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Step 4: Loading the Index Template in Elasticsearch
        | Filebeat Reference [1.2]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Filebeat Reference [1.2]" /><link rel="up" href="filebeat-getting-started.html" title="Getting Started With Filebeat" /><link rel="prev" href="config-filebeat-logstash.html" title="Step 3 (Optional): Configuring Filebeat to Use Logstash" /><link rel="next" href="_step_5_starting_filebeat.html" title="Step 5: Starting Filebeat" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Filebeat/Reference/1.2" /><meta xmlns="" name="DC.subject" content="Filebeat" /><meta xmlns="" name="DC.identifier" content="1.2" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Filebeat Reference
      [1.2]
    </a></span> » <span class="breadcrumb-link"><a href="filebeat-getting-started.html">Getting Started With Filebeat</a></span> » <span class="breadcrumb-node">Step 4: Loading the Index Template in Elasticsearch</span></div><div xmlns="" class="navheader"><span class="prev"><a href="config-filebeat-logstash.html">
              « 
              Step 3 (Optional): Configuring Filebeat to Use Logstash</a>
           
        </span><span class="next">
           
          <a href="_step_5_starting_filebeat.html">Step 5: Starting Filebeat
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="filebeat-template"></a>Step 4: Loading the Index Template in Elasticsearch<a xmlns="" href="https://github.com/elastic/beats/edit/1.2/filebeat/docs/getting-started.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Before starting Filebeat, you need to load the
<a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/current/indices-templates.html" target="_top">index
template</a>, which lets Elasticsearch know which fields should be analyzed
in which way.</p><p>The recommended template file is installed by the Filebeat packages. You can either configure
Filebeat to load the template automatically, or you can run a shell command to load the template:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="filebeat-template.html#load-template-auto" title="Configuring Filebeat to Load the Template">Configuring Filebeat to Load the Template</a>
</li><li class="listitem">
<a class="xref" href="filebeat-template.html#load-template-shell" title="Running a Shell Command to Load the Template">Running a Shell Command to Load the Template</a>
</li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="load-template-auto"></a>Configuring Filebeat to Load the Template<a xmlns="" href="https://github.com/elastic/beats/edit/1.2/libbeat/docs/shared-template-load.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>To configure Filebeat to load the template, you must enable the elasticsearch output. In the
Filebeat configuration file, uncomment the template part under elasticsearch output. By default
the template is named filebeat. Adjust the path to your template file.</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">output:
  elasticsearch:
    hosts: ["localhost:9200"]

    # A template is used to set the mapping in Elasticsearch
    # By default template loading is disabled and no template is loaded.
    # These settings can be adjusted to load your own template or overwrite existing ones
    template:

      # Template name. By default the template name is filebeat.
      #name: "filebeat"

      # Path to template file
      path: "filebeat.template.json"

      # Overwrite existing template
      #overwrite: false</pre></div><p>The template is loaded when you start Filebeat. By default, if a template
already exists in the index, it is not overwritten. To overwrite an existing template,
set <code class="literal">overwrite: true</code> in the configuration file.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="load-template-shell"></a>Running a Shell Command to Load the Template<a xmlns="" href="https://github.com/elastic/beats/edit/1.2/libbeat/docs/shared-template-load.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>You can load the template by running the following command:</p><p><span class="strong strong"><strong>deb or rpm:</strong></span></p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">curl -XPUT 'http://localhost:9200/_template/filebeat' -d@/etc/filebeat/filebeat.template.json</pre></div><p><span class="strong strong"><strong>mac:</strong></span></p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">cd filebeat-1.2.3-darwin
curl -XPUT 'http://localhost:9200/_template/filebeat' -d@filebeat.template.json</pre></div><p><span class="strong strong"><strong>win:</strong></span></p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">PS C:\Program Files\Filebeat&gt; Invoke-WebRequest -Method Put -InFile filebeat.template.json -Uri http://localhost:9200/_template/filebeat?pretty</pre></div><p>where <code class="literal">localhost:9200</code> is the IP and port where Elasticsearch is listening.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you’ve already used Filebeat to index data into Elasticsearch,
the index may contain old documents. After you load the index template,
you can delete the old documents from filebeat-* to force Kibana to look
at the newest documents. Use this command:</p></div></div><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">curl -XDELETE 'http://localhost:9200/filebeat-*'</pre></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="config-filebeat-logstash.html">
              « 
              Step 3 (Optional): Configuring Filebeat to Use Logstash</a>
           
        </span><span class="next">
           
          <a href="_step_5_starting_filebeat.html">Step 5: Starting Filebeat
               »
            </a></span></div></body></html>