<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Metricbeat uses too much bandwidth
        | Metricbeat Reference [7.2]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Metricbeat Reference [7.2]" /><link rel="up" href="faq.html" title="Common problems" /><link rel="prev" href="freebsd-no-such-file.html" title="&quot;open /compat/linux/proc: no such file or directory&quot; error on FreeBSD" /><link rel="next" href="error-loading-config.html" title="Error loading config file" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Metricbeat/Reference/7.2" /><meta xmlns="" name="DC.subject" content="Metricbeat" /><meta xmlns="" name="DC.identifier" content="7.2" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Metricbeat Reference
      [7.2]
    </a></span> » <span class="breadcrumb-link"><a href="troubleshooting.html">Troubleshooting</a></span> » <span class="breadcrumb-link"><a href="faq.html">Common problems</a></span> » <span class="breadcrumb-node">Metricbeat uses too much bandwidth</span></div><div xmlns="" class="navheader"><span class="prev"><a href="freebsd-no-such-file.html">
              « 
              "open /compat/linux/proc: no such file or directory" error on FreeBSD</a>
           
        </span><span class="next">
           
          <a href="error-loading-config.html">Error loading config file
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="bandwidth-throttling"></a>Metricbeat uses too much bandwidth<a xmlns="" href="https://github.com/elastic/beats/edit/7.2/libbeat/docs/faq-limit-bandwidth.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>If you need to limit bandwidth usage, we recommend that you configure the network stack on your OS to perform
bandwidth throttling.</p><p>For example, the following Linux commands cap the connection between Metricbeat and Logstash by setting a
limit of 50 kbps on TCP connections over port 5044:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">tc qdisc add dev $DEV root handle 1: htb
tc class add dev $DEV parent 1:1 classid 1:10 htb rate 50kbps ceil 50kbps
tc filter add dev $DEV parent 1:0 prio 1 protocol ip handle 10 fw flowid 1:10
iptables -A OUTPUT -t mangle -p tcp --dport 5044 -j MARK --set-mark 10</pre></div><p>Using OS tools to perform bandwidth throttling gives you better control over policies. For example, you can use
OS tools to cap bandwidth during the day, but not at night. Or you can leave the bandwidth uncapped, but assign a low priority to the traffic.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="freebsd-no-such-file.html">
              « 
              "open /compat/linux/proc: no such file or directory" error on FreeBSD</a>
           
        </span><span class="next">
           
          <a href="error-loading-config.html">Error loading config file
               »
            </a></span></div></body></html>