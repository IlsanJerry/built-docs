<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Enable cross cluster search
        | Elastic Cloud Enterprise Reference [2.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.1]" /><link rel="up" href="ece-administering-deployments.html" title="Administering deployments" /><link rel="prev" href="ece-connect.html" title="Connect to your cluster" /><link rel="next" href="ece-troubleshooting.html" title="Troubleshooting" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.1" /><meta xmlns="" name="DC.subject" content="ECE" /><meta xmlns="" name="DC.identifier" content="2.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference
      [2.1]
    </a></span> » <span class="breadcrumb-link"><a href="ece-administering-deployments.html">Administering deployments</a></span> » <span class="breadcrumb-node">Enable cross cluster search</span></div><div xmlns="" class="navheader"><span class="prev"><a href="ece-connect.html">
              « 
              Connect to your cluster</a>
           
        </span><span class="next">
           
          <a href="ece-troubleshooting.html">Troubleshooting
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="ece-enable-ccs"></a>Enable cross cluster search</h2></div></div></div><p>Cross cluster search is a RESTful API-only feature that allows you to search across multiple Elasticsearch clusters with a single query. To run queries against other clusters using cross cluster search, you can configure existing Elasticsearch clusters.</p><p>Cluster settings are automatically maintained and updated when cluster topologies change. For example, all connected clusters are updated when:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A cluster is deleted
</li><li class="listitem">
A node is added or removed from a cluster
</li><li class="listitem">
An IP address changes
</li></ul></div><h3><a id="ece-before_you_begin_20"></a>Before you begin</h3><p>To enable cross cluster search, you must meet the following criteria.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
To access the RESTful API for Elastic Cloud Enterprise, you must use your Elastic Cloud Enterprise credentials.
</li><li class="listitem">
All clusters must be in the same region and owned by the same user.
</li><li class="listitem">
All Elasticsearch clusters must be version 6.0 or later.
</li></ul></div><p>For more information about cross cluster search in Elasticsearch, refer to the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/modules-cross-cluster-search.html" target="_top">Elasticsearch documentation</a>.</p><h3><a id="ece-steps_6"></a>Steps</h3><p>Enable cross cluster search on your cluster:</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">curl -k -X PUT -u $USER<a id="CO25-1"></a><i xmlns="" class="conum" data-value="1"></i>:$PASSWORD<a id="CO25-2"></a><i xmlns="" class="conum" data-value="2"></i> https://$COORDINATOR_HOST<a id="CO25-3"></a><i xmlns="" class="conum" data-value="3"></i>:12443/api/v1/clusters/elasticsearch/$ELASTICSEARCH_CLUSTER_ID<a id="CO25-4"></a><i xmlns="" class="conum" data-value="4"></i>/ccs/settings \
{
   "remote_clusters": {
   "alias1<a id="CO25-5"></a><i xmlns="" class="conum" data-value="5"></i>": {
      "cluster_id": "fbbc90c8540843adaa4304b4a5cf9eba",
      "skip_unavailable": true
    },
    "alias2": {
      "cluster_id": "4e8c2d90e94b4a1a9a9b2c83145a8df1",
      "skip_unavailable": false
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO25-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
A user with sufficient privileges, such as the <code class="literal">admin</code> user
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO25-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
The password for the user
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO25-3"><i xmlns="" class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
A host that you installed Elastic Cloud Enterprise on that holds the coordinator role
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO25-4"><i xmlns="" class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>
The Elasticsearch cluster ID as shown in the Cloud UI or obtained via the API
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO25-5"><i xmlns="" class="conum" data-value="5"></i></a> </p></td><td valign="top" align="left"><p>
Cluster aliases must contain only letters, numbers, dashes (-), or underscores (_).
</p></td></tr></table></div><p>To learn about skipping disconnected clusters, refer to the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/modules-cross-cluster-search.html#_skipping_disconnected_clusters" target="_top">Elasticsearch documentation</a>.</p><div xmlns="" class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">When cross cluster search is already configured on a cluster, the <code class="literal">PUT</code> request replaces the existing configuration with the new settings.</p></div></div><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Other cross cluster search settings exposed by Elasticsearch are managed by Elastic Cloud Enterprise. Do not change these settings.</p></div></div><p>Retrieve cross cluster search configurations:</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">curl -k -X PUT -u $USER:$PASSWORD https://$COORDINATOR_HOST:12443/api/v1/clusters/elasticsearch/$ELASTICSEARCH_CLUSTER_ID/ccs/settings</pre></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="ece-connect.html">
              « 
              Connect to your cluster</a>
           
        </span><span class="next">
           
          <a href="ece-troubleshooting.html">Troubleshooting
               »
            </a></span></div></body></html>