<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Work with snapshots
        | Elastic Cloud Enterprise Reference [2.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.1]" /><link rel="up" href="ece-administering-deployments.html" title="Administering deployments" /><link rel="prev" href="ece-delete-deployment.html" title="Delete a deployment" /><link rel="next" href="ece-upgrade-cluster.html" title="Upgrade versions" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.1" /><meta xmlns="" name="DC.subject" content="ECE" /><meta xmlns="" name="DC.identifier" content="2.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference
      [2.1]
    </a></span> » <span class="breadcrumb-link"><a href="ece-administering-deployments.html">Administering deployments</a></span> » <span class="breadcrumb-node">Work with snapshots</span></div><div xmlns="" class="navheader"><span class="prev"><a href="ece-delete-deployment.html">
              « 
              Delete a deployment</a>
           
        </span><span class="next">
           
          <a href="ece-upgrade-cluster.html">Upgrade versions
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="ece-snapshots"></a>Work with snapshots</h2></div></div></div><p>Snapshots provide backups of your Elasticsearch indices. You can use snapshots to recover from a failure when not enough availability zones are used to provide high availability or to recover from accidental deletion.</p><h3><a id="ece-before_you_begin_13"></a>Before you begin</h3><p>To enable snapshots for your Elasticsearch clusters and to work with them, you must <a class="link" href="ece-manage-repositories.html" title="Manage snapshot repositories">have configured a repository</a>. After you have configured a snapshot repository, a snapshot is taken every 30 minutes or at the interval you specify through your user settings.</p><p>You can configure the ECE snapshot count to keep up to a maximum of the 100 most recent, successful snapshots. Once your cluster has reached the total snapshot count, ECE removes old snapshots as new ones are taken.</p><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Snapshots back up only open indices. If you close an index, it is not included in snapshots and you will not be able to restore the data.</p></div></div><h3><a id="ece-list-snapshots"></a>List available snapshots</h3><p>To list all available snapshots:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<a class="link" href="ece-login.html" title="Log into the Cloud UI">Log into the Cloud UI</a>.
</li><li class="listitem"><p class="simpara">
On the <span class="strong strong"><strong>Deployments</strong></span> page, select your deployment.
</p><p class="simpara">Narrow the list by name, ID, or choose from several other filters. To further define the list, use a combination of filters.</p></li><li class="listitem">
From your deployment menu, go to <span class="strong strong"><strong>Elasticsearch</strong></span> and then <span class="strong strong"><strong>Snapshots</strong></span> where the list of available snapshots is shown, newest first.
</li><li class="listitem">
Click on a specific snapshot to see more details.
</li></ol></div><p>The list shows when the snapshot was completed, whether the snapshot succeeded or was only partially successful, along with the number of shards and indices in the snapshot.</p><h3><a id="ece-change-retention-period"></a>Configure the snapshot retention period</h3><p>Now that you can set the snapshot interval and count, you can have control over the retention period for your clusters. The calculation displayed is based on a projected estimate of the snapshot interval, expected snapshot count, and current cluster size. Changing any of these factors results in a different retention period.</p><h4><a id="ece-change-snapshot-interval"></a>Change the snapshot interval</h4><p>If you find the the default snapshot interval isn’t working for your environment, you can change it. It might make sense to use a 4 or 24 hour interval if the data in your index doesn’t change that often but you need more snapshot history.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
Log into the Cloud UI and select your deployment.
</p><p class="simpara">Narrow the list by name, ID, or choose from several other filters. To further define the list, use a combination of filters.</p></li><li class="listitem">
Open the <span class="strong strong"><strong>Snapshot settings</strong></span> section.
</li><li class="listitem">
Make a selection from the <span class="strong strong"><strong>Snapshot interval</strong></span> drop-down menu.
</li><li class="listitem">
Click <span class="strong strong"><strong>Update settings</strong></span>.
</li></ol></div><p>When you change the interval, the interval timer begins after the next scheduled snapshot.
</p><h4><a id="ece-change-snapshot-count"></a>Change the snapshot count</h4><p>You can get more control over your repository space by adjusting the number of snapshots that are stored for your cluster. The minimum number of snapshots must be at least 15, the maximum limit is 100.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
Log into the Cloud UI and select your deployment.
</p><p class="simpara">Narrow the list by name, ID, or choose from several other filters. To further define the list, use a combination of filters.</p></li><li class="listitem">
Open the <span class="strong strong"><strong>Snapshot settings</strong></span> section.
</li><li class="listitem">
Enter a number in the <span class="strong strong"><strong>Snapshot count</strong></span> field.
</li><li class="listitem">
Click <span class="strong strong"><strong>Update settings</strong></span>.
</li></ol></div><h3><a id="ece-restore-snapshot"></a>Restore a snapshot</h3><p>To restore a snapshot:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
<a class="link" href="ece-snapshots.html#ece-list-snapshots" title="List available snapshots">List the available snapshots</a>, and click on the timestamp link of a snapshot to see the snapshot details.
</li><li class="listitem"><p class="simpara">
Optional: In the <span class="strong strong"><strong>Restore Snapshot</strong></span> section, specify how you want to restore the snapshot. If you do not specify any options, all the indices of the snapshot are restored on the Elasticsearch cluster where the snapshot was taken.
</p><p class="simpara"><span class="inlinemediaobject"><img src="images/restore-snapshot.png" alt="Snapshot restore" /></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
In the <span class="strong strong"><strong>Specify Indices</strong></span> field, you can limit which indices get restored by specifying an index pattern. For example, entering <code class="literal">logstash-*,.kibana</code> restores any indices starting with <code class="literal">logstash-</code> as well as the <code class="literal">.kibana</code> index. All other indices are ignored.
</li><li class="listitem">
You might need to specify values in the <span class="strong strong"><strong>Match</strong></span> and <span class="strong strong"><strong>Replace with</strong></span> fields, if you restore to the same cluster, as you cannot restore to an index that already exists.
</li></ul></div></li><li class="listitem">
Click <span class="strong strong"><strong>Restore snapshot</strong></span>.
</li></ol></div><p>After the snapshot is restored, a brief message indicates that the operation was successful.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="ece-delete-deployment.html">
              « 
              Delete a deployment</a>
           
        </span><span class="next">
           
          <a href="ece-upgrade-cluster.html">Upgrade versions
               »
            </a></span></div></body></html>