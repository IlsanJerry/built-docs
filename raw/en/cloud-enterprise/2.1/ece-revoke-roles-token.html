<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Revoke roles tokens
        | Elastic Cloud Enterprise Reference [2.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.1]" /><link rel="up" href="ece-securing-ece.html" title="Securing your installation" /><link rel="prev" href="ece-generate-roles-token.html" title="Generate roles tokens" /><link rel="next" href="ece-manage-certificates.html" title="Manage security certificates" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.1" /><meta xmlns="" name="DC.subject" content="ECE" /><meta xmlns="" name="DC.identifier" content="2.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference
      [2.1]
    </a></span> » <span class="breadcrumb-link"><a href="ece-securing-ece.html">Securing your installation</a></span> » <span class="breadcrumb-node">Revoke roles tokens</span></div><div xmlns="" class="navheader"><span class="prev"><a href="ece-generate-roles-token.html">
              « 
              Generate roles tokens</a>
           
        </span><span class="next">
           
          <a href="ece-manage-certificates.html">Manage security certificates
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="ece-revoke-roles-token"></a>Revoke roles tokens</h2></div></div></div><p>At the end of the Elastic Cloud Enterprise installation process on the first host, you are provided with a roles token. You can also generate new roles tokens yourself, either as ephemeral tokens that get deleted after 24 hours or as persistent tokens that get stored by Elastic Cloud Enterprise. These tokens enable additional hosts to join an Elastic Cloud Enterprise installation and should be kept secure or deleted if they are no longer needed.</p><p>If you delete all tokens and need to add further hosts to your installation later on, you can  <a class="link" href="ece-revoke-roles-token.html" title="Revoke roles tokens">generate a new token</a> first.</p><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">During installation, an emergency token gets generated that enables you to install Elastic Cloud Enterprise on additional hosts with all roles already assigned, except the allocator role. The emergency token can save your installation if all coordinators fail or are removed and you can no longer use the Cloud UI or the RESTful API. You should not delete this token. To learn more, see <a class="link" href="ece-troubleshooting-emergency.html" title="Using the emergency roles token">Using the Emergency Roles Token</a>.</p></div></div><p>To delete a token:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
Retrieve the list of available tokens through the RESTful API :
</p><pre class="literallayout">curl -u USER<a id="CO8-1"></a><i xmlns="" class="conum" data-value="1"></i>:PASSWORD<a id="CO8-2"></a><i xmlns="" class="conum" data-value="2"></i> 'localhost:12443/api/v1/platform/configuration/security/enrollment-tokens'
{
  "tokens": [{
    "token_id": "5f9cad2f-c6e7-4ee2-8f6e-53225df45be5",
    "roles": []
  }, {
    "token_id": "4c8990df-1fb7-4820-b868-6bc9e8860814",
    "roles": ["proxy", "allocator"]
  }]
}</pre><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO8-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">admin</code> user
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO8-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
The password for the user
</p></td></tr></table></div></li><li class="listitem"><p class="simpara">
Use the token ID to delete the tokens you no longer need, here <code class="literal">4c8990df-1fb7-4820-b868-6bc9e8860814</code>:
</p><pre class="literallayout">curl -XDELETE -u USER:PASSWORD  'localhost:12443/api/v1/platform/configuration/security/enrollment-tokens/4c8990df-1fb7-4820-b868-6bc9e8860814'
{
}</pre></li><li class="listitem">
Optional: To check that the token has been deleted, repeat Step 1 and make sure that the token is no longer listed.
</li></ol></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="ece-generate-roles-token.html">
              « 
              Generate roles tokens</a>
           
        </span><span class="next">
           
          <a href="ece-manage-certificates.html">Manage security certificates
               »
            </a></span></div></body></html>