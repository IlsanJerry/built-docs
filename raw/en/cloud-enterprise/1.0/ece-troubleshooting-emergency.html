<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Using the Emergency Roles Token
        | Elastic Cloud Enterprise Reference [1.0]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [1.0]" /><link rel="up" href="ece-troubleshooting.html" title="Troubleshooting" /><link rel="prev" href="ece-issues.html" title="Common issues" /><link rel="next" href="ece-uninstall.html" title="Removing Elastic Cloud Enterprise" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/1.0" /><meta xmlns="" name="DC.subject" content="ECE" /><meta xmlns="" name="DC.identifier" content="1.0" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference
      [1.0]
    </a></span> » <span class="breadcrumb-link"><a href="ece-troubleshooting.html">Troubleshooting</a></span> » <span class="breadcrumb-node">Using the Emergency Roles Token</span></div><div xmlns="" class="navheader"><span class="prev"><a href="ece-issues.html">
              « 
              Common issues</a>
           
        </span><span class="next">
           
          <a href="ece-uninstall.html">Removing Elastic Cloud Enterprise
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="ece-troubleshooting-emergency"></a>Using the Emergency Roles Token</h2></div></div></div><p>During installation, an emergency token gets generated that enables you to install Elastic Cloud Enterprise on additional hosts with all roles already assigned, except the allocator role. The emergency token can save your installation if all coordinators fail or are removed and you can no longer use the Cloud UI or the RESTful API. As part of the installation instructions, we ask you to keep this token safe.</p><p>To use the emergency token:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
<a class="link" href="ece-installing.html#ece-installing-additional" title="Install on Additional Hosts">Install Elastic Cloud Enterprise on an additional host</a> and specify the emergency token along with the original coordinator host. For example:
</p><pre class="literallayout">bash &lt;(curl -fsSL https://download.elastic.co/cloud/elastic-cloud-enterprise.sh) install --coordinator-host 192.168.50.10 --roles-token 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIyZGVlYjlkZS01MDkzLTQxNGItYmI5NS0zNmJhZTQxMWI0YzgiLCJyb2xlcyI6WyJjb29yZGluYXRvciIsInByb3h5IiwiZGlyZWN0b3IiXSwiaXNzIjoiY3VycmVudCIsInBlcnNpc3RlbnQiOnRydWV9.5tIVQxEluSjtJ7qiwE8OWzy5O4l1GJ0urTFs_l1x5bU'</pre></li><li class="listitem">
<a class="link" href="ece-provisioning.html#ece-login" title="Log into the Cloud UI">Log into the Cloud UI</a> on the newly created coordinator. The URL you use is the IP address of the host that you installed Elastic Cloud Enterprise on in Step 1 (<code class="literal">http://10.142.0.4:12400</code>, for example).
</li><li class="listitem">
Verify that the Cloud UI works as expected.
</li><li class="listitem"><p class="simpara">
Optional: Prevent a recurrence of the issue by enabling high availability for the administration console:
</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
Repeat Step 1 to create two additional coordinators in two additional availability zones. <a class="link" href="ece-installation-script.html#ece-installation-script-examples" title="Examples">Examples of the installation commands</a> you need to run are available.
</li><li class="listitem">
<a class="link" href="ece-change-cluster.html" title="Change Your Cluster Configuration">Change the cluster configuration for the <code class="literal">admin-console-elasticsearch</code> and <code class="literal">logging-and-metrics</code> clusters</a> to use three availability zones and resize the cluster to use at least 4 GB of RAM. This change makes sure that the clusters used by the administration console are highly available and provisioned sufficiently.
</li></ol></div></li></ol></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="ece-issues.html">
              « 
              Common issues</a>
           
        </span><span class="next">
           
          <a href="ece-uninstall.html">Removing Elastic Cloud Enterprise
               »
            </a></span></div></body></html>