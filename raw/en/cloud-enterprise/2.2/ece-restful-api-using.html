<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Using the API
        | Elastic Cloud Enterprise Reference [2.2]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.2]" /><link rel="up" href="ece-restful-api.html" title="RESTful API" /><link rel="prev" href="ece-restful-api.html" title="RESTful API" /><link rel="next" href="ece-restful-api-examples.html" title="API examples" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.2" /><meta xmlns="" name="DC.subject" content="ECE" /><meta xmlns="" name="DC.identifier" content="2.2" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference
      [2.2]
    </a></span> » <span class="breadcrumb-link"><a href="ece-restful-api.html">RESTful API</a></span> » <span class="breadcrumb-node">Using the API</span></div><div xmlns="" class="navheader"><span class="prev"><a href="ece-restful-api.html">
              « 
              RESTful API</a>
           
        </span><span class="next">
           
          <a href="ece-restful-api-examples.html">API examples
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="ece-restful-api-using"></a>Using the API</h2></div></div></div><p>In Elastic Cloud Enterprise 2.2.3, you can use API endpoints to work with:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Authentication
</li><li class="listitem">
Elasticsearch clusters
</li><li class="listitem">
Kibana instances
</li><li class="listitem">
Deployments
</li><li class="listitem">
Deployment templates
</li><li class="listitem">
ECE platform infrastructure
</li><li class="listitem">
Elastic Stack versions
</li></ul></div><h3><a id="ece-authentication"></a>Authentication</h3><p>We currently support basic authentication with the same <code class="literal">admin</code> user and password that you use to log into the Cloud UI. The credentials are provided when you install Elastic Cloud Enterprise on your first host and <a class="link" href="ece-manage-system-passwords.html#ece-retrieve-passwords" title="Retrieve user passwords">can also be retrieved separately</a>.</p><p>For operations that only read information, but don’t create, update or delete, you can also use the <code class="literal">readonly</code> user to authenticate.</p><h3><a id="ece-api_calls"></a>API calls</h3><p>The API base path is <code class="literal">/api/v1/</code>.</p><p>You communicate with our RESTful API through the HTTP and HTTPS protocols. We recommend that you use HTTPS on port 12443, because it is much more secure.</p><p>RESTful API calls are stateless: Every request that you make happens in isolation from other calls and must include all the information necessary for ECE to fulfill the request. API requests return JSON ouput, which is a format that is machine-readable and works well for automation.</p><p>Calls to API endpoints require different request methods, depending on what they do. Here are  request methods you use when communicating with our RESTful API for ECE:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
To fetch information: GET
</li><li class="listitem">
To add new information: POST
</li><li class="listitem">
To update existing information: PUT or PATCH
</li><li class="listitem">
To delete information: DELETE
</li></ul></div><p>Our <a class="link" href="ece-api-reference.html" title="API reference">API Reference</a>, specifies the request method you need to use for each endpoint, along with supported parameters and the possible responses that you get returned.</p><p>Each API endpoint is represented as an object that contains:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A description of what the endpoint does
</li><li class="listitem">
The parameters that the endpoint accepts
</li><li class="listitem">
The format of the request body
</li><li class="listitem">
The response body and all of the possible returned status codes
</li><li class="listitem">
Authentication requirements
</li></ul></div><p>For example, the slightly abridged specification for shutting down an Elasticsearch cluster that is running on ECE is:</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">"/clusters/elasticsearch/{cluster_id}/_shutdown": {
  "post": {
    "tags": ["ClustersElasticsearch"],
    "summary": "Shut down cluster",
    "description": "Shuts down the active Elasticsearch cluster and removes all of the cluster nodes. The cluster plan is retained. WARNING: To avoid data loss, save the data outside of the cluster before you shut the cluster down.",
    "operationId": "shutdown-es-cluster",
    "parameters": [{
      "name": "cluster_id",
      "in": "path",
      "description": "The Elasticsearch cluster identifier.",
      "required": true,
      "type": "string"
    }, {
      "name": "skip_snapshot",
      "in": "query",
      "description": "When `true`, skips the snapshot when the cluster is shut down.",
      "required": false,
      "type": "boolean",
      "default": false
    }, {
      "name": "hide",
      "in": "query",
      "description": "Hides the clusters during shutdown. NOTE: By default, hidden clusters are not listed.",
      "required": false,
      "type": "boolean",
      "default": false
    }],
    "responses": {
      "202": {
        "description": "The shutdown command was issued successfully, use the \"GET\" command on the /{cluster_id} resource to monitor progress",
        "schema": {
          "$ref": "#/definitions/ClusterCommandResponse"
        }
      },
      "404": {
        "description": "The cluster specified by {cluster_id} cannot be found (code: 'clusters.cluster_not_found')",
        "schema": {
          "$ref": "#/definitions/BasicFailedReply"
        }
      },
      "449": {
        "description": "elevated permissions are required. (code: '\"root.needs_elevated_permissions\"')",
        "schema": {
          "$ref": "#/definitions/BasicFailedReply"
        }
      }
    },
    ...
    }
  }
},</pre></div><h3><a id="ece-api-command-line"></a>Access the API from the Command Line</h3><p>The simplest way to interact with the full RESTful API for ECE is from the command line through the <code class="literal">curl</code> command. Endpoint URLs look like this example:</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">curl -k -X GET -u $USER<a id="CO30-1"></a><i xmlns="" class="conum" data-value="1"></i>:$PASSWORD<a id="CO30-2"></a><i xmlns="" class="conum" data-value="2"></i> https://$COORDINATOR_HOST<a id="CO30-3"></a><i xmlns="" class="conum" data-value="3"></i>:12443/api/v1/clusters/elasticsearch</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO30-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
A user with sufficient privileges, such as the <code class="literal">admin</code> user
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO30-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
The password for the user
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO30-3"><i xmlns="" class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
A host that you installed Elastic Cloud Enterprise on that holds the coordinator role
</p></td></tr></table></div><p>Using HTTPS requires that you have <a class="link" href="ece-manage-certificates.html" title="Manage security certificates">a TLS certificate already installed</a>. For testing purposes only, you can specify the <code class="literal">-k</code> option to turn off certificate verification, as shown in our examples, or use HTTP over port 12400 until you get your TLS certificate sorted out.</p><p>If this is your first time exploring the API, you can take a look at our <a class="link" href="ece-restful-api-examples.html" title="API examples">API examples</a> to learn more.</p><h3><a id="ece-api-generate-client"></a>Generate your own client</h3><p>To build API clients in the language of your choice or to use your favorite OpenAPI-enabled development tool, the ECE RESTful API specification is also available in <a class="ulink" href="https://download.elasticsearch.org/cloud/2.2/apidocs.json" target="_top">OpenAPI 2.0 format</a>.</p><p>Alternatively, you can obtain the RESTful API specification directly from ECE:</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">curl -k -X GET -u $USER<a id="CO31-1"></a><i xmlns="" class="conum" data-value="1"></i>:$PASSWORD<a id="CO31-2"></a><i xmlns="" class="conum" data-value="2"></i> https://$COORDINATOR_HOST<a id="CO31-3"></a><i xmlns="" class="conum" data-value="3"></i>:12443/api/v1/api-docs/swagger.json</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO31-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
A user with sufficient privileges, such as the <code class="literal">admin</code> user
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO31-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
The password for the <code class="literal">admin</code> user
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO31-3"><i xmlns="" class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
A host that you installed Elastic Cloud Enterprise on that holds the coordinator role, such as a host where you can log into the Cloud UI.
</p></td></tr></table></div><p>We use the OpenAPI specification to generate our own API Reference, but you can also use it for automation and to develop your own software layer around Elastic Cloud Enterprise. For example, you can use the API specification in the <a class="ulink" href="https://editor.swagger.io" target="_top">Swagger Editor</a> to read through our reference content and to generate a client in many different languages.</p><p>To learn more, see <a class="ulink" href="https://www.elastic.co/blog/generating-an-elastic-cloud-enterprise-client" target="_top">Generating an Elastic Cloud Enterprise Client</a></p></div><div xmlns="" class="navfooter"><span class="prev"><a href="ece-restful-api.html">
              « 
              RESTful API</a>
           
        </span><span class="next">
           
          <a href="ece-restful-api-examples.html">API examples
               »
            </a></span></div></body></html>