<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Stack - Versions - CRUD
        | Elastic Cloud Enterprise Reference [2.0]
      | Elastic
    </title><link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.0]" /><link rel="up" href="ece-api-reference.html" title="API reference" /><link rel="prev" href="Stack_-_Instance_Types_-_CRUD.html" title="Stack - Instance Types - CRUD" /><link rel="next" href="Templates_-_Deployments.html" title="Templates - Deployments" /><meta name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.0" /><meta name="DC.subject" content="ECE" /><meta name="DC.identifier" content="2.0" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference
      [2.0]
    </a></span> » <span class="breadcrumb-link"><a href="ece-restful-api.html">RESTful API</a></span> » <span class="breadcrumb-link"><a href="ece-api-reference.html">API reference</a></span> » <span class="breadcrumb-node">Stack - Versions - CRUD</span></div><div class="navheader"><span class="prev"><a href="Stack_-_Instance_Types_-_CRUD.html">
              « 
              Stack - Instance Types - CRUD</a>
           
        </span><span class="next">
           
          <a href="Templates_-_Deployments.html">Templates - Deployments
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="Stack_-_Versions_-_CRUD"></a>Stack - Versions - CRUD</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="xref" href="Stack_-_Versions_-_CRUD.html#get-version-stacks" title="Get stack versions">Get stack versions</a></li><li class="listitem"><a class="xref" href="Stack_-_Versions_-_CRUD.html#update-stack-packs" title="Upload stack pack">Upload stack pack</a></li><li class="listitem"><a class="xref" href="Stack_-_Versions_-_CRUD.html#delete-version-stack" title="Delete stack version">Delete stack version</a></li><li class="listitem"><a class="xref" href="Stack_-_Versions_-_CRUD.html#get-version-stack" title="Get stack version">Get stack version</a></li><li class="listitem"><a class="xref" href="Stack_-_Versions_-_CRUD.html#update-version-stack" title="Update stack version">Update stack version</a></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="get-version-stacks"></a>Get stack versions</h3></div></div></div><p>By default, returns only the available Elastic Stack versions. Use parameter <code class="literal">show_deleted</code> to get all versions</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_request_124"></a>Request</h4></div></div></div><p><code class="literal">GET /api/v1/stack/versions</code></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_query_parameters_70"></a>Query parameters</h4></div></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Required</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">show_deleted</code></p></td><td align="left" valign="top"><p><code class="literal">boolean</code></p></td><td align="left" valign="top"><p>N</p></td><td align="left" valign="top"><p>Whether to show deleted stack versions or not</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_responses_124"></a>Responses</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">200</code></span></dt><dd>(<a class="link" href="definitions.html#StackVersionConfigs" title="StackVersionConfigs"><code class="literal">StackVersionConfigs</code></a>) List of all available stack configurations with template version and structure</dd></dl></div><div class="warning admon"><div class="icon"></div><div class="admon_content"><p>To perform this operation, you must be authenticated by means of one of the following methods: apiKey, basicAuth.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_request_example_124"></a>Request example</h4></div></div></div><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">curl -XGET {{hostname}}/api/v1/stack/versions \
-u $CLOUD_USER:$CLOUD_KEY</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="update-stack-packs"></a>Upload stack pack</h3></div></div></div><p>Adds a new or updates an existing Elastic Stack pack and its template.
Besides <code class="literal">multipart/form-data</code> requests, the endpoint supports <code class="literal">application/zip</code> and <code class="literal">application/octet-stream</code> requests with a binary body. Maximum size of the payload is 1Mb.
If the archive contains a stack configuration that is already available through the API, then the existing configuration and its template will be overwritten.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_request_125"></a>Request</h4></div></div></div><p><code class="literal">POST /api/v1/stack/versions</code></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_form_parameters"></a>Form Parameters</h4></div></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Required</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">file</code></p></td><td align="left" valign="top"><p><code class="literal">file</code></p></td><td align="left" valign="top"><p>Y</p></td><td align="left" valign="top"><p>Zip file that contains one or multiple stack configurations</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_responses_125"></a>Responses</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">200</code></span></dt><dd>(<a class="link" href="definitions.html#StackVersionArchiveProcessingResult" title="StackVersionArchiveProcessingResult"><code class="literal">StackVersionArchiveProcessingResult</code></a>) The Stack Pack was processed successfully</dd><dt><span class="term"><code class="literal">400</code></span></dt><dd>(<a class="link" href="definitions.html#BasicFailedReply" title="BasicFailedReply"><code class="literal">BasicFailedReply</code></a>) Bad archive or some unexpected error occurred</dd></dl></div><div class="warning admon"><div class="icon"></div><div class="admon_content"><p>To perform this operation, you must be authenticated by means of one of the following methods: apiKey, basicAuth.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_request_example_125"></a>Request example</h4></div></div></div><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">curl -XPOST {{hostname}}/api/v1/stack/versions \
-u $CLOUD_USER:$CLOUD_KEY</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="delete-version-stack"></a>Delete stack version</h3></div></div></div><p>Sets a flag 'deleted' that effectively only removes the Elastic Stack Version from the list of available versions. The version can be restored later by sending an update request for the version (See PUT request)</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_request_126"></a>Request</h4></div></div></div><p><code class="literal">DELETE /api/v1/stack/versions/{version}</code></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_path_parameters_100"></a>Path parameters</h4></div></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Required</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">version</code></p></td><td align="left" valign="top"><p><code class="literal">string</code></p></td><td align="left" valign="top"><p>Y</p></td><td align="left" valign="top"><p>The Elastic Stack version.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_responses_126"></a>Responses</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">200</code></span></dt><dd>(<a class="link" href="definitions.html#EmptyResponse" title="EmptyResponse"><code class="literal">EmptyResponse</code></a>) The Elastic Stack version was marked for deletion successfully</dd><dt><span class="term"><code class="literal">404</code></span></dt><dd>(<a class="link" href="definitions.html#BasicFailedReply" title="BasicFailedReply"><code class="literal">BasicFailedReply</code></a>) The Elastic Stack version was not found</dd><dt><span class="term"><code class="literal">449</code></span></dt><dd>(<a class="link" href="definitions.html#BasicFailedReply" title="BasicFailedReply"><code class="literal">BasicFailedReply</code></a>) elevated permissions are required. (code: 'root.needs_elevated_permissions')</dd></dl></div><div class="warning admon"><div class="icon"></div><div class="admon_content"><p>To perform this operation, you must be authenticated by means of one of the following methods: apiKey, basicAuth.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_request_example_126"></a>Request example</h4></div></div></div><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">curl -XDELETE {{hostname}}/api/v1/stack/versions/{version} \
-u $CLOUD_USER:$CLOUD_KEY</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="get-version-stack"></a>Get stack version</h3></div></div></div><p>Retrieves a single Elastic Stack version with its template.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_request_127"></a>Request</h4></div></div></div><p><code class="literal">GET /api/v1/stack/versions/{version}</code></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_path_parameters_101"></a>Path parameters</h4></div></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Required</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">version</code></p></td><td align="left" valign="top"><p><code class="literal">string</code></p></td><td align="left" valign="top"><p>Y</p></td><td align="left" valign="top"><p>The Elastic Stack version.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_responses_127"></a>Responses</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">200</code></span></dt><dd>(<a class="link" href="definitions.html#StackVersionConfig" title="StackVersionConfig"><code class="literal">StackVersionConfig</code></a>) The Elastic Stack version was found</dd><dt><span class="term"><code class="literal">404</code></span></dt><dd>(<a class="link" href="definitions.html#BasicFailedReply" title="BasicFailedReply"><code class="literal">BasicFailedReply</code></a>) The Elastic Stack version was not found</dd></dl></div><div class="warning admon"><div class="icon"></div><div class="admon_content"><p>To perform this operation, you must be authenticated by means of one of the following methods: apiKey, basicAuth.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_request_example_127"></a>Request example</h4></div></div></div><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">curl -XGET {{hostname}}/api/v1/stack/versions/{version} \
-u $CLOUD_USER:$CLOUD_KEY</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="update-version-stack"></a>Update stack version</h3></div></div></div><p>Updates the configuration of an existing Elastic Stack version.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_request_128"></a>Request</h4></div></div></div><p><code class="literal">PUT /api/v1/stack/versions/{version}</code></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_path_parameters_102"></a>Path parameters</h4></div></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Type</th><th align="left" valign="top">Required</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">version</code></p></td><td align="left" valign="top"><p><code class="literal">string</code></p></td><td align="left" valign="top"><p>Y</p></td><td align="left" valign="top"><p>The Elastic Stack version.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_request_body_40"></a>Request body</h4></div></div></div><p>(<a class="link" href="definitions.html#StackVersionConfigPost" title="StackVersionConfigPost"><code class="literal">StackVersionConfigPost</code></a>) (required) Elastic Stack configuration object</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_responses_128"></a>Responses</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">200</code></span></dt><dd>(<a class="link" href="definitions.html#StackVersionConfig" title="StackVersionConfig"><code class="literal">StackVersionConfig</code></a>) The Elastic Stack version was updated successfully</dd><dt><span class="term"><code class="literal">404</code></span></dt><dd>(<a class="link" href="definitions.html#BasicFailedReply" title="BasicFailedReply"><code class="literal">BasicFailedReply</code></a>) The Elastic Stack version was not found</dd></dl></div><div class="warning admon"><div class="icon"></div><div class="admon_content"><p>To perform this operation, you must be authenticated by means of one of the following methods: apiKey, basicAuth.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ece_request_example_128"></a>Request example</h4></div></div></div><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">curl -XPUT {{hostname}}/api/v1/stack/versions/{version} \
-u $CLOUD_USER:$CLOUD_KEY \
-H 'Content-Type: application/json' \
-d '
{
   "apm" : {
      "blacklist" : [
         "string"
      ],
      "capacity_constraints" : {
         "max" : 0,
         "min" : 0
      },
      "compatible_node_types" : [
         "string"
      ],
      "docker_image" : "string",
      "settings" : {},
      "version" : "string"
   },
   "elasticsearch" : {
      "blacklist" : [
         "string"
      ],
      "capacity_constraints" : null,
      "compatible_node_types" : [
         "string"
      ],
      "default_plugins" : [
         "string"
      ],
      "docker_image" : "string",
      "node_types" : [
         {
            "capacity_constraints" : null,
            "compatible_node_types" : [
               "string"
            ],
            "description" : "string",
            "name" : "string",
            "node_type" : "string",
            "settings" : {}
         }
      ],
      "plugins" : [
         "string"
      ],
      "settings" : {}
   },
   "kibana" : {
      "blacklist" : [
         "string"
      ],
      "capacity_constraints" : null,
      "compatible_node_types" : [
         "string"
      ],
      "docker_image" : "string",
      "settings" : {},
      "version" : "string"
   },
   "metadata" : {
      "min_platform_version" : "string",
      "notes" : "string",
      "pre_release" : true,
      "schema_version" : 0
   }
}
'</pre></div></div></div></div><div class="navfooter"><span class="prev"><a href="Stack_-_Instance_Types_-_CRUD.html">
              « 
              Stack - Instance Types - CRUD</a>
           
        </span><span class="next">
           
          <a href="Templates_-_Deployments.html">Templates - Deployments
               »
            </a></span></div></body></html>
