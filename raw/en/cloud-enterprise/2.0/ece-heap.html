<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">JVM Heap Sizes
        | Elastic Cloud Enterprise Reference [2.0]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Cloud Enterprise Reference [2.0]" /><link rel="up" href="ece-prereqs.html" title="Prerequisites" /><link rel="prev" href="ece-prereqs-networking.html" title="Networking" /><link rel="next" href="ece-limitations.html" title="Limitations and Known Problems" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/CloudEnterprise/Reference/2.0" /><meta xmlns="" name="DC.subject" content="ECE" /><meta xmlns="" name="DC.identifier" content="2.0" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Cloud Enterprise Reference
      [2.0]
    </a></span> » <span class="breadcrumb-link"><a href="ece-getting-started.html">Getting Started</a></span> » <span class="breadcrumb-link"><a href="ece-prereqs.html">Prerequisites</a></span> » <span class="breadcrumb-node">JVM Heap Sizes</span></div><div xmlns="" class="navheader"><span class="prev"><a href="ece-prereqs-networking.html">
              « 
              Networking</a>
           
        </span><span class="next">
           
          <a href="ece-limitations.html">Limitations and Known Problems
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ece-heap"></a>JVM Heap Sizes</h2></div></div></div><p>ECE uses default JVM heap sizes for services that work for testing. For production systems, we recommend that you install ECE according to the JVM heap size recommendations in this section. Our recommendations are based on our longstanding experience with the Elastic Cloud hosted offering and our growing experience with ECE in customer settings. Other JVM heap sizes can be left at their defaults.</p><p>For <a class="link" href="ece-topology-example1.html" title="Example: A Small Baseline Installation">small deployments</a>, we recommend:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Service</th><th align="left" valign="top">JVM Heap Size (Xms and Xmx)</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">runner</code></p></td><td align="left" valign="top"><p>1 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">allocator</code></p></td><td align="left" valign="top"><p>4 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">proxy</code></p></td><td align="left" valign="top"><p>8 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">zookeeper</code></p></td><td align="left" valign="top"><p>4 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">director</code></p></td><td align="left" valign="top"><p>1 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">constructor</code></p></td><td align="left" valign="top"><p>4 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">admin-console</code></p></td><td align="left" valign="top"><p>4 GB</p></td></tr></tbody></table></div><p>For <a class="link" href="ece-topology-example2.html" title="Example: A Medium Installation with Separate Management Services">medium deployments</a>, we recommend:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Service</th><th align="left" valign="top">JVM Heap Size (Xms and Xmx)</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">runner</code></p></td><td align="left" valign="top"><p>1 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">allocator</code></p></td><td align="left" valign="top"><p>4 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">proxy</code></p></td><td align="left" valign="top"><p>8 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">zookeeper</code></p></td><td align="left" valign="top"><p>4 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">director</code></p></td><td align="left" valign="top"><p>1 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">constructor</code></p></td><td align="left" valign="top"><p>4 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">admin-console</code></p></td><td align="left" valign="top"><p>4 GB</p></td></tr></tbody></table></div><p>For <a class="link" href="ece-topology-example3.html" title="Example: A Large Installation with Separate Management Services and Proxies">large deployments</a>, we recommend:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Service</th><th align="left" valign="top">JVM Heap Size (Xms and Xmx)</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">runner</code></p></td><td align="left" valign="top"><p>1 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">allocator</code></p></td><td align="left" valign="top"><p>4 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">proxy</code></p></td><td align="left" valign="top"><p>8 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">zookeeper</code></p></td><td align="left" valign="top"><p>4 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">director</code></p></td><td align="left" valign="top"><p>1 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">constructor</code></p></td><td align="left" valign="top"><p>4 GB</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">admin-console</code></p></td><td align="left" valign="top"><p>4 GB</p></td></tr></tbody></table></div><p>You specify the recommended JVM heap sizes with <code class="literal">--memory-settings JVM_SETTINGS</code> parameter when you install ECE. For examples, see the deployment scenarios in our <a class="link" href="ece-playbook.html" title="Playbook for Production">Playbook for Production</a>.</p><h4><a id="ece-elasticsearch_clusters_and_jvm_heap_size"></a>Elasticsearch clusters and JVM Heap Size</h4><p>For Elasticsearch clusters, ECE gives 50% of the available memory to the JVM heap used by Elasticsearch, while leaving the other 50% for the operating system. This memory won’t go unused, as Lucene is designed to leverage the underlying OS for caching in-memory data structures, meaning that Lucene will happily gobble up whatever is left over. The ideal heap size is somewhere below 32 GB, as heap sizes above 32 GB become less efficient.</p><p>What these recommendations mean is that on a 64 GB cluster, we dedicate 32 GB to the Elasticsearch heap and 32 GB to the operating system in the container that hosts your cluster. If you provision a 128 GB cluster, we create two 64 GB nodes, each node with 32 GB reserved for the Elasticsearch heap and 32 GB reserved for the operating system.</p><p>For more information about why heap sizes, memory for the operating system, and the 32 GB maximum for JVMs matter, see <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.5/heap-size.html" target="_top">Heap: Sizing and Swapping</a>.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="ece-prereqs-networking.html">
              « 
              Networking</a>
           
        </span><span class="next">
           
          <a href="ece-limitations.html">Limitations and Known Problems
               »
            </a></span></div></body></html>