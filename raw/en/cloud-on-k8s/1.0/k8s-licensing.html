<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Managing licenses in ECK | Elastic Cloud on Kubernetes [1.0] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Cloud on Kubernetes [1.0]"/>
<link rel="up" href="index.html" title="Elastic Cloud on Kubernetes [1.0]"/>
<link rel="prev" href="k8s-webhook.html" title="Validating webhook"/>
<link rel="next" href="k8s-troubleshooting.html" title="Troubleshooting"/>
<meta name="DC.type" content="Learn/Docs/Kubernetes/Reference/1.0"/>
<meta name="DC.subject" content="ECK"/>
<meta name="DC.identifier" content="1.0"/>
</head>
<body><div class="page_header">
You are looking at the documentation for a beta release.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic Cloud on Kubernetes [1.0]</a></span>
»
<span class="breadcrumb-node">Managing licenses in ECK</span>
</div>
<div class="navheader">
<span class="prev">
<a href="k8s-webhook.html">« Validating webhook</a>
</span>
<span class="next">
<a href="k8s-troubleshooting.html">Troubleshooting »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="k8s-licensing"></a>Managing licenses in ECK<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/1.0/docs/licensing.asciidoc">edit</a></h1>
</div></div></div>
<p>When you install the default distribution of ECK, you receive a basic license. Any Elastic stack application you manage through
ECK will also be basic licensed. For the full list of free features that are included in the basic license, see: <a href="/subscriptions" class="ulink" target="_top">https://www.elastic.co/subscriptions</a>.</p>
<h3><a id="k8s_starting_a_trial"></a>Starting a trial<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/1.0/docs/licensing.asciidoc">edit</a></h3>
<p>If you want to try the features included in the Enterprise subscription, you can start a 30-day trial. To start a trial create
a Kubernetes secret as shown below:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">cat &lt;&lt;EOF | kubectl apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: eck-trial-license
  namespace: elastic-system
  labels:
    license.k8s.elastic.co/type: enterprise-trial
  annotations:
    elastic.co/eula: accepted <a id="CO2-1"></a><i class="conum" data-value="1"></i>
EOF</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO2-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>By setting this annotation to <code class="literal">accepted</code> you are expressing that you have accepted the Elastic EULA which can be found at <a href="/eula" class="ulink" target="_top">https://www.elastic.co/eula</a>.</p>
</td>
</tr>
</table>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can initiate a trial only if a trial has not previously been activated.</p>
</div>
</div>
<p>At the end of the trial period, the platinum and enterprise features operate in a <a href="/guide/en/elastic-stack-overview/current/license-expiration.html" class="ulink" target="_top">degraded mode</a>. You can revert to a basic license, extend the trial, or purchase an enterprise subscription.</p>
<h3><a id="k8s_adding_a_license"></a>Adding a license<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/1.0/docs/licensing.asciidoc">edit</a></h3>
<p>If you have a valid enterprise subscription you will receive a license as a JSON file.
To add the license to your ECK installation, create a Kubernetes secret of the following form:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">apiVersion: v1
kind: Secret
metadata:
  labels:
    license.k8s.elastic.co/scope: operator <a id="CO3-1"></a><i class="conum" data-value="1"></i>
  name: eck-license
type: Opaque
data:
  license: "JSON license in base64 format"  <a id="CO3-2"></a><i class="conum" data-value="2"></i></pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO3-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>this label is required for ECK to identify your license secret</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO3-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>the license file can have any name</p>
</td>
</tr>
</table>
</div>
<p>An easy way to create this secret is to rely on <code class="literal">kubectl</code> 's built-in support for secrets:</p>
<div class="pre_wrapper lang-shell script">
<pre class="programlisting prettyprint lang-shell script">kubectl create secret generic eck-license --from-file=my-license-file.json -n elastic-system
kubectl label secret eck-license "license.k8s.elastic.co/scope"=operator -n elastic-system</pre>
</div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Once you have installed a license into ECK new Elastic stack applications you manage with ECK will have all platinum and enterprise features enabled.
Applications that were created before you installed the license will be upgraded to platinum or enterprise features without interruption of service after a short delay.</p>
</div>
</div>
<h3><a id="k8s_updating_your_license"></a>Updating your license<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/1.0/docs/licensing.asciidoc">edit</a></h3>
<p>Once your current enterprise license expires you will receive a new enterprise license from Elastic as long as you  have
a valid enterprise subscription.</p>
<p>To avoid any unintended downgrade of individual Elasticsearch clusters to a basic license while installing the new license
we recommend you install the new enterprise license as a new Kubernetes secret next to your existing enterprise license.
Just replace <code class="literal">eck-license</code> with a different name in the examples above. ECK will pick the right license automatically.</p>
<p>As soon as you have installed the new license you can safely delete the old license if you want.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="k8s-webhook.html">« Validating webhook</a>
</span>
<span class="next">
<a href="k8s-troubleshooting.html">Troubleshooting »</a>
</span>
</div>
</div>
</body>
</html>
