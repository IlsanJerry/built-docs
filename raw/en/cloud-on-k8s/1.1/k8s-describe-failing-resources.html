<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Describe failing resources | Elastic Cloud on Kubernetes [1.1] | Elastic</title>
<link rel="home" href="index.html" title="Elastic Cloud on Kubernetes [1.1]"/>
<link rel="up" href="k8s-troubleshooting.html" title="Troubleshoot ECK"/>
<link rel="prev" href="k8s-get-resources.html" title="View the list of resources"/>
<link rel="next" href="k8s-eck-debug-logs.html" title="Enable ECK debug logs"/>
<meta name="DC.type" content="Learn/Docs/Kubernetes/Reference/1.1"/>
<meta name="DC.subject" content="ECK"/>
<meta name="DC.identifier" content="1.1"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elastic Cloud on Kubernetes [1.1]</a></span>
»
<span class="breadcrumb-link"><a href="k8s-operating-eck.html">Operating ECK</a></span>
»
<span class="breadcrumb-link"><a href="k8s-troubleshooting.html">Troubleshoot ECK</a></span>
»
<span class="breadcrumb-node">Describe failing resources</span>
</div>
<div class="navheader">
<span class="prev">
<a href="k8s-get-resources.html">« View the list of resources</a>
</span>
<span class="next">
<a href="k8s-eck-debug-logs.html">Enable ECK debug logs »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="k8s-describe-failing-resources"></a>Describe failing resources<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/cloud-on-k8s/edit/1.1/docs/operating-eck/troubleshooting.asciidoc">edit</a></h2>
</div></div></div>
<p>If an Elasticsearch node does not start up, it is probably because Kubernetes cannot schedule the associated Pod.</p>
<p>First, check the StatefulSets to see if the current number of replicas match the desired number of replicas.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">kubectl get statefulset

NAME                              DESIRED   CURRENT   AGE
elasticsearch-sample-es-default   1         1         4s</pre>
</div>
<p>Then, check the Pod status. If a Pod fails to reach the <code class="literal">Running</code> status after a few seconds, something is preventing it from being scheduled or starting up:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">kubectl get pods -l elasticsearch.k8s.elastic.co/statefulset-name=elasticsearch-sample-es-default

NAME                                 READY     STATUS    RESTARTS   AGE
elasticsearch-sample-es-66sv6dvt7g   0/1       Pending   0          3s
elasticsearch-sample-es-9xzzhmgd4h   1/1       Running   0          42s
elasticsearch-sample-es-lgphkv9p67   0/1       Pending   0          3s
kibana-sample-kb-5468b8685d-c7mdp    0/1       Running   0          4s</pre>
</div>
<p>Pod <code class="literal">elasticsearch-sample-es-lgphkv9p67</code> isn&#8217;t scheduled. Run this command to get more insights:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">kubectl describe pod elasticsearch-sample-es-lgphkv9p67

(...)
Events:
  Type     Reason             Age               From                Message
  ----     ------             ----              ----                -------
  Warning  FailedScheduling   1m (x6 over 1m)   default-scheduler   pod has unbound immediate PersistentVolumeClaims (repeated 2 times)
  Warning  FailedScheduling   1m (x6 over 1m)   default-scheduler   pod has unbound immediate PersistentVolumeClaims
  Warning  FailedScheduling   1m (x11 over 1m)  default-scheduler   0/3 nodes are available: 1 node(s) had no available volume zone, 2 Insufficient memory.
  Normal   NotTriggerScaleUp  4s (x11 over 1m)  cluster-autoscaler  pod didn't trigger scale-up (it wouldn't fit if a new node is added)</pre>
</div>
<p>If you see an error with unbound persistent volume claims (PVCs), it means there is not currently a persistent volume that can satisfy the claim. If you are using automatically provisioned storage (e.g. Amazon EBS provisioner), sometimes the storage provider can take a few minutes to provision a volume, so this may resolve itself in a few minutes. You can also check the status by running <code class="literal">kubectl describe persistentvolumeclaims</code> to see events of the PVCs.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="k8s-get-resources.html">« View the list of resources</a>
</span>
<span class="next">
<a href="k8s-eck-debug-logs.html">Enable ECK debug logs »</a>
</span>
</div>
</div>
</body>
</html>
