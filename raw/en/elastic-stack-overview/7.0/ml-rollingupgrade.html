<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Machine learning features unavailable after rolling upgrade
        | Elastic Stack Overview [7.0]
      | Elastic
    </title><link rel="home" href="index.html" title="Elastic Stack Overview [7.0]" /><link rel="up" href="ml-troubleshooting.html" title="Troubleshooting machine learning" /><link rel="prev" href="ml-troubleshooting.html" title="Troubleshooting machine learning" /><link rel="next" href="ml-mappingclash.html" title="Job creation failure due to mapping clash" /><meta name="DC.type" content="Learn/Docs/Elastic Stack/Overview/7.0" /><meta name="DC.subject" content="Elastic Stack" /><meta name="DC.identifier" content="7.0" /><meta name="robots" content="noindex,nofollow" /></head><body><div class="page_header"><p>
  <strong>IMPORTANT</strong>: Version 7.0 of the Elastic Stack has passed its 
  <a href="https://www.elastic.co/support/eol">maintenance date</a>. 
</p>  
<p>
  This documentation is no longer being updated. 
  For the latest information, see the 
  <a href="../current/index.html">current release documentation</a>. 
</p></div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Stack Overview
      [7.0]
    </a></span> » <span class="breadcrumb-link"><a href="troubleshooting.html">Troubleshooting</a></span> » <span class="breadcrumb-link"><a href="ml-troubleshooting.html">Troubleshooting machine learning</a></span> » <span class="breadcrumb-node">Machine learning features unavailable after rolling upgrade</span></div><div class="navheader"><span class="prev"><a href="ml-troubleshooting.html">
              « 
              Troubleshooting machine learning</a>
           
        </span><span class="next">
           
          <a href="ml-mappingclash.html">Job creation failure due to mapping clash
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ml-rollingupgrade"></a>Machine learning features unavailable after rolling upgrade<a href="https://github.com/elastic/stack-docs/edit/7.0/docs/en/stack/ml/troubleshooting.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>This problem occurs after you upgrade all of the nodes in your cluster to
7.0.1 by using rolling upgrades. When you try to use machine learning features for
the first time, all attempts fail, though <code class="literal">GET _xpack</code> and <code class="literal">GET _xpack/usage</code>
indicate that X-Pack is enabled.</p><p><span class="strong strong"><strong>Symptoms:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Errors when you click <span class="strong strong"><strong>Machine Learning</strong></span> in Kibana.
For example: <code class="literal">Jobs list could not be created</code> and <code class="literal">An internal server error occurred</code>.</li><li class="listitem">Null pointer and remote transport exceptions when you run machine learning APIs such as
<code class="literal">GET _ml/anomaly_detectors</code> and <code class="literal">GET _ml/datafeeds</code>.</li><li class="listitem">Errors in the log files on the master nodes.
For example: <code class="literal">unable to install ml metadata upon startup</code></li></ul></div><p><span class="strong strong"><strong>Resolution:</strong></span></p><p>After you upgrade all master-eligible nodes to Elasticsearch 7.0.1, restart the
current master node, which triggers the machine learning features to re-initialize.</p><p>For more information, see <a class="ulink" href="/guide/en/elasticsearch/reference/7.0/rolling-upgrades.html" target="_top">Rolling upgrades</a>.</p></div><div class="navfooter"><span class="prev"><a href="ml-troubleshooting.html">
              « 
              Troubleshooting machine learning</a>
           
        </span><span class="next">
           
          <a href="ml-mappingclash.html">Job creation failure due to mapping clash
               »
            </a></span></div></body></html>
