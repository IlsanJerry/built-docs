<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Active Directory user authentication
        | Elastic Stack Overview [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Stack Overview [master]" /><link rel="up" href="setting-up-authentication.html" title="User authentication" /><link rel="prev" href="realm-chains.html" title="Realm chains" /><link rel="next" href="file-realm.html" title="File-based user authentication" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elastic Stack/Overview/master" /><meta xmlns="" name="DC.subject" content="Elastic Stack" /><meta xmlns="" name="DC.identifier" content="master" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Stack Overview
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="elasticsearch-security.html">Securing the Elastic Stack</a></span> » <span class="breadcrumb-link"><a href="setting-up-authentication.html">User authentication</a></span> » <span class="breadcrumb-node">Active Directory user authentication</span></div><div xmlns="" class="navheader"><span class="prev"><a href="realm-chains.html">
              « 
              Realm chains</a>
           
        </span><span class="next">
           
          <a href="file-realm.html">File-based user authentication
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="active-directory-realm"></a>Active Directory user authentication<a xmlns="" href="https://github.com/elastic/stack-docs/edit/master/docs/en/stack/security/authentication/active-directory-realm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a xmlns="" class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>You can configure Elastic Stack security features to communicate with Active
Directory to authenticate users. To integrate with Active Directory, you
configure an <code class="literal">active_directory</code> realm and map Active Directory users and groups
to roles in the <a class="link" href="mapping-roles.html" title="Mapping users and groups to roles">role mapping file</a>.</p><p>See <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/master/configuring-ad-realm.html" target="_top">Configuring an active directory realm</a>.</p><p>The security features use LDAP to communicate with Active Directory, so
<code class="literal">active_directory</code> realms are similar to <a class="link" href="ldap-realm.html" title="LDAP user authentication"><code class="literal">ldap</code> realms</a>. Like
LDAP directories, Active Directory stores users and groups hierarchically. The
directory’s hierarchy is built from containers such as the <span class="emphasis"><em>organizational unit</em></span>
(<code class="literal">ou</code>), <span class="emphasis"><em>organization</em></span> (<code class="literal">o</code>), and <span class="emphasis"><em>domain controller</em></span> (<code class="literal">dc</code>).</p><p>The path to an entry is a <span class="emphasis"><em>Distinguished Name</em></span> (DN) that uniquely identifies a
user or group. User and group names typically have attributes such as a
<span class="emphasis"><em>common name</em></span> (<code class="literal">cn</code>) or <span class="emphasis"><em>unique ID</em></span> (<code class="literal">uid</code>). A DN is specified as a string, for
example <code class="literal">"cn=admin,dc=example,dc=com"</code> (white spaces are ignored).</p><p>The security features supports only Active Directory security groups. You
cannot map distribution groups to roles.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">When you use Active Directory for authentication, the username entered by
      the user is expected to match the <code class="literal">sAMAccountName</code> or <code class="literal">userPrincipalName</code>,
      not the common name.</p></div></div><p>The Active Directory realm authenticates users using an LDAP bind request. After
authenticating the user, the realm then searches to find the user’s entry in
Active Directory. Once the user has been found, the Active Directory realm then
retrieves the user’s group memberships from the <code class="literal">tokenGroups</code> attribute on the
user’s entry in Active Directory.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ad-load-balancing"></a>Load balancing and failover<a xmlns="" href="https://github.com/elastic/stack-docs/edit/master/docs/en/stack/security/authentication/active-directory-realm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <code class="literal">load_balance.type</code> setting can be used at the realm level to configure how
the security features should interact with multiple Active Directory servers.
Two modes of operation are supported: failover and load balancing.</p><p>See
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/master/security-settings.html#load-balancing" target="_top">Load balancing and failover settings</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ad-settings"></a>Active Directory realm settings<a xmlns="" href="https://github.com/elastic/stack-docs/edit/master/docs/en/stack/security/authentication/active-directory-realm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>See
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/master/security-settings.html#ref-ad-settings" target="_top">Active Directory realm settings</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mapping-roles-ad"></a>Mapping Active Directory users and groups to roles<a xmlns="" href="https://github.com/elastic/stack-docs/edit/master/docs/en/stack/security/authentication/active-directory-realm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>See <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/master/configuring-ad-realm.html" target="_top">Configuring an Active Directory realm</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ad-user-metadata"></a>User metadata in Active Directory realms<a xmlns="" href="https://github.com/elastic/stack-docs/edit/master/docs/en/stack/security/authentication/active-directory-realm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>When a user is authenticated via an Active Directory realm, the following
properties are populated in the user’s <span class="emphasis"><em>metadata</em></span>:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><tbody><tr><td align="left" valign="top"><p>Field</p></td><td align="left" valign="top"><p>Description</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ldap_dn</code></p></td><td align="left" valign="top"><p>The distinguished name of the user.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ldap_groups</code></p></td><td align="left" valign="top"><p>The distinguished name of each of the groups that were
                        resolved for the user (regardless of whether those
                        groups were mapped to a role).</p></td></tr></tbody></table></div><p>This metadata is returned in the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/master/security-api-authenticate.html" target="_top">authenticate API</a> and can be used with
<a class="link" href="field-and-document-access-control.html#templating-role-query" title="Templating a role query">templated queries</a> in roles.</p><p>Additional metadata can be extracted from the Active Directory server by configuring
the <code class="literal">metadata</code> setting on the Active Directory realm.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="active-directory-ssl"></a>Setting up SSL between Elasticsearch and Active Directory<a xmlns="" href="https://github.com/elastic/stack-docs/edit/master/docs/en/stack/security/authentication/active-directory-realm.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>See
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/master/configuring-tls.html#tls-active-directory" target="_top">Encrypting communications between Elasticsearch and Active Directory</a>.</p></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="realm-chains.html">
              « 
              Realm chains</a>
           
        </span><span class="next">
           
          <a href="file-realm.html">File-based user authentication
               »
            </a></span></div></body></html>