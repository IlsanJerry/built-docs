<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Granting privileges for indices and aliases
        | Elastic Stack Overview [7.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Stack Overview [7.1]" /><link rel="up" href="authorization.html" title="User authorization" /><link rel="prev" href="field-level-security.html" title="Field level security" /><link rel="next" href="mapping-roles.html" title="Mapping users and groups to roles" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elastic Stack/Overview/7.1" /><meta xmlns="" name="DC.subject" content="Elastic Stack" /><meta xmlns="" name="DC.identifier" content="7.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Stack Overview
      [7.1]
    </a></span> » <span class="breadcrumb-link"><a href="elasticsearch-security.html">Securing the Elastic Stack</a></span> » <span class="breadcrumb-link"><a href="authorization.html">User authorization</a></span> » <span class="breadcrumb-node">Granting privileges for indices and aliases</span></div><div xmlns="" class="navheader"><span class="prev"><a href="field-level-security.html">
              « 
              Field level security</a>
           
        </span><span class="next">
           
          <a href="mapping-roles.html">Mapping users and groups to roles
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="securing-aliases"></a>Granting privileges for indices and aliases<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.1/x-pack/docs/en/security/authorization/alias-privileges.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a xmlns="" class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>Elasticsearch allows to execute operations against <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.1/indices-aliases.html" target="_top">index aliases</a>,
which are effectively virtual indices. An alias points to one or more indices,
holds metadata and potentially a filter. The Elasticsearch security features treat
aliases and indices
the same. Privileges for indices actions are granted on specific indices or
aliases. In order for an indices action to be authorized, the user that executes
it needs to have permissions for that action on all the specific indices or
aliases that the request relates to.</p><p>Let’s look at an example. Assuming we have an index called <code class="literal">2015</code>, an alias that
points to it called <code class="literal">current_year</code>, and a user with the following role:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "names" : [ "2015" ],
  "privileges" : [ "read" ]
}</pre></div><p>The user attempts to retrieve a document from <code class="literal">current_year</code>:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">GET /current_year/event/1</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/14.console"></div><p>The above request gets rejected, although the user has <code class="literal">read</code> privilege on the
concrete index that the <code class="literal">current_year</code> alias points to. The correct permission
would be as follows:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "names" : [ "current_year" ],
  "privileges" : [ "read" ]
}</pre></div><h4><a id="_managing_aliases"></a>Managing aliases<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.1/x-pack/docs/en/security/authorization/alias-privileges.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Unlike creating indices, which requires the <code class="literal">create_index</code> privilege, adding,
removing and retrieving aliases requires the <code class="literal">manage</code> permission. Aliases can be
added to an index directly as part of the index creation:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">PUT /2015
{
    "aliases" : {
        "current_year" : {}
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/15.console"></div><p>or via the dedicated aliases api if the index already exists:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">POST /_aliases
{
    "actions" : [
        { "add" : { "index" : "2015", "alias" : "current_year" } }
    ]
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/16.console"></div><p>The above requests both require the <code class="literal">manage</code> privilege on the alias name as well
as the targeted index, as follows:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "names" : [ "20*", "current_year" ],
  "privileges" : [ "manage" ]
}</pre></div><p>The index aliases api also allows also to delete aliases from existing indices.
The privileges required for such a request are the same as above. Both index and
alias need the <code class="literal">manage</code> permission.</p><h4><a id="_filtered_aliases"></a>Filtered aliases<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.1/x-pack/docs/en/security/authorization/alias-privileges.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Aliases can hold a filter, which allows to select a subset of documents that can
be accessed out of all the documents that the physical index contains. These
filters are not always applied and should not be used in place of
<a class="link" href="document-level-security.html" title="Document level security">document level security</a>.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="field-level-security.html">
              « 
              Field level security</a>
           
        </span><span class="next">
           
          <a href="mapping-roles.html">Mapping users and groups to roles
               »
            </a></span></div></body></html>