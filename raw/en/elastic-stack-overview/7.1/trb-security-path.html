<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Failures due to relocation of the configuration files
        | Elastic Stack Overview [7.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Stack Overview [7.1]" /><link rel="up" href="security-troubleshooting.html" title="Troubleshooting security" /><link rel="prev" href="trb-security-setup.html" title="Setup-passwords command fails due to connection failure" /><link rel="next" href="watcher-troubleshooting.html" title="Troubleshooting Watcher" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elastic Stack/Overview/7.1" /><meta xmlns="" name="DC.subject" content="Elastic Stack" /><meta xmlns="" name="DC.identifier" content="7.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Stack Overview
      [7.1]
    </a></span> » <span class="breadcrumb-link"><a href="troubleshooting.html">Troubleshooting</a></span> » <span class="breadcrumb-link"><a href="security-troubleshooting.html">Troubleshooting security</a></span> » <span class="breadcrumb-node">Failures due to relocation of the configuration files</span></div><div xmlns="" class="navheader"><span class="prev"><a href="trb-security-setup.html">
              « 
              Setup-passwords command fails due to connection failure</a>
           
        </span><span class="next">
           
          <a href="watcher-troubleshooting.html">Troubleshooting Watcher
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="trb-security-path"></a>Failures due to relocation of the configuration files<a xmlns="" href="https://github.com/elastic/stack-docs/edit/7.1/docs/en/stack/security/troubleshooting.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p><span class="strong strong"><strong>Symptoms:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Active Directory or LDAP realms might stop working after upgrading to Elasticsearch 6.3
or later releases. In 6.4 or later releases, you might see messages in the Elasticsearch
log that indicate a config file is in a deprecated location.</li></ul></div><p><span class="strong strong"><strong>Resolution:</strong></span></p><p>By default, in 6.2 and earlier releases, the security configuration files are
located in the <code class="literal">ES_PATH_CONF/x-pack</code> directory, where <code class="literal">ES_PATH_CONF</code> is an
environment variable that defines the location of the
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.1/settings.html#config-files-location" target="_top">config directory</a>.</p><p>In 6.3 and later releases, the config directory no longer contains an <code class="literal">x-pack</code>
directory. The files that were stored in this folder, such as the
<code class="literal">log4j2.properties</code>, <code class="literal">role_mapping.yml</code>, <code class="literal">roles.yml</code>, <code class="literal">users</code>, and <code class="literal">users_roles</code>
files, now exist directly in the config directory.</p><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you upgraded to 6.3 or later releases, your old security
configuration files still exist in an <code class="literal">x-pack</code> folder. That file path is
deprecated, however, and you should move your files out of that folder.</p></div></div><p>In 6.3 and later releases, settings such as <code class="literal">files.role_mapping</code> default to
<code class="literal">ES_PATH_CONF/role_mapping.yml</code>. If you do not want to use the default locations,
you must update the settings appropriately. See
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.1/security-settings.html" target="_top">Security settings in Elasticsearch</a>.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="trb-security-setup.html">
              « 
              Setup-passwords command fails due to connection failure</a>
           
        </span><span class="next">
           
          <a href="watcher-troubleshooting.html">Troubleshooting Watcher
               »
            </a></span></div></body></html>