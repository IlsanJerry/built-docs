<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Index audit output
        | Elastic Stack Overview [6.8]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Stack Overview [6.8]" /><link rel="up" href="auditing.html" title="Auditing security events" /><link rel="prev" href="audit-log-output.html" title="Logfile audit output" /><link rel="next" href="auditing-search-queries.html" title="Auditing search queries" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elastic Stack/Overview/6.8" /><meta xmlns="" name="DC.subject" content="Elastic Stack" /><meta xmlns="" name="DC.identifier" content="6.8" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Stack Overview
      [6.8]
    </a></span> » <span class="breadcrumb-link"><a href="elasticsearch-security.html">Securing the Elastic Stack</a></span> » <span class="breadcrumb-link"><a href="auditing.html">Auditing security events</a></span> » <span class="breadcrumb-node">Index audit output</span></div><div xmlns="" class="navheader"><span class="prev"><a href="audit-log-output.html">
              « 
              Logfile audit output</a>
           
        </span><span class="next">
           
          <a href="auditing-search-queries.html">Auditing search queries
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="audit-index"></a>Index audit output<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.8/x-pack/docs/en/security/auditing/output-index.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a xmlns="" class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><div xmlns="" class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><h3>Deprecated in 6.7.0. </h3><p xmlns="http://www.w3.org/1999/xhtml">The index output type is deprecated and will be removed in 7.0. The sole output for the audit trail will be the <a class="link" href="audit-log-output.html" title="Logfile audit output">logfile</a> type.</p></div></div><p>In addition to logging to a file, you can store audit logs in Elasticsearch
rolling indices. These indices can be either on the same cluster, or on a
remote cluster. You configure the following settings in
<code class="literal">elasticsearch.yml</code> to control how audit entries are indexed. To enable
this output, you need to configure the setting <code class="literal">xpack.security.audit.outputs</code>
in the <code class="literal">elasticsearch.yml</code> file:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">xpack.security.audit.outputs: [ index, logfile ]</pre></div><p>For more configuration options, see
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.8/auditing-settings.html#index-audit-settings" target="_top">Audit log indexing configuration settings</a>.</p><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">No filtering is performed when auditing, so sensitive data may be
audited in plain text when including the request body in audit events.</p></div></div><h4><a id="_audit_index_settings"></a>Audit index settings<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.8/x-pack/docs/en/security/auditing/output-index.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>You can also configure settings for the indices that the events are stored in.
These settings are configured in the <code class="literal">xpack.security.audit.index.settings</code> namespace
in <code class="literal">elasticsearch.yml</code>. For example, the following configuration sets the
number of shards and replicas to 1 for the audit indices:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">xpack.security.audit.index.settings:
  index:
    number_of_shards: 1
    number_of_replicas: 1</pre></div><p>These settings apply to the local audit indices, as well as to the
<a class="link" href="forwarding-audit-logfiles.html" title="Forwarding audit logs to a remote cluster">remote audit indices</a>, but only if the remote cluster
does <span class="strong strong"><strong>not</strong></span> have security features enabled or the Elasticsearch versions are different.
If the remote cluster has security features enabled and the versions coincide,
the settings for the audit indices there will take precedence,
even if they are unspecified (i.e. left to defaults).</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Audit events are batched for indexing so there is a lag before
events appear in the index. You can control how frequently batches of
events are pushed to the index by setting
<code class="literal">xpack.security.audit.index.flush_interval</code> in <code class="literal">elasticsearch.yml</code>.</p></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="audit-log-output.html">
              « 
              Logfile audit output</a>
           
        </span><span class="next">
           
          <a href="auditing-search-queries.html">Auditing search queries
               »
            </a></span></div></body></html>