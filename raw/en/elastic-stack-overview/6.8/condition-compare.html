<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Compare Condition
        | Elastic Stack Overview [6.8]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Stack Overview [6.8]" /><link rel="up" href="condition.html" title="Conditions" /><link rel="prev" href="condition-never.html" title="Never Condition" /><link rel="next" href="condition-array-compare.html" title="Array Compare Condition" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elastic Stack/Overview/6.8" /><meta xmlns="" name="DC.subject" content="Elastic Stack" /><meta xmlns="" name="DC.identifier" content="6.8" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Stack Overview
      [6.8]
    </a></span> » <span class="breadcrumb-link"><a href="xpack-alerting.html">Alerting on Cluster and Index Events</a></span> » <span class="breadcrumb-link"><a href="condition.html">Conditions</a></span> » <span class="breadcrumb-node">Compare Condition</span></div><div xmlns="" class="navheader"><span class="prev"><a href="condition-never.html">
              « 
              Never Condition</a>
           
        </span><span class="next">
           
          <a href="condition-array-compare.html">Array Compare Condition
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="condition-compare"></a>Compare Condition<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.8/x-pack/docs/en/watcher/condition/compare.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Use the <code class="literal">compare</code> condition to perform a simple comparison against a value in
the watch payload. You can use the <code class="literal">compare</code> condition without enabling
dynamic scripting.</p><div class="orderedlist"><a id="condition-compare-operators"></a><ol class="orderedlist" type="1"><li class="listitem">Supported Comparison Operators</li></ol></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">eq</code></p></td><td align="left" valign="top"><p>Returns <code class="literal">true</code> when the resolved value equals the given one (applies
              to numeric, string, list, object and values)</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">not_eq</code></p></td><td align="left" valign="top"><p>Returns <code class="literal">true</code> when the resolved value does not equal the given one
              (applies to numeric, string, list, object and null values)</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">gt</code></p></td><td align="left" valign="top"><p>Returns <code class="literal">true</code> when the resolved value is greater than the given
              one (applies to numeric and string values)</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">gte</code></p></td><td align="left" valign="top"><p>Returns <code class="literal">true</code> when the resolved value is greater/equal than/to the
              given one (applies to numeric and string values)</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">lt</code></p></td><td align="left" valign="top"><p>Returns <code class="literal">true</code> when the resolved value is less than the given one
              (applies to numeric and string values)</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">lte</code></p></td><td align="left" valign="top"><p>Returns <code class="literal">true</code> when the resolved value is less/equal than/to the
              given one (applies to numeric and string values)</p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_using_a_compare_condition"></a>Using a Compare Condition<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.8/x-pack/docs/en/watcher/condition/compare.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>To use the <code class="literal">compare</code> condition, you specify the value in the execution context
that you want to evaluate, a <a class="link" href="condition-compare.html#condition-compare-operators">comparison operator</a>,
and the value you want to compare against. For example, the following <code class="literal">compare</code>
condition returns <code class="literal">true</code> if the number of the total hits in the <a class="link" href="input-search.html" title="Search Input">search result</a> is greater than or equal to 5:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "condition" : {
    "compare" : {
      "ctx.payload.hits.total" : { <a id="CO25-3"></a><i xmlns="" class="conum" data-value="1"></i>
        "gte" : 5 <a id="CO25-4"></a><i xmlns="" class="conum" data-value="2"></i>
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO25-1"><i xmlns="" class="conum" data-value="1"></i></a> <a href="#CO25-3"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>Use dot notation to reference a value in the execution context.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO25-2"><i xmlns="" class="conum" data-value="2"></i></a> <a href="#CO25-4"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>Specify a comparison operator and the value you want to compare against.</p></td></tr></table></div><p><a id="compare-condition-date-math"></a>When comparing dates and times, you can use date math expressions
of the form <code class="literal">&lt;{expression}&gt;</code>. For example, the following expression returns
<code class="literal">true</code> if the watch was executed within the last five minutes:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "condition" : {
    "compare" : {
      "ctx.execution_time" : {
        "gte" : "&lt;{now-5m}&gt;"
      }
    }
  }
}</pre></div><p>You can also compare two values in the execution context by specifying the
compared value as a path of the form of <code class="literal">{{path}}</code>. For example, the following
condition compares the <code class="literal">ctx.payload.aggregations.status.buckets.error.doc_count</code>
to the <code class="literal">ctx.payload.aggregations.handled.buckets.true.doc_count</code>:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "condition" : {
    "compare" : {
      "ctx.payload.aggregations.status.buckets.error.doc_count" : {
        "not_eq" : "{{ctx.payload.aggregations.handled.buckets.true.doc_count}}"
      }
    }
  }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_accessing_values_in_the_execution_context"></a>Accessing Values in the Execution Context<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.8/x-pack/docs/en/watcher/condition/compare.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>You use "dot-notation" to access values in the execution context. Values loaded
into the execution context by the input are prefixed by <code class="literal">ctx.payload</code>.</p><p>You can reference entries in arrays using their zero-based array indices.
For example, to access the third element of the <code class="literal">ctx.payload.hits.hits</code>
array, use <code class="literal">ctx.payload.hits.hits.2</code>.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">ctx.watch_id</code></p></td><td align="left" valign="top"><p>The id of the watch that is currently executing.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ctx.execution_time</code></p></td><td align="left" valign="top"><p>The time execution of this watch started.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ctx.trigger.triggered_time</code></p></td><td align="left" valign="top"><p>The time this watch was triggered.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ctx.trigger.scheduled_time</code></p></td><td align="left" valign="top"><p>The time this watch was supposed to be triggered.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ctx.metadata.*</code></p></td><td align="left" valign="top"><p>Any metadata associated with the watch.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ctx.payload.*</code></p></td><td align="left" valign="top"><p>The payload data loaded by the watch’s input.</p></td></tr></tbody></table></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="condition-never.html">
              « 
              Never Condition</a>
           
        </span><span class="next">
           
          <a href="condition-array-compare.html">Array Compare Condition
               »
            </a></span></div></body></html>