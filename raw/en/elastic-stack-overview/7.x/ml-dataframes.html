<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Data frame transforms
        | Elastic Stack Overview [7.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elastic Stack Overview [7.x]" /><link rel="up" href="index.html" title="Elastic Stack Overview [7.x]" /><link rel="prev" href="watcher-limitations.html" title="Watcher limitations" /><link rel="next" href="ml-transform-overview.html" title="Data frame transform overview" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elastic Stack/Overview/7.x" /><meta xmlns="" name="DC.subject" content="Elastic Stack" /><meta xmlns="" name="DC.identifier" content="7.x" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elastic Stack Overview
      [7.x]
    </a></span> » <span class="breadcrumb-node">Data frame transforms</span></div><div xmlns="" class="navheader"><span class="prev"><a href="watcher-limitations.html">
              « 
              Watcher limitations</a>
           
        </span><span class="next">
           
          <a href="ml-transform-overview.html">Data frame transform overview
               »
            </a></span></div><div class="xpack part"><div class="titlepage"><div><div><h1 xmlns="" class="title"><a xmlns="http://www.w3.org/1999/xhtml" id="ml-dataframes"></a>Data frame transforms<a href="https://github.com/elastic/stack-docs/edit/7.x/docs/en/stack/data-frames/index.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h1></div></div></div><div class="partintro"><div></div><div xmlns="" class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features.</p></div></div><p>Elasticsearch aggregations are a powerful and flexible feature that enable you to
summarize and retrieve complex insights about your data. You can summarize
complex things like the number of web requests per day on a busy website, broken
down by geography and browser type. If you use the same data set to try to
calculate something as simple as a single number for the average duration of
visitor web sessions, however, you can quickly run out of memory.</p><p>Why does this occur? A web session duration is an example of a behavioral
attribute not held on any one log record; it has to be derived by finding the
first and last records for each session in our weblogs. This derivation requires
some complex query expressions and a lot of memory to connect all the data
points. If you have an ongoing background process that fuses related events from
one index into entity-centric summaries in another index, you get a more useful,
joined-up picture—​this is essentially what <span class="emphasis"><em>data frames</em></span> are.</p><h2><a id="ml-dataframes-usage"></a>When to use data frames<a xmlns="" href="https://github.com/elastic/stack-docs/edit/7.x/docs/en/stack/data-frames/index.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2><p>You might want to consider using data frames instead of aggregations when:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">You need a complete <span class="emphasis"><em>feature index</em></span> rather than a top-N set of items.</p><p class="simpara">In machine learning, you often need a complete set of behavioral features rather just the
top-N. For example, if you are predicting customer churn, you might look at
features such as the number of website visits in the last week, the total number
of sales, or the number of emails sent. The Elastic Stack machine learning features create models
based on this multi-dimensional feature space, so they benefit from full feature
indices (data frames).</p><p class="simpara">This scenario also applies when you are trying to search across the results of
an aggregation or multiple aggregations. Aggregation results can be ordered or
filtered, but there are
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.x/search-aggregations-bucket-terms-aggregation.html#search-aggregations-bucket-terms-aggregation-order" target="_top">limitations to ordering</a>
and
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.x/search-aggregations-pipeline-bucket-selector-aggregation.html" target="_top">filtering by bucket selector</a>
is constrained by the maximum number of buckets returned. If you want to search
all aggregation results, you need to create the complete data frame. If you
need to sort or filter the aggregation results by multiple fields, data frames
are particularly useful.</p></li><li class="listitem"><p class="simpara">You need to sort aggregation results by a pipeline aggregation.</p><p class="simpara"><a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.x/search-aggregations-pipeline.html" target="_top">Pipeline aggregations</a> cannot be used
for sorting. Technically, this is because pipeline aggregations are run during
the reduce phase after all other aggregations have already completed. If you
create a data frame, you can effectively perform multiple passes over the data.</p></li><li class="listitem"><p class="simpara">You want to create summary tables to optimize queries.</p><p class="simpara">For example, if you
have a high level dashboard that is accessed by a large number of users and it
uses a complex aggregation over a large dataset, it may be more efficient to
create a data frame to cache results. Thus, each user doesn’t need to run the
aggregation query.</p></li></ul></div><p>Though there are multiple ways to create data frames, this content pertains
to one specific method: <span class="emphasis"><em>data frame transforms</em></span>.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="xref" href="ml-transform-overview.html" title="Data frame transform overview"><em>Overview</em></a></li><li class="listitem"><a class="xref" href="df-api-quickref.html" title="API quick reference"><em>API quick reference</em></a></li><li class="listitem"><a class="xref" href="dataframe-examples.html" title="Data frame transform examples"><em>Examples</em></a></li><li class="listitem"><a class="xref" href="dataframe-troubleshooting.html" title="Troubleshooting data frame transforms"><em>Troubleshooting</em></a></li><li class="listitem"><a class="xref" href="dataframe-limitations.html" title="Data frame transform limitations"><em>Limitations</em></a></li></ul></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="watcher-limitations.html">
              « 
              Watcher limitations</a>
           
        </span><span class="next">
           
          <a href="ml-transform-overview.html">Data frame transform overview
               »
            </a></span></div></body></html>