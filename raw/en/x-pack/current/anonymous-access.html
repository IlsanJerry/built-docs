<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Enabling Anonymous Access
        | X-Pack for the Elastic Stack [6.2]
      | Elastic
    </title><link rel="home" href="index.html" title="X-Pack for the Elastic Stack [6.2]" /><link rel="up" href="setting-up-authentication.html" title="Setting Up User Authentication" /><link rel="prev" href="how-authc-works.html" title="How Authentication Works" /><link rel="next" href="native-realm.html" title="Native User Authentication" /><meta name="DC.type" content="Learn/Docs/Legacy/XPack/Reference/6.2" /><meta name="DC.subject" content="X-Pack" /><meta name="DC.identifier" content="6.2" /><meta name="robots" content="noindex,nofollow" /></head><body><div class="page_header">You are looking at documentation for an older release.  Not what you want? 
See the <a href="https://www.elastic.co/guide/en/elastic-stack-overview/current/index.html">current release documentation</a>.</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">X-Pack for the Elastic Stack
      [6.2]
    </a></span> » <span class="breadcrumb-link"><a href="elasticsearch-security.html">Securing the Elastic Stack</a></span> » <span class="breadcrumb-link"><a href="setting-up-authentication.html">Setting Up User Authentication</a></span> » <span class="breadcrumb-node">Enabling Anonymous Access</span></div><div class="navheader"><span class="prev"><a href="how-authc-works.html">
              « 
              How Authentication Works</a>
           
        </span><span class="next">
           
          <a href="native-realm.html">Native User Authentication
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="anonymous-access"></a>Enabling Anonymous Access</h2></div></div></div><p>Incoming requests are considered to be <span class="emphasis"><em>anonymous</em></span> if no authentication token
can be extracted from the incoming request. By default, anonymous requests are rejected and an authentication error is returned (status code <code class="literal">401</code>).</p><p>To enable anonymous access, you assign one or more roles to anonymous
users in the <code class="literal">elasticsearch.yml</code> configuration file. For example, the following
configuration assigns anonymous users <code class="literal">role1</code> and <code class="literal">role2</code>:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">xpack.security.authc:
  anonymous:
    username: anonymous_user <a id="CO1-1"></a><i class="conum" data-value="1"></i>
    roles: role1, role2 <a id="CO1-2"></a><i class="conum" data-value="2"></i>
    authz_exception: true <a id="CO1-3"></a><i class="conum" data-value="3"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>The username/principal of the anonymous user. Defaults to
<code class="literal">_es_anonymous_user</code> if not specified.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>The roles to associate with the anonymous user. If no roles are specified, anonymous access is disabled—​anonymous requests will be rejected and return an authentication error.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>When <code class="literal">true</code>, a 403 HTTP status code is returned if the anonymous user
does not have the permissions needed to perform the requested action and the
user will NOT be prompted to provide credentials to access the requested
resource. When <code class="literal">false</code>, a 401 HTTP status code is returned if the anonymous user
does not have the necessary permissions and the user is prompted for
credentials to access the requested resource. If you are using anonymous access
in combination with HTTP, you might need to set <code class="literal">authz_exception</code> to <code class="literal">false</code>
if your client does not support preemptive basic authentication. Defaults to
<code class="literal">true</code>.</p></td></tr></table></div></div><div class="navfooter"><span class="prev"><a href="how-authc-works.html">
              « 
              How Authentication Works</a>
           
        </span><span class="next">
           
          <a href="native-realm.html">Native User Authentication
               »
            </a></span></div></body></html>
