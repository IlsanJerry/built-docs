<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">License Expiration
        | X-Pack for the Elastic Stack [5.4]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="X-Pack for the Elastic Stack [5.4]" /><link rel="up" href="license-management.html" title="License Management" /><link rel="prev" href="listing-licenses.html" title="Viewing the Installed License" /><link rel="next" href="xpack-release-notes.html" title="Release Notes" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Legacy/XPack/Reference/5.4" /><meta xmlns="" name="DC.subject" content="X-Pack" /><meta xmlns="" name="DC.identifier" content="5.4" /><meta xmlns="" name="robots" content="noindex,nofollow" /></head><body><div xmlns="" class="page_header">Why not take our <a href="https://www.elastic.co/products/x-pack/machine-learning">machine learning</a> beta for a spin and join us in the <a href="https://discuss.elastic.co/c/x-pack">public X-Pack forum</a>?
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">X-Pack for the Elastic Stack
      [5.4]
    </a></span> » <span class="breadcrumb-link"><a href="license-management.html">License Management</a></span> » <span class="breadcrumb-node">License Expiration</span></div><div xmlns="" class="navheader"><span class="prev"><a href="listing-licenses.html">
              « 
              Viewing the Installed License</a>
           
        </span><span class="next">
           
          <a href="xpack-release-notes.html">Release Notes
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="license-expiration"></a>License Expiration</h2></div></div></div><p>License expiration should never be a surprise. If you’re using Monitoring, a license expiration
warning is displayed prominently if your license expires within 30 days. Warnings are
also displayed on startup and written to the Elasticsearch log starting 30  days from the expiration date. These error messages tell you when the license expires and what features will be disabled if
you fail to update it.</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh"># License [will expire] on [Friday, December 30, 2016]. If you have a new license, please update it.
# Otherwise, please reach out to your support contact.
#
# Commercial plugins operate with reduced functionality on license expiration:
# - security
#  - Cluster health, cluster stats and indices stats operations are blocked
#  - All data operations (read and write) continue to work
# - watcher
#  - PUT / GET watch APIs are disabled, DELETE watch API continues to work
#  - Watches execute and write to the history
#  - The actions of the watches don't execute
# - monitoring
#  - The agent will stop collecting cluster and indices metrics
#  - The agent will stop automatically cleaning indices older than [xpack.monitoring.history.duration]
# - graph
#  - Graph explore APIs are disabled</pre></div><p>Once the license expires, calls to the cluster health, cluster stats, and index stats APIs
fail with a <code class="literal">security_exception</code> and return a 403 HTTP status code.</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">{
  "error": {
    "root_cause": [
      {
        "type": "security_exception",
        "reason": "current license is non-compliant for [security]",
        "license.expired.feature": "security"
      }
    ],
    "type": "security_exception",
    "reason": "current license is non-compliant for [security]",
    "license.expired.feature": "security"
  },
  "status": 403
}</pre></div><p>This enables  automatic monitoring systems to easily detect the license failure without immediately impacting other users.</p><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">You should update your license as soon as possible. You’re essentially flying blind when running with an expired license. Access to the cluster health and stats APIs is critical
for monitoring and managing an Elasticsearch cluster.</p></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="listing-licenses.html">
              « 
              Viewing the Installed License</a>
           
        </span><span class="next">
           
          <a href="xpack-release-notes.html">Release Notes
               »
            </a></span></div></body></html>