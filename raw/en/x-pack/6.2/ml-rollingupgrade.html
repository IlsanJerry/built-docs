<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Machine learning features unavailable after rolling upgrade
        | X-Pack for the Elastic Stack [6.2]
      | Elastic
    </title><link rel="home" href="index.html" title="X-Pack for the Elastic Stack [6.2]" /><link rel="up" href="ml-troubleshooting.html" title="X-Pack machine learning Troubleshooting" /><link rel="prev" href="ml-troubleshooting.html" title="X-Pack machine learning Troubleshooting" /><link rel="next" href="ml-mappingclash.html" title="Job creation failure due to mapping clash" /><meta name="DC.type" content="Learn/Docs/Legacy/XPack/Reference/6.2" /><meta name="DC.subject" content="X-Pack" /><meta name="DC.identifier" content="6.2" /><meta name="robots" content="noindex,nofollow" /></head><body><div class="page_header">You are looking at documentation for an older release.  Not what you want? 
See the <a href="https://www.elastic.co/guide/index.html">current release documentation</a>.</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">X-Pack for the Elastic Stack
      [6.2]
    </a></span> » <span class="breadcrumb-link"><a href="xpack-troubleshooting.html">Troubleshooting</a></span> » <span class="breadcrumb-link"><a href="ml-troubleshooting.html">X-Pack machine learning Troubleshooting</a></span> » <span class="breadcrumb-node">Machine learning features unavailable after rolling upgrade</span></div><div class="navheader"><span class="prev"><a href="ml-troubleshooting.html">
              « 
              X-Pack machine learning Troubleshooting</a>
           
        </span><span class="next">
           
          <a href="ml-mappingclash.html">Job creation failure due to mapping clash
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ml-rollingupgrade"></a>Machine learning features unavailable after rolling upgrade</h2></div></div></div><p>This problem occurs after you upgrade all of the nodes in your cluster to
6.2.4 by using rolling upgrades. When you try to use X-Pack machine learning features for
the first time, all attempts fail, though <code class="literal">GET _xpack</code> and <code class="literal">GET _xpack/usage</code>
indicate that X-Pack is enabled.</p><p><span class="strong strong"><strong>Symptoms:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Errors when you click <span class="strong strong"><strong>Machine Learning</strong></span> in Kibana.
For example: <code class="literal">Jobs list could not be created</code> and <code class="literal">An internal server error occurred</code>.</li><li class="listitem">Null pointer and remote transport exceptions when you run machine learning APIs such as
<code class="literal">GET _xpack/ml/anomaly_detectors</code> and <code class="literal">GET _xpack/ml/datafeeds</code>.</li><li class="listitem">Errors in the log files on the master nodes.
For example: <code class="literal">unable to install ml metadata upon startup</code></li></ul></div><p><span class="strong strong"><strong>Resolution:</strong></span></p><p>After you upgrade all master-eligible nodes to Elasticsearch 6.2.4 and X-Pack
6.2.4, restart the current master node, which triggers the X-Pack machine learning
features to re-initialize.</p><p>For more information, see <a class="ulink" href="/guide/en/elasticsearch/reference/6.2/rolling-upgrades.html" target="_top">Rolling upgrades</a>.</p></div><div class="navfooter"><span class="prev"><a href="ml-troubleshooting.html">
              « 
              X-Pack machine learning Troubleshooting</a>
           
        </span><span class="next">
           
          <a href="ml-mappingclash.html">Job creation failure due to mapping clash
               »
            </a></span></div></body></html>
