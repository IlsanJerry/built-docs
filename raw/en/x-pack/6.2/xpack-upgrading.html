<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Upgrading X-Pack
        | X-Pack for the Elastic Stack [6.2]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="X-Pack for the Elastic Stack [6.2]" /><link rel="up" href="xpack-setup.html" title="Setting Up X-Pack" /><link rel="prev" href="installing-xpack.html" title="Installing X-Pack" /><link rel="next" href="xpack-uninstalling.html" title="Uninstalling X-Pack" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Legacy/XPack/Reference/6.2" /><meta xmlns="" name="DC.subject" content="X-Pack" /><meta xmlns="" name="DC.identifier" content="6.2" /><meta xmlns="" name="robots" content="noindex,nofollow" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.  Not what you want? 
See the <a href="https://www.elastic.co/guide/en/elastic-stack-overview/current/index.html">current release documentation</a>.</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">X-Pack for the Elastic Stack
      [6.2]
    </a></span> » <span class="breadcrumb-link"><a href="xpack-setup.html">Setting Up X-Pack</a></span> » <span class="breadcrumb-node">Upgrading X-Pack</span></div><div xmlns="" class="navheader"><span class="prev"><a href="installing-xpack.html">
              « 
              Installing X-Pack</a>
           
        </span><span class="next">
           
          <a href="xpack-uninstalling.html">Uninstalling X-Pack
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="xpack-upgrading"></a>Upgrading X-Pack</h2></div></div></div><p>You must upgrade all of the Elastic Stack products you are using when upgrading
to a new major version.</p><div class="sidebar"><div class="titlepage"></div><p>The steps you need to take to upgrade differ depending on which products you
are using. Want a list that’s tailored to your stack? Try out our
<a class="ulink" href="https://www.elastic.co/products/upgrade_guide" target="_top">Interactive Upgrade Guide</a>.</p></div><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you use X-Pack security and are upgrading directly to
6.2.4 from 5.5 or earlier, you must upgrade the <code class="literal">.security</code> index
after you restart Elasticsearch. Native realm users will not be able to
authenticate until the index is upgraded. For instructions, see
<a class="ulink" href="http://www.elastic.co/guide/en/elastic-stack/6.2/upgrading-elastic-stack.html#upgrade-internal-indices" target="_top">Upgrading
internal indices</a>. You also need to upgrade the <code class="literal">.security</code> index if
you restore a pre-5.6 snapshot to a fresh 6.0 install.</p></div></div><p>To upgrade X-Pack:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Stop any machine learning jobs that are running before starting the upgrade process. See
<a class="xref" href="stopping-ml.html" title="Stopping Machine Learning"><em>Stopping Machine Learning</em></a>.</li><li class="listitem">Stop Elasticsearch.</li><li class="listitem"><p class="simpara">Uninstall X-Pack from Elasticsearch:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">bin/elasticsearch-plugin remove x-pack</pre></div></li><li class="listitem"><p class="simpara">If you have not already done so,
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.2/setup-upgrade.html" target="_top">upgrade Elasticsearch</a>.</p><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you use X-Pack monitoring, re-use the data directory when you upgrade
Elasticsearch. Monitoring identifies unique Elasticsearch nodes by using the persistent UUID, which
is stored in the data directory. For more information about the location of the
data directory, see <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.2/path-settings.html" target="_top">path.data and path.logs</a>.</p></div></div></li><li class="listitem"><a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.2/installing-xpack-es.html" target="_top">Install the new version of X-Pack into Elasticsearch</a>.</li><li class="listitem"><p class="simpara">Restart Elasticsearch.</p><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you’re upgrading a production cluster, perform a
            <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.2/rolling-upgrades.html" target="_top">rolling upgrade</a> to ensure recovery is
            as quick as possible. Rolling upgrades are supported when upgrading
            to a new minor version. A full cluster restart is required when
            upgrading to a new major version.</p></div></div></li><li class="listitem"><p class="simpara">Uninstall X-Pack from Kibana:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">bin/kibana-plugin remove x-pack</pre></div></li><li class="listitem"><p class="simpara">If you have not already done so,
<a class="ulink" href="https://www.elastic.co/guide/en/kibana/6.2/upgrade.html" target="_top">upgrade Kibana</a>.</p><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you use X-Pack monitoring, you must re-use the data directory when you
upgrade Kibana. Otherwise, the Kibana instance is assigned a new persistent UUID
and becomes a new instance in the monitoring data.</p></div></div></li><li class="listitem"><a class="ulink" href="https://www.elastic.co/guide/en/kibana/6.2/installing-xpack-kb.html" target="_top">Install the new version of X-Pack into Kibana</a>.</li><li class="listitem">Restart Kibana.</li><li class="listitem"><p class="simpara">Uninstall X-Pack from Logstash:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">bin/logstash-plugin remove x-pack</pre></div></li><li class="listitem"><p class="simpara">If you have not already done so,
<a class="ulink" href="http://www.elastic.co/guide/en/logstash/6.2/upgrading-logstash.html" target="_top">upgrade Logstash</a>.</p><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you use X-Pack monitoring, you must re-use the data directory when you
upgrade Logstash. Otherwise, the Logstash node is assigned a new persistent UUID
and becomes a new node in the monitoring data.</p></div></div></li><li class="listitem"><a class="ulink" href="http://www.elastic.co/guide/en/logstash/6.2/installing-xpack-log.html" target="_top">Install the new version of X-Pack into Logstash</a>.</li><li class="listitem">Restart Logstash.</li></ol></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="installing-xpack.html">
              « 
              Installing X-Pack</a>
           
        </span><span class="next">
           
          <a href="xpack-uninstalling.html">Uninstalling X-Pack
               »
            </a></span></div></body></html>