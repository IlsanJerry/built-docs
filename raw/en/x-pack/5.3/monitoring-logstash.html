<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Monitoring Logstash
        | X-Pack for the Elastic Stack [5.3]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="X-Pack for the Elastic Stack [5.3]" /><link rel="up" href="xpack-monitoring.html" title="Monitoring the Elastic Stack" /><link rel="prev" href="monitoring-cluster.html" title="Monitoring Elasticsearch" /><link rel="next" href="monitoring-kibana.html" title="Monitoring Kibana" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Legacy/XPack/Reference/5.3" /><meta xmlns="" name="DC.subject" content="X-Pack" /><meta xmlns="" name="DC.identifier" content="5.3" /><meta xmlns="" name="robots" content="noindex,nofollow" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">X-Pack for the Elastic Stack
      [5.3]
    </a></span> » <span class="breadcrumb-link"><a href="xpack-monitoring.html">Monitoring the Elastic Stack</a></span> » <span class="breadcrumb-node">Monitoring Logstash</span></div><div xmlns="" class="navheader"><span class="prev"><a href="monitoring-cluster.html">
              « 
              Monitoring Elasticsearch</a>
           
        </span><span class="next">
           
          <a href="monitoring-kibana.html">Monitoring Kibana
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="monitoring-logstash"></a>Monitoring Logstash</h2></div></div></div><p>To monitor Logstash nodes:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">Install X-Pack by running <code class="literal">bin/logstash-plugin install</code> in the Logstash
installation directory on each node you want to monitor:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">bin/logstash-plugin install x-pack</pre></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">The plugin install script requires direct Internet access
to download and install X-Pack. If your Logstash node doesn’t have
Internet access, <a class="link" href="installing-xpack.html#xpack-installing-offline" title="Installing X-Pack on Offline Machines">manually download and install
X-Pack</a>.</p></div></div></li><li class="listitem"><p class="simpara">Configure your Logstash nodes to send metrics to your production Elasticsearch cluster using the
<code class="literal">logstash.yml</code> file. For more information about configuring your production Elasticsearch cluster
for monitoring, see <a class="link" href="monitoring-cluster.html" title="Monitoring Elasticsearch">Setting up a Separate Monitoring Cluster</a>.</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">xpack.monitoring.elasticsearch.url: ["http://es-prod-node-1:9200", "http://es-prod-node-2:9200"] <a id="CO34-1"></a><i xmlns="" class="conum" data-value="1"></i>
xpack.monitoring.elasticsearch.username: "logstash_system" <a id="CO34-2"></a><i xmlns="" class="conum" data-value="2"></i>
xpack.monitoring.elasticsearch.password: "changeme"</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO34-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>If SSL/TLS is enabled on the production cluster, you must
connect through HTTPS. If multiple URLs are specified, Logstash can round-robin requests
to these production nodes.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO34-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>The <code class="literal">logstash_system</code> user is automatically added when you
install X-Pack. Don’t forget to change the default passwords for all of the
<a class="link" href="setting-up-authentication.html#built-in-users" title="Built-in Users">built in users</a>. If X-Pack security is disabled on the production
cluster, you can omit the <code class="literal">username</code> and <code class="literal">password</code> for the agent.</p></td></tr></table></div></li><li class="listitem"><p class="simpara">If SSL/TLS is enabled on the production Elasticsearch cluster, specify the trusted
CA certificate(s) that will be used to verify the identity of the nodes
in the cluster.</p><p class="simpara">To add a CA certificate to a Logstash node’s trusted certificates, you
can specify the location of the PEM encoded certificate with the
<code class="literal">ca</code> setting:</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">xpack.monitoring.elasticsearch.ssl.ca: [ "/path/to/ca.crt" ]</pre></div><p class="simpara">Alternatively, you can configure trusted certificates using a truststore
(a Java Keystore file that contains the certificates):</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">xpack.monitoring.elasticsearch.ssl.truststore.path: /path/to/file
xpack.monitoring.elasticsearch.ssl.truststore.password: password</pre></div><p class="simpara">Also, optionally, you can set up client certificate using a keystore
(a Java Keystore file that contains the certificate):</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">xpack.monitoring.elasticsearch.ssl.keystore.path: /path/to/file
xpack.monitoring.elasticsearch.ssl.keystore.password: password</pre></div></li><li class="listitem">Restart your Logstash nodes.</li><li class="listitem"><p class="simpara">To verify your X-Pack monitoring configuration, point your web browser at your Kibana
host, and select <span class="strong strong"><strong>Monitoring</strong></span> from the side navigation. Metrics reported from
your Logstash nodes should be visible in the Logstash section. When security is
enabled, to view the monitoring dashboards you must log in to Kibana as a user
who has the <code class="literal">kibana_user</code> and <code class="literal">monitoring_user</code> roles.</p><p class="simpara"><span class="inlinemediaobject"><img src="images/monitoring/monitoring.jpg" alt="Monitoring" /></span></p></li></ol></div><h3><a id="_re_enabling_logstash_monitoring_after_upgrading"></a>Re-enabling Logstash Monitoring After Upgrading</h3><p>When upgrading from older versions of X-Pack, the built-in <code class="literal">logstash_system</code>
user is disabled for security reasons. To resume monitoring, <a class="link" href="monitoring-troubleshooting.html" title="Monitoring Troubleshooting">change the password and re-enable the logstash_system user</a>.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="monitoring-cluster.html">
              « 
              Monitoring Elasticsearch</a>
           
        </span><span class="next">
           
          <a href="monitoring-kibana.html">Monitoring Kibana
               »
            </a></span></div></body></html>