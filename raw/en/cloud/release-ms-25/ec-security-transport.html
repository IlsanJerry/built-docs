<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Configure the Java transport client
        | Elasticsearch Service Documentation
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Service Documentation" /><link rel="up" href="ec-security.html" title="Securing your deployment" /><link rel="prev" href="ec-users-manage-shield.html" title="Before Version 5.0, manage users and roles in Shield" /><link rel="next" href="ec-sanitize_requests.html" title="Sanitize requests" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Cloud/Reference" /><meta xmlns="" name="DC.subject" content="Elastic Cloud" /><meta xmlns="" name="DC.identifier" content="release-ms-25" /></head><body><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Service Documentation</a></span> » <span class="breadcrumb-link"><a href="ec-security.html">Securing your deployment</a></span> » <span class="breadcrumb-node">Configure the Java transport client</span></div><div xmlns="" class="navheader"><span class="prev"><a href="ec-users-manage-shield.html">
              « 
              Before Version 5.0, manage users and roles in Shield</a>
           
        </span><span class="next">
           
          <a href="ec-sanitize_requests.html">Sanitize requests
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="ec-security-transport"></a>Configure the Java transport client</h2></div></div></div><p>You can connect to a deployment secured with the X-Pack security features or Shield by using the transport client. In addition to the standard transport client configuration, you’ll need to ensure two key points for Elasticsearch Service deployments:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The X-Found-Cluster header must be included, indicating which cluster to route the connections to.
</li><li class="listitem">
The connecting user must have the <code class="literal">transport_client</code> role as well as the <code class="literal">monitoring</code> cluster privilege.
</li></ul></div><h3><a id="ec-before_you_begin_13"></a>Before you begin</h3><p>Some limitations apply when you use the transport client. To learn more, see <a class="link" href="ec-restrictions.html#ec-restrictions-transport-client" title="Transport client">Transport client (Restrictions and known problems)</a>.</p><h3><a id="ec-example_transport_client_configuration"></a>Example: Transport client configuration</h3><p>Here is an example of how to create a transport client to connect to Elasticsearch Service:</p><div xmlns="" class="pre_wrapper lang-java"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-java">// Build the settings for our client.
String clusterId = "ac01aa2425e4a5bafdebf5100af3e9b37401055b"; // Your cluster ID here
String region = "us-east-1"; // Your region here
boolean enableSsl = true;

Settings settings = Settings.settingsBuilder()
    .put("transport.ping_schedule", "5s")
    //.put("transport.sniff", false) // Disabled by default and *must* be disabled.
    .put("cluster.name", clusterId)
    .put("action.bulk.compress", false)
    .put("shield.transport.ssl", enableSsl)
    .put("request.headers.X-Found-Cluster", clusterId)
    .put("shield.user", "username:password") // your shield username and password
    .build();

String hostname = clusterId + "." + region + ".aws.found.io";
// Instantiate a TransportClient and add the cluster to the list of addresses to connect to.
// Only port 9343 (SSL-encrypted) is currently supported.
Client client = TransportClient.builder()
        .addPlugin(ShieldPlugin.class)
        .settings(settings)
        .build()
        .addTransportAddress(new InetSocketTransportAddress(InetAddress.getByName(hostname), 9343));</pre></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">The example is for an ES 2.1 cluster. See GitHub for  <a class="ulink" href="https://github.com/elastic/found-shield-example" target="_top">examples that work with other versions</a>.</p></div></div><p>Some additional configuration steps might be required, such as adding the Shield JAR to your classpath. To learn more, see <a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/7.3/java-clients.html#transport-client" target="_top">Configuring the Transport Client to work with a Secured Cluster (X-Pack)</a> and <a class="ulink" href="https://www.elastic.co/guide/en/shield/2.4/_using_elasticsearch_java_clients_with_shield.html" target="_top">Configuring the Transport Client to work with Shield</a>.</p><div xmlns="" class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Transport client support for Elasticsearch 6.x was added in version 6.2.4 and later ported back to make it available to newly created Elasticsearch 6.1 and 6.0 clusters. If you have an existing version 6.0 or 6.1 cluster without transport client support, you can use the transport client by upgrading your cluster to version 6.2.4 first.</p></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="ec-users-manage-shield.html">
              « 
              Before Version 5.0, manage users and roles in Shield</a>
           
        </span><span class="next">
           
          <a href="ec-sanitize_requests.html">Sanitize requests
               »
            </a></span></div></body></html>