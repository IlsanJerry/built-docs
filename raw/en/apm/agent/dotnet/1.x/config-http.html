<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>HTTP configuration options
        | APM .NET Agent Reference [1.x]
      | Elastic
    </title><link rel="home" href="index.html" title="APM .NET Agent Reference [1.x]" /><link rel="up" href="configuration.html" title="Configuration" /><link rel="prev" href="config-reporter.html" title="Reporter configuration options" /><link rel="next" href="config-stacktrace.html" title="Stacktrace configuration options" /><meta name="DC.type" content="Learn/Docs/APM .NET Agent/Reference/1.x" /><meta name="DC.subject" content="APM" /><meta name="DC.identifier" content="1.x" /></head><body><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">APM .NET Agent Reference
      [1.x]
    </a></span> » <span class="breadcrumb-link"><a href="configuration.html">Configuration</a></span> » <span class="breadcrumb-node">HTTP configuration options</span></div><div class="navheader"><span class="prev"><a href="config-reporter.html">
              « 
              Reporter configuration options</a>
           
        </span><span class="next">
           
          <a href="config-stacktrace.html">Stacktrace configuration options
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="config-http"></a>HTTP configuration options<a href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><h4><a id="config-capture-body"></a><code class="literal">CaptureBody</code> (performance) (<span class="Admonishment">
      [<span class="Admonishment-version u-mono">1.0.1</span>]
      <span class="Admonishment-detail">Added in 1.0.1. </span></span>
)<a href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>For transactions that are HTTP requests, the agent can optionally capture the request body, e.g., POST variables.
If the request has a body and this setting is disabled, the body will be shown as [REDACTED].
This option is case-insensitive.</p><div class="warning admon"><div class="icon"></div><div class="admon_content"><p>Request bodies often contain sensitive values like passwords, credit card numbers, etc.
If your service handles data like this, we advise to only enable this feature with care.
Turning on body capturing can also significantly increase the overhead in terms of heap usage, network utilization, and Elasticsearch index size.</p></div></div><p>Possible options are <code class="literal">off</code>, <code class="literal">errors</code>, <code class="literal">transactions</code> and <code class="literal">all</code>:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="literal">off</code> - request bodies will never be reported</li><li class="listitem"><code class="literal">errors</code> - request bodies will only be reported with errors</li><li class="listitem"><code class="literal">transactions</code> - request bodies will only be reported with request transactions</li><li class="listitem"><code class="literal">all</code> - request bodies will be reported with both errors and request transactions</li></ul></div><p>This setting can be changed after agent’s start.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Environment variable name</th><th align="left" valign="top">IConfiguration or Web.config key</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CAPTURE_BODY</code></p></td><td align="left" valign="top"><p><code class="literal">ElasticApm:CaptureBody</code></p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">off</code></p></td><td align="left" valign="top"><p>String</p></td></tr></tbody></table></div><h4><a id="config-capture-body-content-types"></a><code class="literal">CaptureBodyContentTypes</code> (performance) (<span class="Admonishment">
      [<span class="Admonishment-version u-mono">1.0.1</span>]
      <span class="Admonishment-detail">Added in 1.0.1. </span></span>
)<a href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Configures which content types should be captured.</p><p>This option supports the wildcard <code class="literal">*</code>, which matches zero or more characters.
Examples: <code class="literal">/foo/*/bar/*/baz*</code>, <code class="literal">*foo*</code>.
Matching is case insensitive.</p><p>This setting can be changed after agent’s start.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Environment variable name</th><th align="left" valign="top">IConfiguration or Web.config key</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CAPTURE_BODY_CONTENT_TYPES</code></p></td><td align="left" valign="top"><p><code class="literal">ElasticApm:CaptureBodyContentTypes</code></p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">application/x-www-form-urlencoded*, text/*, application/json*, application/xml*</code></p></td><td align="left" valign="top"><p>List&lt;string&gt;</p></td></tr></tbody></table></div><h4><a id="config-capture-headers"></a><code class="literal">CaptureHeaders</code> (performance)<a href="https://github.com/elastic/apm-agent-dotnet/edit/1.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Environment variable name</th><th align="left" valign="top">IConfiguration or Web.config key</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CAPTURE_HEADERS</code></p></td><td align="left" valign="top"><p><code class="literal">ElasticApm:CaptureHeaders</code></p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p>Boolean</p></td></tr></tbody></table></div><p>If set to <code class="literal">true</code>,
the agent will capture request and response headers, including cookies.</p><div class="note admon"><div class="icon"></div><div class="admon_content"><p>Setting this to <code class="literal">false</code> reduces memory allocations, network bandwidth and disk space used by Elasticsearch.</p></div></div></div><div class="navfooter"><span class="prev"><a href="config-reporter.html">
              « 
              Reporter configuration options</a>
           
        </span><span class="next">
           
          <a href="config-stacktrace.html">Stacktrace configuration options
               »
            </a></span></div></body></html>
