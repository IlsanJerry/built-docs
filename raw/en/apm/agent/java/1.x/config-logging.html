<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Logging configuration options
        | APM Java Agent Reference [1.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="APM Java Agent Reference [1.x]" /><link rel="up" href="configuration.html" title="Configuration" /><link rel="prev" href="config-jax-rs.html" title="JAX-RS configuration options" /><link rel="next" href="config-reporter.html" title="Reporter configuration options" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/APM Java Agent/Reference/1.x" /><meta xmlns="" name="DC.subject" content="APM" /><meta xmlns="" name="DC.identifier" content="1.x" /></head><body><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">APM Java Agent Reference
      [1.x]
    </a></span> » <span class="breadcrumb-link"><a href="configuration.html">Configuration</a></span> » <span class="breadcrumb-node">Logging configuration options</span></div><div xmlns="" class="navheader"><span class="prev"><a href="config-jax-rs.html">
              « 
              JAX-RS configuration options</a>
           
        </span><span class="next">
           
          <a href="config-reporter.html">Reporter configuration options
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="config-logging"></a>Logging configuration options<a xmlns="" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><h4><a id="config-log-level"></a><code class="literal">log_level</code><a xmlns="" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Sets the logging level for the agent.</p><p>This option is case-insensitive.</p><p>Valid options: <code class="literal">ERROR</code>, <code class="literal">WARN</code>, <code class="literal">INFO</code>, <code class="literal">DEBUG</code>, <code class="literal">TRACE</code></p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th><th align="left" valign="top">Dynamic</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">INFO</code></p></td><td align="left" valign="top"><p>Level</p></td><td align="left" valign="top"><p>true</p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Java System Properties</th><th align="left" valign="top">Property file</th><th align="left" valign="top">Environment</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">elastic.apm.log_level</code></p></td><td align="left" valign="top"><p><code class="literal">log_level</code></p></td><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_LEVEL</code></p></td></tr></tbody></table></div><h4><a id="config-log-file"></a><code class="literal">log_file</code><a xmlns="" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Sets the path of the agent logs.
The special value <code class="literal">_AGENT_HOME_</code> is a placeholder for the folder the elastic-apm-agent.jar is in.
Example: <code class="literal">_AGENT_HOME_/logs/elastic-apm.log</code></p><p>When set to the special value <span class="emphasis"><em>System.out</em></span>,
the logs are sent to standard out.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">When logging to a file,
it’s content is deleted when the application starts.</p></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th><th align="left" valign="top">Dynamic</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">System.out</code></p></td><td align="left" valign="top"><p>String</p></td><td align="left" valign="top"><p>false</p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Java System Properties</th><th align="left" valign="top">Property file</th><th align="left" valign="top">Environment</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">elastic.apm.log_file</code></p></td><td align="left" valign="top"><p><code class="literal">log_file</code></p></td><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_LOG_FILE</code></p></td></tr></tbody></table></div><h4><a id="config-enable-log-correlation"></a><code class="literal">enable_log_correlation</code><a xmlns="" href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>A boolean specifying if the agent should integrate into SLF4J’s <a class="ulink" href="https://www.slf4j.org/api/org/slf4j/MDC.html" target="_top">MDC</a> to enable trace-log correlation.
If set to <code class="literal">true</code>, the agent will set the <code class="literal">trace.id</code> and <code class="literal">transaction.id</code> for the currently active spans and transactions to the MDC.
You can then use the pattern format of your logging implementation to write the MDC values to your log file.
If you are using logback or log4j, add <code class="literal">%X</code> to the format to log all MDC values or <code class="literal">%X{trace.id}</code> to only log the trace id.
With the help of Filebeat and Logstash or an Elasticsearch ingest pipeline,
you can index your log files and correlate them with APM traces.
With this integration you can get all logs belonging to a particular trace and vice-versa:
for a specific log, see in which context it has been logged and which parameters the user provided.
While it’s allowed to enable this setting at runtime, you can’t disable it without a restart.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th><th align="left" valign="top">Dynamic</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p>Boolean</p></td><td align="left" valign="top"><p>true</p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Java System Properties</th><th align="left" valign="top">Property file</th><th align="left" valign="top">Environment</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">elastic.apm.enable_log_correlation</code></p></td><td align="left" valign="top"><p><code class="literal">enable_log_correlation</code></p></td><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_ENABLE_LOG_CORRELATION</code></p></td></tr></tbody></table></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="config-jax-rs.html">
              « 
              JAX-RS configuration options</a>
           
        </span><span class="next">
           
          <a href="config-reporter.html">Reporter configuration options
               »
            </a></span></div></body></html>