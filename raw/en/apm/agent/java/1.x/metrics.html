<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Metrics
        | APM Java Agent Reference [1.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="APM Java Agent Reference [1.x]" /><link rel="up" href="index.html" title="APM Java Agent Reference [1.x]" /><link rel="prev" href="supported-technologies-details.html" title="Supported technologies" /><link rel="next" href="configuration.html" title="Configuration" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/APM Java Agent/Reference/1.x" /><meta name="DC.subject" content="APM" /><meta name="DC.identifier" content="1.x" /></head><body><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">APM Java Agent Reference
      [1.x]
    </a></span> » <span class="breadcrumb-node">Metrics</span></div><div class="navheader"><span class="prev"><a href="supported-technologies-details.html">
              « 
              Supported technologies</a>
           
        </span><span class="next">
           
          <a href="configuration.html">Configuration
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="metrics"></a>Metrics<a href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h1></div></div></div><p>The Java agent tracks certain system and application metrics.
Some of them have built-in visualizations and some can only be visualized with custom Kibana dashboards.</p><p>These metrics will be sent regularly to the APM Server and from there to Elasticsearch.
You can adjust the interval with the setting <a class="xref" href="config-reporter.html#config-metrics-interval" title="metrics_interval ( )"><code class="literal">metrics_interval</code> (
)</a>.</p><p>The metrics will be stored in the <code class="literal">apm-*</code> index and have the <code class="literal">processor.event</code> property set to <code class="literal">metric</code>.</p><h3><a id="metrics-system"></a>System metrics<a href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>As of version 6.6, these metrics will be visualized in the APM UI.</p><p>For more system metrics, consider installing <a class="ulink" href="https://www.elastic.co/guide/en/beats/metricbeat/current/index.html" target="_top">metricbeat</a> on your hosts.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="strong strong"><strong><code class="literal">system.cpu.total.norm.pct</code></strong></span></span></dt><dd><p class="simpara">type: scaled_float</p><p class="simpara">format: percent</p><p class="simpara">The percentage of CPU time in states other than Idle and IOWait, normalised by the number of cores.</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">system.process.cpu.total.norm.pct</code></strong></span></span></dt><dd><p class="simpara">type: scaled_float</p><p class="simpara">format: percent</p><p class="simpara">The percentage of CPU time spent by the process since the last event.
This value is normalized by the number of CPU cores and it ranges from 0 to 100%.</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">system.memory.total</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">format: bytes</p><p class="simpara">Total memory.</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">system.memory.actual.free</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">format: bytes</p><p class="simpara">Actual free memory in bytes. It is calculated based on the OS.
On Linux it consists of the free memory plus caches and buffers.
On OSX it is a sum of free memory and the inactive memory.
On Windows, this value does not include memory consumed by system caches and buffers.</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">system.process.memory.size</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">format: bytes</p><p class="simpara">The total virtual memory the process has.</p></dd></dl></div><h3><a id="metrics-jvm"></a>JVM Metrics<a href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>As of now, there are no built-in visualizations for these metrics,
so you will need to create custom Kibana dashboards for them.</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="strong strong"><strong><code class="literal">jvm.memory.heap.used</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">format: bytes</p><p class="simpara">The amount of used heap memory in bytes</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">jvm.memory.heap.committed</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">format: bytes</p><p class="simpara">The amount of heap memory in bytes that is committed for the Java virtual machine to use.
This amount of memory is guaranteed for the Java virtual machine to use.</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">jvm.memory.heap.max</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">format: bytes</p><p class="simpara">The maximum amount of heap memory in bytes that can be used for memory management.
If the maximum memory size is undefined, the value is <code class="literal">-1</code>.</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">jvm.memory.non_heap.used</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">format: bytes</p><p class="simpara">The amount of used non-heap memory in bytes</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">jvm.memory.non_heap.committed</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">format: bytes</p><p class="simpara">The amount of non-heap memory in bytes that is committed for the Java virtual machine to use.
This amount of memory is guaranteed for the Java virtual machine to use.</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">jvm.memory.non_heap.max</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">format: bytes</p><p class="simpara">The maximum amount of non-heap memory in bytes that can be used for memory management.
If the maximum memory size is undefined, the value is <code class="literal">-1</code>.</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">jvm.thread.count</code></strong></span></span></dt><dd><p class="simpara">type: int</p><p class="simpara">The current number of live threads in the JVM, including both daemon and non-daemon threads.</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">jvm.gc.count</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">labels</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">name: The name representing this memory manager (for example <code class="literal">G1 Young Generation</code>, <code class="literal">G1 Old Generation</code>)</li></ul></div><p class="simpara">The total number of collections that have occurred.</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">jvm.gc.time</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">format: ms</p><p class="simpara">labels</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">name: The name representing this memory manager (for example <code class="literal">G1 Young Generation</code>, <code class="literal">G1 Old Generation</code>)</li></ul></div><p class="simpara">The approximate accumulated collection elapsed time in milliseconds.</p></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">jvm.gc.alloc</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">format: bytes</p><p class="simpara">An approximation of the total amount of memory,
in bytes, allocated in heap memory.</p></dd></dl></div><h3><a id="metrics-application"></a>Application Metrics<a href="https://github.com/elastic/apm-agent-java/edit/1.x/docs/metrics.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="strong strong"><strong><code class="literal">transaction.duration</code></strong></span></span></dt><dd><p class="simpara">type: simple timer</p><p class="simpara">This timer tracks the duration of transactions and allows for the creation of graphs displaying a weighted average.</p><p class="simpara">Fields:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="literal">sum</code>: The sum of all transaction durations in ms since the last report (the delta)</li><li class="listitem"><code class="literal">count</code>: The count of all transactions since the last report (the delta)</li></ul></div><p class="simpara">You can filter and group by these dimensions:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="literal">transaction.name</code>: The name of the transaction</li><li class="listitem"><code class="literal">transaction.type</code>: The type of the transaction, for example <code class="literal">request</code></li></ul></div></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">transaction.breakdown.count</code></strong></span></span></dt><dd><p class="simpara">type: long</p><p class="simpara">format: count (delta)</p><p class="simpara">The number of transactions for which breakdown metrics (<code class="literal">span.self_time</code>) have been created.
As the Java agent tracks the breakdown for both sampled and non-sampled transactions,
this metric is equivalent to <code class="literal">transaction.duration.count</code></p><p class="simpara">You can filter and group by these dimensions:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="literal">transaction.name</code>: The name of the transaction</li><li class="listitem"><code class="literal">transaction.type</code>: The type of the transaction, for example <code class="literal">request</code></li></ul></div></dd><dt><span class="term"><span class="strong strong"><strong><code class="literal">span.self_time</code></strong></span></span></dt><dd><p class="simpara">type: simple timer</p><p class="simpara">This timer tracks the span self-times and is the basis of the transaction breakdown visualization.</p><p class="simpara">Fields:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="literal">sum</code>: The sum of all span self-times in ms since the last report (the delta)</li><li class="listitem"><code class="literal">count</code>: The count of all span self-times since the last report (the delta)</li></ul></div><p class="simpara">You can filter and group by these dimensions:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="literal">transaction.name</code>: The name of the transaction</li><li class="listitem"><code class="literal">transaction.type</code>: The type of the transaction, for example <code class="literal">request</code></li><li class="listitem"><code class="literal">span.type</code>: The type of the span, for example <code class="literal">app</code>, <code class="literal">template</code> or <code class="literal">db</code></li><li class="listitem"><code class="literal">span.subtype</code>: The sub-type of the span, for example <code class="literal">mysql</code> (optional)</li></ul></div></dd></dl></div></div><div class="navfooter"><span class="prev"><a href="supported-technologies-details.html">
              « 
              Supported technologies</a>
           
        </span><span class="next">
           
          <a href="configuration.html">Configuration
               »
            </a></span></div></body></html>
