<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Unreleased | APM Java Agent Reference [master] | Elastic</title>
<link rel="home" href="index.html" title="APM Java Agent Reference [master]"/>
<link rel="up" href="release-notes.html" title="Release notes"/>
<link rel="prev" href="release-notes.html" title="Release notes"/>
<link rel="next" href="release-notes-1.x.html" title="Java Agent version 1.x"/>
<meta name="DC.type" content="Learn/Docs/APM Java Agent/Reference/master"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">APM Java Agent Reference [master]</a></span>
»
<span class="breadcrumb-link"><a href="release-notes.html">Release notes</a></span>
»
<span class="breadcrumb-node">Unreleased</span>
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes.html">« Release notes</a>
</span>
<span class="next">
<a href="release-notes-1.x.html">Java Agent version 1.x »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_unreleased"></a>Unreleased<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/CHANGELOG.asciidoc">edit</a></h2>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="release-notes-1.28.5"></a>1.28.5 - YYYY/MM/DD<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/CHANGELOG.asciidoc">edit</a></h3>
</div></div></div>
<h5><a id="_breaking_changes"></a>Breaking changes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Changes in service name auto-discovery of jar files (see Features section)
</li>
</ul>
</div>
<h5><a id="_features"></a>Features<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Exceptions that are logged using the fatal log level are now captured (log4j2 only) - <a href="https://github.com/elastic/apm-agent-java/pull/2377" class="ulink" target="_top">#2377</a>
</li>
<li class="listitem">
Replaced <code class="literal">authorization</code> in the default value of <code class="literal">sanitize_field_names</code> with <code class="literal">*auth*</code> - <a href="https://github.com/elastic/apm-agent-java/pull/2326" class="ulink" target="_top">#2326</a>
</li>
<li class="listitem">
Unsampled transactions are dropped and not sent to the APM-Server if the APM-Server version is 8.0+ - <a href="https://github.com/elastic/apm-agent-java/pull/2329" class="ulink" target="_top">#2329</a>
</li>
<li class="listitem">
Adding agent logging capabilities to our SDK, making it available for external plugins - <a href="https://github.com/elastic/apm-agent-java/pull/2390" class="ulink" target="_top">#2390</a>
</li>
<li class="listitem">
<p>Service name auto-discovery improvements</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
For applications deployed to application servers (<code class="literal">war</code> files) and standalone jars that are started with <code class="literal">java -jar</code>,
the agent now discovers the <code class="literal">META-INF/MANIFEST.MF</code> file.
</li>
<li class="listitem">
If the manifest contains the <code class="literal">Implementation-Title</code> attribute, it is used as the default service name - <a href="https://github.com/elastic/apm-agent-java/pull/1921" class="ulink" target="_top">#1921</a>, <a href="https://github.com/elastic/apm-agent-java/pull/2434" class="ulink" target="_top">#2434</a><br>
<span class="strong strong"><strong>Note</strong></span>: this may change your service names if you relied on the auto-discovery that uses the name of the jar file.
If that jar file also contains an <code class="literal">Implementation-Title</code> attribute in the <code class="literal">MANIFEST.MF</code> file, the latter will take precedence.
</li>
<li class="listitem">
When the manifest contains the <code class="literal">Implementation-Version</code> attribute, it is used as the default service version - <a href="https://github.com/elastic/apm-agent-java/pull/1726" class="ulink" target="_top">#1726</a>, <a href="https://github.com/elastic/apm-agent-java/pull/1922" class="ulink" target="_top">#1922</a>, <a href="https://github.com/elastic/apm-agent-java/pull/2434" class="ulink" target="_top">#2434</a>
</li>
</ul>
</div>
</li>
<li class="listitem">
Added support for instrumenting Struts 2 static resource requests - <a href="https://github.com/elastic/apm-agent-java/pull/1949" class="ulink" target="_top">#1949</a>
</li>
<li class="listitem">
Added support for Java/Jakarta WebSocket ServerEndpoint - <a href="https://github.com/elastic/apm-agent-java/pull/2281" class="ulink" target="_top">#2281</a>
</li>
<li class="listitem">
Added support for setting the service name on Log4j2&#8217;s EcsLayout - <a href="https://github.com/elastic/apm-agent-java/pull/2296" class="ulink" target="_top">#2296</a>
</li>
</ul>
</div>
<h5><a id="_bug_fixes"></a>Bug fixes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/main/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix runtime attach with some docker images - <a href="https://github.com/elastic/apm-agent-java/pull/2385" class="ulink" target="_top">#2385</a>
</li>
<li class="listitem">
Restore dynamic capability to <code class="literal">log_level</code> config for plugin loggers - <a href="https://github.com/elastic/apm-agent-java/pull/2384" class="ulink" target="_top">#2384</a>
</li>
<li class="listitem">
Fix slf4j-related <code class="literal">LinkageError</code> - <a href="https://github.com/elastic/apm-agent-java/pull/2390" class="ulink" target="_top">#2390</a> and <a href="https://github.com/elastic/apm-agent-java/pull/2376" class="ulink" target="_top">#2376</a>
</li>
<li class="listitem">
Fix possible deadlock occurring when Byte Buddy reads System properties by warming up bytecode instrumentation code
paths. The BCI warmup is on by default and may be disabled through the internal <code class="literal">warmup_byte_buddy</code> config option - <a href="https://github.com/elastic/apm-agent-java/pull/2368" class="ulink" target="_top">#2368</a>
</li>
<li class="listitem">
<p>Fixed few dubbo plugin issues - <a href="https://github.com/elastic/apm-agent-java/pull/2149" class="ulink" target="_top">#2149</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Dubbo transaction will should be created at the provider side
</li>
<li class="listitem">
APM headers conversion issue within dubbo transaction
</li>
</ul>
</div>
</li>
<li class="listitem">
Fix External plugins automatic setting of span outcome - <a href="https://github.com/elastic/apm-agent-java/pull/2376" class="ulink" target="_top">#2376</a>
</li>
<li class="listitem">
Avoid early initialization of JMX on Weblogic - <a href="https://github.com/elastic/apm-agent-java/pull/2420" class="ulink" target="_top">#2420</a>
</li>
</ul>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="release-notes.html">« Release notes</a>
</span>
<span class="next">
<a href="release-notes-1.x.html">Java Agent version 1.x »</a>
</span>
</div>
</div>
</body>
</html>
