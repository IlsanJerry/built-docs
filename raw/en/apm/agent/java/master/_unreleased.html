<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Unreleased | APM Java Agent Reference [master] | Elastic</title>
<link rel="home" href="index.html" title="APM Java Agent Reference [master]"/>
<link rel="up" href="release-notes.html" title="Release notes"/>
<link rel="prev" href="release-notes.html" title="Release notes"/>
<link rel="next" href="release-notes-1.x.html" title="Java Agent version 1.x"/>
<meta name="DC.type" content="Learn/Docs/APM Java Agent/Reference/master"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">APM Java Agent Reference [master]</a></span>
»
<span class="breadcrumb-link"><a href="release-notes.html">Release notes</a></span>
»
<span class="breadcrumb-node">Unreleased</span>
</div>
<div class="navheader">
<span class="prev">
<a href="release-notes.html">« Release notes</a>
</span>
<span class="next">
<a href="release-notes-1.x.html">Java Agent version 1.x »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_unreleased"></a>Unreleased<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/master/CHANGELOG.asciidoc">edit</a></h2>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="release-notes-1.25.0"></a>1.25.0 - YYYY/MM/DD<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/master/CHANGELOG.asciidoc">edit</a></h3>
</div></div></div>
<h5><a id="_potentially_breaking_changes"></a>Potentially breaking changes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/master/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
If you rely on instrumentations that are in the <code class="literal">experimental</code> group, you must now set <code class="literal">enable_experimental_instrumentations=true</code> otherwise
the experimental instrumentations will be disabled by default. Up to version <code class="literal">1.24.0</code> using an empty value for <code class="literal">disable_instrumentations</code> was
the recommended way to override the default <code class="literal">disable_instrumentations=experimental</code>.
</li>
</ul>
</div>
<h5><a id="_features"></a>Features<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/master/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Support for inheritance of public API annotations - <a href="https://github.com/elastic/apm-agent-java/pull/1805" class="ulink" target="_top">#1805</a>
</li>
<li class="listitem">
JDBC instrumentation sets context.db.instance - <a href="https://github.com/elastic/apm-agent-java/pull/1820" class="ulink" target="_top">#1820</a>
</li>
<li class="listitem">
Add support for Vert.x web client- <a href="https://github.com/elastic/apm-agent-java/pull/1824" class="ulink" target="_top">#1824</a>
</li>
<li class="listitem">
Avoid recycling of spans and transactions that are using through the public API, so to avoid
reference-counting-related errors - <a href="https://github.com/elastic/apm-agent-java/pull/1859" class="ulink" target="_top">#1859</a>
</li>
<li class="listitem">
<p>Add <a class="xref" href="config-core.html#config-enable-experimental-instrumentations" title="enable_experimental_instrumentations ()"><code class="literal">enable_experimental_instrumentations</code> (<span class="Admonishment Admonishment--change">
[<span class="Admonishment-version u-mono">1.25.0</span>]
<span class="Admonishment-detail">
Added in 1.25.0.
</span>
</span>)</a> configuration option to enable experimental features - <a href="https://github.com/elastic/apm-agent-java/pull/1863" class="ulink" target="_top">#1863</a></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Previously, when adding an instrumentation group to <code class="literal">disable_instrumentations</code>, we had to make sure to not forget the
default <code class="literal">experimental</code> value, for example when disabling <code class="literal">jdbc</code> instrumentation we had to set <code class="literal">disable_instrumentations=experimental,jdbc</code> otherwise
setting <code class="literal">disable_instrumentations=jdbc</code> would disable jdbc and also enable experimental features, which would not be the desired effect.
</li>
<li class="listitem">
Previously, by default <code class="literal">disable_instrumentations</code> contained <code class="literal">experimental</code>
</li>
<li class="listitem">
Now by default <code class="literal">disable_instrumentations</code> is empty and <code class="literal">enable_experimental_instrumentations=false</code>
</li>
<li class="listitem">
Set <code class="literal">disable_instrumentations=true</code> to enable experimental instrumentations
</li>
</ul>
</div>
</li>
<li class="listitem">
Eliminating concerns related to log4j2 vulnerability - <a href="https://nvd.nist.gov/vuln/detail/CVE-2020-9488#vulnCurrentDescriptionTitle" class="ulink" target="_top">https://nvd.nist.gov/vuln/detail/CVE-2020-9488#vulnCurrentDescriptionTitle</a>.
We cannot upgrade to version above 2.12.1 because this is the last version of log4j that is compatible with Java 7.
Instead, we exclude the SMTP appender (which is the vulnerable one) from our artifacts. Note that older versions of
our agent are not vulnerable as well, as the SMTP appender was never used, this is only to further reduce our users' concerns.
</li>
<li class="listitem">
Adding public APIs for setting <code class="literal">destination.service.resource</code>, <code class="literal">destination.address</code> and <code class="literal">destination.port</code> fields
for exit spans - <a href="https://github.com/elastic/apm-agent-java/pull/1788" class="ulink" target="_top">#1788</a>
</li>
</ul>
</div>
<h5><a id="_bug_fixes"></a>Bug fixes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-agent-java/edit/master/CHANGELOG.asciidoc">edit</a></h5>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Fix NPE with <code class="literal">null</code> binary header values + properly serialize them - <a href="https://github.com/elastic/apm-agent-java/pull/1842" class="ulink" target="_top">#1842</a>
</li>
<li class="listitem">
Fix <code class="literal">ListenerExecutionFailedException</code> when using Spring AMQP&#8217;s ReplyTo container - <a href="https://github.com/elastic/apm-agent-java/pull/1872" class="ulink" target="_top">#1872</a>
</li>
<li class="listitem">
Enabling log ECS reformatting when using Logback configured with <code class="literal">LayoutWrappingEncoder</code> and a pattern layout - <a href="https://github.com/elastic/apm-agent-java/pull/1879" class="ulink" target="_top">#1879</a>
</li>
<li class="listitem">
Fix NPE with Webflux + context propagation headers - <a href="https://github.com/elastic/apm-agent-java/pull/1871" class="ulink" target="_top">1871</a>
</li>
<li class="listitem">
Fix <code class="literal">ClassCastException</code> with <code class="literal">ConnnectionMetaData</code> and multiple classloaders - <a href="https://github.com/elastic/apm-agent-java/pull/1864" class="ulink" target="_top">#1864</a>
</li>
<li class="listitem">
Fix NPE in <code class="literal">co.elastic.apm.agent.servlet.helper.ServletTransactionCreationHelper.getClassloader</code> - <a href="https://github.com/elastic/apm-agent-java/pull/1861" class="ulink" target="_top">#1861</a>
</li>
</ul>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="release-notes.html">« Release notes</a>
</span>
<span class="next">
<a href="release-notes-1.x.html">Java Agent version 1.x »</a>
</span>
</div>
</div>
</body>
</html>
