<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>HTTP configuration options
        | APM Java Agent Reference [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="APM Java Agent Reference [master]" /><link rel="up" href="configuration.html" title="Configuration" /><link rel="prev" href="config-core.html" title="Core configuration options" /><link rel="next" href="config-jax-rs.html" title="JAX-RS configuration options" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/APM Java Agent/Reference/master" /><meta name="DC.subject" content="APM" /><meta name="DC.identifier" content="master" /></head><body><div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">APM Java Agent Reference
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="configuration.html">Configuration</a></span> » <span class="breadcrumb-node">HTTP configuration options</span></div><div class="navheader"><span class="prev"><a href="config-core.html">
              « 
              Core configuration options</a>
           
        </span><span class="next">
           
          <a href="config-jax-rs.html">JAX-RS configuration options
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="config-http"></a>HTTP configuration options<a href="https://github.com/elastic/apm-agent-java/edit/master/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><h4><a id="config-capture-body"></a><code class="literal">capture_body</code> (performance)<a href="https://github.com/elastic/apm-agent-java/edit/master/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>For transactions that are HTTP requests, the Java agent can optionally capture the request body (e.g. POST variables).</p><p>If the request has a body and this setting is disabled, the body will be shown as [REDACTED].</p><p>This option is case-insensitive.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Currently, only UTF-8 encoded plain text content types are supported.
The option <a class="xref" href="config-http.html#config-capture-body-content-types" title="capture_body_content_types ( performance)"><code class="literal">capture_body_content_types</code> (
 performance)</a> determines which content types are captured.</p></div></div><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>Request bodies often contain sensitive values like passwords, credit card numbers etc.
If your service handles data like this, we advise to only enable this feature with care.
Turning on body capturing can also significantly increase the overhead in terms of heap usage,
network utilisation and Elasticsearch index size.</p></div></div><p>Valid options: <code class="literal">off</code>, <code class="literal">errors</code>, <code class="literal">transactions</code>, <code class="literal">all</code></p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th><th align="left" valign="top">Dynamic</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">OFF</code></p></td><td align="left" valign="top"><p>EventType</p></td><td align="left" valign="top"><p>true</p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Java System Properties</th><th align="left" valign="top">Property file</th><th align="left" valign="top">Environment</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">elastic.apm.capture_body</code></p></td><td align="left" valign="top"><p><code class="literal">capture_body</code></p></td><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CAPTURE_BODY</code></p></td></tr></tbody></table></div><h4><a id="config-capture-body-content-types"></a><code class="literal">capture_body_content_types</code> (<span class="Admonishment">
      [<span class="Admonishment-version u-mono">1.5.0</span>]
      <span class="Admonishment-detail">Added in 1.5.0. </span></span>
 performance)<a href="https://github.com/elastic/apm-agent-java/edit/master/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Configures which content types should be recorded.</p><p>The defaults end with a wildcard so that content types like <code class="literal">text/plain; charset=utf-8</code> are captured as well.</p><p>This option supports the wildcard <code class="literal">*</code>, which matches zero or more characters.
Examples: <code class="literal">/foo/*/bar/*/baz*</code>, <code class="literal">*foo*</code>.
Matching is case insensitive by default.
Prepending an element with <code class="literal">(?-i)</code> makes the matching case sensitive.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th><th align="left" valign="top">Dynamic</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">application/x-www-form-urlencoded*, text/*, application/json*, application/xml*</code></p></td><td align="left" valign="top"><p>List</p></td><td align="left" valign="top"><p>true</p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Java System Properties</th><th align="left" valign="top">Property file</th><th align="left" valign="top">Environment</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">elastic.apm.capture_body_content_types</code></p></td><td align="left" valign="top"><p><code class="literal">capture_body_content_types</code></p></td><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CAPTURE_BODY_CONTENT_TYPES</code></p></td></tr></tbody></table></div><h4><a id="config-capture-headers"></a><code class="literal">capture_headers</code> (performance)<a href="https://github.com/elastic/apm-agent-java/edit/master/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>If set to <code class="literal">true</code>,
the agent will capture request and response headers, including cookies.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Setting this to <code class="literal">false</code> reduces network bandwidth, disk space and object allocations.</p></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th><th align="left" valign="top">Dynamic</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p>Boolean</p></td><td align="left" valign="top"><p>true</p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Java System Properties</th><th align="left" valign="top">Property file</th><th align="left" valign="top">Environment</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">elastic.apm.capture_headers</code></p></td><td align="left" valign="top"><p><code class="literal">capture_headers</code></p></td><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_CAPTURE_HEADERS</code></p></td></tr></tbody></table></div><h4><a id="config-ignore-urls"></a><code class="literal">ignore_urls</code><a href="https://github.com/elastic/apm-agent-java/edit/master/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Used to restrict requests to certain URLs from being instrumented.</p><p>This property should be set to an array containing one or more strings.
When an incoming HTTP request is detected, its URL will be tested against each element in this list.</p><p>This option supports the wildcard <code class="literal">*</code>, which matches zero or more characters.
Examples: <code class="literal">/foo/*/bar/*/baz*</code>, <code class="literal">*foo*</code>.
Matching is case insensitive by default.
Prepending an element with <code class="literal">(?-i)</code> makes the matching case sensitive.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>All errors that are captured during a request to an ignored URL are still sent to the APM Server regardless of this setting.</p></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th><th align="left" valign="top">Dynamic</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">/VAADIN/*, /heartbeat*, /favicon.ico, *.js, *.css, *.jpg, *.jpeg, *.png, *.gif, *.webp, *.svg, *.woff, *.woff2</code></p></td><td align="left" valign="top"><p>List</p></td><td align="left" valign="top"><p>true</p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Java System Properties</th><th align="left" valign="top">Property file</th><th align="left" valign="top">Environment</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">elastic.apm.ignore_urls</code></p></td><td align="left" valign="top"><p><code class="literal">ignore_urls</code></p></td><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_IGNORE_URLS</code></p></td></tr></tbody></table></div><h4><a id="config-ignore-user-agents"></a><code class="literal">ignore_user_agents</code><a href="https://github.com/elastic/apm-agent-java/edit/master/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Used to restrict requests from certain User-Agents from being instrumented.</p><p>When an incoming HTTP request is detected,
the User-Agent from the request headers will be tested against each element in this list.
Example: <code class="literal">curl/*</code>, <code class="literal">*pingdom*</code></p><p>This option supports the wildcard <code class="literal">*</code>, which matches zero or more characters.
Examples: <code class="literal">/foo/*/bar/*/baz*</code>, <code class="literal">*foo*</code>.
Matching is case insensitive by default.
Prepending an element with <code class="literal">(?-i)</code> makes the matching case sensitive.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>All errors that are captured during a request by an ignored user agent are still sent to the APM Server regardless of this setting.</p></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th><th align="left" valign="top">Dynamic</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">&lt;none&gt;</code></p></td><td align="left" valign="top"><p>List</p></td><td align="left" valign="top"><p>true</p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Java System Properties</th><th align="left" valign="top">Property file</th><th align="left" valign="top">Environment</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">elastic.apm.ignore_user_agents</code></p></td><td align="left" valign="top"><p><code class="literal">ignore_user_agents</code></p></td><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_IGNORE_USER_AGENTS</code></p></td></tr></tbody></table></div><h4><a id="config-use-path-as-transaction-name"></a><code class="literal">use_path_as_transaction_name</code> (experimental)<a href="https://github.com/elastic/apm-agent-java/edit/master/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>If set to <code class="literal">true</code>,
transaction names of unsupported Servlet API-based frameworks will be in the form of <code class="literal">$method $path</code> instead of just <code class="literal">$method</code>.</p><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>If your URLs contain path parameters like <code class="literal">/user/$userId</code>,
you should be very careful when enabling this flag,
as it can lead to an explosion of transaction groups.
Take a look at the <code class="literal">url_groups</code> option on how to mitigate this problem by grouping URLs together.</p></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th><th align="left" valign="top">Dynamic</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p>Boolean</p></td><td align="left" valign="top"><p>false</p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Java System Properties</th><th align="left" valign="top">Property file</th><th align="left" valign="top">Environment</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">elastic.apm.use_path_as_transaction_name</code></p></td><td align="left" valign="top"><p><code class="literal">use_path_as_transaction_name</code></p></td><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_USE_PATH_AS_TRANSACTION_NAME</code></p></td></tr></tbody></table></div><h4><a id="config-url-groups"></a><code class="literal">url_groups</code><a href="https://github.com/elastic/apm-agent-java/edit/master/docs/configuration.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>This option is only considered, when <code class="literal">use_path_as_transaction_name</code> is active.</p><p>With this option, you can group several URL paths together by using a wildcard expression like <code class="literal">/user/*</code>.</p><p>This option supports the wildcard <code class="literal">*</code>, which matches zero or more characters.
Examples: <code class="literal">/foo/*/bar/*/baz*</code>, <code class="literal">*foo*</code>.
Matching is case insensitive by default.
Prepending an element with <code class="literal">(?-i)</code> makes the matching case sensitive.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Default</th><th align="left" valign="top">Type</th><th align="left" valign="top">Dynamic</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">&lt;none&gt;</code></p></td><td align="left" valign="top"><p>List</p></td><td align="left" valign="top"><p>true</p></td></tr></tbody></table></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Java System Properties</th><th align="left" valign="top">Property file</th><th align="left" valign="top">Environment</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">elastic.apm.url_groups</code></p></td><td align="left" valign="top"><p><code class="literal">url_groups</code></p></td><td align="left" valign="top"><p><code class="literal">ELASTIC_APM_URL_GROUPS</code></p></td></tr></tbody></table></div></div><div class="navfooter"><span class="prev"><a href="config-core.html">
              « 
              Core configuration options</a>
           
        </span><span class="next">
           
          <a href="config-jax-rs.html">JAX-RS configuration options
               »
            </a></span></div></body></html>
