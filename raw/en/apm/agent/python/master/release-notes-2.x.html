<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Python Agent version 2.x
        | APM Python Agent Reference [master]
      | Elastic
    </title><link rel="home" href="index.html" title="APM Python Agent Reference [master]" /><link rel="up" href="release-notes.html" title="Release notes" /><link rel="prev" href="release-notes-3.x.html" title="Python Agent version 3.x" /><link rel="next" href="release-notes-1.x.html" title="Python Agent version 1.x" /><meta name="DC.type" content="Learn/Docs/APM Python Agent/Reference/master" /><meta name="DC.subject" content="APM" /><meta name="DC.identifier" content="master" /></head><body><div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">APM Python Agent Reference
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="release-notes.html">Release notes</a></span> » <span class="breadcrumb-node">Python Agent version 2.x</span></div><div class="navheader"><span class="prev"><a href="release-notes-3.x.html">
              « 
              Python Agent version 3.x</a>
           
        </span><span class="next">
           
          <a href="release-notes-1.x.html">Python Agent version 1.x
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="release-notes-2.x"></a>Python Agent version 2.x<a href="https://github.com/elastic/apm-agent-python/edit/master/CHANGELOG.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="release-notes-2.2.1"></a>v2.2.1<a href="https://github.com/elastic/apm-agent-python/edit/master/CHANGELOG.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><a class="ulink" href="https://github.com/elastic/apm-agent-python/compare/v2.2.0...v2.2.1" target="_top">Check the diff</a></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">fixed an issue with Django Channels <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/232" target="_top">#232</a>, <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/233" target="_top">#233</a></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="release-notes-2.2.0"></a>v2.2.0<a href="https://github.com/elastic/apm-agent-python/edit/master/CHANGELOG.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><a class="ulink" href="https://github.com/elastic/apm-agent-python/compare/v2.1.1...v2.2.0" target="_top">Check the diff</a></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">introduced consistent logger name scheme for all elasticapm internal log messages <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/212" target="_top">#212</a></li><li class="listitem">added instrumentation of cassandra-driver <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/205" target="_top">#205</a></li><li class="listitem">added instrumentation of elasticsearch-py <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/191" target="_top">#191</a></li><li class="listitem">added Flask 1.0 to the test matrix <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/207" target="_top">#207</a></li><li class="listitem">fixed an issue with our minimalistic SQL parser and "fully qualified" table names <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/206" target="_top">#206</a></li><li class="listitem">fixed issue with spans in Django’s <code class="literal">StreamingHTTPResponse</code> not being captured <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/201" target="_top">#201</a>, <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/202" target="_top">#202</a></li><li class="listitem">fixed issue with spans with Flask’s streaming response not being captured <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/201" target="_top">#201</a>, <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/202" target="_top">#202</a></li></ul></div><p><span class="strong strong"><strong>NOTE</strong></span>: This will be the last release with support for Python 3.3.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="release-notes-2.1.1"></a>v2.1.1<a href="https://github.com/elastic/apm-agent-python/edit/master/CHANGELOG.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><a class="ulink" href="https://github.com/elastic/apm-agent-python/compare/v2.1.0...v2.1.1" target="_top">Check the diff</a></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">fixed bug in Django management command that would be triggered on Django 1.10 or 1.11 while using the <code class="literal">MIDDLEWARE_CLASSES</code> setting <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/186" target="_top">#186</a>, <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/187" target="_top">#187</a></li><li class="listitem">fix an encoding issue with log messages that are hit in rare cases <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/188" target="_top">#188</a>, <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/189" target="_top">#189</a></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="release-notes-2.1.0"></a>v2.1.0<a href="https://github.com/elastic/apm-agent-python/edit/master/CHANGELOG.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><a class="ulink" href="https://github.com/elastic/apm-agent-python/compare/v2.0.1...v2.1.0" target="_top">Check the diff</a></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">made skipping of initial <code class="literal">elasticapm</code> frames for span stack traces more generic <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/167" target="_top">#167</a></li><li class="listitem">added <code class="literal">context.process.ppid</code> field (supported in apm-server 6.3+) <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/168" target="_top">#168</a></li><li class="listitem">added option to disable stack frame collection for very short spans <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/142" target="_top">#142</a></li><li class="listitem">several bug fixes:</li><li class="listitem">fix an issue in boto3 instrumentation with nonstandard endpoint URLs <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/178" target="_top">#178</a></li><li class="listitem">fix bug with OPTIONS requests and body capturing <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/174" target="_top">#174</a></li><li class="listitem">fix issue when message has <code class="literal">%</code> character, but no params <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/175" target="_top">#175</a></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="release-notes-2.0.1"></a>v2.0.1<a href="https://github.com/elastic/apm-agent-python/edit/master/CHANGELOG.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><a class="ulink" href="https://github.com/elastic/apm-agent-python/compare/v2.0.0...v2.0.1" target="_top">Check the diff</a></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">fixed compatibility issue with aiohttp 3.0 <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/157" target="_top">#157</a></li><li class="listitem">Added truncation for fields that have a <code class="literal">maxLength</code> in the JSON Schema <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/159" target="_top">#159</a></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="release-notes-2.0.0"></a>v2.0.0<a href="https://github.com/elastic/apm-agent-python/edit/master/CHANGELOG.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><a class="ulink" href="https://github.com/elastic/apm-agent-python/compare/v1.0.0...v2.0.0" target="_top">Check the diff</a></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">moved the library-frame detection from a processor to the stacktrace collection <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/113" target="_top">#113</a>.</li><li class="listitem">added settings to enable/disable source code collection and local variables collection for errors and transactions <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/117" target="_top">#117</a></li><li class="listitem">added <code class="literal">service.environment</code> to provide an environment name (e.g. "production", "staging") <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/123" target="_top">#123</a></li><li class="listitem">added <code class="literal">transaction.id</code> to errors to better correlate errors with transactions <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/122" target="_top">#122</a></li><li class="listitem">added <code class="literal">transaction_sample_rate</code> to define a rate with which transactions are sampled <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/116" target="_top">#116</a></li><li class="listitem">added <code class="literal">error.handled</code> to indicate if an exception was handled or not <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/124" target="_top">#124</a>.</li><li class="listitem">added <code class="literal">transaction_max_spans</code> setting to limit the amount of spans that are recorded per transaction <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/127" target="_top">#127</a></li><li class="listitem">added configuration options to limit captured local variables to a certain length <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/130" target="_top">#130</a></li><li class="listitem">added options for configuring the amount of context lines that are captured with each frame <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/136" target="_top">#136</a></li><li class="listitem">added support for tracing queries formatted as <a class="ulink" href="http://initd.org/psycopg/docs/sql.html" target="_top"><code class="literal">psycopg2.sql.SQL</code></a> objects <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/148" target="_top">#148</a></li><li class="listitem">switched to <code class="literal">time.perf_counter</code> as timing function on Python 3 <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/138" target="_top">#138</a></li><li class="listitem">added option to disable capturing of request body <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/151" target="_top">#151</a></li><li class="listitem">BREAKING: Several settings and APIs have been renamed (#111, #119, #143):</li><li class="listitem">The decorator for custom instrumentation, <code class="literal">elasticapm.trace</code>, is now <code class="literal">elasticapm.capture_span</code></li><li class="listitem">The setting <code class="literal">traces_send_frequency</code> has been renamed to <code class="literal">flush_interval</code>. The name of the analogous environment variable changed from <code class="literal">ELASTIC_APM_TRACES_SEND_FREQ</code> to <code class="literal">ELASTIC_APM_FLUSH_INTERVAL</code></li><li class="listitem">The <code class="literal">app_name</code> setting has been renamed to <code class="literal">service_name</code>. The name of the analogous environment variable changed from <code class="literal">ELASTIC_APM_APP_NAME</code> to <code class="literal">ELASTIC_APM_SERVICE_NAME</code>.</li><li class="listitem"><code class="literal">app_name</code> arguments to API calls in the whole code base changed to <code class="literal">service_name</code>.</li><li class="listitem">The <code class="literal">app_version</code> setting has been renamed to <code class="literal">service_version</code>. The name of the analogous environment variable changed from <code class="literal">ELASTIC_APM_APP_VERSION</code> to <code class="literal">ELASTIC_APM_SERVICE_VERSION</code>.</li><li class="listitem"><code class="literal">context.request.url.raw</code> has been renamed to <code class="literal">context.request.url.full</code> <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/121" target="_top">#121</a></li><li class="listitem">BREAKING: added <code class="literal">elasticapm.set_custom_context</code> in favor of the more generic <code class="literal">set_custom_data</code> function <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/133" target="_top">#133</a></li><li class="listitem">BREAKING: <code class="literal">include_patterns</code> and <code class="literal">exclude_patterns</code> now use shell globs instead of regular expressions, and are matched against the full path file path of the module, not against the module name <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/137" target="_top">#137</a></li><li class="listitem">BREAKING: renamed several configuration options to align better with other language agents <a class="ulink" href="https://github.com/elastic/apm-agent-python/pull/145" target="_top">#145</a>:</li><li class="listitem"><code class="literal">disable_instrumentation</code> became <code class="literal">instrument</code> and inverted its meaning</li><li class="listitem"><code class="literal">max_event_queue_length</code> became <code class="literal">max_queue_size</code></li><li class="listitem"><code class="literal">timeout</code> became <code class="literal">server_timeout</code></li></ul></div></div></div><div class="navfooter"><span class="prev"><a href="release-notes-3.x.html">
              « 
              Python Agent version 3.x</a>
           
        </span><span class="next">
           
          <a href="release-notes-1.x.html">Python Agent version 1.x
               »
            </a></span></div></body></html>
