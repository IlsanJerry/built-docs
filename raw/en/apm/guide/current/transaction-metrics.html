<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Configure transaction metrics | APM User Guide [master] | Elastic</title>
<link rel="home" href="index.html" title="APM User Guide [master]"/>
<link rel="up" href="configuring-howto-apm-server.html" title="Configure APM Server"/>
<link rel="prev" href="agent-server-ssl.html" title="SSL input settings"/>
<link rel="next" href="using-environ-vars.html" title="Use environment variables in the configuration"/>
<meta name="DC.type" content="Learn/Docs/APM Guide/master"/>
<meta name="DC.subject" content="APM"/>
<meta name="DC.identifier" content="master"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">APM User Guide [master]</a></span>
»
<span class="breadcrumb-link"><a href="apm-server.html">Legacy APM Server Reference</a></span>
»
<span class="breadcrumb-link"><a href="configuring-howto-apm-server.html">Configure APM Server</a></span>
»
<span class="breadcrumb-node">Configure transaction metrics</span>
</div>
<div class="navheader">
<span class="prev">
<a href="agent-server-ssl.html">« SSL input settings</a>
</span>
<span class="next">
<a href="using-environ-vars.html">Use environment variables in the configuration »</a>
</span>
</div>
<div class="x-pack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="transaction-metrics"></a>Configure transaction metrics<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/legacy/transaction-metrics.asciidoc">edit</a></h2>
</div></div></div>

<p>APM Server produces transaction histogram metrics that are used to power the APM app.
Shifting this responsibility from APM app to APM Server removes the need to store unsampled transactions, reducing storage costs.</p>
<p>Example config file:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">apm-server:
  aggregation:
    transactions:
      interval: 1m
  sampling:
    keep_unsampled: false</pre>
</div>
<h4><a id="configuration-aggregation"></a>Configuration options: <code class="literal">apm-server.aggregation.transactions.*</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/legacy/transaction-metrics.asciidoc">edit</a></h4>
<h5><a id="transactions-interval"></a><code class="literal">interval</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/legacy/transaction-metrics.asciidoc">edit</a></h5>
<p>Controls the frequency of metrics publication.</p>
<p>Default: <code class="literal">1m</code>.</p>
<h5><a id="transactions-max_groups"></a><code class="literal">max_groups</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/legacy/transaction-metrics.asciidoc">edit</a></h5>
<p>Maximum number of transaction groups to keep track of.
Once exceeded, APM Server devolves into recording a metrics document for each transaction that is not in one
of the transaction groups being tracked.</p>
<p>Default: <code class="literal">10000</code>.</p>
<h5><a id="transactions-hdrhistogram_significant_figures"></a><code class="literal">hdrhistogram_significant_figures</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/legacy/transaction-metrics.asciidoc">edit</a></h5>
<p>The fixed, worst-case percentage error (specified as a number of significant digits)
to maintain for recorded metrics.
Supported values are <code class="literal">1</code> through <code class="literal">5</code>.
See <a href="/guide/en/elasticsearch/reference/master/search-aggregations-metrics-percentile-aggregation.html#_hdr_histogram_2" class="ulink" target="_top">HDR histogram</a> for more information.</p>
<p>Default: <code class="literal">2</code>.</p>
<h4><a id="configuration-sampling"></a>Configuration options: <code class="literal">apm-server.sampling.*</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/legacy/transaction-metrics.asciidoc">edit</a></h4>
<h5><a id="sampling-keep_unsampled"></a><code class="literal">keep_unsampled</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/apm-server/edit/master/docs/legacy/transaction-metrics.asciidoc">edit</a></h5>
<p>Deprecated: <code class="literal">keep_unsampled</code> will default to <code class="literal">false</code> in 8.0, and later be removed.</p>
<p>Controls the recording of unsampled transaction documents.
Dropping unsampled documents (<code class="literal">keep_unsampled: false</code>) reduces APM&#8217;s storage consumption.</p>
<p>Default: <code class="literal">true</code>.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="agent-server-ssl.html">« SSL input settings</a>
</span>
<span class="next">
<a href="using-environ-vars.html">Use environment variables in the configuration »</a>
</span>
</div>
</div>
</body>
</html>
