<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Metadata
        | APM Overview [7.2]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="APM Overview [7.2]" /><link rel="up" href="apm-data-model.html" title="Data Model" /><link rel="prev" href="metrics.html" title="Metrics" /><link rel="next" href="distributed-tracing.html" title="Distributed tracing" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/APM Server/Reference/7.2" /><meta xmlns="" name="DC.subject" content="APM" /><meta xmlns="" name="DC.identifier" content="7.2" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">APM Overview
      [7.2]
    </a></span> » <span class="breadcrumb-link"><a href="apm-data-model.html">Data Model</a></span> » <span class="breadcrumb-node">Metadata</span></div><div xmlns="" class="navheader"><span class="prev"><a href="metrics.html">
              « 
              Metrics</a>
           
        </span><span class="next">
           
          <a href="distributed-tracing.html">Distributed tracing
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="metadata"></a>Metadata<a xmlns="" href="https://github.com/elastic/apm-server/edit/7.2/docs/guide/apm-data-model.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Metadata can enrich your events and make application performance monitoring even more useful.
Let’s explore the different types of metadata that Elastic APM offers.</p><h4><a id="labels-fields"></a>Labels<a xmlns="" href="https://github.com/elastic/apm-server/edit/7.2/docs/guide/apm-data-model.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Labels are used to add <span class="strong strong"><strong>indexed</strong></span> information to transactions, spans, and errors.
Indexed means the data is searchable and aggregatable in Elasticsearch.
Multiple labels can be defined with different key-value pairs.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Indexed: Yes</li><li class="listitem">Elasticsearch type: <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.2/object.html" target="_top">object</a></li><li class="listitem">Elasticsearch field: <code class="literal">labels</code> (<code class="literal">context.tags</code> in APM Server pre-7.0)</li><li class="listitem">Applies to <a class="xref" href="transactions.html" title="Transactions">Transactions</a> | <a class="xref" href="transaction-spans.html" title="Spans">Spans</a> | <a class="xref" href="errors.html" title="Errors">Errors</a></li></ul></div><p>Label values can be a string, boolean, or number in APM Server 6.7+.
Using this API in combination with an older APM Server version leads to validation errors.
In addition, some agents only support string values at this time.
Because labels for a given key, regardless of agent used, are stored in the same place in Elasticsearch,
all label values of a given key must have the same data type.
Multiple data types per key will throw an exception, e.g. <code class="literal">{foo: bar}</code> and <code class="literal">{foo: 42}</code></p><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Avoid defining too many user-specified labels.
Defining too many unique fields in an index is a condition that can lead to a
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.2/mapping.html#mapping-limit-settings" target="_top">mapping explosion</a>.</p></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /></colgroup><tbody><tr><td align="left" valign="top"><p><span class="strong strong"><strong>Labels API links</strong></span></p></td></tr><tr><td align="left" valign="top"><div class="literallayout"><p><span class="strong strong"><strong>Go:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/go/1.x/api.html#context-set-tag" target="_top"><code class="literal">SetTag</code></a><br />
<span class="strong strong"><strong>Java:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/java/1.x/public-api.html#api-transaction-add-tag" target="_top"><code class="literal">addLabel</code></a><br />
<span class="strong strong"><strong>.NET:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/dotnet/current/public-api.html#api-transaction-tags" target="_top"><code class="literal">Tags</code></a><br />
<span class="strong strong"><strong>Node.js:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/nodejs/2.x/agent-api.html#apm-set-tag" target="_top"><code class="literal">setTag</code></a> | <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/nodejs/2.x/agent-api.html#apm-add-tags" target="_top"><code class="literal">addTags</code></a><br />
<span class="strong strong"><strong>Python:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/python/4.x/api.html#api-tag" target="_top"><code class="literal">tag</code></a><br />
<span class="strong strong"><strong>Ruby:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/ruby/2.x/api.html#api-agent-set-tag" target="_top"><code class="literal">set_tag</code></a><br />
<span class="strong strong"><strong>Rum:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/rum-js/4.x/agent-api.html#apm-add-tags" target="_top"><code class="literal">addTags</code></a></p></div></td></tr></tbody></table></div><h4><a id="custom-fields"></a>Custom context<a xmlns="" href="https://github.com/elastic/apm-server/edit/7.2/docs/guide/apm-data-model.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Custom context is used to add <span class="strong strong"><strong>non-indexed</strong></span>,
custom contextual information to transactions and errors.
Non-indexed means the data is not searchable or aggregatable in Elasticsearch,
and you cannot build dashboards on top of the data.
This also means you do not have to worry about <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.2/mapping.html#mapping-limit-settings" target="_top">mapping explosions</a>,
as these fields are not added to the mapping.</p><p>Non-indexed information is useful for providing contextual information to help you
quickly debug performance issues or errors.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Indexed: No</li><li class="listitem">Elasticsearch type: <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.2/object.html" target="_top">object</a></li><li class="listitem">Elasticsearch fields: <code class="literal">transaction.custom</code> | <code class="literal">error.custom</code></li><li class="listitem">Applies to <a class="xref" href="transactions.html" title="Transactions">Transactions</a> | <a class="xref" href="errors.html" title="Errors">Errors</a></li></ul></div><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Setting a circular object, large object, or a non JSON serializable object can lead to errors.</p></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /></colgroup><tbody><tr><td align="left" valign="top"><p><span class="strong strong"><strong>Custom context API links</strong></span></p></td></tr><tr><td align="left" valign="top"><div class="literallayout"><p><span class="strong strong"><strong>Go:</strong></span> <span class="emphasis"><em>coming soon</em></span><br />
<span class="strong strong"><strong>Java:</strong></span> <span class="emphasis"><em>coming soon</em></span><br />
<span class="strong strong"><strong>.NET:</strong></span> <span class="emphasis"><em>coming soon</em></span><br />
<span class="strong strong"><strong>Node.js:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/nodejs/2.x/agent-api.html#apm-set-custom-context" target="_top"><code class="literal">setCustomContext</code></a><br />
<span class="strong strong"><strong>Python:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/python/4.x/api.html#api-set-custom-context" target="_top"><code class="literal">set_custom_context</code></a><br />
<span class="strong strong"><strong>Ruby:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/ruby/2.x/api.html#api-agent-set-custom-context" target="_top"><code class="literal">set_custom_context</code></a><br />
<span class="strong strong"><strong>Rum:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/rum-js/4.x/agent-api.html#apm-set-custom-context" target="_top"><code class="literal">setCustomContext</code></a></p></div></td></tr></tbody></table></div><h4><a id="user-fields"></a>User context<a xmlns="" href="https://github.com/elastic/apm-server/edit/7.2/docs/guide/apm-data-model.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>User context is used to add <span class="strong strong"><strong>indexed</strong></span> user information to transactions and errors.
Indexed means the data is searchable and aggregatable in Elasticsearch.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Indexed: Yes</li><li class="listitem">Elasticsearch type: <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.2/keyword.html" target="_top">keywords</a></li><li class="listitem">Elasticsearch fields: <code class="literal">user.email</code> | <code class="literal">user.name</code> | <code class="literal">user.id</code></li><li class="listitem">Applies to <a class="xref" href="transactions.html" title="Transactions">Transactions</a> | <a class="xref" href="errors.html" title="Errors">Errors</a></li></ul></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /></colgroup><tbody><tr><td align="left" valign="top"><p><span class="strong strong"><strong>User context API links</strong></span></p></td></tr><tr><td align="left" valign="top"><div class="literallayout"><p><span class="strong strong"><strong>Go:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/go/1.x/api.html#context-set-username" target="_top"><code class="literal">SetUsername</code></a> | <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/go/1.x/api.html#context-set-user-id" target="_top"><code class="literal">SetUserID</code></a> | <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/go/1.x/api.html#context-set-user-email" target="_top"><code class="literal">SetUserEmail</code></a><br />
<span class="strong strong"><strong>Java:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/java/1.x/public-api.html#api-transaction-set-user" target="_top"><code class="literal">setUser</code></a><br />
<span class="strong strong"><strong>.NET</strong></span> <span class="emphasis"><em>coming soon</em></span><br />
<span class="strong strong"><strong>Node.js:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/nodejs/2.x/agent-api.html#apm-set-user-context" target="_top"><code class="literal">setUserContext</code></a><br />
<span class="strong strong"><strong>Python:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/python/4.x/api.html#api-set-user-context" target="_top"><code class="literal">set_user_context</code></a><br />
<span class="strong strong"><strong>Ruby:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/ruby/2.x/api.html#api-agent-set-user" target="_top"><code class="literal">set_user</code></a><br />
<span class="strong strong"><strong>Rum:</strong></span> <a class="ulink" href="https://www.elastic.co/guide/en/apm/agent/rum-js/4.x/agent-api.html#apm-set-user-context" target="_top"><code class="literal">setUserContext</code></a></p></div></td></tr></tbody></table></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="metrics.html">
              « 
              Metrics</a>
           
        </span><span class="next">
           
          <a href="distributed-tracing.html">Distributed tracing
               »
            </a></span></div></body></html>