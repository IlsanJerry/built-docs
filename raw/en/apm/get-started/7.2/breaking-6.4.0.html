<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">6.4.0 APM Breaking changes
        | APM Overview [7.2]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="APM Overview [7.2]" /><link rel="up" href="apm-breaking-changes.html" title="Breaking changes" /><link rel="prev" href="breaking-6.5.0.html" title="6.5.0 APM Breaking changes" /><link rel="next" href="apm-release-notes.html" title="Release highlights" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/APM Server/Reference/7.2" /><meta xmlns="" name="DC.subject" content="APM" /><meta xmlns="" name="DC.identifier" content="7.2" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">APM Overview
      [7.2]
    </a></span> » <span class="breadcrumb-link"><a href="apm-breaking-changes.html">Breaking changes</a></span> » <span class="breadcrumb-node">6.4.0 APM Breaking changes</span></div><div xmlns="" class="navheader"><span class="prev"><a href="breaking-6.5.0.html">
              « 
              6.5.0 APM Breaking changes</a>
           
        </span><span class="next">
           
          <a href="apm-release-notes.html">Release highlights
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="breaking-6.4.0"></a>6.4.0 APM Breaking changes<a xmlns="" href="https://github.com/elastic/apm-server/edit/7.2/docs/guide/apm-breaking-changes.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>We previously split APM data into separate indices (transaction, span, error, etc.).
In 6.4 APM Kibana UI starts to leverage those separate indices for queries.</p><p>In case you only update Kibana but run an older version of APM Server you will not be able to see any APM data by default.
To fix this, use the <a class="ulink" href="https://www.elastic.co/guide/en/kibana/7.2/apm-settings-kb.html" target="_top">Kibana APM settings</a> to specify the location of the APM index:</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">apm_oss.errorIndices: apm-*
apm_oss.spanIndices: apm-*
apm_oss.transactionIndices: apm-*
apm_oss.onboardingIndices: apm-*</pre></div><p>In case you are upgrading APM Server from an older version, you might need to refresh your APM index pattern for certain APM UI features to work.
Also ensure to add the new config options in <code class="literal">apm-server.yml</code> in case you keep your existing configuration file:</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">output.elasticsearch:
  indices:
    - index: "apm-%{[observer.version]}-sourcemap"
      when.contains:
        processor.event: "sourcemap"
    - index: "apm-%{[observer.version]}-error-%{+yyyy.MM.dd}"
      when.contains:
        processor.event: "error"
    - index: "apm-%{[observer.version]}-transaction-%{+yyyy.MM.dd}"
      when.contains:
        processor.event: "transaction"
    - index: "apm-%{[observer.version]}-span-%{+yyyy.MM.dd}"
      when.contains:
        processor.event: "span"
    - index: "apm-%{[observer.version]}-metric-%{+yyyy.MM.dd}"
      when.contains:
        processor.event: "metric"
    - index: "apm-%{[observer.version]}-onboarding-%{+yyyy.MM.dd}"
      when.contains:
        processor.event: "onboarding"</pre></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="breaking-6.5.0.html">
              « 
              6.5.0 APM Breaking changes</a>
           
        </span><span class="next">
           
          <a href="apm-release-notes.html">Release highlights
               »
            </a></span></div></body></html>