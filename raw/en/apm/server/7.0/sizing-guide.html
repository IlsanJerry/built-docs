<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Storage and sizing guide
        | APM Server Reference [7.0]
      | Elastic
    </title><link rel="home" href="index.html" title="APM Server Reference [7.0]" /><link rel="up" href="storage-management.html" title="Storage Management" /><link rel="prev" href="storage-management.html" title="Storage Management" /><link rel="next" href="processing-performance.html" title="Processing and performance" /><meta name="DC.type" content="Learn/Docs/APM Server/Reference/7.0" /><meta name="DC.subject" content="APM" /><meta name="DC.identifier" content="7.0" /><meta name="robots" content="noindex,nofollow" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">APM Server Reference
      [7.0]
    </a></span> » <span class="breadcrumb-link"><a href="storage-management.html">Storage Management</a></span> » <span class="breadcrumb-node">Storage and sizing guide</span></div><div class="navheader"><span class="prev"><a href="storage-management.html">
              « 
              Storage Management</a>
           
        </span><span class="next">
           
          <a href="processing-performance.html">Processing and performance
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="sizing-guide"></a>Storage and sizing guide<a href="https://github.com/elastic/apm-server/edit/7.0/docs/storage-management.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>APM Server handles a few different kinds of <a class="ulink" href="/guide/en/apm/get-started/7.0/apm-data-model.html" target="_top">events</a>.
Since processing and storage costs are largely dominated by
<a class="ulink" href="/guide/en/apm/get-started/7.0/transactions.html" target="_top">transactions</a> and
<a class="ulink" href="/guide/en/apm/get-started/7.0/transaction-spans.html" target="_top">spans</a>,
only those will be covered here.</p><div class="note admon"><div class="icon"></div><div class="admon_content"><p>When the sampling rate is very small, transactions will be the dominate storage cost.</p></div></div><h3><a id="typical-transactions"></a>Typical transactions<a href="https://github.com/elastic/apm-server/edit/7.0/docs/storage-management.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The size of a transaction depends on the language, agent settings, and what services the agent instruments.
For instance, an agent auto-instrumenting a service with a popular tech stack
(web framework, database, caching library, etc.) is more likely to generate bigger transactions.</p><p>In addition, all agents support manual instrumentation.
How little or much you use these APIs will also impact what a typical transaction looks like.</p><p>Due to the high variability of transactions, it’s difficult to classify a transaction as typical.
Regardless, here’s a speculative reference:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th align="left" valign="top">Transaction size</th><th align="left" valign="top">Number of Spans</th><th align="left" valign="top">Number of Frames</th></tr></thead><tbody><tr><td align="left" valign="top"><p><span class="emphasis"><em>Small</em></span></p></td><td align="left" valign="top"><p>5-10</p></td><td align="left" valign="top"><p>5-10</p></td></tr><tr><td align="left" valign="top"><p><span class="emphasis"><em>Medium</em></span></p></td><td align="left" valign="top"><p>15-20</p></td><td align="left" valign="top"><p>15-20</p></td></tr><tr><td align="left" valign="top"><p><span class="emphasis"><em>Large</em></span></p></td><td align="left" valign="top"><p>30-40</p></td><td align="left" valign="top"><p>30-40</p></td></tr></tbody></table></div><p>There will always be transaction outliers with hundreds of spans or frames, but those are very rare.
Small transactions are the most common.</p><h3><a id="typical-storage"></a>Typical storage<a href="https://github.com/elastic/apm-server/edit/7.0/docs/storage-management.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Consider the following typical storage reference.
These numbers do not account for Elasticsearch compression.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">1 unsampled transaction is <span class="strong strong"><strong>~1 Kb</strong></span></li><li class="listitem">1 span with 10 frames is <span class="strong strong"><strong>~4 Kb</strong></span></li><li class="listitem">1 span with 50 frames is <span class="strong strong"><strong>~20 Kb</strong></span></li><li class="listitem">1 transaction with 10 spans, each with 10 frames is <span class="strong strong"><strong>~50 Kb</strong></span></li><li class="listitem">1 transaction with 25 spans, each with 25 spans is <span class="strong strong"><strong>250-300 Kb</strong></span></li><li class="listitem">100 transactions with 10 spans, each with 10 frames, sampled at 90% is <span class="strong strong"><strong>600 Kb</strong></span></li></ul></div><p>APM data compresses quite well, so the storage cost in Elasticsearch will be considerably less:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Indexing 100 unsampled transactions per second for 1 hour results in 360,000 documents. These documents use around <span class="strong strong"><strong>50 Mb</strong></span> of disk space.</li><li class="listitem">Indexing 10 transactions per second for 1 hour, each transaction with 10 spans, each span with 10 frames, results in 396,000 documents. These documents use around <span class="strong strong"><strong>200 Mb</strong></span> of disk space.</li><li class="listitem">Indexing 25 transactions per second for 1 hour, each transaction with 25 spans, each span with 25 frames, results in 2,340,000 documents. These documents use around <span class="strong strong"><strong>1.2 Gb</strong></span> of disk space.</li></ul></div><div class="note admon"><div class="icon"></div><div class="admon_content"><p>These examples were indexing the same data over and over with minimal variation. Because of that, the compression ratios observed of 80-90% are somewhat optimistic.</p></div></div></div><div class="navfooter"><span class="prev"><a href="storage-management.html">
              « 
              Storage Management</a>
           
        </span><span class="next">
           
          <a href="processing-performance.html">Processing and performance
               »
            </a></span></div></body></html>
