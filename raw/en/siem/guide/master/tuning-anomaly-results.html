<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Optimizing anomaly results
        | SIEM Guide (Beta) [master]
      | Elastic
    </title><link rel="home" href="index.html" title="SIEM Guide (Beta) [master]" /><link rel="up" href="machine-learning.html" title="Anomaly Detection with Machine Learning" /><link rel="prev" href="prebuilt-ml-jobs.html" title="Prebuilt job reference" /><meta name="DC.type" content="Learn/Docs/SIEM/Guide/master" /><meta name="DC.subject" content="SIEM" /><meta name="DC.identifier" content="master" /></head><body><div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">SIEM Guide (Beta)
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="machine-learning.html">Anomaly Detection with Machine Learning</a></span> » <span class="breadcrumb-node">Optimizing anomaly results</span></div><div class="navheader"><span class="prev"><a href="prebuilt-ml-jobs.html">
              « 
              Prebuilt job reference</a>
           
        </span><span class="next">
           
          </span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="tuning-anomaly-results"></a>Optimizing anomaly results<a href="https://github.com/elastic/stack-docs/edit/master/docs/en/siem/tune-anomaly-results.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>To gain clearer insights into real threats, you can tune the anomaly results and
remove known false positives.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_filter_out_anomalies_from_rarely_used_applications_and_processes"></a>Filter out anomalies from rarely used applications and processes<a href="https://github.com/elastic/stack-docs/edit/master/docs/en/siem/tune-anomaly-results.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>When anomalies include results from a known process that only runs occasionally,
you can filter out the unwanted results.</p><p>For example, to filter out results from a housekeeping process, named
<code class="literal">maintenanceservice.exe</code>, that only executes occasionally you need to:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a class="xref" href="tuning-anomaly-results.html#create-fiter-list" title="Create a filter list">Create a filter list</a></li><li class="listitem"><a class="xref" href="tuning-anomaly-results.html#add-job-filter" title="Add the filter to the relevant job">Add the filter to the relevant job</a></li><li class="listitem"><a class="link" href="tuning-anomaly-results.html#clone-job" title="Clone and rerun the job">Clone and rerun the job</a> (optional)</li></ol></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="create-fiter-list"></a>Create a filter list<a href="https://github.com/elastic/stack-docs/edit/master/docs/en/siem/tune-anomaly-results.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Got to <span class="strong strong"><strong>Machine Learning</strong></span> → <span class="strong strong"><strong>Anomaly Detection</strong></span> → <span class="strong strong"><strong>Settings</strong></span>.</li><li class="listitem"><p class="simpara">Click <span class="strong strong"><strong>Filter Lists</strong></span> and then <span class="strong strong"><strong>New</strong></span>.</p><p class="simpara">The <span class="strong strong"><strong>Create new filter list</strong></span> pane is displayed.</p></li><li class="listitem">Enter a filter list ID.</li><li class="listitem">Enter a description for the filter list (optional).</li><li class="listitem">Click <span class="strong strong"><strong>Add item</strong></span>.</li><li class="listitem"><p class="simpara">In the <span class="strong strong"><strong>Items</strong></span> textbox, enter the <code class="literal">process.name</code> field of the process for which
you want to filter out anomaly results (<code class="literal">maintenanceservice.exe</code> in our example).</p><div class="screenshot informalfigure"><div class="mediaobject"><img src="filter-add-item.png" alt="filter add item" /></div></div></li><li class="listitem"><p class="simpara">Click <span class="strong strong"><strong>Add</strong></span> and then <span class="strong strong"><strong>Save</strong></span>.</p><p class="simpara">The new filter appears in the Filter List and can be added to relevant jobs.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="add-job-filter"></a>Add the filter to the relevant job<a href="https://github.com/elastic/stack-docs/edit/master/docs/en/siem/tune-anomaly-results.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Go to <span class="strong strong"><strong>Machine Learning</strong></span> → <span class="strong strong"><strong>Anomaly Detection</strong></span> → <span class="strong strong"><strong>Anomaly Explorer</strong></span>.</li><li class="listitem">Navigate to the job results for which the filter is required. If the job results
are not listed, click <span class="strong strong"><strong>Edit job selection</strong></span> and select the relevant job.</li><li class="listitem"><p class="simpara">In the <span class="strong strong"><strong>actions</strong></span> column, click the gear icon and then select <span class="emphasis"><em>Configure rules</em></span>.</p><p class="simpara">The <span class="strong strong"><strong>Create Rule</strong></span> window is displayed.</p><div class="screenshot informalfigure"><div class="mediaobject"><img src="rule-scope.png" alt="rule scope" /></div></div></li><li class="listitem"><p class="simpara">Select:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><span class="emphasis"><em>Add a filter list to limit where the rule applies</em></span>.</li><li class="listitem"><p class="simpara">The <span class="emphasis"><em>WHEN</em></span> statement for the relevant detector (<code class="literal">process.name</code> in our
example).</p><div class="tip admon"><div class="icon"></div><div class="admon_content"><p>For more information about detectors, see
<a class="ulink" href="/guide/en/elastic-stack-overview/master/ml-jobs.html" target="_top">Anomaly detection jobs</a>.</p></div></div></li><li class="listitem">The <span class="emphasis"><em>IS IN</em></span> statement.</li><li class="listitem">The filter you created as part of the <a class="xref" href="tuning-anomaly-results.html#create-fiter-list" title="Create a filter list">Create a filter list</a> procedure.</li></ol></div></li><li class="listitem">Click <span class="strong strong"><strong>Save</strong></span>.</li></ol></div><div class="note admon"><div class="icon"></div><div class="admon_content"><p>Changes to rules only affect new results. All anomalies found by the job
before the filter was added are still displayed.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="clone-job"></a>Clone and rerun the job<a href="https://github.com/elastic/stack-docs/edit/master/docs/en/siem/tune-anomaly-results.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>If you want to remove all the previously detected results for the process, you
must clone and run the cloned job.</p><div class="important admon"><div class="icon"></div><div class="admon_content"><p>Running the cloned job can take some time. Only run the job after you
have completed all job rule changes.</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Go to <span class="strong strong"><strong>Machine Learning</strong></span> → <span class="strong strong"><strong>Anomaly Detection</strong></span> → <span class="strong strong"><strong>Job Management</strong></span>.</li><li class="listitem">Navigate to the job for which you configured the rule.</li><li class="listitem">Optionally, expand the job row and click <span class="strong strong"><strong>JSON</strong></span> to verify the configured filter
appears under <code class="literal">custom rules</code> in the JSON code.</li><li class="listitem"><p class="simpara">In the <span class="strong strong"><strong>actions</strong></span> column, click the more (three dot) icon and select <span class="emphasis"><em>Clone job</em></span>.</p><p class="simpara">The <span class="strong strong"><strong>Configure datafeed</strong></span> page is displayed.</p></li><li class="listitem">Click <span class="strong strong"><strong>Data Preview</strong></span> and check the data is displayed without errors.</li><li class="listitem">Click <span class="strong strong"><strong>Next</strong></span> until the <span class="strong strong"><strong>Job details</strong></span> page is displayed.</li><li class="listitem"><p class="simpara">Enter a Job ID for the cloned job that indicates it is an iteration of the
original one. For example, append a number or a username to the original job
name, such as <code class="literal">windows-rare-network-process-2</code>.</p><div class="screenshot informalfigure"><div class="mediaobject"><img src="cloned-job-details.png" alt="cloned job details" /></div></div></li><li class="listitem">Click <span class="strong strong"><strong>Next</strong></span> and check the job validates without errors. Warnings about multiple
influencers can be ignored.</li><li class="listitem"><p class="simpara">Click <span class="strong strong"><strong>Next</strong></span> and then <span class="strong strong"><strong>Create job</strong></span>.</p><p class="simpara">The <span class="strong strong"><strong>Start &lt;job name&gt;</strong></span> window is displayed.</p><div class="screenshot informalfigure"><div class="mediaobject"><img src="start-job-window.png" alt="start job window" /></div></div></li><li class="listitem">Select the point of time from which the job will analyse anomalies.</li><li class="listitem"><p class="simpara">Click <span class="strong strong"><strong>Start</strong></span>.</p><p class="simpara">After a while, results will start to appear on the <span class="strong strong"><strong>Anomaly Explorer</strong></span> page.</p></li></ol></div></div></div></div><div class="navfooter"><span class="prev"><a href="prebuilt-ml-jobs.html">
              « 
              Prebuilt job reference</a>
           
        </span><span class="next">
           
          </span></div></body></html>
