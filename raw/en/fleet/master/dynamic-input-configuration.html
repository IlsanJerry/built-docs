<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Variables and conditions in input configurations | Fleet User Guide [master] | Elastic</title>
<link rel="home" href="index.html" title="Fleet User Guide [master]"/>
<link rel="up" href="elastic-agent-installation-configuration.html" title="Manage your Elastic Agents"/>
<link rel="prev" href="_reference_yaml.html" title="Reference yaml"/>
<link rel="next" href="variable-substitution.html" title="Variable substitution"/>
<meta name="DC.type" content="Learn/Docs/Fleet/Guide/master"/>
<meta name="DC.subject" content="Fleet"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Fleet User Guide [master]</a></span>
»
<span class="breadcrumb-link"><a href="elastic-agent-installation-configuration.html">Manage your Elastic Agents</a></span>
»
<span class="breadcrumb-node">Variables and conditions in input configurations</span>
</div>
<div class="navheader">
<span class="prev">
<a href="_reference_yaml.html">« Reference yaml</a>
</span>
<span class="next">
<a href="variable-substitution.html">Variable substitution »</a>
</span>
</div>
<div class="section xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="dynamic-input-configuration"></a>Variables and conditions in input configurations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/observability-docs/edit/master/docs/en/ingest-management/elastic-agent/elastic-agent-dynamic-inputs.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>When running Elastic Agent in some environments, you might not know all the input
configuration details up front. To solve this problem, the input configuration
accepts variables and conditions that get evaluated at runtime using
information from the running environment. Similar to autodiscovery, these
capabilities allow you to apply configurations dynamically.</p>
<p>Let&#8217;s consider a unique agent policy that is deployed on two machines: a Linux
machine named "linux-app" and a Windows machine named "winapp". Notice that
the configuration has some variable references: <code class="literal">${host.name}</code> and
<code class="literal">${host.platform}</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">inputs:
 - type: logfile
   streams:
    - paths: /var/log/${host.name}/another.log
      condition: ${host.platform} == "linux"
    - path: c:/service/app.log
      condition: ${host.platform} == "windows"</pre>
</div>
<p>At runtime, Elastic Agent resolves variables and evaluates the conditions based
on values provided by the environment, generating two possible input
configurations.</p>
<p>On the Windows machine:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">inputs:
 - type: logfile
   streams:
    - path: c:/service/app.log</pre>
</div>
<p>On the Linux machine:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">inputs:
 - type: logfile
   streams:
    - paths: /var/log/linux-app/another.log</pre>
</div>
<p>Using variable substitution along with conditions allows you to create concise,
but flexible input configurations that adapt to their deployed environment.</p>






</div>
<div class="navfooter">
<span class="prev">
<a href="_reference_yaml.html">« Reference yaml</a>
</span>
<span class="next">
<a href="variable-substitution.html">Variable substitution »</a>
</span>
</div>
</div>
</body>
</html>
