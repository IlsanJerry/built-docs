<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Getting Started
        | Reporting
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reporting" /><link rel="up" href="index.html" title="Reporting" /><link rel="prev" href="index.html" title="Reporting" /><link rel="next" href="installing-reporting.html" title="Installing Reporting" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Legacy/Reporting/Reference" /><meta xmlns="" name="DC.subject" content="Reporting" /><meta xmlns="" name="DC.identifier" content="2.4" /><meta xmlns="" name="robots" content="noindex,nofollow" /></head><body><div xmlns="" class="page_header">From version 5.0 onward, Reporting is part of X-Pack. For more information, see 
<a href=https://www.elastic.co/guide/en/kibana/current/xpack-reporting.html>
    Reporting from Kibana</a>. </div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reporting</a></span> » <span class="breadcrumb-node">Getting Started</span></div><div xmlns="" class="navheader"><span class="prev">
           
        </span><span class="next">
           
          <a href="installing-reporting.html">Installing Reporting
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="getting-started"></a>Getting Started</h1></div></div></div><p><span class="emphasis"><em>Reporting</em></span> enables you generate reports that contain Kibana dashboards,
visualizations, and saved searches.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Any user with access to the reporting index has access to every
report generated by all users.</p></div></div><p><a id="getting-started-installation"></a>To install Reporting:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">If you haven’t already, install the License plugin in Elasticsearch by running
<code class="literal">bin/plugin</code> in  your Elasticsearch installation directory.</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">bin/plugin install license</pre></div></li><li class="listitem"><p class="simpara">Install the Reporting app into Kibana by running <code class="literal">bin/kibana plugin</code> in your
Kibana installation directory.</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">bin/kibana plugin --install kibana/reporting/latest</pre></div></li><li class="listitem"><p class="simpara">Set the <code class="literal">reporting.encryptionKey</code> property in the <code class="literal">kibana.yml</code> configuration file.
You can use any text string as the encryption key.</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">reporting.encryptionKey: "something_secret"</pre></div></li><li class="listitem"><p class="simpara">Windows users must set the <code class="literal">server.host</code> property in the <code class="literal">kibana.yml</code> configuration file.
You can use <code class="literal">localhost</code> to allow only local access, or the IP address of the host.
You can not leave the default <code class="literal">0.0.0.0</code> when using reporting on Windows.</p><div xmlns="" class="pre_wrapper lang-yaml"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">server.host: localhost</pre></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you are using Shield, see <a class="ulink" href="https://www.elastic.co/guide/en/shield/2.4/kibana.html" target="_top">
Using Kibana with Shield</a> and <a class="ulink" href="https://www.elastic.co/guide/en/shield/2.4/reporting.html" target="_top">Using
Reporting with Shield</a> for additional setup instructions.</p></div></div></li><li class="listitem">Start Kibana by running <code class="literal">bin/kibana</code>.</li><li class="listitem"><p class="simpara">To verify your Reporting installation, point your web browser at
<code class="literal">http://localhost:5601/</code> to open Kibana. The Generate Report button is
added to the Toolbar:</p><p class="simpara"><span class="inlinemediaobject"><img src="images/reporting.jpg" alt="Reporting" /></span></p></li></ol></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If report generation fails with the error
"Phantom immediately exited with: 127" you’ll need to install the <code class="literal">libfontconfig</code>
and <code class="literal">libfreetype6</code> packages.</p></div></div><p>For offline installation instructions and more, see <a class="link" href="installing-reporting.html" title="Installing Reporting">Installing Reporting</a>.</p><h2><a id="manually-generating-reports"></a>Manually Generating Reports</h2><p>The easiest way to generate reports is through the controls in the Kibana UI.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">In Kibana, load the dashboard, visualization, or saved search you want to
include in the report.</li><li class="listitem"><p class="simpara">Click the <span class="strong strong"><strong>Generate PDF</strong></span> button in the Kibana toolbar:</p><p class="simpara"><span class="inlinemediaobject"><img src="images/reporting.jpg" alt="Reporting" /></span></p></li><li class="listitem">Click <span class="strong strong"><strong>Printable PDF</strong></span>.</li></ol></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you want to automatically generate reports from a script or with Watcher,
use the displayed Generation URL.</p></div></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">These examples all use <code class="literal">localhost</code> but in a production environment you would use
the actual host name or IP address.</p></div></div><h2><a id="automating-report-generation"></a>Automating Report Generation</h2><p>Report generation can be automated with Watcher, or by submitting an HTTP POST
request from a script.</p><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">The interval between report requests must be longer than the time it
takes to generate the reports—​otherwise, the report queue can back up. To
avoid this, increase the time between report requests.</p><p xmlns="http://www.w3.org/1999/xhtml">If you are using watches to generate a lot of reports, set up a dedicated
Watcher cluster instead of running Watcher on your production cluster.
Currently, if the report queue backs up due to a high number of watcher-related
tasks, you might need to delete the watch index and restart the node to
recover. We are actively working to improve the integration between Watcher
and Reporting to prevent this from happening.</p></div></div><p>You can request PDF reports through three Kibana endpoints:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Dashboard Reports:  <code class="literal">/api/reporting/generate/dashboard/&lt;dashboard-id&gt;&amp;sync</code></li><li class="listitem">Visualization Reports:  <code class="literal">/api/reporting/generate/visualization/&lt;visualization-id&gt;&amp;sync</code></li><li class="listitem">Saved Search Reports: <code class="literal">/api/reporting/generate/search/&lt;saved-search-id&gt;&amp;sync</code></li></ul></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">The <code class="literal">&amp;sync</code> parameter is required to retrieve a PDF of the report. If you
omit it, Reporting returns a JSON structure that only contains the report
metadata.</p></div></div><p>To specify the time period you want to include in the report, you use the <code class="literal">_g</code>
parameter in the request. For example:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">http://localhost:5601/api/reporting/generate/dashboard/error-monitoring?_g=(time:(from:now-1d%2Fd,mode:quick,to:now-1d%2Fd))&amp;sync</pre></div><p>You can get the URL for a particular report through the Kibana UI:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Load the saved object.</li><li class="listitem">Click the <span class="strong strong"><strong>Generate PDF</strong></span> button in the Kibana toolbar.</li><li class="listitem">Copy the displayed <span class="strong strong"><strong>Generation URL</strong></span>.</li></ol></div><p>To configure a watch to email reports, you use the
<a class="ulink" href="https://www.elastic.co/guide/en/watcher/current/actions.html#configuring-email-attachments" target="_top">
<code class="literal">http</code> attachment type</a> in an <code class="literal">email</code> action.</p><p>For example, the following watch generates a report that contains the
<span class="strong strong"><strong>Error Monitoring</strong></span> dashboard and emails the report every hour:</p><div xmlns="" class="pre_wrapper lang-sense"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sense">PUT _watcher/watch/error_report
{
  "trigger" : {
    "schedule": {
      "interval": "1h"
    }
  },
  "actions" : {
  "email_admin" : { <a id="CO1-1"></a><i xmlns="" class="conum" data-value="1"></i>
    "email": {
      "to": "'Recipient Name &lt;recipient@example.com&gt;'",
      "subject": "Error Monitoring Report",
      "attachments" : {
        "error_report.pdf" : {
          "http" : {
            "content_type" : "application/pdf",
            "request" : {
              "method": "POST", <a id="CO1-2"></a><i xmlns="" class="conum" data-value="2"></i>
              "headers": {
                "kbn-xsrf": "reporting"
              },
              "read_timeout": "300s", <a id="CO1-3"></a><i xmlns="" class="conum" data-value="3"></i>
              "url": "http://localhost:5601/api/reporting/generate/dashboard/Error-Monitoring?_g=(time:(from:now-1d%2Fd,mode:quick,to:now))&amp;sync" <a id="CO1-4"></a><i xmlns="" class="conum" data-value="4"></i>
            }
          }
        }
      }
    }
  }
 }
}</pre></div><div xmlns="" class="sense_widget" data-snippet="snippets/1.sense"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>You must <a class="ulink" href="https://www.elastic.co/guide/en/watcher/current/email-services.html#email-account" target="_top">
configure at least one email account</a> to enable Watcher to send email.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>As of <a class="link" href="reporting-release-notes.html#post-change" title="2.4.1">version 2.4.1</a>, requests to the Reporting endpoints
must use POST and include the <code class="literal">kbn-xsrf</code> header.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-3"><i xmlns="" class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>Increase the <code class="literal">read_timeout</code> to give Reporting enough time to generate the
report.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-4"><i xmlns="" class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>This is an example Generation URL. You can copy and paste the URL for any
report from the Kibana UI.</p></td></tr></table></div><p>For more information about configuring watches, see the
<a class="ulink" href="https://www.elastic.co/guide/en/watcher/2.4/" target="_top">Watcher Reference</a>.</p><h3><a id="securing-reporting"></a>Securing the Reporting Endpoints</h3><p>In a production environment, you should use Shield to restrict access to the
Reporting endpoints to authorized users. This requires that you:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a class="ulink" href="https://www.elastic.co/guide/en/shield/2.4/getting-started.html" target="_top">Install and configure Shield</a> on your
Elasticsearch cluster.</li><li class="listitem"><a class="ulink" href="https://www.elastic.co/guide/en/shield/2.4/kibana.html" target="_top">Install the Shield plugin</a>  into Kibana.</li><li class="listitem"><a class="ulink" href="https://www.elastic.co/guide/en/shield/2.4/kibana.html#configure-kibana-cert" target="_top">Configure an SSL certificate</a>
for Kibana.</li><li class="listitem"><p class="simpara">Configure Watcher to trust the Kibana server’s certificate by adding it to
the Watcher truststore on each node:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">Import the Kibana server certificate into the Watcher truststore using
Java Keytool:</p><div xmlns="" class="pre_wrapper lang-shell"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-shell">keytool -importcert -keystore watcher-truststore.jks -file server.crt</pre></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If the truststore doesn’t already exist, it is created.</p></div></div></li><li class="listitem">Make sure the <code class="literal">watcher.http.ssl.truststore.path</code> setting in
<code class="literal">elasticsearch.yml</code> specifies the location of the Watcher
truststore.</li></ol></div></li><li class="listitem"><a class="ulink" href="https://www.elastic.co/guide/en/shield/2.4/reporting.html" target="_top">Add one or more users</a> who have the permissions
necessary to use Kibana and Reporting.</li></ol></div><p>Once you’ve installed the Shield plugin into Kibana and enabled SSL, all
requests to the Reporting endpoints must include valid credentials.
For example, the following watch submits requests as the <code class="literal">es_admin</code> user:</p><div xmlns="" class="pre_wrapper lang-sense"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sense">PUT _watcher/watch/error_report
{
  "trigger" : {
    "schedule": {
      "interval": "1h"
    }
  },
  "actions" : {
  "email_admin" : {
    "email": {
      "to": "'Recipient Name &lt;recipient@example.com&gt;'",
      "subject": "Error Monitoring Report",
      "attachments" : {
        "error_report.pdf" : {
          "http" : {
            "content_type" : "application/pdf",
            "request" : {
              "method": "POST",
              "scheme": "https", <a id="CO2-1"></a><i xmlns="" class="conum" data-value="1"></i>
              "headers": {
                "kbn-xsrf": "reporting"
              },
              "auth": { <a id="CO2-2"></a><i xmlns="" class="conum" data-value="2"></i>
                "basic": {
                  "username": "es_admin",
                  "password": "adminpassword"
                }
              },
              "read_timeout": "300s",
              "url": "https://localhost:5601/api/reporting/generate/dashboard/Error-Monitoring?_g=(time:(from:now-1d%2Fd,mode:quick,to:now))&amp;sync"
            }
          }
        }
      }
    }
  }
 }
}</pre></div><div xmlns="" class="sense_widget" data-snippet="snippets/2.sense"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO2-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>You must connect to the Reporting endpoints via HTTPS when SSL is enabled.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO2-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>Provide user credentials for a user with permission to access Kibana and Reporting.
For more information, see <a class="ulink" href="https://www.elastic.co/guide/en/shield/2.4/reporting.html#reporting-app-users" target="_top">
Setting up a Reporting Role</a>.</p></td></tr></table></div></div><div xmlns="" class="navfooter"><span class="prev">
           
        </span><span class="next">
           
          <a href="installing-reporting.html">Installing Reporting
               »
            </a></span></div></body></html>