<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Availability
        | Deploying with Azure Marketplace and Resource Manager (ARM) template [7.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Deploying with Azure Marketplace and Resource Manager (ARM) template [7.1]" /><link rel="up" href="azure-arm-template.html" title="Azure Resource Manager (ARM) template" /><link rel="prev" href="azure-arm-template-data-disks.html" title="Data disks" /><link rel="next" href="azure-arm-template-networking.html" title="Networking" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elastic Stack/Azure/7.1" /><meta xmlns="" name="DC.subject" content="Azure Marketplace and Resource Manager (ARM) template" /><meta xmlns="" name="DC.identifier" content="7.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Deploying with Azure Marketplace and Resource Manager (ARM) template
      [7.1]
    </a></span> » <span class="breadcrumb-link"><a href="azure-arm-template.html">Azure Resource Manager (ARM) template</a></span> » <span class="breadcrumb-node">Availability</span></div><div xmlns="" class="navheader"><span class="prev"><a href="azure-arm-template-data-disks.html">
              « 
              Data disks</a>
           
        </span><span class="next">
           
          <a href="azure-arm-template-networking.html">Networking
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="azure-arm-template-availability"></a>Availability<a xmlns="" href="https://github.com/elastic/azure-marketplace/edit/7.1/docs/azure-arm-template.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Oftentimes you will want to deploy a highly available Elasticsearch cluster that
stays online even in the face of instance or zone failure. Azure has several
concepts to manage Availability.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="availability-sets"></a>Availability sets<a xmlns="" href="https://github.com/elastic/azure-marketplace/edit/7.1/docs/azure-arm-template.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Master, data and coordinating node VMs are grouped in their own
<a class="ulink" href="https://docs.microsoft.com/azure/virtual-machines/linux/manage-availability" target="_top">Availability sets</a>, so that at least one machine
is available within a datacentre during a planned or unplanned maintenance event.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">The template does not currently use <a class="ulink" href="https://docs.microsoft.com/azure/availability-zones/az-overview" target="_top">Availability zones</a> since
they are not yet available in all Azure regions to which the template can be
deployed. It is expected that the template will use Availability zones in the future.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="update-and-fault-domains"></a>Update and Fault Domains<a xmlns="" href="https://github.com/elastic/azure-marketplace/edit/7.1/docs/azure-arm-template.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Each Availability set has 20 Update domains and two or three Fault domains, depending
on how many Fault domains the selected Azure location supports. When VMs are provisioned, they
are round-robin assigned an Update domain and Fault domain.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Update domains</span></dt><dd>Indicates a group of virtual machines and underlying physical hardware that can be
rebooted at the same time.</dd><dt><span class="term">Fault domains</span></dt><dd>Indicates a group of virtual machines that share a common power source and network switch.
While placing your virtual machines into an availability set does not mitigate
operating system or Elasticsearch operation failures, it does limit the impact
of potential physical hardware failures, network outages, or power interruptions.</dd></dl></div><p>When Elasticsearch is installed onto the VM, the Update and Fault domains in which the
VM resides are specified as node attributes in the elasticsearch.yml configuration file.
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.1/allocation-awareness.html" target="_top">Shard allocation awareness</a> is configured
taking into account these Fault domain and Update domain attribute values.</p></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="azure-arm-template-data-disks.html">
              « 
              Data disks</a>
           
        </span><span class="next">
           
          <a href="azure-arm-template-networking.html">Networking
               »
            </a></span></div></body></html>