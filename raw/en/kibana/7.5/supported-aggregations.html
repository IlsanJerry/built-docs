<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Supported aggregations | Kibana Guide [7.5] | Elastic</title>
<link rel="home" href="index.html" title="Kibana Guide [7.5]"/>
<link rel="up" href="most-frequent.html" title="Most frequently used visualizations"/>
<link rel="prev" href="most-frequent.html" title="Most frequently used visualizations"/>
<link rel="next" href="TSVB.html" title="TSVB"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/7.5"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="7.5"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Kibana Guide [7.5]</a></span>
»
<span class="breadcrumb-link"><a href="visualize.html">Visualize</a></span>
»
<span class="breadcrumb-link"><a href="most-frequent.html">Most frequently used visualizations</a></span>
»
<span class="breadcrumb-node">Supported aggregations</span>
</div>
<div class="navheader">
<span class="prev">
<a href="most-frequent.html">« Most frequently used visualizations</a>
</span>
<span class="next">
<a href="TSVB.html">TSVB »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="supported-aggregations"></a>Supported aggregations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.5/docs/visualize/aggregations.asciidoc">edit</a></h2>
</div></div></div>
<p>The most frequently used visualizations support the following aggregations.</p>
<h4><a id="visualize-metric-aggregations"></a>Metric aggregations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.5/docs/visualize/aggregations.asciidoc">edit</a></h4>
<p>The <span class="strong strong"><strong>Count</strong></span> metric lets you visualize the number of documents in a bucket.
If there are no bucket aggregations defined, this is the total number of documents that match the query.
It is the default selection.</p>
<p>All other metric aggregations require a field selection, which will read from the indexed values. Alternatively,
you can override field values with a script using the <a class="xref" href="supported-aggregations.html#visualize-advanced-aggregation-options" title="Advanced aggregation options">JSON input</a>. The
other metric aggregations are:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-metrics-avg-aggregation.html" class="ulink" target="_top">Average</a>
</span>
</dt>
<dd>
The mean value.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-metrics-max-aggregation.html" class="ulink" target="_top">Maximum</a>
</span>
</dt>
<dd>
The highest value.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-metrics-percentile-aggregation.html" class="ulink" target="_top">Median</a>
</span>
</dt>
<dd>
The value that is in the 50% percentile.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-metrics-min-aggregation.html" class="ulink" target="_top">Minimum</a>
</span>
</dt>
<dd>
The lowest value.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-metrics-sum-aggregation.html" class="ulink" target="_top">Sum</a>
</span>
</dt>
<dd>
The total value.
</dd>
<dt>
<span class="term">
Unique Count
</span>
</dt>
<dd>
The <a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-metrics-cardinality-aggregation.html" class="ulink" target="_top">Cardinality</a> of the field within the bucket.
Supports any data type.
</dd>
<dt>
<span class="term">
Standard Deviation
</span>
</dt>
<dd>
Requires a numeric field. Uses the <a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-metrics-extendedstats-aggregation.html" class="ulink" target="_top"><em>extended stats</em></a> aggregation.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-metrics-top-hits-aggregation.html" class="ulink" target="_top">Top Hit</a>
</span>
</dt>
<dd>
Returns a sample of individual documents. When the Top Hit aggregation is matched to more than one document, you must choose a technique for combining the values. Techniques include average, minimum, maximum, and sum.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-metrics-percentile-aggregation.html" class="ulink" target="_top">Percentiles</a>
</span>
</dt>
<dd>
Divides the
values in a numeric field into specified percentile bands. Select a field from the drop-down, then specify one or more ranges in the <span class="strong strong"><strong>Percentiles</strong></span> fields. Click the <span class="strong strong"><strong>X</strong></span> to remove a percentile field. Click <span class="strong strong"><strong>+ Add</strong></span> to add a percentile field.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-metrics-percentile-rank-aggregation.html" class="ulink" target="_top">Percentile Rank</a>
</span>
</dt>
<dd>
Returns the percentile rankings for the values in the specified numeric field. Select a numeric field from the drop-down, then specify one or more percentile rank values in the <span class="strong strong"><strong>Values</strong></span> fields. Click the <span class="strong strong"><strong>X</strong></span> to remove a values field. Click <span class="strong strong"><strong>+Add</strong></span> to add a values field.
</dd>
</dl>
</div>
<h4><a id="visualize-sibling-pipeline-aggregations"></a>Sibling pipeline aggregations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.5/docs/visualize/aggregations.asciidoc">edit</a></h4>
<p>For each of the sibling pipeline aggregations you have to define a bucket and metric to calculate. This
has the effect of condensing many buckets into one number.</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-pipeline-avg-bucket-aggregation.html" class="ulink" target="_top">Average Bucket</a>
</span>
</dt>
<dd>
Calculates the mean, or average, value of a specified metric in a sibling aggregation.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-pipeline-avg-bucket-aggregation.html" class="ulink" target="_top">Sum Bucket</a>
</span>
</dt>
<dd>
Calculates the sum of the values of a specified metric in a sibling aggregation.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-pipeline-avg-bucket-aggregation.html" class="ulink" target="_top">Min Bucket</a>
</span>
</dt>
<dd>
Calculates the minimum value of a specified metric in a sibling aggregation.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-pipeline-avg-bucket-aggregation.html" class="ulink" target="_top">Max Bucket</a>
</span>
</dt>
<dd>
Calculates the maximum value of a specified metric in a sibling aggregation.
</dd>
</dl>
</div>
<h4><a id="visualize-bucket-aggregations"></a>Bucket aggregations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.5/docs/visualize/aggregations.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-bucket-datehistogram-aggregation.html" class="ulink" target="_top">Date Histogram</a>
</span>
</dt>
<dd>
Splits a date field into buckets by interval. If the date field is the primary time field for the index pattern, it will pick an automatic interval for you. You can also choose a minimum time interval, or specify a custom interval frame by selecting <span class="strong strong"><strong>Custom</strong></span> as the interval and
specifying a number and a time unit in the text field. Custom interval time units are <span class="strong strong"><strong>s</strong></span> for seconds, <span class="strong strong"><strong>m</strong></span> for minutes,
<span class="strong strong"><strong>h</strong></span> for hours, <span class="strong strong"><strong>d</strong></span> for days, <span class="strong strong"><strong>w</strong></span> for weeks, and <span class="strong strong"><strong>y</strong></span> for years. Different units support different levels of precision,
down to one millisecond. Intervals are labeled at the start of the interval, using the date-key returned by Elasticsearch.For example, the tooltip for a monthly interval will show the first day of the month.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-bucket-histogram-aggregation.html" class="ulink" target="_top">Histogram</a>
</span>
</dt>
<dd>
Builds from a numeric field. Specify an integer interval for this field. Select the <span class="strong strong"><strong>Show empty buckets</strong></span> checkbox to include empty intervals in the histogram.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-bucket-range-aggregation.html" class="ulink" target="_top">Range</a>
</span>
</dt>
<dd>
Specify ranges of values for a numeric field. Click <span class="strong strong"><strong>Add Range</strong></span> to add a set of range endpoints. Click the red <span class="strong strong"><strong>(x)</strong></span> symbol to remove a range.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-bucket-daterange-aggregation.html" class="ulink" target="_top">Date Range</a>
</span>
</dt>
<dd>
Reports values that are within a range of dates that you specify. You can specify the ranges for the dates using <a href="/guide/en/elasticsearch/reference/7.5/common-options.html#date-math" class="ulink" target="_top"><em>date math</em></a> expressions. Click <span class="strong strong"><strong>Add Range</strong></span> to add a set of range endpoints.
Click the red <span class="strong strong"><strong>(x)</strong></span> symbol to remove a range.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-bucket-iprange-aggregation.html" class="ulink" target="_top">IPv4 Range</a>
</span>
</dt>
<dd>
Specify ranges of IPv4 addresses. Click <span class="strong strong"><strong>Add Range</strong></span> to add a set of range endpoints. Click the red <span class="strong strong"><strong>(x)</strong></span> symbol to remove a range.
</dd>
<dt>
<span class="term">
<span class="strong strong"><strong>Filters</strong></span>
</span>
</dt>
<dd>
Each filter creates a bucket of documents. You can specify a filter as a
<a class="xref" href="kuery-query.html" title="Kibana Query Language">KQL</a> or <a class="xref" href="lucene-query.html" title="Lucene query syntax">Lucene</a> query string. Click <span class="strong strong"><strong>Add Filter</strong></span> to
add another filter. Click the <span class="image"><img src="images/labelbutton.png" alt="Label button icon"></span> <span class="strong strong"><strong>label</strong></span> button to open the label field, where
you can type in a name to display on the visualization.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-bucket-terms-aggregation.html" class="ulink" target="_top">Terms</a>
</span>
</dt>
<dd>
Specify the top or bottom <em>n</em> elements of a  given field to display, ordered by count or a custom metric.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-bucket-significantterms-aggregation.html" class="ulink" target="_top">Significant Terms</a>
</span>
</dt>
<dd>
Returns interesting or unusual occurrences of terms in a set.
</dd>
</dl>
</div>
<p>Both Terms and Significant Terms support Elasticsearch <a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-bucket-terms-aggregation.html#_filtering_values_4" class="ulink" target="_top">exclude and include patterns</a> which
are available by clicking <span class="strong strong"><strong>Advanced</strong></span> after selecting a field.</p>
<p>Kibana only supports filtering string fields with regular expression patterns, it does not support matching with arrays or filtering numeric fields.
Patterns are case sensitive.</p>
<p>Example:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
You want to exclude the metricbeat process from your visualization of top processes: <code class="literal">metricbeat.*</code>
</li>
<li class="listitem">
You only want to show processes collecting beats: <code class="literal">.*beat</code>
</li>
<li class="listitem">
You want to exclude two specific values, the string <code class="literal">"empty"</code> and <code class="literal">"none"</code>: <code class="literal">empty|none</code>
</li>
</ul>
</div>
<p><span class="strong strong"><strong>Geo aggregations</strong></span></p>
<p>These are only supported by the tile map and table visualizations:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-bucket-geohashgrid-aggregation.html" class="ulink" target="_top">Geohash</a>
</span>
</dt>
<dd>
Displays points based on a geohash.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-bucket-geotilegrid-aggregation.html" class="ulink" target="_top">Geotile</a>
</span>
</dt>
<dd>
Groups points based on web map tiling.
</dd>
</dl>
</div>
<h4><a id="visualize-parent-pipeline-aggregations"></a>Parent pipeline aggregations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.5/docs/visualize/aggregations.asciidoc">edit</a></h4>
<p>For each of the parent pipeline aggregations you have to define a bucket and metric to calculate. These
metrics expect the buckets to be ordered, and are especially useful for time series data.
You can also nest these aggregations. For example, if you want to produce a third derivative.</p>
<p>These visualizations support parent pipeline aggregations:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Line, Area and Bar charts
</li>
<li class="listitem">
<p>Data table</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-pipeline-derivative-aggregation.html" class="ulink" target="_top">Derivative</a>
</span>
</dt>
<dd>
Calculates the derivative of specific metrics.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-pipeline-cumulative-sum-aggregation.html" class="ulink" target="_top">Cumulative Sum</a>
</span>
</dt>
<dd>
Calculates the cumulative sum of a specified metric in a parent histogram.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-pipeline-movavg-aggregation.html" class="ulink" target="_top">Moving Average</a>
</span>
</dt>
<dd>
Slides a window across the data and emits the average value of the window.
</dd>
<dt>
<span class="term">
<a href="/guide/en/elasticsearch/reference/7.5/search-aggregations-pipeline-serialdiff-aggregation.html" class="ulink" target="_top">Serial Diff</a>
</span>
</dt>
<dd>
Values in a time series are subtracted from itself at different time lags or periods.
</dd>
</dl>
</div>
</li>
</ul>
</div>
<p>Custom Kibana plugins can <a class="xref" href="development-visualize-index.html" title="Developing Visualizations">add more capabilities to the default editor</a>, which includes support for adding more aggregations.</p>
<h4><a id="visualize-advanced-aggregation-options"></a>Advanced aggregation options<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/7.5/docs/visualize/aggregations.asciidoc">edit</a></h4>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<span class="strong strong"><strong>JSON Input</strong></span>
</span>
</dt>
<dd>
A text field where you can add specific JSON-formatted properties to merge with the aggregation
definition, as in the following example:
</dd>
</dl>
</div>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">{ "script" : "doc['grade'].value * 1.2" }</pre>
</div>
<p>This example implements a Elasticsearch <a href="/guide/en/elasticsearch/reference/7.5/search-aggregations.html" class="ulink" target="_top">Script Value Source</a> which replaces
the value in the metric. The availability of these options varies depending on the aggregation
you choose.</p>
<p>When multiple bucket aggregations are defined, you can use the drag target on each aggregation to change the priority. For more information about working with aggregation order, see <a href="/blog/kibana-aggregation-execution-order-and-you" class="ulink" target="_top">Kibana, Aggregation Execution Order, and You</a>.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="most-frequent.html">« Most frequently used visualizations</a>
</span>
<span class="next">
<a href="TSVB.html">TSVB »</a>
</span>
</div>
</div>
</body>
</html>
