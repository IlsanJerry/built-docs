<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Functional Tests for Plugins
        | Kibana Guide [7.0]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Kibana Guide [7.0]" /><link rel="up" href="plugin-development.html" title="Plugin Development" /><link rel="prev" href="development-uiexports.html" title="UI Exports" /><link rel="next" href="development-plugin-localization.html" title="Localization for plugins" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Kibana/Reference/7.0" /><meta name="DC.subject" content="Kibana" /><meta name="DC.identifier" content="7.0" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana Guide
      [7.0]
    </a></span> » <span class="breadcrumb-link"><a href="development.html">Contributing to Kibana</a></span> » <span class="breadcrumb-link"><a href="plugin-development.html">Plugin Development</a></span> » <span class="breadcrumb-node">Functional Tests for Plugins</span></div><div class="navheader"><span class="prev"><a href="development-uiexports.html">
              « 
              UI Exports</a>
           
        </span><span class="next">
           
          <a href="development-plugin-localization.html">Localization for plugins
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="development-plugin-functional-tests"></a>Functional Tests for Plugins<a href="https://github.com/elastic/kibana/edit/7.0/docs/development/plugin/development-plugin-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Plugins use the <code class="literal">FunctionalTestRunner</code> by running it out of the Kibana repo. Ensure that your Kibana Development Environment is setup properly before continuing.</p><h4><a id="_writing_your_own_configuration"></a>Writing your own configuration<a href="https://github.com/elastic/kibana/edit/7.0/docs/development/plugin/development-plugin-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Every project or plugin should have its own <code class="literal">FunctionalTestRunner</code> config file. Just like Kibana’s, this config file will define all of the test files to load, providers for Services and PageObjects, as well as configuration options for certain services.</p><p>To get started copy and paste this example to <code class="literal">test/functional/config.js</code>:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">import { resolve } from 'path';
import { resolveKibanaPath } from '@kbn/plugin-helpers';

import { MyServiceProvider } from './services/my_service';
import { MyAppPageProvider } from './services/my_app_page';

// the default export of config files must be a config provider
// that returns an object with the projects config values
export default async function ({ readConfigFile }) {

  // read the Kibana config file so that we can utilize some of
  // its services and PageObjects
  const kibanaConfig = await readConfigFile(resolveKibanaPath('test/functional/config.js'));

  return {
    // list paths to the files that contain your plugins tests
    testFiles: [
      resolve(__dirname, './my_test_file.js'),
    ],

    // define the name and providers for services that should be
    // available to your tests. If you don't specify anything here
    // only the built-in services will be available
    services: {
      ...kibanaConfig.get('services'),
      myService: MyServiceProvider,
    },

    // just like services, PageObjects are defined as a map of
    // names to Providers. Merge in Kibana's or pick specific ones
    pageObjects: {
      management: kibanaConfig.get('pageObjects.management'),
      myApp: MyAppPageProvider,
    },

    // the apps section defines the urls that
    // `PageObjects.common.navigateTo(appKey)` will use.
    // Merge urls for your plugin with the urls defined in
    // Kibana's config in order to use this helper
    apps: {
      ...kibanaConfig.get('apps'),
      myApp: {
        pathname: '/app/my_app',
      }
    },

    // choose where esArchiver should load archives from
    esArchiver: {
      directory: resolve(__dirname, './es_archives'),
    },

    // choose where screenshots should be saved
    screenshots: {
      directory: resolve(__dirname, './tmp/screenshots'),
    }

    // more settings, like timeouts, mochaOpts, etc are
    // defined in the config schema. See {blob}src/functional_test_runner/lib/config/schema.js[src/functional_test_runner/lib/config/schema.js]
  };
}</pre></div><p>From the root of your repo you should now be able to run the <code class="literal">FunctionalTestRunner</code> script from your plugin project.</p><div class="pre_wrapper lang-shell"><pre class="programlisting prettyprint lang-shell">node ../../kibana/scripts/functional_test_runner</pre></div><h4><a id="_using_esarchiver"></a>Using esArchiver<a href="https://github.com/elastic/kibana/edit/7.0/docs/development/plugin/development-plugin-functional-tests.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>We’re working on documentation for this, but for now the best place to look is the original <a class="ulink" href="https://github.com/elastic/kibana/pull/10359" target="_top">pull request</a>.</p></div><div class="navfooter"><span class="prev"><a href="development-uiexports.html">
              « 
              UI Exports</a>
           
        </span><span class="next">
           
          <a href="development-plugin-localization.html">Localization for plugins
               »
            </a></span></div></body></html>
