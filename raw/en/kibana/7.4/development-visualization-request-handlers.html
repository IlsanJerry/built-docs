<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Visualization Request Handlers
        | Kibana User Guide [7.4]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Kibana User Guide [7.4]" /><link rel="up" href="development-visualize-index.html" title="Developing Visualizations" /><link rel="prev" href="development-vis-editors.html" title="Visualization Editors" /><link rel="next" href="development-visualization-response-handlers.html" title="Visualization Response Handlers" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Kibana/Reference/7.4" /><meta xmlns="" name="DC.subject" content="Kibana" /><meta xmlns="" name="DC.identifier" content="7.4" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [7.4]
    </a></span> » <span class="breadcrumb-link"><a href="development.html">Contributing to Kibana</a></span> » <span class="breadcrumb-link"><a href="development-visualize-index.html">Developing Visualizations</a></span> » <span class="breadcrumb-node">Visualization Request Handlers</span></div><div xmlns="" class="navheader"><span class="prev"><a href="development-vis-editors.html">
              « 
              Visualization Editors</a>
           
        </span><span class="next">
           
          <a href="development-visualization-response-handlers.html">Visualization Response Handlers
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="development-visualization-request-handlers"></a>Visualization Request Handlers<a xmlns="" href="https://github.com/elastic/kibana/edit/7.4/docs/development/visualize/development-create-visualization.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Request handler gets called when one of the following keys on AppState change:
<code class="literal">vis</code>, <code class="literal">query</code>, <code class="literal">filters</code> or <code class="literal">uiState</code> and when timepicker is updated. On top
of that it will also get called on force refresh.</p><p>By default visualizations will use the <code class="literal">courier</code> request handler. They can also choose to use any of the other provided
request handlers. It is also possible to define your own request handler
(which you can then register to be used by other visualizations).</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="development-default-request-handler"></a>courier request handler<a xmlns="" href="https://github.com/elastic/kibana/edit/7.4/docs/development/visualize/development-create-visualization.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><span class="emphasis"><em>courier</em></span> is the default request handler which works with the <span class="emphasis"><em>default</em></span> side bar editor.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="development-none-request-handler"></a><code class="literal">none</code> request handler<a xmlns="" href="https://github.com/elastic/kibana/edit/7.4/docs/development/visualize/development-create-visualization.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Using <span class="emphasis"><em>none</em></span> as your request handles means your visualization does not require any data to be requested.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="development-custom-request-handler"></a>custom request handler<a xmlns="" href="https://github.com/elastic/kibana/edit/7.4/docs/development/visualize/development-create-visualization.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>You can define your custom request handler by providing a function with the following signature:
<code class="literal">function (vis, { uiState, appState, timeRange }) { ... }</code></p><p>The <code class="literal">timeRange</code> will be an object with a <code class="literal">from</code> and <code class="literal">to</code> key, that can contain
datemath expressions, like <code class="literal">now-7d</code>. You can use the <code class="literal">datemath</code> library to parse
them.</p><p>This function must return a promise, which should get resolved with new data that will be passed to responseHandler.</p><p>It’s up to function to decide when it wants to issue a new request or return previous data
(if none of the objects relevant to the request handler changed).</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">import { VisFactoryProvider } from 'ui/vis/vis_factory';

const myRequestHandler = async (vis, { appState, uiState, timeRange }) =&gt; {
  const data = ... parse ...
  return data;
};

const MyNewVisType = (Private) =&gt; {
  const VisFactory = Private(VisFactoryProvider);

  return VisFactory.createAngularVisualization({
    name: 'my_new_vis',
    title: 'My New Vis',
    icon: 'my_icon',
    description: 'Cool new chart',
    requestHandler: myRequestHandler
  });
}

VisTypesRegistryProvider.register(MyNewVisType);</pre></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="development-vis-editors.html">
              « 
              Visualization Editors</a>
           
        </span><span class="next">
           
          <a href="development-visualization-response-handlers.html">Visualization Response Handlers
               »
            </a></span></div></body></html>