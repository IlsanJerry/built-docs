<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Index Management | Kibana Guide [master] | Elastic</title>
<link rel="home" href="index.html" title="Kibana Guide [master]"/>
<link rel="up" href="management.html" title="Stack Management"/>
<link rel="prev" href="managing-beats.html" title="Beats Central Management"/>
<link rel="next" href="ingest-node-pipelines.html" title="Ingest Node Pipelines"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/master"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Kibana Guide [master]</a></span>
»
<span class="breadcrumb-link"><a href="management.html">Stack Management</a></span>
»
<span class="breadcrumb-node">Index Management</span>
</div>
<div class="navheader">
<span class="prev">
<a href="managing-beats.html">« Beats Central Management</a>
</span>
<span class="next">
<a href="ingest-node-pipelines.html">Ingest Node Pipelines »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="managing-indices"></a>Index Management<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/management/managing-indices.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p><span class="strong strong"><strong>Index Management</strong></span> features are an easy, convenient way to manage your
Elasticsearch cluster&#8217;s indices, data streams, and index templates. Practicing good index
management ensures your data is stored correctly and in the most cost-effective
way possible.</p>
<h3><a id="_what_youll_learn"></a>What you&#8217;ll learn<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/management/managing-indices.asciidoc">edit</a></h3>
<p>This page shows you how to use <span class="strong strong"><strong>Index Management</strong></span> features to:</p>
<p>To manage your indices, open the main menu, then click <span class="strong strong"><strong>Stack Management &gt; Index Management</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/management_index_labels.png" alt="Index Management UI">
</div>
</div>
<h3><a id="_before_you_start"></a>Before you start<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/management/managing-indices.asciidoc">edit</a></h3>
<p>Before using this feature, you should be familiar with index management
operations. Refer to the <a href="/guide/en/elasticsearch/reference/master/indices.html" class="ulink" target="_top">index management APIs</a>, the
<a href="/guide/en/elasticsearch/reference/master/indices-templates.html" class="ulink" target="_top">index template APIs</a>, and the
<a href="/guide/en/elasticsearch/reference/master/data-streams.html" class="ulink" target="_top">data streams documentation</a>.</p>
<h3><a id="_required_permissions"></a>Required permissions<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/management/managing-indices.asciidoc">edit</a></h3>
<p>The minimum required permissions to access <span class="strong strong"><strong>Index Management</strong></span> are
the <code class="literal">monitor</code> cluster privilege and the <code class="literal">view_index_metadata</code>
and <code class="literal">manage</code> index privileges to view the data.
For index templates, you must have the <code class="literal">manage_index_templates</code> cluster privilege.
See <a href="/guide/en/elasticsearch/reference/master/security-privileges.html" class="ulink" target="_top">Security privileges</a> for more
information.</p>
<p>You can add these privileges in <span class="strong strong"><strong>Stack Management &gt; Security &gt; Roles</strong></span>.</p>
<h3><a id="_view_and_edit_indices"></a>View and edit indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/management/managing-indices.asciidoc">edit</a></h3>
<p>When you open <span class="strong strong"><strong>Index Management</strong></span>, you’re presented an overview of your configured indices.
Badges indicate if an index is <a href="/guide/en/elasticsearch/reference/master/frozen-indices.html" class="ulink" target="_top">frozen</a>,
a <a href="/guide/en/elasticsearch/reference/master/ccr-put-follow.html" class="ulink" target="_top">follower index</a>,
or a <a href="/guide/en/elasticsearch/reference/master/rollup-get-rollup-index-caps.html" class="ulink" target="_top">rollup index</a>.</p>
<p>Clicking a badge narrows the list to only indices of that type.
You can also filter your indices using the search bar.</p>
<p>You can drill down into each index to investigate the index
<a href="/guide/en/elasticsearch/reference/master/index-modules.html#index-modules-settings" class="ulink" target="_top">settings</a>, <a href="/guide/en/elasticsearch/reference/master/mapping.html" class="ulink" target="_top">mapping</a>, and statistics.
From this view, you can also edit the index settings.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/management_index_details.png" alt="Index Management UI">
</div>
</div>
<h3><a id="_perform_index_level_operations"></a>Perform index-level operations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/management/managing-indices.asciidoc">edit</a></h3>
<p>Use the <span class="strong strong"><strong>Manage</strong></span> menu to perform index-level operations. This menu
is available in the index details view, or when you select the checkbox of one or more
indices on the overview page. The menu includes the following actions:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<span class="strong strong"><strong>Close index</strong></span>. Blocks the index from read/write operations.
A closed index exists in the cluster, but doesn&#8217;t consume resources
other than disk space. If you reopen a closed index, it goes through the
normal recovery process.
</li>
<li class="listitem">
<span class="strong strong"><strong>Force merge index</strong></span>. Reduces the number of segments in your shard by
merging smaller files and clearing deleted ones. Only force merge a read-only index.
</li>
<li class="listitem">
<span class="strong strong"><strong>Refresh index</strong></span>. Writes the operations in the indexing buffer to the
filesystem cache. This action is automatically performed once per second. Forcing a manual
refresh is useful during testing, but should not be routinely done in
production because it has a performance impact.
</li>
<li class="listitem">
<span class="strong strong"><strong>Clear index cache</strong></span>. Clears all caches associated with the index.
</li>
<li class="listitem">
<span class="strong strong"><strong>Flush index</strong></span>. Frees memory by syncing the filesystem cache to disk and
clearing the cache. Once the sync is complete, the internal transaction log is reset.
</li>
<li class="listitem">
<span class="strong strong"><strong>Freeze index</strong></span>. Makes the index read-only and reduces its memory footprint
by moving shards to disk. Frozen indices remain
searchable, but queries take longer.
</li>
<li class="listitem">
<span class="strong strong"><strong>Delete index</strong></span>. Permanently removes the index and all of its documents.
</li>
<li class="listitem">
<span class="strong strong"><strong>Add lifecycle policy</strong></span>. Specifies a policy for managing the lifecycle of the
index.
</li>
</ul>
</div>
<h3><a id="manage-data-streams"></a>Manage data streams<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/management/managing-indices.asciidoc">edit</a></h3>
<p>A <a href="/guide/en/elasticsearch/reference/master/data-streams.html" class="ulink" target="_top">data stream</a> lets you store time series data across
multiple backing indices while giving you a single named resource to use in
requests. The <span class="strong strong"><strong>Data Streams</strong></span> view lists your data streams and lets you examine
or delete them.</p>
<p>To view more information about a data stream, such as its generation or its
current index lifecycle policy, click the stream&#8217;s name.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/management_index_data_stream_stats.png" alt="Data stream details">
</div>
</div>
<p>To view information about the stream&#8217;s backing indices, click the number in the
<span class="strong strong"><strong>Indices</strong></span> column.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/management_index_data_stream_backing_index.png" alt="Backing index">
</div>
</div>
<h3><a id="manage-index-templates"></a>Manage index templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/management/managing-indices.asciidoc">edit</a></h3>
<p>An index template defines <a href="/guide/en/elasticsearch/reference/master/index-modules.html#index-modules-settings" class="ulink" target="_top">settings</a>,
<a href="/guide/en/elasticsearch/reference/master/mapping.html" class="ulink" target="_top">mappings</a>, and <a href="/guide/en/elasticsearch/reference/master/indices-add-alias.html" class="ulink" target="_top">aliases</a>
that you can automatically apply when creating a new index. Elasticsearch applies a
template to a new index based on an index pattern that matches the index name.</p>
<p>The <span class="strong strong"><strong>Index Templates</strong></span> view lists your templates and enables you to examine, edit, clone, and
delete them. Changes you make to an index template
do not affect existing indices.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/management-index-templates.png" alt="Index templates">
</div>
</div>
<p>If you don&#8217;t have any templates, you can create one using the <span class="strong strong"><strong>Create template</strong></span> wizard.
Index templates are applied during index creation,
so you must create the
template before you create the indices.</p>
<h4><a id="_try_it_create_an_index_template"></a>Try it: Create an index template<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/management/managing-indices.asciidoc">edit</a></h4>
<p>In this tutorial, you’ll create an index template for randomly generated log
files. You&#8217;ll then use the template to configure two new indices.</p>
<p><span class="strong strong"><strong>Step 1. Add a name and index pattern</strong></span></p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>In the <span class="strong strong"><strong>Index Templates</strong></span> view, open the <span class="strong strong"><strong>Create template</strong></span> wizard.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/management_index_create_wizard.png" alt="Create wizard">
</div>
</div>
</li>
<li class="listitem">
In the <span class="strong strong"><strong>Name</strong></span> field, enter <code class="literal">my-index-template</code>.
</li>
<li class="listitem">
Set <span class="strong strong"><strong>Index pattern</strong></span> to <code class="literal">my-index-*</code> so the template matches any index
with that index pattern.
</li>
<li class="listitem">
Leave <span class="strong strong"><strong>Data Stream</strong></span>, <span class="strong strong"><strong>Priority</strong></span>, <span class="strong strong"><strong>Version</strong></span>, and <span class="strong strong"><strong>_meta field</strong></span> as-is or blank.
</li>
<li class="listitem">
Click <span class="strong strong"><strong>Next</strong></span>.
</li>
</ol>
</div>
<p><span class="strong strong"><strong>Step 2. Add settings, mappings, and index aliases</strong></span></p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Add component templates to your index template.</p>
<p><a href="/guide/en/elasticsearch/reference/master/indices-component-template.html" class="ulink" target="_top">Component templates</a> are pre-configured
sets of mappings, index settings, and index aliases you can reuse across
multiple index templates. Badges indicate whether a component template contains
mappings (<span class="strong strong"><strong>M</strong></span>), index settings (<span class="strong strong"><strong>S</strong></span>), index aliases (<span class="strong strong"><strong>A</strong></span>), or a combination of
the three.</p>
<p>Component templates are optional. For this tutorial, do not add any component
templates.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/management_index_component_template.png" alt="Component templates page">
</div>
</div>
</li>
<li class="listitem">
Define index settings. These are optional. For this tutorial, leave this
section blank.
</li>
<li class="listitem">
<p>Define a mapping that contains an object field named <code class="literal">geo</code> with a child
geo-point field named <code class="literal">coordinates</code>:</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/management-index-templates-mappings.png" alt="Mapped fields page">
</div>
</div>
<p>Alternatively, you can click the <span class="strong strong"><strong>Load JSON</strong></span> link and define the mapping as JSON:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">{
  "properties": {
    "geo": {
      "properties": {
        "coordinates": {
          "type": "geo_point"
        }
      }
    }
  }
}</pre>
</div>
<p>You can create additional mapping configurations in the <span class="strong strong"><strong>Dynamic templates</strong></span> and
<span class="strong strong"><strong>Advanced options</strong></span> tabs. No additional mappings are required for this tutorial.</p>
</li>
<li class="listitem">
<p>Define an index alias named <code class="literal">my-index</code>:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">{
  "my-index": {}
}</pre>
</div>
</li>
<li class="listitem">
On the review page, check the summary. If everything looks right, click
<span class="strong strong"><strong>Create template</strong></span>.
</li>
</ol>
</div>
<p><span class="strong strong"><strong>Step 3. Create new indices</strong></span></p>
<p>You’re now ready to load the logs data and create new indices using your index
template.</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>In the Kibana <span class="strong strong"><strong>Console</strong></span>, index the following documents:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">POST /my-index-000001/_doc
{
  "@timestamp": "2019-05-18T15:57:27.541Z",
  "ip": "225.44.217.191",
  "extension": "jpg",
  "response": "200",
  "geo": {
    "coordinates": {
      "lat": 38.53146222,
      "lon": -121.7864906
    }
  },
  "url": "https://media-for-the-masses.theacademyofperformingartsandscience.org/uploads/charles-fullerton.jpg"
}

POST /my-index-000002/_doc
{
  "@timestamp": "2019-05-20T03:44:20.844Z",
  "ip": "198.247.165.49",
  "extension": "php",
  "response": "200",
  "geo": {
    "coordinates": {
      "lat": 37.13189556,
      "lon": -76.4929875
    }
  },
  "memory": 241720,
  "url": "https://theacademyofperformingartsandscience.org/people/type:astronauts/name:laurel-b-clark/profile"
}</pre>
</div>
<p>These requests create two indices: <code class="literal">my-index-000001</code> and <code class="literal">my-index-000002</code>.</p>
</li>
<li class="listitem">
Use the Elasticsearch <a href="/guide/en/elasticsearch/reference/master/indices-get-index.html#indices-get-index" class="ulink" target="_top">get index API</a> to
view one of the newly created indices. The index&#8217;s mappings and alias are
configured automatically based on the template.
</li>
</ol>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="managing-beats.html">« Beats Central Management</a>
</span>
<span class="next">
<a href="ingest-node-pipelines.html">Ingest Node Pipelines »</a>
</span>
</div>
</div>
</body>
</html>
