<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="A reference of the reporting settings administrators configure in kibana.yml.">
<meta name="keywords" content="administrator, reference, setup, reporting">
<title>Upgrade Kibana | Kibana Guide [master] | Elastic</title>
<link rel="home" href="index.html" title="Kibana Guide [master]"/>
<link rel="up" href="setup.html" title="Set up"/>
<link rel="prev" href="connect-to-elasticsearch.html" title="Add data"/>
<link rel="next" href="_upgrading_multiple_kibana_instances.html" title="Upgrading multiple Kibana instances"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/master"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Kibana Guide [master]</a></span>
»
<span class="breadcrumb-link"><a href="setup.html">Set up</a></span>
»
<span class="breadcrumb-node">Upgrade Kibana</span>
</div>
<div class="navheader">
<span class="prev">
<a href="connect-to-elasticsearch.html">« Add data</a>
</span>
<span class="next">
<a href="_upgrading_multiple_kibana_instances.html">Upgrading multiple Kibana instances »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a id="upgrade"></a>Upgrade Kibana<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/main/docs/setup/upgrade.asciidoc">edit</a></h2>
</div></div></div>
<p>To upgrade from 7.16.0 or earlier to 8.2.0,
<span class="strong strong"><strong>you must first upgrade to 7.17</strong></span>, which enables you to use the <span class="strong strong"><strong>Upgrade Assistant</strong></span> to
<a href="/guide/en/elastic-stack/master/upgrading-elastic-stack.html#prepare-to-upgrade" class="ulink" target="_top">prepare for the upgrade</a>.
Before you upgrade, you must resolve all critical issues identified by the <span class="strong strong"><strong>Upgrade Assistant</strong></span>.</p>
<p>Rolling upgrades are unsupported in Kibana. To upgrade,
you must shut down all Kibana instances, install the new software, and restart Kibana.
Upgrading while older Kibana instances are running can cause data loss or upgrade failures.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>When required, Kibana automatically migrates <a class="xref" href="upgrade.html#saved-object-migrations" title="Saved object migrations">saved objects</a>.
In case of an upgrade failure, you can roll back to an
earlier version of Kibana. To roll back, you <span class="strong strong"><strong>must</strong></span> have a
<a href="/guide/en/elasticsearch/reference/master/snapshot-restore.html" class="ulink" target="_top">backup snapshot</a> that includes the <code class="literal">kibana</code> feature
state. By default, snapshots include the <code class="literal">kibana</code> feature state.</p>
</div>
</div>
<p>For more information about upgrading,
refer to <a href="/guide/en/elastic-stack/master/upgrading-elastic-stack.html" class="ulink" target="_top">Upgrading to Elastic 8.2.0.</a></p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>You can upgrade to pre-release versions for testing,
but upgrading from a pre-release to the General Available version is unsupported.
You should use pre-release versions only for testing in a temporary environment.</p>
</div>
</div>
<h2><a id="saved-object-migrations"></a>Saved object migrations<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/main/docs/setup/upgrade/upgrade-migrations.asciidoc">edit</a></h2>
<p>Each time you upgrade Kibana, an upgrade migration is performed to ensure that all <a class="xref" href="managing-saved-objects.html" title="Saved Objects">saved objects</a> are compatible with the new version.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To help you prepare for the upgrade to 8.0.0, 7.17.0 includes an <a href="/guide/en/kibana/7.17/upgrade-assistant.html" class="ulink" target="_top"><span class="strong strong"><strong>Upgrade Assistant</strong></span></a>.
To access the assistant, go to <span class="strong strong"><strong>Stack Management &gt; Upgrade Assistant</strong></span>.</p>
</div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Kibana 7.12.0 and later uses a new migration process and index naming scheme. Before you upgrade, read the documentation for your version of Kibana.</p>
</div>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>The following instructions assumes Kibana is using the default index names. If the <code class="literal">kibana.index</code> or <code class="literal">xpack.tasks.index</code> configuration settings are different from the default, adapt the instructions accordingly.</p>
</div>
</div>
<h3><a id="upgrade-migrations-process"></a>Background<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/main/docs/setup/upgrade/upgrade-migrations.asciidoc">edit</a></h3>
<p>Saved objects are stored in two indices:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">.kibana_{kibana_version}_001</code>, e.g. for Kibana 7.12.0 <code class="literal">.kibana_7.12.0_001</code>.
</li>
<li class="listitem">
<code class="literal">.kibana_task_manager_{kibana_version}_001</code>, e.g. for Kibana 7.12.0 <code class="literal">.kibana_task_manager_7.12.0_001</code>.
</li>
</ul>
</div>
<p>The index aliases <code class="literal">.kibana</code> and <code class="literal">.kibana_task_manager</code> always point to
the most up-to-date saved object indices.</p>
<p>When you start a new Kibana installation, an upgrade migration is performed before starting plugins or serving HTTP traffic.
Before you upgrade, shut down old nodes to prevent losing acknowledged writes.
To reduce the likelihood of old nodes losing acknowledged writes, Kibana 7.12.0 and later
adds a write block to the outdated index. Table 1 lists the saved objects indices used by previous Kibana versions.</p>
<div class="table">
<p class="title"><strong>Table 1. Saved object indices and aliases per Kibana version</strong></p>
<div class="table-contents">
<table border="1" cellpadding="4px" summary="Saved object indices and aliases per Kibana version">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top">Upgrading from version</th>
<th align="left" valign="top">Outdated index (alias)

<code class="literal">.kibana_task_manager_7.12.0_001</code> (<code class="literal">.kibana_task_manager</code> alias)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>6.5.0 through 7.3.x</p></td>
<td align="left" valign="top"><p><code class="literal">.kibana_N</code> (<code class="literal">.kibana</code> alias)</p></td>
</tr>
<tr>
<td align="left" valign="top"><p>7.4.0 through 7.11.x</p></td>
<td align="left" valign="top"><p><code class="literal">.kibana_N</code> (<code class="literal">.kibana</code> alias)</p>
<p><code class="literal">.kibana_task_manager_N</code> (<code class="literal">.kibana_task_manager</code> alias)</p></td>
</tr>
</tbody>
</table>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="connect-to-elasticsearch.html">« Add data</a>
</span>
<span class="next">
<a href="_upgrading_multiple_kibana_instances.html">Upgrading multiple Kibana instances »</a>
</span>
</div>
</div>
</body>
</html>
