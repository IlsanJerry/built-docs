<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Encrypting communications in Kibana | Kibana Guide [master] | Elastic</title>
<link rel="home" href="index.html" title="Kibana Guide [master]"/>
<link rel="up" href="using-kibana-with-security.html" title="Configuring security in Kibana"/>
<link rel="prev" href="kibana-authentication.html" title="Authentication in Kibana"/>
<link rel="next" href="xpack-security-audit-logging.html" title="Audit Logging"/>
<meta name="DC.type" content="Learn/Docs/Kibana/Reference/master"/>
<meta name="DC.subject" content="Kibana"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Kibana Guide [master]</a></span>
»
<span class="breadcrumb-link"><a href="setup.html">Set Up Kibana</a></span>
»
<span class="breadcrumb-link"><a href="using-kibana-with-security.html">Configuring security in Kibana</a></span>
»
<span class="breadcrumb-node">Encrypting communications in Kibana</span>
</div>
<div class="navheader">
<span class="prev">
<a href="kibana-authentication.html">« Authentication in Kibana</a>
</span>
<span class="next">
<a href="xpack-security-audit-logging.html">Audit Logging »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="configuring-tls"></a>Encrypting communications in Kibana<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/user/security/securing-communications/index.asciidoc">edit</a></h2>
</div></div></div>

<p>Kibana supports Transport Layer Security (TLS/SSL) encryption for all forms of data-in-transit. Browsers send traffic to Kibana and Kibana
sends traffic to Elasticsearch. These communications are configured separately.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="configuring-tls-browser-kib"></a>Encrypting traffic between the browser and Kibana<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/user/security/securing-communications/index.asciidoc">edit</a></h3>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>You do not need to enable security features for this type of encryption.</p>
</div>
</div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Obtain a server certificate and private key for Kibana.</p>
<p>Kibana supports certificates/keys in both PKCS #12 key stores and PEM format.</p>
<p>When you obtain a certificate, you must do at least one of the following:</p>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
Set the certificate&#8217;s <code class="literal">subjectAltName</code> to the hostname, fully-qualified domain name (FQDN), or IP address of the Kibana server.
</li>
<li class="listitem">
Set the certificate&#8217;s Common Name (CN) to the Kibana server&#8217;s hostname or FQDN. Using the server&#8217;s IP address as the CN does not work.
</li>
</ol>
</div>
<p>You may choose to generate a certificate and private key using <a href="/guide/en/elasticsearch/reference/master/certutil.html" class="ulink" target="_top">the Elasticsearch certutil tool</a>. If you already used certutil to
generate a certificate authority (CA), you would generate a certificate/key for Kibana like so (using the <code class="literal">--dns</code> param to set the
<code class="literal">subjectAltName</code>):</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-certutil cert --ca elastic-stack-ca.p12 --name kibana --dns localhost</pre>
</div>
<p>This will generate a certificate and private key in a PKCS #12 keystore named <code class="literal">kibana.p12</code>.</p>
</li>
<li class="listitem">
<p>Enable TLS/SSL in <code class="literal">kibana.yml</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">server.ssl.enabled: true</pre>
</div>
</li>
<li class="listitem">
<p>Specify your server certificate and private key in <code class="literal">kibana.yml</code>:</p>
<p>If your certificate and private key are in a PKCS #12 keystore, specify it like so:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">server.ssl.keystore.path: "/path/to/your/keystore.p12"
server.ssl.keystore.password: "optional decryption password"</pre>
</div>
<p>Otherwise, if your certificate/key are in PEM format, specify them like so:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">server.ssl.certificate: "/path/to/your/server.crt"
server.ssl.key: "/path/to/your/server.key"
server.ssl.keyPassphrase: "optional decryption password"</pre>
</div>
<p>After making these changes, you must always access Kibana via HTTPS. For example,
<a href="https://localhost:5601" class="ulink" target="_top">https://localhost:5601</a>.</p>
<p>For more information, see <a class="xref" href="settings.html" title="Configuring Kibana">Kibana configuration settings</a>.</p>
</li>
</ol>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="configuring-tls-kib-es"></a>Encrypting traffic between Kibana and Elasticsearch<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/kibana/edit/master/docs/user/security/securing-communications/index.asciidoc">edit</a></h3>
</div></div></div>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>To perform this step, you must
<a href="/guide/en/elasticsearch/reference/master/configuring-security.html" class="ulink" target="_top">enable the Elasticsearch security features</a> or you
must have a proxy that provides an HTTPS endpoint for Elasticsearch.</p>
</div>
</div>
<div class="olist orderedlist">
<ol class="orderedlist">
<li class="listitem">
<p>Specify the HTTPS URL in the <code class="literal">elasticsearch.hosts</code> setting in the Kibana configuration file, <code class="literal">kibana.yml</code>:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">elasticsearch.hosts: ["https://&lt;your_elasticsearch_host&gt;.com:9200"]</pre>
</div>
<p>Using the HTTPS protocol results in a default <code class="literal">elasticsearch.ssl.verificationMode</code> option of <code class="literal">full</code>, which utilizes hostname verification.</p>
<p>For more information, see <a class="xref" href="settings.html" title="Configuring Kibana">Kibana configuration settings</a>.</p>
</li>
<li class="listitem">
<p>Specify the Elasticsearch cluster&#8217;s CA certificate chain in <code class="literal">kibana.yml</code>:</p>
<p>If you are using your own CA to sign certificates for Elasticsearch, then you need to specify the CA certificate chain in Kibana to properly establish
trust in TLS connections. If your CA certificate chain is contained in a PKCS #12 trust store, specify it like so:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">elasticsearch.ssl.truststore.path: "/path/to/your/truststore.p12"
elasticsearch.ssl.truststore.password: "optional decryption password"</pre>
</div>
<p>Otherwise, if your CA certificate chain is in PEM format, specify each certificate like so:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">elasticsearch.ssl.certificateAuthorities: ["/path/to/your/cacert1.pem", "/path/to/your/cacert2.pem"]</pre>
</div>
</li>
<li class="listitem">
(Optional) If the Elastic monitoring features are enabled, configure Kibana to connect to the Elasticsearch monitoring cluster via HTTPS. The steps
are the same as above, but each setting is prefixed by <code class="literal">xpack.monitoring.</code>. For example, <code class="literal">xpack.monitoring.elasticsearch.hosts</code>,
<code class="literal">xpack.monitoring.elasticsearch.ssl.truststore.path</code>, etc.
</li>
</ol>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="kibana-authentication.html">« Authentication in Kibana</a>
</span>
<span class="next">
<a href="xpack-security-audit-logging.html">Audit Logging »</a>
</span>
</div>
</div>
</body>
</html>
