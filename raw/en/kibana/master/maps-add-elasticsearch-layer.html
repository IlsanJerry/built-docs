<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Adding layers for Elasticsearch data
        | Kibana User Guide [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Kibana User Guide [master]" /><link rel="up" href="maps-getting-started.html" title="Getting started with Maps" /><link rel="prev" href="maps-add-choropleth-layer.html" title="Adding a choropleth layer" /><link rel="next" href="maps-save.html" title="Saving the map" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Kibana/Reference/master" /><meta name="DC.subject" content="Kibana" /><meta name="DC.identifier" content="master" /></head><body><div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="maps.html">Maps</a></span> » <span class="breadcrumb-link"><a href="maps-getting-started.html">Getting started with Maps</a></span> » <span class="breadcrumb-node">Adding layers for Elasticsearch data</span></div><div class="navheader"><span class="prev"><a href="maps-add-choropleth-layer.html">
              « 
              Adding a choropleth layer</a>
           
        </span><span class="next">
           
          <a href="maps-save.html">Saving the map
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="maps-add-elasticsearch-layer"></a>Adding layers for Elasticsearch data<a href="https://github.com/elastic/kibana/edit/master/docs/maps/maps-getting-started.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>To avoid overwhelming the user with too much data at once, you’ll add two layers for Elasticsearch data.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The first layer will display individual documents.
The layer will appear when the user zooms in the map to show smaller regions.
</li><li class="listitem">
The second layer will show aggregated data that represents many documents.
The layer will appear when the user zooms out the map to show larger amounts of the globe.
</li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_add_a_vector_layer_from_the_document_source"></a>Add a vector layer from the document source<a href="https://github.com/elastic/kibana/edit/master/docs/maps/maps-getting-started.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>This layer displays web log documents as points.
The layer is only visible when users zoom in the map past zoom level 9.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
In the map legend, click <span class="strong strong"><strong>Add layer</strong></span>.
</li><li class="listitem">
Click the <span class="strong strong"><strong>Documents</strong></span> data source.
</li><li class="listitem">
Set <span class="strong strong"><strong>Index pattern</strong></span> to <span class="strong strong"><strong>kibana_sample_data_logs</strong></span>.
</li><li class="listitem">
Click the <span class="strong strong"><strong>Add layer</strong></span> button.
</li><li class="listitem">
Set <span class="strong strong"><strong>Layer name</strong></span> to <code class="literal">Actual Requests</code>.
</li><li class="listitem">
Set <span class="strong strong"><strong>Zoom range for layer visibility</strong></span> to the range [9, 24].
</li><li class="listitem">
Set <span class="strong strong"><strong>Layer transparency</strong></span> to 1.
</li><li class="listitem">
Set <span class="strong strong"><strong>Fill color</strong></span> to <span class="strong strong"><strong>#2200ff</strong></span>.
</li><li class="listitem"><p class="simpara">
Click <span class="strong strong"><strong>Save &amp; close</strong></span>.
</p><p class="simpara">Your map now looks like this between zoom levels 9 and 24:</p><div class="screenshot informalfigure"><div class="mediaobject"><img src="maps/images/gs_add_es_document_layer.png" alt="maps/images/gs_add_es_document_layer.png" /></div></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_add_a_vector_layer_from_the_grid_aggregation_source"></a>Add a vector layer from the grid aggregation source<a href="https://github.com/elastic/kibana/edit/master/docs/maps/maps-getting-started.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Aggregations group Elasticsearch documents into grids. You can calculate metrics
for each gridded cell.</p><p>You’ll create a layer for aggregated data and make it visible only when the map
is zoomed out past zoom level 9. Darker colors will symbolize grids
with more web log traffic, and lighter colors will symbolize grids with less
traffic. Larger circles will symbolize grids with
more total bytes transferred, and smaller circles will symbolize
grids with less bytes transferred.</p><div class="screenshot informalfigure"><div class="mediaobject"><img src="maps/images/grid_metrics_both.png" alt="maps/images/grid_metrics_both.png" /></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_add_the_layer"></a>Add the layer<a href="https://github.com/elastic/kibana/edit/master/docs/maps/maps-getting-started.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
In the map legend, click <span class="strong strong"><strong>Add layer</strong></span>.
</li><li class="listitem">
Click the <span class="strong strong"><strong>Grid aggregation</strong></span> data source.
</li><li class="listitem">
Set <span class="strong strong"><strong>Index pattern</strong></span> to <span class="strong strong"><strong>kibana_sample_data_logs</strong></span>.
</li><li class="listitem">
Click the <span class="strong strong"><strong>Add layer</strong></span> button.
</li><li class="listitem">
Set <span class="strong strong"><strong>Layer name</strong></span> to <code class="literal">Total Requests and Bytes</code>.
</li><li class="listitem">
Set <span class="strong strong"><strong>Zoom range for layer visibility</strong></span> to the range [0, 9].
</li><li class="listitem">
Set <span class="strong strong"><strong>Layer transparency</strong></span> to 1.
</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_configure_the_aggregation_metrics"></a>Configure the aggregation metrics<a href="https://github.com/elastic/kibana/edit/master/docs/maps/maps-getting-started.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Click plus <span class="inlinemediaobject"><img src="maps/images/gs_plus_icon.png" alt="maps/images/gs_plus_icon.png" /></span> to the right of <span class="strong strong"><strong>Metrics</strong></span> label.
</li><li class="listitem">
Select <span class="strong strong"><strong>Sum</strong></span> in the aggregation select.
</li><li class="listitem">
Select <span class="strong strong"><strong>bytes</strong></span> in the field select.
</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_set_the_vector_style_2"></a>Set the vector style<a href="https://github.com/elastic/kibana/edit/master/docs/maps/maps-getting-started.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
In <span class="strong strong"><strong>Vector style</strong></span>, change <span class="strong strong"><strong>Symbol size</strong></span>:
</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
Set <span class="strong strong"><strong>Min size</strong></span> to 1.
</li><li class="listitem">
Set <span class="strong strong"><strong>Max size</strong></span> to 25.
</li><li class="listitem">
In the field select, select <span class="strong strong"><strong>sum of bytes</strong></span>.
</li></ol></div></li><li class="listitem"><p class="simpara">
Click <span class="strong strong"><strong>Save &amp; close</strong></span> button.
</p><p class="simpara">Your map now looks like this between zoom levels 0 and 9:</p><div class="screenshot informalfigure"><div class="mediaobject"><img src="maps/images/gs_add_es_layer.png" alt="maps/images/gs_add_es_layer.png" /></div></div></li></ol></div></div></div></div><div class="navfooter"><span class="prev"><a href="maps-add-choropleth-layer.html">
              « 
              Adding a choropleth layer</a>
           
        </span><span class="next">
           
          <a href="maps-save.html">Saving the map
               »
            </a></span></div></body></html>
