<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Overview | Elasticsearch Ingest Architectures | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Ingest Architectures"/>
<link rel="up" href="index.html" title="Elasticsearch Ingest Architectures"/>
<link rel="prev" href="index.html" title="Elasticsearch Ingest Architectures"/>
<link rel="next" href="agent-to-es.html" title="Elastic Agent to Elasticsearch"/>
<meta name="DC.type" content="Learn/Docs/Ingest/Reference"/>
<meta name="DC.subject" content="Ingest"/>
<meta name="DC.identifier" content="master"/>
<meta name="robots" content="noindex,nofollow"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span><span class="chevron-right">›</span>
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Ingest Architectures</a></span>
</div>
<div class="navheader">
<span class="prev">
</span>
<span class="next">
<a href="agent-to-es.html">Elastic Agent to Elasticsearch »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="intro-ingest-architectures"></a>Overview<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-arch/intro.asciidoc">edit</a></h1>
</div></div></div>
<h2><a id="use-case-arch"></a>Ingest architectures and use cases<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/ingest-docs/edit/main/docs/en/ingest-arch/arch-list.asciidoc">edit</a></h2>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>The numbers shown in this table correspond to the numbered architectures in the source documents for easier tracking, and will likely be removed before we go live.
This table may not appear in the finished documentation, certainly not in its current raw form.
But for now, it&#8217;s helpful for grouping and quantifying work, and for showing the current set of architectures at a glance.</p>
</div>
</div>
<p><span class="strong strong"><strong>Decision tree</strong></span></p>
<p><a href="/guide/en/cloud/current/ec-cloud-ingest-data.html#ec-data-ingest-pipeline" class="ulink" target="_top">Data ingestion pipeline with decision tree</a></p>
<div class="informaltable">
<table border="1" cellpadding="4px">
<colgroup>
<col class="col_1"/>
<col class="col_2"/>
</colgroup>
<thead>
<tr>
<th align="left" valign="top"><span class="strong strong"><strong>Ingest architecture</strong></span></th>
<th align="left" valign="top"><span class="strong strong"><strong>Use cases and "how to&#8217;s"</strong></span></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p>Elastic Agent to Elasticsearch</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<p>1) Elastic integration is available</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
1a) Software components with agent installed
</li>
<li class="listitem">
1b) Software components with APIs for data collection
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>2) Software components with customizable Elastic integration available</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
2a) Data from syslog server: TCP/UDP (custom)
</li>
<li class="listitem">
2b) Data from scraping an external API: Httpjson (custom)
</li>
<li class="listitem">
2c) Data pushed from external API to HTTP endpoint: Httpinput (custom)
</li>
<li class="listitem">
2d) Data read from disk: Custom logs [category]
</li>
</ul>
</div>
</li>
<li class="listitem">
<p>3) Elastic integration is available and you want to modify schema</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
3a) Runtime fields use cases
</li>
<li class="listitem">
3b) Ingest pipelines use cases
</li>
<li class="listitem">
3c) Agent processors use cases
</li>
</ul>
</div>
</li>
<li class="listitem">
4) Agent needs enrichment (outside the stack or at collection)
</li>
<li class="listitem">
5) Buffer at the edge (with Filebeat disk queue or Metricbeat memory queue). Endpoint is buffered on disk up to 500MB).
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>Application with ECS Logging &#8594; Elastic Agent to Elasticsearch</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
6a) <a href="/guide/en/ecs-logging/overview/current/intro.html" class="ulink" target="_top">Application logging with ECS conformance</a>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>Filebeat modules &#8594; Elasticsearch</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
6b) ToDo: Update doc (which doc???) to point to integrations instead of modules. [KBM: If we&#8217;re pointing to integrations instead of modules, I&#8217;m not sure why this one is here and not listed in the integration section.]
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>Serverless Forwarder &#8594; Elasticsearch</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
7) Details TBD
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>Logstash &#8594; Elasticsearch</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
8) Data from source that Elastic Agent can&#8217;t read (such as databases, AWS Kinesis): Check out <a href="/guide/en/logstash/master/input-plugins.html" class="ulink" target="_top">https://www.elastic.co/guide/en/logstash/master/input-plugins.html</a>.
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>(reference data: Logstash &#8594; Elasticsearch) + Elastic Agent &#8594; Elasticsearch</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
9) Scrape enrichment data from source and send it to the Elasticsearch cluster where data from Elasticsearch is ingested
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>Elastic Agent &#8594; Logstash &#8594; Elasticsearch</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
10) Logstash for enrichment between Elastic Agent and Elasticsearch
</li>
<li class="listitem">
11) Logstash to collect enrichment data based on fields in Elastic Agent data
</li>
<li class="listitem">
12) Logstash persistent queue for buffering (to accomodate network issues and downstream unavailability)
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>Elastic Agent &#8594; Logstash &#8594; [Destination1, additional destinations]</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
13) Agent collected data needs to be routed to different ES clusters or non-ES destinations depending on the content
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>(Data path: Elastic Agent &#8594; Logstash &#8594; Elasticsearch) + (Control path: Elastic Agent &#8594; Fleet Server &#8594; Elasticsearch)</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
14) Agents have network restrictions for connecting outside of agent network: <a href="/guide/en/fleet/current/fleet-agent-proxy-support.html" class="ulink" target="_top">Proxy server with Fleet</a>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>(Data path: Elastic Agent &#8594; Proxy &#8594; Elasticsearch) + (Control path: Elastic Agent &#8594; Proxy + Fleet Server &#8594; Elasticsearch)</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
15) Agents have network restrictions for connecting outside of agent network: <a href="/guide/en/fleet/current/fleet-agent-proxy-support.html" class="ulink" target="_top">Proxy server with Fleet</a>  TODO: Differentiant with #14.
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>Elastic Agent &#8594; Logstash &#8594; Kafka &#8594; Kafka ES Sink &#8594; Elasticsearch</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
16a) Kafka as middleware message queue: Kafka ES sink connector to write from kafka to Elasticsearch
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>Elastic Agent &#8594; Logstash &#8594; Kafka &#8594; Logstash &#8594; Elasticsearch</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
16b) Kafka as middleware message queue: Logstash to read from Kafka and route to Elasticsearch
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>Kafka &#8594; Elasticsearch Sink Connector/Logstash &#8594; Elasticsearch</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
17a) Kafka &#8594; ES Sink Connector &#8594; ES
</li>
<li class="listitem">
17b) Kafka &#8594; Logstash &#8594; ES
</li>
<li class="listitem">
18) Elastic Agent &#8594; Logstash &#8594; Kafka &#8594; ES Sink Connector &#8594; ES
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>Custom Beat to LS input</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
19) When no inputs are available, explore custom beat/logstash input plug-ins (Details TBD)
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td align="left" valign="top"><p>Elastic Agent/Elastic Stack: air gapped environment</p></td>
<td align="left" valign="top">
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
20) Agent, Elastic stack both deployed in air gapped environment with no access to outside network
</li>
</ul>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="navfooter">
<span class="prev">
</span>
<span class="next">
<a href="agent-to-es.html">Elastic Agent to Elasticsearch »</a>
</span>
</div>
</div>
</body>
</html>
