<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Getting started | Ingest Management Guide [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Ingest Management Guide [7.x]"/>
<link rel="up" href="index.html" title="Ingest Management Guide [7.x]"/>
<link rel="prev" href="index.html" title="Ingest Management Guide [7.x]"/>
<link rel="next" href="elastic-agent-installation-configuration.html" title="Manage your Elastic Agents"/>
<meta name="DC.type" content="Learn/Docs/Ingest Management/Guide/7.x"/>
<meta name="DC.subject" content="Ingest Management"/>
<meta name="DC.identifier" content="7.x"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Ingest Management Guide [7.x]</a></span>
»
<span class="breadcrumb-node">Getting started</span>
</div>
<div class="navheader">
<span class="prev">
</span>
<span class="next">
<a href="elastic-agent-installation-configuration.html">Manage your Elastic Agents »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h1 class="title"><a id="ingest-management-getting-started"></a>Getting started<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.x/docs/en/ingest-management/getting-started.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h1>
</div></div></div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p>
</div>
</div>
<p>To use ingest management, you need an Elasticsearch cluster and Kibana (version 7.8 for the experimental release)
with a basic license. See <a href="/guide/en/elastic-stack-get-started/7.x/get-started-elastic-stack.html" class="ulink" target="_top">Getting started with the Elastic Stack</a>.</p>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Since this is an experimental release, it should only be used in a dedicated test environment
that can be deleted when you are done. Please do not enable or use ingest management in a production
environment.</p>
</div>
</div>
<h3><a id="ingest-manager-prereqs"></a>Prerequisites<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.x/docs/en/ingest-management/getting-started.asciidoc">edit</a></h3>
<p>If you want to use ingest management, the following prerequisites have to be met in the Elasticsearch configuration:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Elasticsearch security has to be enabled by setting <code class="literal">xpack.security.enabled</code> to <code class="literal">true</code>.
</li>
<li class="listitem">
API keys have to be enabled in Elasticsearch by setting <code class="literal">xpack.security.authc.api_key.enabled</code> to <code class="literal">true</code>.
</li>
</ul>
</div>
<p>If you use our <a href="/cloud/elasticsearch-service" class="ulink" target="_top">hosted Elasticsearch Service</a> on
Elastic Cloud, these settings will already be enabled.</p>
<p>In this experimental release, ingest management is only available to users with the superuser role. See
<a href="/guide/en/elasticsearch/reference/7.x/built-in-roles.html" class="ulink" target="_top">Built-in roles</a>.</p>
<p>For feedback and questions, please contact us <a href="https://ela.st/ingest-manager-feedback" class="ulink" target="_top">here</a>.</p>
<h3><a id="enable-ingest-management"></a>Step 1: Enable ingest management<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.x/docs/en/ingest-management/getting-started.asciidoc">edit</a></h3>
<p>To enable ingest management, make the following changes to the Kibana configuration:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
set <code class="literal">xpack.ingestManagement.enabled</code> to <code class="literal">true</code>
</li>
</ul>
</div>
<p>If you are using our <a href="/cloud/elasticsearch-service" class="ulink" target="_top">hosted Elasticsearch Service</a> on
Elastic Cloud, you will need to add them to the Kibana user settings as described in
<a href="/guide/en/cloud/current/ec-manage-kibana-settings.html" class="ulink" target="_top">Add Kibana user settings</a>.</p>
<p>If you are using an <span class="strong strong"><strong>on-premises</strong></span> stack deployment, you will need to add them to the Kibana configuration
 as described in <a href="/guide/en/kibana/7.x/ingest-manager-settings-kb.html" class="ulink" target="_top">Ingest Manager settings</a>.</p>
<p>To verify that ingest management has been correctly enabled, login to Kibana, and select
<span class="strong strong"><strong>Management &gt; Ingest Manager</strong></span>. If the menu entry is visible, and you see the following start page
for Ingest Manager, enabling ingest management has been successful.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-start.png" alt="Ingest Manager app in Kibana">
</div>
</div>
<h3><a id="install-integration"></a>Step 2: Install an integration and create a data source<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.x/docs/en/ingest-management/getting-started.asciidoc">edit</a></h3>
<p>ingest management bundles various assets that are needed to ingest and visualize data in <span class="strong strong"><strong>integrations</strong></span>.</p>
<p>In this Guide we assume that you have <code class="literal">nginx</code> running on some of your infrastructure, and want to
collect logs and metrics from it. To do so, first install the <code class="literal">nginx</code> integration provided by Elastic.</p>
<p>In the Ingest Manager app, navigate to <span class="strong strong"><strong>Integrations</strong></span> and use the search bar to find the Nginx integration.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-integrations-nginx.png" alt="Ingest Manager app showing Nginx Integration">
</div>
</div>
<p>Click on the Nginx integration to see more details about it. On the upper right, select <span class="strong strong"><strong>Create data source</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-integrations-nginx-overview.png" alt="Ingest Manager app showing Nginx Integration overview">
</div>
</div>
<p>On the <span class="strong strong"><strong>Add data source</strong></span> screen, click to select the default agent configuration from the list, and scroll down to inspect or change the
default settings that have been set for you. When you&#8217;re done, click <span class="strong strong"><strong>Save data source</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-integrations-nginx-add-datasource.png" alt="Ingest Manager app Add data source screen">
</div>
</div>
<p>Navigate back to the main <span class="strong strong"><strong>Integrations</strong></span> tab and select <span class="strong strong"><strong>Installed Integrations</strong></span>. The Nginx integration has been installed and
should show up in this list. (Note that the <span class="strong strong"><strong>System</strong></span> and <span class="strong strong"><strong>Elastic Endpoint</strong></span> integrations have been installed by default.)</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-integrations-list-installed.png" alt="Ingest Manager app showing installed integrations">
</div>
</div>
<p>Navigate to <span class="strong strong"><strong>Configurations</strong></span> and click on the Default config in the list. On the detail view, the newly created data source should appear in the list. (Note that the <code class="literal">system-1</code> data source has been created by default.)</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-configurations-default-with-nginx.png" alt="Ingest Manager app showing default agent configuration with nginx-1 datasource">
</div>
</div>
<h3><a id="install-run-elastic-agent"></a>Step 3: Install and run Elastic Agent<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.x/docs/en/ingest-management/getting-started.asciidoc">edit</a></h3>
<p>Elastic Agent is a single, unified agent that you can deploy to hosts or containers to collect data and send it to the Elastic Stack. Behind the scenes, Elastic Agent runs the Beats shippers or Endpoint required for your configuration. It can be configured manually or from the Ingest Manager app in Kibana.</p>
<p>To learn how to install Elastic Agent, see the Elastic Agent installation topic.</p>
<h4><a id="agent-standalone-mode"></a>Standalone mode<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.x/docs/en/ingest-management/getting-started.asciidoc">edit</a></h4>
<p>To configure Elastic Agent manually, navigate to <span class="strong strong"><strong>Configurations</strong></span> in the Ingest Manager app and click on the Default config in the list. Then select the <span class="strong strong"><strong>YAML</strong></span> tab to access the configuration for Elastic Agent. Copy the content and put it into a file <code class="literal">elastic-agent-standalone.yml</code> on the system where you have installed Elastic Agent.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-configurations-default-yaml.png" alt="Ingest Manager app showing default agent configuration in YAML format">
</div>
</div>
<p>Please note that the configuration file generated by the Ingest Manager app already contains the correct Elasticsearch address and port for your setup. If you run everything locally, this will be <code class="literal">127.0.0.1:9200</code>. If you are using our <a href="/cloud/elasticsearch-service" class="ulink" target="_top">hosted Elasticsearch Service</a> on
Elastic Cloud, this will correspond to the Elasticsearch endpoint URL that is also available under <span class="strong strong"><strong>Endpoints</strong></span> as described in <a href="/guide/en/cloud/current/ec-working-with-elasticsearch.html" class="ulink" target="_top">Work with Elasticsearch</a>.</p>
<p>You will also have to add your Elasticsearch username and password to the <code class="literal">outputs</code> section in the configuration file:</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">[...]
outputs:
  default:
    type: elasticsearch
    hosts:
      - 'HOST:PORT'
    username: ES_USERNAME
    password: ES_PASSWORD
datasources:
[...]</pre>
</div>
<p>Run Elastic Agent with the command:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">$ ./elastic-agent -c elastic-agent-standalone.yml run</pre>
</div>
<h4><a id="agent-fleet-mode"></a>Fleet mode<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.x/docs/en/ingest-management/getting-started.asciidoc">edit</a></h4>
<p>To use Fleet to configure Elastic Agent, you first need to enable Fleet in the Ingest Manager app. To do so, navigate to the <span class="strong strong"><strong>Fleet</strong></span> tab and click <span class="strong strong"><strong>Create user and enable Fleet</strong></span>.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-fleet-enable.png" alt="Ingest Manager app showing prompt to enable Fleet">
</div>
</div>
<p>On the next page, click on <span class="strong strong"><strong>Enroll new agent</strong></span> to start the enrollment. Select an agent configuration (or stay with the default) and copy the command to enroll the agent from the command line. This line contains your Kibana URL and an enrollment key that has been generated by the Ingest Manager app.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-fleet-enrol.png" alt="Ingest Manager app showing agent enrollment dialog">
</div>
</div>
<p>In the directory where you installed Elastic Agent, paste the copied command to enroll the agent. Please note that this command will overwrite the <code class="literal">elastic-agent.yml</code> file in that directory.</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent enroll KIBANA_URL ENROLLMENT_KEY

The {agent} is currently in Experimental and should not be used in production
This will replace your current settings. Do you want to continue? [Y/n]:</pre>
</div>
<p>After that, run the agent with:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">./elastic-agent run</pre>
</div>
<p>In the Ingest Manager app, click <span class="strong strong"><strong>Continue</strong></span> to get back to the <span class="strong strong"><strong>Fleet</strong></span> tab. This will now show the newly enrolled agent.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-fleet-agents.png" alt="Ingest Manager app showing enrolled agents">
</div>
</div>
<p>When you want to unenroll an agent, choose <span class="strong strong"><strong>Unenroll</strong></span> from the <span class="strong strong"><strong>Actions</strong></span> menu for this agent. This will invalidate the API key the agent is using to connect to Elasticsearch. The Elastic Agent will continue to run, but will not be able to send data, and show this error instead:</p>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">invalid api key to authenticate with fleet</pre>
</div>
<h3><a id="view-data"></a>Step 4: View your data<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/stack-docs/edit/7.x/docs/en/ingest-management/getting-started.asciidoc">edit</a></h3>
<p>Navigate to the <span class="strong strong"><strong>Data streams</strong></span> tab in the Ingest Manager app to inspect the data that is sent by the agent. From the <span class="strong strong"><strong>Actions</strong></span> column you can navigate to the dashboards corresponding to the data type that is sent.</p>
<div class="imageblock screenshot">
<div class="content">
<img src="images/kibana-ingest-manager-datastreams.png" alt="Ingest Manager app showing data streams list">
</div>
</div>
</div>
<div class="navfooter">
<span class="prev">
</span>
<span class="next">
<a href="elastic-agent-installation-configuration.html">Manage your Elastic Agents »</a>
</span>
</div>
</div>
</body>
</html>
