<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Ngrams for Partial Matching
        | Elasticsearch: The Definitive Guide [2.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [2.x]" /><link rel="up" href="partial-matching.html" title="Partial Matching" /><link rel="prev" href="_index_time_optimizations.html" title="Index-Time Optimizations" /><link rel="next" href="_index_time_search_as_you_type.html" title="Index-Time Search-as-You-Type" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/2.x" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="2.x" /><meta xmlns="" name="robots" content="noindex,nofollow" /></head><body><div xmlns="" class="page_header">This information applies to version 2.x of Elasticsearch. For the
most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [2.x]
    </a></span> » <span class="breadcrumb-link"><a href="search-in-depth.html">Search in Depth</a></span> » <span class="breadcrumb-link"><a href="partial-matching.html">Partial Matching</a></span> » <span class="breadcrumb-node">Ngrams for Partial Matching</span></div><div xmlns="" class="navheader"><span class="prev"><a href="_index_time_optimizations.html">
              « 
              Index-Time Optimizations</a>
           
        </span><span class="next">
           
          <a href="_index_time_search_as_you_type.html">Index-Time Search-as-You-Type
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_ngrams_for_partial_matching"></a>Ngrams for Partial Matching<a xmlns="" href="https://github.com/elastic/elasticsearch-definitive-guide/edit/2.x/130_Partial_Matching/30_Ngram_intro.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>As we have said before, “You can find only terms that exist in the inverted
index.” Although the <code class="literal">prefix</code>, <code class="literal">wildcard</code>, and <code class="literal">regexp</code> queries demonstrated that
that is not strictly true, it <span class="emphasis"><em>is</em></span> true that doing a single-term lookup is
much faster than iterating through the terms list to find matching terms on
the fly.<a id="id-1.5.7.16.2.5" class="indexterm"></a>
<a id="id-1.5.7.16.2.6" class="indexterm"></a>
<a id="id-1.5.7.16.2.7" class="indexterm"></a> Preparing your data for partial matching ahead of time will increase
your search performance.</p><p>Preparing your data at index time means choosing the right analysis chain, and
the tool that we use for partial matching is the <span class="emphasis"><em>n-gram</em></span>.<a id="id-1.5.7.16.3.2" class="indexterm"></a> An n-gram can be
best thought of as a <span class="emphasis"><em>moving window on a word</em></span>. The <span class="emphasis"><em>n</em></span> stands for a length.
If we were to n-gram the word <code class="literal">quick</code>, the results would depend on the length
we have chosen:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Length 1 (unigram):    [ <code class="literal">q</code>, <code class="literal">u</code>, <code class="literal">i</code>, <code class="literal">c</code>, <code class="literal">k</code> ]
</li><li class="listitem">
Length 2 (bigram):     [ <code class="literal">qu</code>, <code class="literal">ui</code>, <code class="literal">ic</code>, <code class="literal">ck</code> ]
</li><li class="listitem">
Length 3 (trigram):    [ <code class="literal">qui</code>, <code class="literal">uic</code>, <code class="literal">ick</code> ]
</li><li class="listitem">
Length 4 (four-gram):  [ <code class="literal">quic</code>, <code class="literal">uick</code> ]
</li><li class="listitem">
Length 5 (five-gram):  [ <code class="literal">quick</code> ]
</li></ul></div><p>Plain n-grams are useful for matching <span class="emphasis"><em>somewhere within a word</em></span>, a technique
that we will use in <a class="xref" href="ngrams-compound-words.html" title="Ngrams for Compound Words">Ngrams for Compound Words</a>. However, for search-as-you-type,
we use a specialized form of n-grams called <span class="emphasis"><em>edge n-grams</em></span>. <a id="id-1.5.7.16.5.4" class="indexterm"></a> Edge
n-grams are anchored to the beginning of the word. Edge n-gramming the word
<code class="literal">quick</code> would result in this:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">q</code>
</li><li class="listitem">
<code class="literal">qu</code>
</li><li class="listitem">
<code class="literal">qui</code>
</li><li class="listitem">
<code class="literal">quic</code>
</li><li class="listitem">
<code class="literal">quick</code>
</li></ul></div><p>You may notice that this conforms exactly to the letters that a user searching for “quick” would type. In other words, these are the
perfect terms to use for instant search!</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="_index_time_optimizations.html">
              « 
              Index-Time Optimizations</a>
           
        </span><span class="next">
           
          <a href="_index_time_search_as_you_type.html">Index-Time Search-as-You-Type
               »
            </a></span></div></body></html>