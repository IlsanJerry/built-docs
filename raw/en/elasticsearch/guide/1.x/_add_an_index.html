<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Add an Index
        | Elasticsearch: The Definitive Guide [1.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [1.x]" /><link rel="up" href="distributed-cluster.html" title="Life Inside a Cluster" /><link rel="prev" href="cluster-health.html" title="Cluster Health" /><link rel="next" href="_add_failover.html" title="Add Failover" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/1.x" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="1.x" /><meta xmlns="" name="robots" content="noindex,nofollow" /></head><body><div xmlns="" class="page_header">This information applies to version 1.x of Elasticsearch. For the
most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [1.x]
    </a></span> » <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span> » <span class="breadcrumb-link"><a href="distributed-cluster.html">Life Inside a Cluster</a></span> » <span class="breadcrumb-node">Add an Index</span></div><div xmlns="" class="navheader"><span class="prev"><a href="cluster-health.html">
              « 
              Cluster Health</a>
           
        </span><span class="next">
           
          <a href="_add_failover.html">Add Failover
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_add_an_index"></a>Add an Index<a xmlns="" href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/020_Distributed_Cluster/15_Add_an_index.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>To add data to Elasticsearch, we need an <span class="emphasis"><em>index</em></span>—a place to store related
data.<a id="id-1.4.4.9.2.2" class="indexterm"></a><a id="id-1.4.4.9.2.3" class="indexterm"></a>
<a id="id-1.4.4.9.2.4" class="indexterm"></a>  In reality, an index is just a <span class="emphasis"><em>logical namespace</em></span> that points to
one or more physical <span class="emphasis"><em>shards</em></span>.</p><p>A <span class="emphasis"><em>shard</em></span> is a low-level <span class="emphasis"><em>worker unit</em></span> that holds<a id="id-1.4.4.9.3.3" class="indexterm"></a>
<a id="id-1.4.4.9.3.4" class="indexterm"></a> just a slice of all the
data in the index. In <a class="xref" href="inside-a-shard.html" title="Inside a Shard"><em>Inside a Shard</em></a>, we explain in detail how a
shard works, but for now it is enough to know that a shard is a single
instance of Lucene, and is a complete search engine in its own right. Our
documents are stored and indexed in shards, but our applications don’t talk to
them directly. Instead, they talk to an index.</p><p>Shards are how Elasticsearch distributes data around your cluster. Think of
shards as containers for data. Documents are stored in shards, and shards are
allocated to nodes in your cluster. As your cluster grows or shrinks,
Elasticsearch will automatically migrate shards between nodes so that the
cluster remains balanced.</p><p>A shard can be either a <span class="emphasis"><em>primary</em></span> shard or a <span class="emphasis"><em>replica</em></span> shard.<a id="id-1.4.4.9.5.3" class="indexterm"></a><a id="id-1.4.4.9.5.4" class="indexterm"></a><a id="id-1.4.4.9.5.5" class="indexterm"></a>
<a id="id-1.4.4.9.5.6" class="indexterm"></a> Each document in
your index belongs to a single primary shard, so the number of primary shards
that you have determines the maximum amount of data that your index can hold.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">While a primary shard can technically contain up to Integer.MAX_VALUE - 128 documents,
the practical limit depends on your use case: the hardware you have, the size and
complexity of your documents, how you index and query your documents, and your
expected response times.</p></div></div><p>A replica shard is just a copy of a primary shard.<a id="id-1.4.4.9.7.1" class="indexterm"></a>
<a id="id-1.4.4.9.7.2" class="indexterm"></a> Replicas are used to provide
redundant copies of your data to protect against hardware failure, and to
serve read requests like searching or retrieving a document.</p><p>The number of primary shards in an index is fixed at the time that an index is
created, but the number of replica shards can be changed at any time.</p><p>Let’s create an index called <code class="literal">blogs</code> in our empty one-node cluster.<a id="id-1.4.4.9.9.2" class="indexterm"></a>
<a id="id-1.4.4.9.9.3" class="indexterm"></a> By
default, indices are assigned five primary shards,<a id="id-1.4.4.9.9.4" class="indexterm"></a>
<a id="id-1.4.4.9.9.5" class="indexterm"></a><a id="id-1.4.4.9.9.6" class="indexterm"></a>
<a id="id-1.4.4.9.9.7" class="indexterm"></a> but for the purpose of this
demonstration, we’ll assign just three primary shards and one replica (one replica
of every primary shard):</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /blogs
{
   "settings" : {
      "number_of_shards" : 3,
      "number_of_replicas" : 1
   }
}</pre></div><div xmlns="" class="sense_widget" data-snippet="snippets/020_Distributed_Cluster/15_Add_index.json"></div><p>Our cluster now looks like <a class="xref" href="_add_an_index.html#cluster-one-node" title="Figure 2. A single-node cluster with an index">Figure 2, “A single-node cluster with an index”</a>. All three primary shards have been allocated to <code class="literal">Node 1</code>.</p><div class="figure"><a id="cluster-one-node"></a><p class="title"><strong>Figure 2. A single-node cluster with an index</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/elas_0202.png" alt="A single-node cluster with an index" /></div></div></div><p>If we were to check the
<a class="link" href="cluster-health.html" title="Cluster Health"><code class="literal">cluster-health</code></a> now, <a id="id-1.4.4.9.14.2" class="indexterm"></a>
<a id="id-1.4.4.9.14.3" class="indexterm"></a>we would see this:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
   "cluster_name":          "elasticsearch",
   "status":                "yellow", <a id="CO6-1"></a><i xmlns="" class="conum" data-value="1"></i>
   "timed_out":             false,
   "number_of_nodes":       1,
   "number_of_data_nodes":  1,
   "active_primary_shards": 3,
   "active_shards":         3,
   "relocating_shards":     0,
   "initializing_shards":   0,
   "unassigned_shards":     3 <a id="CO6-2"></a><i xmlns="" class="conum" data-value="2"></i>
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO6-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
Cluster <code class="literal">status</code> is <code class="literal">yellow</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO6-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
Our three replica shards have not been allocated to a node.
</p></td></tr></table></div><p>A cluster health of <code class="literal">yellow</code> means that all <span class="emphasis"><em>primary</em></span> shards are up and
running (the cluster is capable of serving any request successfully) but
not  all <span class="emphasis"><em>replica</em></span> shards are active.  In fact, all three of our replica shards
are currently <code class="literal">unassigned</code>—they haven’t been allocated to a node. It
doesn’t make sense to store copies of the same data on the same node. If we
were to lose that node, we would lose all copies of our data.</p><p>Currently, our cluster is fully functional but at risk of data loss in case of
hardware failure.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="cluster-health.html">
              « 
              Cluster Health</a>
           
        </span><span class="next">
           
          <a href="_add_failover.html">Add Failover
               »
            </a></span></div></body></html>