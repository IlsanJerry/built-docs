<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Logging
        | Elasticsearch: The Definitive Guide [1.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [1.x]" /><link rel="up" href="post_deploy.html" title="Post-Deployment" /><link rel="prev" href="_changing_settings_dynamically.html" title="Changing Settings Dynamically" /><link rel="next" href="indexing-performance.html" title="Indexing Performance Tips" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/1.x" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="1.x" /><meta xmlns="" name="robots" content="noindex,nofollow" /></head><body><div xmlns="" class="page_header">This information applies to version 1.x of Elasticsearch. For the
most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [1.x]
    </a></span> » <span class="breadcrumb-link"><a href="administration.html">Administration, Monitoring, and Deployment</a></span> » <span class="breadcrumb-link"><a href="post_deploy.html">Post-Deployment</a></span> » <span class="breadcrumb-node">Logging</span></div><div xmlns="" class="navheader"><span class="prev"><a href="_changing_settings_dynamically.html">
              « 
              Changing Settings Dynamically</a>
           
        </span><span class="next">
           
          <a href="indexing-performance.html">Indexing Performance Tips
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="logging"></a>Logging<a xmlns="" href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/520_Post_Deployment/20_logging.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Elasticsearch emits a number of logs, which are placed in  <code class="literal">ES_HOME/logs</code>.
The default logging level is <code class="literal">INFO</code>. <a id="id-1.10.5.4.2.3" class="indexterm"></a>
<a id="id-1.10.5.4.2.4" class="indexterm"></a><a id="id-1.10.5.4.2.5" class="indexterm"></a>
<a id="id-1.10.5.4.2.6" class="indexterm"></a> It provides a moderate amount of information,
but is designed to be rather light so that your logs are not enormous.</p><p>When debugging problems, particularly problems with node discovery (since this
often depends on finicky network configurations), it can be helpful to bump
up the logging level to <code class="literal">DEBUG</code>.</p><p>You <span class="emphasis"><em>could</em></span> modify the <code class="literal">logging.yml</code> file and restart your nodes—but that is
both tedious and leads to unnecessary downtime.  Instead, you can update logging
levels through the <code class="literal">cluster-settings</code> API<a id="id-1.10.5.4.4.4" class="indexterm"></a> that we just learned about.</p><p>To do so, take the logger you are interested in and prepend <code class="literal">logger.</code> to it. You can refer to the root logger as <code class="literal">logger._root</code>.</p><p>Let’s turn up the discovery logging:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /_cluster/settings
{
    "transient" : {
        "logger.discovery" : "DEBUG"
    }
}</pre></div><p>While this setting is in effect, Elasticsearch will begin to emit <code class="literal">DEBUG</code>-level
logs for the <code class="literal">discovery</code> module.</p><div xmlns="" class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Avoid <code class="literal">TRACE</code>. It is extremely verbose, to the point where the logs
are no longer useful.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="slowlog"></a>Slowlog<a xmlns="" href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/520_Post_Deployment/20_logging.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>There is another log called the <span class="emphasis"><em>slowlog</em></span>.  The purpose of<a id="id-1.10.5.4.10.2.2" class="indexterm"></a> this log is to catch
queries and indexing requests that take over a certain threshold of time.
It is useful for hunting down user-generated queries that are particularly slow.</p><p>By default, the slowlog is not enabled.  It can be enabled by defining the action
(query, fetch, or index), the level that you want the event logged at (<code class="literal">WARN</code>, <code class="literal">DEBUG</code>,
and so forth) and a time threshold.</p><p>This is an index-level setting, which means it is applied to individual indices:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /my_index/_settings
{
    "index.search.slowlog.threshold.query.warn" : "10s", <a id="CO314-1"></a><i xmlns="" class="conum" data-value="1"></i>
    "index.search.slowlog.threshold.fetch.debug": "500ms", <a id="CO314-2"></a><i xmlns="" class="conum" data-value="2"></i>
    "index.indexing.slowlog.threshold.index.info": "5s" <a id="CO314-3"></a><i xmlns="" class="conum" data-value="3"></i>
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO314-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
Emit a <code class="literal">WARN</code> log when queries are slower than 10s.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO314-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
Emit a <code class="literal">DEBUG</code> log when fetches are slower than 500ms.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO314-3"><i xmlns="" class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
Emit an <code class="literal">INFO</code> log when indexing takes longer than 5s.
</p></td></tr></table></div><p>You can also define these thresholds in your <code class="literal">elasticsearch.yml</code> file.  Indices
that do not have a threshold set will inherit whatever is configured in the
static config.</p><p>Once the thresholds are set, you can toggle the logging level like any other
logger:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /_cluster/settings
{
    "transient" : {
        "logger.index.search.slowlog" : "DEBUG", <a id="CO315-1"></a><i xmlns="" class="conum" data-value="1"></i>
        "logger.index.indexing.slowlog" : "WARN" <a id="CO315-2"></a><i xmlns="" class="conum" data-value="2"></i>
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO315-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
Set the search slowlog to <code class="literal">DEBUG</code> level.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO315-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
Set the indexing slowlog to <code class="literal">WARN</code> level.
</p></td></tr></table></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="_changing_settings_dynamically.html">
              « 
              Changing Settings Dynamically</a>
           
        </span><span class="next">
           
          <a href="indexing-performance.html">Indexing Performance Tips
               »
            </a></span></div></body></html>