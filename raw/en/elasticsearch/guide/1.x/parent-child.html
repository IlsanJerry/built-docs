<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Parent-Child Relationship
        | Elasticsearch: The Definitive Guide [1.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [1.x]" /><link rel="up" href="modeling-your-data.html" title="Modeling Your Data" /><link rel="prev" href="nested-aggregation.html" title="Nested Aggregations" /><link rel="next" href="parent-child-mapping.html" title="Parent-Child Mapping" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/1.x" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="1.x" /><meta xmlns="" name="robots" content="noindex,nofollow" /></head><body><div xmlns="" class="page_header">This information applies to version 1.x of Elasticsearch. For the
most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [1.x]
    </a></span> » <span class="breadcrumb-link"><a href="modeling-your-data.html">Modeling Your Data</a></span> » <span class="breadcrumb-node">Parent-Child Relationship</span></div><div xmlns="" class="navheader"><span class="prev"><a href="nested-aggregation.html">
              « 
              Nested Aggregations</a>
           
        </span><span class="next">
           
          <a href="parent-child-mapping.html">Parent-Child Mapping
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="parent-child"></a>Parent-Child Relationship<a xmlns="" href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/404_Parent_Child/40_Parent_child.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The <span class="emphasis"><em>parent-child</em></span> relationship is <a id="id-1.9.5.2.2" class="indexterm"></a>
<a id="id-1.9.5.2.3" class="indexterm"></a><a id="id-1.9.5.2.4" class="indexterm"></a>similar in nature to the
<a class="link" href="nested-objects.html" title="Nested Objects">nested model</a>: both allow you to associate one entity
with another. <a id="id-1.9.5.2.6" class="indexterm"></a>
<a id="id-1.9.5.2.7" class="indexterm"></a>The difference is that, with nested objects, all entities live
within the same document while, with parent-child, the parent and children
are completely separate documents.</p><p>The parent-child functionality allows you to associate one document type with
another, in a <span class="emphasis"><em>one-to-many</em></span> relationship—one parent to many children.<a id="id-1.9.5.3.2" class="indexterm"></a>   The
advantages that parent-child has over <a class="link" href="nested-objects.html" title="Nested Objects"><code class="literal">nested</code> objects</a> are as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The parent document can be updated without reindexing the children.
</li><li class="listitem">
Child documents can be added, changed, or deleted without affecting either
  the parent or other children. This is especially useful when child documents
  are large in number and need to be added or changed frequently.
</li><li class="listitem">
Child documents can be returned as the results of a search request.
</li></ul></div><p>Elasticsearch maintains a map of which parents are associated with
which children.  It is thanks to this map that query-time joins are fast, but
it does place a limitation on the parent-child relationship: <span class="emphasis"><em>the parent
document and all of its children must live on the same shard</em></span>.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">At the time of going to press, the parent-child ID map is held in memory as
part of <a class="link" href="fielddata.html" title="Fielddata">fielddata</a>.  There are plans afoot to change the default
setting to use <a class="link" href="doc-values.html" title="Doc Values">doc values</a> by default instead.</p></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="nested-aggregation.html">
              « 
              Nested Aggregations</a>
           
        </span><span class="next">
           
          <a href="parent-child-mapping.html">Parent-Child Mapping
               »
            </a></span></div></body></html>