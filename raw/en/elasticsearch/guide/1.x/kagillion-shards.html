<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Kagillion Shards
        | Elasticsearch: The Definitive Guide [1.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [1.x]" /><link rel="up" href="scale.html" title="Designing for Scale" /><link rel="prev" href="overallocation.html" title="Shard Overallocation" /><link rel="next" href="capacity-planning.html" title="Capacity Planning" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/1.x" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="1.x" /><meta xmlns="" name="robots" content="noindex,nofollow" /></head><body><div xmlns="" class="page_header">This information applies to version 1.x of Elasticsearch. For the
most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [1.x]
    </a></span> » <span class="breadcrumb-link"><a href="modeling-your-data.html">Modeling Your Data</a></span> » <span class="breadcrumb-link"><a href="scale.html">Designing for Scale</a></span> » <span class="breadcrumb-node">Kagillion Shards</span></div><div xmlns="" class="navheader"><span class="prev"><a href="overallocation.html">
              « 
              Shard Overallocation</a>
           
        </span><span class="next">
           
          <a href="capacity-planning.html">Capacity Planning
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="kagillion-shards"></a>Kagillion Shards<a xmlns="" href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/410_Scaling/25_Kagillion_shards.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The first thing that new users do when they learn about
<a class="link" href="overallocation.html" title="Shard Overallocation">shard overallocation</a> is<a id="id-1.9.6.9.2.2" class="indexterm"></a>
<a id="id-1.9.6.9.2.3" class="indexterm"></a>
<a id="id-1.9.6.9.2.4" class="indexterm"></a><a id="id-1.9.6.9.2.5" class="indexterm"></a>
<a id="id-1.9.6.9.2.6" class="indexterm"></a>
<a id="id-1.9.6.9.2.7" class="indexterm"></a> to say to themselves:</p><div class="blockquote"><table border="0" class="blockquote" summary="Block quote"><tr><td width="10%" valign="top"> </td><td width="80%" valign="top"><p class="alignmeright alignmeright">I don’t know how big this is going to be, and I can’t change the index size
later on, so to be on the safe side, I’ll just give this index 1,000 shards…</p></td><td width="10%" valign="top"> </td></tr><tr><td width="10%" valign="top"> </td><td colspan="2" align="right" valign="top">--<span class="attribution">
A new user
</span></td></tr></table></div><p>One thousand shards—really? And you don’t think that, perhaps, between now
and the time you need to buy <span class="emphasis"><em>one thousand nodes</em></span>, that you may need to
rethink your data model once or twice and have to reindex?</p><p>A shard is not free.  Remember:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A shard is a Lucene index under the covers, which uses file handles,
    memory, and CPU cycles.
</li><li class="listitem">
Every search request needs to hit a copy of every shard in the index.
    That’s fine if every shard is sitting on a different node, but not if many
    shards have to compete for the same resources.
</li><li class="listitem">
Term statistics, used to calculate relevance, are per shard.  Having a small
    amount of data in many shards leads to poor relevance.
</li></ul></div><div xmlns="" class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">A little overallocation is good. A kagillion shards is bad. It is difficult to
define what constitutes too many shards, as it depends on their size and how
they are being used. A hundred shards that are seldom used may be fine, while
two shards experiencing very heavy usage could be too many. Monitor your nodes
to ensure that they have enough spare capacity to deal with exceptional
conditions.</p></div></div><p>Scaling out should be done in phases.  Build in enough capacity to get to the
next phase. Once you get to the next phase, you have time to think about the
changes you need to make to reach the phase after that.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="overallocation.html">
              « 
              Shard Overallocation</a>
           
        </span><span class="next">
           
          <a href="capacity-planning.html">Capacity Planning
               »
            </a></span></div></body></html>