<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Using Synonyms
        | Elasticsearch: The Definitive Guide [1.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [1.x]" /><link rel="up" href="synonyms.html" title="Synonyms" /><link rel="prev" href="synonyms.html" title="Synonyms" /><link rel="next" href="synonym-formats.html" title="Formatting Synonyms" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/1.x" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="1.x" /><meta xmlns="" name="robots" content="noindex,nofollow" /></head><body><div xmlns="" class="page_header">This information applies to version 1.x of Elasticsearch. For the
most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [1.x]
    </a></span> » <span class="breadcrumb-link"><a href="languages.html">Dealing with Human Language</a></span> » <span class="breadcrumb-link"><a href="synonyms.html">Synonyms</a></span> » <span class="breadcrumb-node">Using Synonyms</span></div><div xmlns="" class="navheader"><span class="prev"><a href="synonyms.html">
              « 
              Synonyms</a>
           
        </span><span class="next">
           
          <a href="synonym-formats.html">Formatting Synonyms
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using-synonyms"></a>Using Synonyms<a xmlns="" href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/260_Synonyms/20_Using_synonyms.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Synonyms can replace existing tokens or<a id="id-1.6.8.9.2.1" class="indexterm"></a>
<a id="id-1.6.8.9.2.2" class="indexterm"></a> be added to the token stream by using the<a id="id-1.6.8.9.2.3" class="indexterm"></a>
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/1.7/analysis-synonym-tokenfilter.html" target="_top"><code class="literal">synonym</code> token filter</a>:</p><div xmlns="" class="pre_wrapper lang-json"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "analysis": {
      "filter": {
        "my_synonym_filter": {
          "type": "synonym", <a id="CO179-1"></a><i xmlns="" class="conum" data-value="1"></i>
          "synonyms": [ <a id="CO179-2"></a><i xmlns="" class="conum" data-value="2"></i>
            "british,english",
            "queen,monarch"
          ]
        }
      },
      "analyzer": {
        "my_synonyms": {
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "my_synonym_filter" <a id="CO179-3"></a><i xmlns="" class="conum" data-value="3"></i>
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO179-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
First, we define a token filter of type <code class="literal">synonym</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO179-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
We discuss synonym formats in <a class="xref" href="synonym-formats.html" title="Formatting Synonyms">Formatting Synonyms</a>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO179-3"><i xmlns="" class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>
Then we create a custom analyzer that uses the <code class="literal">my_synonym_filter</code>.
</p></td></tr></table></div><div xmlns="" class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Synonyms can be specified inline with the <code class="literal">synonyms</code> parameter, or in a
synonyms file that must<a id="id-1.6.8.9.5.1.2" class="indexterm"></a>
<a id="id-1.6.8.9.5.1.3" class="indexterm"></a> be present on every node in the cluster. The path to
the synonyms file should be specified with the <code class="literal">synonyms_path</code> parameter, and
should be either absolute or relative to the Elasticsearch <code class="literal">config</code> directory.
See <a class="xref" href="using-stopwords.html#updating-stopwords" title="Updating Stopwords">Updating Stopwords</a> for techniques that can be used to refresh the
synonyms list.</p></div></div><p>Testing our analyzer with the <code class="literal">analyze</code> API shows the following:</p><div xmlns="" class="pre_wrapper lang-json"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-json">GET /my_index/_analyze?analyzer=my_synonyms
Elizabeth is the English queen</pre></div><div xmlns="" class="pre_wrapper lang-text"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-text">Pos 1: (elizabeth)
Pos 2: (is)
Pos 3: (the)
Pos 4: (british,english) <a id="CO180-1"></a><i xmlns="" class="conum" data-value="1"></i>
Pos 5: (queen,monarch) <a id="CO180-2"></a><i xmlns="" class="conum" data-value="2"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO180-1"><i xmlns="" class="conum" data-value="1"></i></a> <a href="#CO180-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
All synonyms occupy the same position as the original term.
</p></td></tr></table></div><p>A document like this will match queries for any of the following: <code class="literal">English queen</code>,
<code class="literal">British queen</code>, <code class="literal">English monarch</code>, or <code class="literal">British monarch</code>.
Even a phrase query will work, because the position of
each term has been preserved.</p><div xmlns="" class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Using the same <code class="literal">synonym</code> token filter at both index time and search time is
redundant.<a id="id-1.6.8.9.11.1.2" class="indexterm"></a>
<a id="id-1.6.8.9.11.1.3" class="indexterm"></a>  If, at index time, we replace <code class="literal">English</code> with the two terms
<code class="literal">english</code> and <code class="literal">british</code>, then at search time we need to search for only one of
those terms.  Alternatively, if we don’t use synonyms at index time, then at
search time, we would need to convert a query for <code class="literal">English</code> into a query for
<code class="literal">english OR british</code>.</p><p xmlns="http://www.w3.org/1999/xhtml">Whether to do synonym expansion at search or index time can be a difficult
choice.  We will explore the options more in <a class="xref" href="synonyms-expand-or-contract.html" title="Expand or contract">Expand or contract</a>.</p></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="synonyms.html">
              « 
              Synonyms</a>
           
        </span><span class="next">
           
          <a href="synonym-formats.html">Formatting Synonyms
               »
            </a></span></div></body></html>