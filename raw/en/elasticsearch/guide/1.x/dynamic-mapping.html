<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Dynamic Mapping
        | Elasticsearch: The Definitive Guide [1.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [1.x]" /><link rel="up" href="index-management.html" title="Index Management" /><link rel="prev" href="root-object.html" title="The Root Object" /><link rel="next" href="custom-dynamic-mapping.html" title="Customizing Dynamic Mapping" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/1.x" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="1.x" /><meta xmlns="" name="robots" content="noindex,nofollow" /></head><body><div xmlns="" class="page_header">This information applies to version 1.x of Elasticsearch. For the
most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [1.x]
    </a></span> » <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span> » <span class="breadcrumb-link"><a href="index-management.html">Index Management</a></span> » <span class="breadcrumb-node">Dynamic Mapping</span></div><div xmlns="" class="navheader"><span class="prev"><a href="root-object.html">
              « 
              The Root Object</a>
           
        </span><span class="next">
           
          <a href="custom-dynamic-mapping.html">Customizing Dynamic Mapping
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="dynamic-mapping"></a>Dynamic Mapping<a xmlns="" href="https://github.com/elastic/elasticsearch-definitive-guide/edit/1.x/070_Index_Mgmt/35_Dynamic_Mapping.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>When Elasticsearch encounters a previously <a id="id-1.4.12.10.2.1" class="indexterm"></a>
<a id="id-1.4.12.10.2.2" class="indexterm"></a><a id="id-1.4.12.10.2.3" class="indexterm"></a>unknown field in a document, it
uses <a class="link" href="mapping-intro.html" title="Mapping"><span class="emphasis"><em>dynamic mapping</em></span></a> to determine the datatype for the
field and automatically adds the new field to the type mapping.</p><p>Sometimes this is the desired behavior and sometimes it isn’t. Perhaps
you don’t know what fields will be added to your documents later,
but you want them to be indexed automatically.  Perhaps you just want
to ignore them.  Or—especially if you are using Elasticsearch as a
primary data store—perhaps you want unknown fields to throw an exception
to alert you to the problem.</p><p>Fortunately, you can control this behavior<a id="id-1.4.12.10.4.1" class="indexterm"></a> with the <code class="literal">dynamic</code> setting,
which accepts the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">true</code>
</span></dt><dd>
   Add new fields dynamically—the default
</dd><dt><span class="term">
<code class="literal">false</code>
</span></dt><dd>
   Ignore new fields
</dd><dt><span class="term">
<code class="literal">strict</code>
</span></dt><dd>
   Throw an exception if an unknown field is encountered
</dd></dl></div><p>The <code class="literal">dynamic</code> setting may be applied to the root object or to any field
of type <code class="literal">object</code>.  You could set <code class="literal">dynamic</code> to <code class="literal">strict</code> by default,
but enable it just for a specific inner object:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /my_index
{
    "mappings": {
        "my_type": {
            "dynamic":      "strict", <a id="CO33-1"></a><i xmlns="" class="conum" data-value="1"></i>
            "properties": {
                "title":  { "type": "string"},
                "stash":  {
                    "type":     "object",
                    "dynamic":  true <a id="CO33-2"></a><i xmlns="" class="conum" data-value="2"></i>
                }
            }
        }
    }
}</pre></div><div xmlns="" class="sense_widget" data-snippet="snippets/070_Index_Mgmt/35_Dynamic_mapping.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO33-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">my_type</code> object will throw an exception if an unknown field
    is encountered.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO33-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">stash</code> object will create new fields dynamically.
</p></td></tr></table></div><p>With this mapping, you can add new searchable fields into the <code class="literal">stash</code> object:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /my_index/my_type/1
{
    "title":   "This doc adds a new field",
    "stash": { "new_field": "Success!" }
}</pre></div><div xmlns="" class="sense_widget" data-snippet="snippets/070_Index_Mgmt/35_Dynamic_mapping.json"></div><p>But trying to do the same at the top level will fail:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /my_index/my_type/1
{
    "title":     "This throws a StrictDynamicMappingException",
    "new_field": "Fail!"
}</pre></div><div xmlns="" class="sense_widget" data-snippet="snippets/070_Index_Mgmt/35_Dynamic_mapping.json"></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Setting <code class="literal">dynamic</code> to <code class="literal">false</code> doesn’t alter the contents of the <code class="literal">_source</code>
field at all. The <code class="literal">_source</code> will still contain the whole JSON document that
you indexed.  However, any unknown fields will not be added to the mapping and
will not be searchable.</p></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="root-object.html">
              « 
              The Root Object</a>
           
        </span><span class="next">
           
          <a href="custom-dynamic-mapping.html">Customizing Dynamic Mapping
               »
            </a></span></div></body></html>