<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The Unit of Scale
        | Elasticsearch: The Definitive Guide [master]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch: The Definitive Guide [master]" /><link rel="up" href="scale.html" title="Designing for Scale" /><link rel="prev" href="scale.html" title="Designing for Scale" /><link rel="next" href="overallocation.html" title="Shard Overallocation" /><meta name="DC.type" content="Learn/Docs/Legacy/Elasticsearch/Definitive Guide/master" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="master" /><meta name="robots" content="noindex,nofollow" /></head><body><div class="page_header">This information may not apply to the latest version of Elasticsearch.
For the most up to date information, see the current version of the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">
Elasticsearch Reference</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: The Definitive Guide
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="modeling-your-data.html">Modeling Your Data</a></span> » <span class="breadcrumb-link"><a href="scale.html">Designing for Scale</a></span> » <span class="breadcrumb-node">The Unit of Scale</span></div><div class="navheader"><span class="prev"><a href="scale.html">
              « 
              Designing for Scale</a>
           
        </span><span class="next">
           
          <a href="overallocation.html">Shard Overallocation
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="shard-scale"></a>The Unit of Scale<a href="https://github.com/elastic/elasticsearch-definitive-guide/edit/master/410_Scaling/15_Shard.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>In <a class="xref" href="dynamic-indices.html" title="Dynamically Updatable Indices">Dynamically Updatable Indices</a>, we explained that a shard is a <span class="emphasis"><em>Lucene index</em></span> and that
an Elasticsearch index is a collection of shards.<a id="id-1.9.6.7.2.3" class="indexterm"></a>
<a id="id-1.9.6.7.2.4" class="indexterm"></a> Your application talks to an
index, and Elasticsearch routes your requests to the appropriate shards.</p><p>A shard is the <span class="emphasis"><em>unit of scale</em></span>. <a id="id-1.9.6.7.3.2" class="indexterm"></a>
<a id="id-1.9.6.7.3.3" class="indexterm"></a> The smallest index you can have is one with a
single shard. This may be more than sufficient for your needs—​a single
shard can hold a lot of data—​but it limits your ability to scale.</p><p>Imagine that our cluster consists of one node, and in our cluster we have one
index, which has only one shard:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">PUT /my_index
{
  "settings": {
    "number_of_shards":   1, <a id="CO287-1"></a><i class="conum" data-value="1"></i>
    "number_of_replicas": 0
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO287-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>Create an index with one primary shard and zero replica shards.</p></td></tr></table></div><p>This setup may be small, but it serves our current needs and is cheap to run.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>At the moment we are talking about only <span class="emphasis"><em>primary</em></span> shards.<a id="id-1.9.6.7.8.1.2" class="indexterm"></a>  We discuss
<span class="emphasis"><em>replica</em></span> shards in <a class="xref" href="replica-shards.html" title="Replica Shards">Replica Shards</a>.</p></div></div><p>One glorious day, the Internet discovers us, and a single node just can’t keep up with
the traffic.  We decide to add a second node, as per <a class="xref" href="shard-scale.html#img-one-shard" title="Figure 49. An index with one shard has no scale factor">Figure 49, “An index with one shard has no scale factor”</a>. What happens?</p><div class="figure"><a id="img-one-shard"></a><p class="title"><strong>Figure 49. An index with one shard has no scale factor</strong></p><div class="figure-contents"><div class="mediaobject"><img src="images/elas_4401.png" alt="An index with one shard has no scale factor" /></div></div></div><p>The answer is: nothing.  Because we have only one shard, there is nothing to
put on the second node. We can’t increase the number of shards in the index,
because the number of shards is an important element in the algorithm used to
<a class="link" href="routing-value.html" title="Routing a Document to a Shard">route documents to shards</a>:</p><pre class="literallayout">shard = hash(routing) % number_of_primary_shards</pre><p>Our only option now is to reindex our data into a new, bigger index that has
more shards, but that will take time that we can ill afford.  By planning
ahead, we could have avoided this problem completely by <span class="emphasis"><em>overallocating</em></span>.</p></div><div class="navfooter"><span class="prev"><a href="scale.html">
              « 
              Designing for Scale</a>
           
        </span><span class="next">
           
          <a href="overallocation.html">Shard Overallocation
               »
            </a></span></div></body></html>
