<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Testing AWS
        | Elasticsearch Plugins and Integrations [5.3]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Plugins and Integrations [5.3]" /><link rel="up" href="repository-s3.html" title="S3 Repository Plugin" /><link rel="prev" href="repository-s3-repository.html" title="S3 Repository" /><link rel="next" href="repository-hdfs.html" title="Hadoop HDFS Repository Plugin" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Plugins/5.3" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="5.3" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Plugins and Integrations
      [5.3]
    </a></span> » <span class="breadcrumb-link"><a href="repository.html">Snapshot/Restore Repository Plugins</a></span> » <span class="breadcrumb-link"><a href="repository-s3.html">S3 Repository Plugin</a></span> » <span class="breadcrumb-node">Testing AWS</span></div><div class="navheader"><span class="prev"><a href="repository-s3-repository.html">
              « 
              S3 Repository</a>
           
        </span><span class="next">
           
          <a href="repository-hdfs.html">Hadoop HDFS Repository Plugin
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="repository-s3-testing"></a>Testing AWS<a href="https://github.com/elastic/elasticsearch/edit/5.3/docs/plugins/repository-s3.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Integrations tests in this plugin require working AWS configuration and therefore disabled by default. Three buckets
and two iam users have to be created. The first iam user needs access to two buckets in different regions and the final
bucket is exclusive for the other iam user. To enable tests prepare a config file elasticsearch.yml with the following
content:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">cloud:
    aws:
        access_key: AKVAIQBF2RECL7FJWGJQ
        secret_key: vExyMThREXeRMm/b/LRzEB8jWwvzQeXgjqMX+6br

repositories:
    s3:
        bucket: "bucket_name"
        region: "us-west-2"
        private-bucket:
            bucket: &lt;bucket not accessible by default key&gt;
            access_key: &lt;access key&gt;
            secret_key: &lt;secret key&gt;
        remote-bucket:
            bucket: &lt;bucket in other region&gt;
            region: &lt;region&gt;
	external-bucket:
	    bucket: &lt;bucket&gt;
	    access_key: &lt;access key&gt;
	    secret_key: &lt;secret key&gt;
	    endpoint: &lt;endpoint&gt;
	    protocol: &lt;protocol&gt;</pre></div><p>Replace all occurrences of <code class="literal">access_key</code>, <code class="literal">secret_key</code>, <code class="literal">endpoint</code>, <code class="literal">protocol</code>, <code class="literal">bucket</code> and <code class="literal">region</code> with your settings.
Please, note that the test will delete all snapshot/restore related files in the specified buckets.</p><p>To run test:</p><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">mvn -Dtests.aws=true -Dtests.config=/path/to/config/file/elasticsearch.yml clean test</pre></div></div><div class="navfooter"><span class="prev"><a href="repository-s3-repository.html">
              « 
              S3 Repository</a>
           
        </span><span class="next">
           
          <a href="repository-hdfs.html">Hadoop HDFS Repository Plugin
               »
            </a></span></div></body></html>
