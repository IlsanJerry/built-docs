<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">JNA temporary directory not mounted with noexec
        | Elasticsearch Reference [7.4]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [7.4]" /><link rel="up" href="system-config.html" title="Important System Configuration" /><link rel="prev" href="networkaddress-cache-ttl.html" title="DNS cache settings" /><link rel="next" href="bootstrap-checks.html" title="Bootstrap Checks" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.4" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="7.4" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [7.4]
    </a></span> » <span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span> » <span class="breadcrumb-link"><a href="system-config.html">Important System Configuration</a></span> » <span class="breadcrumb-node">JNA temporary directory not mounted with <code xmlns="http://www.w3.org/1999/xhtml" class="literal">noexec</code></span></div><div xmlns="" class="navheader"><span class="prev"><a href="networkaddress-cache-ttl.html">
              « 
              DNS cache settings</a>
           
        </span><span class="next">
           
          <a href="bootstrap-checks.html">Bootstrap Checks
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="executable-jna-tmpdir"></a>JNA temporary directory not mounted with <code class="literal">noexec</code><a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.4/docs/reference/setup/sysconfig/executable-jna-tmpdir.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">This is only relevant for Linux.</p></div></div><p>Elasticsearch uses the Java Native Access (JNA) library for executing some
platform-dependent native code. On Linux, the native code backing this library
is extracted at runtime from the JNA archive. By default, this code is extracted
to the Elasticsearch temporary directory which defaults to a sub-directory of
<code class="literal">/tmp</code>. Alternatively, this location can be controlled with the JVM flag
<code class="literal">-Djna.tmpdir=&lt;path&gt;</code>. As the native library is mapped into the JVM virtual
address space as executable, the underlying mount point of the location that
this code is extracted to must <span class="strong strong"><strong>not</strong></span> be mounted with <code class="literal">noexec</code> as this prevents
the JVM process from being able to map this code as executable. On some hardened
Linux installations this is a default mount option for <code class="literal">/tmp</code>. One indication
that the underlying mount is mounted with <code class="literal">noexec</code> is that at startup JNA will
fail to load with a <code class="literal">java.lang.UnsatisfiedLinkerError</code> exception with a message
along the lines of <code class="literal">failed to map segment from shared object</code>.  Note that the
exception message can differ amongst JVM versions. Additionally, the components
of Elasticsearch that rely on execution of native code via JNA will fail with
messages indicating that it is <code class="literal">because JNA is not available</code>. If you are seeing
such error messages, you must remount the temporary directory used for JNA to
not be mounted with <code class="literal">noexec</code>.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="networkaddress-cache-ttl.html">
              « 
              DNS cache settings</a>
           
        </span><span class="next">
           
          <a href="bootstrap-checks.html">Bootstrap Checks
               »
            </a></span></div></body></html>