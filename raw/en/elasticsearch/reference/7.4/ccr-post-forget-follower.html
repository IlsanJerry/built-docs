<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Forget follower API
        | Elasticsearch Reference [7.4]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [7.4]" /><link rel="up" href="ccr-apis.html" title="Cross-cluster replication APIs" /><link rel="prev" href="ccr-post-unfollow.html" title="Unfollow API" /><link rel="next" href="ccr-get-follow-stats.html" title="Get follower stats API" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.4" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="7.4" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [7.4]
    </a></span> » <span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span> » <span class="breadcrumb-link"><a href="ccr-apis.html">Cross-cluster replication APIs</a></span> » <span class="breadcrumb-node">Forget follower API</span></div><div xmlns="" class="navheader"><span class="prev"><a href="ccr-post-unfollow.html">
              « 
              Unfollow API</a>
           
        </span><span class="next">
           
          <a href="ccr-get-follow-stats.html">Get follower stats API
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="ccr-post-forget-follower"></a>Forget follower API<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.4/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a xmlns="" class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>Removes the follower retention leases from the leader.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ccr-post-forget-follower-request"></a>Request<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.4/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">POST /&lt;leader_index&gt;/_ccr/forget_follower
{
  "follower_cluster" : "&lt;follower_cluster&gt;",
  "follower_index" : "&lt;follower_index&gt;",
  "follower_index_uuid" : "&lt;follower_index_uuid&gt;",
  "leader_remote_cluster" : "&lt;leader_remote_cluster&gt;"
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1159.console"></div><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "failed" : 0,
    "failures" : [ ]
  }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ccr-post-forget-follower-prereqs"></a>Prerequisites<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.4/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">If the Elasticsearch security features are enabled, you must have <code class="literal">manage_leader_index</code>
index privileges for the leader index. For more information, see
<a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/7.4/security-privileges.html" target="_top">Security privileges</a>.</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ccr-post-forget-follower-desc"></a>Description<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.4/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A following index takes out retention leases on its leader index. These
retention leases are used to increase the likelihood that the shards of the
leader index retain the history of operations that the shards of the following
index need to execute replication. When a follower index is converted to a
regular index via the <a class="link" href="ccr-post-unfollow.html" title="Unfollow API">unfollow API</a> (either via explicit
execution of this API, or implicitly via index lifecycle management), these retention leases are
removed. However, removing these retention leases can fail (e.g., if the remote
cluster containing the leader index is unavailable). While these retention
leases will eventually expire on their own, their extended existence can cause
the leader index to hold more history than necessary, and prevent index lifecycle management from
performing some operations on the leader index. This API exists to enable
manually removing these retention leases when the unfollow API was unable to do
so.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">This API does not stop replication by a following index. If you use this
API targeting a follower index that is still actively following, the following
index will add back retention leases on the leader. The only purpose of this API
is to handle the case of failure to remove the following retention leases after
the <a class="link" href="ccr-post-unfollow.html" title="Unfollow API">unfollow API</a> is invoked.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ccr-post-forget-follower-path-parms"></a>Path parameters<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.4/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">&lt;leader_index&gt;</code></span></dt><dd>(Required, string) The name of the leader index.</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ccr-post-forget-follower-request-body"></a>Request body<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.4/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">follower_cluster</code></span></dt><dd>(Required, string) The name of the cluster containing the follower index.</dd><dt><span class="term"><code class="literal">follower_index</code></span></dt><dd>(Required, string) The name of the follower index.</dd><dt><span class="term"><code class="literal">follower_index_uuid</code></span></dt><dd>(Required, string) The UUID of the follower index.</dd><dt><span class="term"><code class="literal">leader_remote_cluster</code></span></dt><dd>(Required, string) The alias (from the perspective of the cluster containing
the follower index) of the <a class="link" href="modules-remote-clusters.html" title="Remote clusters">remote cluster</a>
containing the leader index.</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ccr-post-forget-follower-examples"></a>Examples<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.4/docs/reference/ccr/apis/follow/post-forget-follower.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>This example removes the follower retention leases for <code class="literal">follower_index</code> from
<code class="literal">leader_index</code>.</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">POST /leader_index/_ccr/forget_follower
{
  "follower_cluster" : "follower_cluster",
  "follower_index" : "follower_index",
  "follower_index_uuid" : "vYpnaWPRQB6mNspmoCeYyA",
  "leader_remote_cluster" : "leader_cluster"
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1160.console"></div><p>The API returns the following result:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "failed" : 0,
    "failures" : [ ]
  }
}</pre></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="ccr-post-unfollow.html">
              « 
              Unfollow API</a>
           
        </span><span class="next">
           
          <a href="ccr-get-follow-stats.html">Get follower stats API
               »
            </a></span></div></body></html>