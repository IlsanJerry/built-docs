<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Index shard stores API
        | Elasticsearch Reference [7.5]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Reference [7.5]" /><link rel="up" href="indices.html" title="Index APIs" /><link rel="prev" href="indices-segments.html" title="Index segments API" /><link rel="next" href="indices-stats.html" title="Index stats API" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.5" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="7.5" /></head><body><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [7.5]
    </a></span> » <span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span> » <span class="breadcrumb-link"><a href="indices.html">Index APIs</a></span> » <span class="breadcrumb-node">Index shard stores API</span></div><div class="navheader"><span class="prev"><a href="indices-segments.html">
              « 
              Index segments API</a>
           
        </span><span class="next">
           
          <a href="indices-stats.html">Index stats API
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="indices-shards-stores"></a>Index shard stores API<a href="https://github.com/elastic/elasticsearch/edit/7.5/docs/reference/indices/shard-stores.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Returns store information
about replica shards in one or more indices.</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">GET /twitter/_shard_stores</pre></div><div class="console_widget" data-snippet="snippets/1552.console"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="index-shard-stores-api-request"></a>Request<a href="https://github.com/elastic/elasticsearch/edit/7.5/docs/reference/indices/shard-stores.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><code class="literal">GET /&lt;index&gt;/_shard_stores</code></p><p><code class="literal">GET /_shard_stores</code></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="index-shard-stores-api-desc"></a>Description<a href="https://github.com/elastic/elasticsearch/edit/7.5/docs/reference/indices/shard-stores.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Use the index shard stores API to return store information
about replica shards in one or more indices.</p><p>Returned information includes:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">The node on which each replica shard exists</li><li class="listitem">Allocation ID for each replica shard</li><li class="listitem">Unique ID for each replica shard</li><li class="listitem">Any errors encountered
while opening the shard index
or from an earlier failure</li></ul></div><p>By default, the API only returns store information
for primary shards that are unassigned
or have one or more unassigned replica shards.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="index-shard-stores-api-path-params"></a>Path parameters<a href="https://github.com/elastic/elasticsearch/edit/7.5/docs/reference/indices/shard-stores.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">&lt;index&gt;</code></span></dt><dd><p class="simpara">(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.</p><p class="simpara">To retrieve information for all indices in the cluster,
use a value of <code class="literal">_all</code> or <code class="literal">*</code>
or omit this parameter.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="index-shard-stores-api-query-params"></a>Query parameters<a href="https://github.com/elastic/elasticsearch/edit/7.5/docs/reference/indices/shard-stores.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">allow_no_indices</code></span></dt><dd><p class="simpara">(Optional, boolean) If <code class="literal">true</code>,
the request does <span class="strong strong"><strong>not</strong></span> return an error
if a wildcard expression
or <code class="literal">_all</code> value retrieves only missing or closed indices.</p><p class="simpara">This parameter also applies to <a class="link" href="indices-aliases.html" title="Update index alias API">index aliases</a>
that point to a missing or closed index.</p></dd><dt><span class="term"><code class="literal">expand_wildcards</code></span></dt><dd><p class="simpara">(Optional, string) Controls what kind of indices that wildcard
expressions can expand to. Valid values are:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">all</code></span></dt><dd>Expand to open and closed indices.</dd><dt><span class="term"><code class="literal">open</code></span></dt><dd>Expand only to open indices.</dd><dt><span class="term"><code class="literal">closed</code></span></dt><dd>Expand only to closed indices.</dd><dt><span class="term"><code class="literal">none</code></span></dt><dd>Wildcard expressions are not accepted.</dd></dl></div><p class="simpara">Defaults to <code class="literal">open</code>.</p></dd><dt><span class="term"><code class="literal">ignore_unavailable</code></span></dt><dd>(Optional, boolean) If <code class="literal">true</code>, missing or closed indices are not included in the
response. Defaults to <code class="literal">false</code>.</dd><dt><span class="term"><code class="literal">status</code></span></dt><dd><p class="simpara">(Optional, string)
Comma-separated list of shard health statuses
used to limit the request.</p><p class="simpara">Valid values include:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">green</code></span></dt><dd>The primary shard and all replica shards are assigned.</dd><dt><span class="term"><code class="literal">yellow</code></span></dt><dd>One or more replica shards are unassigned.</dd><dt><span class="term"><code class="literal">red</code></span></dt><dd>The primary shard is unassigned.</dd><dt><span class="term"><code class="literal">all</code></span></dt><dd>Return all shards,
regardless of health status.</dd></dl></div><p class="simpara">Defaults to <code class="literal">yellow,red</code>.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="index-shard-stores-api-example"></a>Examples<a href="https://github.com/elastic/elasticsearch/edit/7.5/docs/reference/indices/shard-stores.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="index-shard-stores-api-single-ex"></a>Get shard store information for a specific index<a href="https://github.com/elastic/elasticsearch/edit/7.5/docs/reference/indices/shard-stores.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">GET /test/_shard_stores</pre></div><div class="console_widget" data-snippet="snippets/1553.console"></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="index-shard-stores-api-multi-ex"></a>Get shard store information for several indices<a href="https://github.com/elastic/elasticsearch/edit/7.5/docs/reference/indices/shard-stores.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">GET /test1,test2/_shard_stores</pre></div><div class="console_widget" data-snippet="snippets/1554.console"></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="index-shard-stores-api-all-ex"></a>Get shard store information for all indices<a href="https://github.com/elastic/elasticsearch/edit/7.5/docs/reference/indices/shard-stores.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">GET /_shard_stores</pre></div><div class="console_widget" data-snippet="snippets/1555.console"></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="index-shard-stores-api-health-ex"></a>Get shard store information based on cluster health<a href="https://github.com/elastic/elasticsearch/edit/7.5/docs/reference/indices/shard-stores.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>You can use the <code class="literal">status</code> query parameter
to limit returned information based on shard health.</p><p>The following request only returns information
for assigned primary and replica shards.</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">GET /_shard_stores?status=green</pre></div><div class="console_widget" data-snippet="snippets/1556.console"></div><p>The API returns the following response:</p><div class="pre_wrapper lang-console-result"><pre class="programlisting prettyprint lang-console-result">{
   "indices": {
       "my-index": {
           "shards": {
              "0": { <a id="CO561-1"></a><i class="conum" data-value="1"></i>
                "stores": [ <a id="CO561-2"></a><i class="conum" data-value="2"></i>
                    {
                        "sPa3OgxLSYGvQ4oPs-Tajw": { <a id="CO561-3"></a><i class="conum" data-value="3"></i>
                            "name": "node_t0",
                            "ephemeral_id" : "9NlXRFGCT1m8tkvYCMK-8A",
                            "transport_address": "local[1]",
                            "attributes": {}
                        },
                        "allocation_id": "2iNySv_OQVePRX-yaRH_lQ", <a id="CO561-4"></a><i class="conum" data-value="4"></i>
                        "allocation" : "primary|replica|unused" <a id="CO561-5"></a><i class="conum" data-value="5"></i>
                        "store_exception": ... <a id="CO561-6"></a><i class="conum" data-value="6"></i>
                    }
                ]
              }
           }
       }
   }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO561-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>The key is the corresponding shard id for the store information</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO561-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>A list of store information for all copies of the shard</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO561-3"><i class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>The node information that hosts a copy of the store, the key
is the unique node id.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO561-4"><i class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>The allocation id of the store copy</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO561-5"><i class="conum" data-value="5"></i></a> </p></td><td valign="top" align="left"><p>The status of the store copy, whether it is used as a
primary, replica or not used at all</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO561-6"><i class="conum" data-value="6"></i></a> </p></td><td valign="top" align="left"><p>Any exception encountered while opening the shard index or
from earlier engine failure</p></td></tr></table></div></div></div></div><div class="navfooter"><span class="prev"><a href="indices-segments.html">
              « 
              Index segments API</a>
           
        </span><span class="next">
           
          <a href="indices-stats.html">Index stats API
               »
            </a></span></div></body></html>
