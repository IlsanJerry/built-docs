<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Custom Score Query
        | Reference [0.90]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Reference [0.90]" /><link rel="up" href="query-dsl-queries.html" title="Queries" /><link rel="prev" href="query-dsl-custom-filters-score-query.html" title="Custom Filters Score Query" /><link rel="next" href="query-dsl-custom-boost-factor-query.html" title="Custom Boost Factor Query" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elasticsearch/Reference/0.90" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="0.90" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Reference
      [0.90]
    </a></span> » <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span> » <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span> » <span class="breadcrumb-node">Custom Score Query</span></div><div xmlns="" class="navheader"><span class="prev"><a href="query-dsl-custom-filters-score-query.html">
              « 
              Custom Filters Score Query</a>
           
        </span><span class="next">
           
          <a href="query-dsl-custom-boost-factor-query.html">Custom Boost Factor Query
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-custom-score-query"></a>Custom Score Query<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/0.90/docs/reference/query-dsl/queries/custom-score-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div xmlns="" class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><h3>Deprecated in 0.90.4. </h3><p xmlns="http://www.w3.org/1999/xhtml">Replaced by <a class="xref" href="query-dsl-function-score-query.html" title="Function Score Query">Function Score Query</a></p></div></div><p><code class="literal">custom_score</code> query allows to wrap another query and customize the
scoring of it optionally with a computation derived from other field
values in the doc (numeric ones) using
<a class="link" href="modules-scripting.html" title="Scripting">script expression</a>. Here is
a simple sample:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">"custom_score" : {
    "query" : {
        ....
    },
    "script" : "_score * doc['my_numeric_field'].value"
}</pre></div><p>On top of the different scripting field values and expression, the
<code class="literal">_score</code> script parameter can be used to retrieve the score based on the
wrapped query.</p><h4><a id="_script_parameters"></a>Script Parameters<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/0.90/docs/reference/query-dsl/queries/custom-score-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Scripts are cached for faster execution. If the script has parameters
that it needs to take into account, it is preferable to use the same
script, and provide parameters to it:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">"custom_score" : {
    "query" : {
        ....
    },
    "params" : {
        "param1" : 2,
        "param2" : 3.1
    },
    "script" : "_score * doc['my_numeric_field'].value / pow(param1, param2)"
}</pre></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="query-dsl-custom-filters-score-query.html">
              « 
              Custom Filters Score Query</a>
           
        </span><span class="next">
           
          <a href="query-dsl-custom-boost-factor-query.html">Custom Boost Factor Query
               »
            </a></span></div></body></html>