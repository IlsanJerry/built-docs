<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Index Templates
        | Elasticsearch Reference [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [master]" /><link rel="up" href="indices.html" title="Index APIs" /><link rel="prev" href="indices-template-exists.html" title="Index template exists API" /><link rel="next" href="indices-stats.html" title="Indices Stats" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="master" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span> » <span class="breadcrumb-link"><a href="indices.html">Index APIs</a></span> » <span class="breadcrumb-node">Index Templates</span></div><div xmlns="" class="navheader"><span class="prev"><a href="indices-template-exists.html">
              « 
              Index template exists API</a>
           
        </span><span class="next">
           
          <a href="indices-stats.html">Indices Stats
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="indices-templates"></a>Index Templates<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/templates.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Index templates define <a class="link" href="index-modules.html#index-modules-settings" title="Index Settings">settings</a> and <a class="link" href="mapping.html" title="Mapping">mappings</a>
that you can automatically apply when creating new indices.
Elasticsearch applies templates to new indices
based on an index pattern that matches the index name.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Templates are only applied at index creation time. Changing a template
will have no impact on existing indices. When using the create index API, the
settings/mappings defined as part of the create index call will take precedence
over any matching settings/mappings defined in the template.</p></div></div><p>For example:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">PUT _template/template_1
{
  "index_patterns": ["te*", "bar*"],
  "settings": {
    "number_of_shards": 1
  },
  "mappings": {
    "_source": {
      "enabled": false
    },
    "properties": {
      "host_name": {
        "type": "keyword"
      },
      "created_at": {
        "type": "date",
        "format": "EEE MMM dd HH:mm:ss Z yyyy"
      }
    }
  }
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1401.console"></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Index templates provide C-style /* */ block comments. Comments are allowed
everywhere in the JSON document except before the initial opening curly bracket.</p></div></div><p>Defines a template named <code class="literal">template_1</code>, with a template pattern of <code class="literal">te*</code> or <code class="literal">bar*</code>.
The settings and mappings will be applied to any index name that matches
the <code class="literal">te*</code> or <code class="literal">bar*</code> pattern.</p><p>It is also possible to include aliases in an index template as follows:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">PUT _template/template_1
{
    "index_patterns" : ["te*"],
    "settings" : {
        "number_of_shards" : 1
    },
    "aliases" : {
        "alias1" : {},
        "alias2" : {
            "filter" : {
                "term" : {"user" : "kimchy" }
            },
            "routing" : "kimchy"
        },
        "{index}-alias" : {} <a id="CO497-1"></a><i xmlns="" class="conum" data-value="1"></i>
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1402.console"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO497-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>the <code class="literal">{index}</code> placeholder in the alias name will be replaced with the
actual index name that the template gets applied to, during index creation.</p></td></tr></table></div><h4><a id="delete"></a>Deleting a Template<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/templates.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Index templates are identified by a name (in the above case
<code class="literal">template_1</code>) and can be deleted as well:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">DELETE /_template/template_1</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1403.console"></div><h4><a id="getting"></a>Getting templates<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/templates.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Index templates are identified by a name (in the above case
<code class="literal">template_1</code>) and can be retrieved using the following:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">GET /_template/template_1</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1404.console"></div><p>You can also match several templates by using wildcards like:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">GET /_template/temp*
GET /_template/template_1,template_2</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1405.console"></div><p>To get list of all index templates you can run:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">GET /_template</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1406.console"></div><h4><a id="multiple-templates"></a>Multiple Templates Matching<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/templates.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Multiple index templates can potentially match an index, in this case,
both the settings and mappings are merged into the final configuration
of the index. The order of the merging can be controlled using the
<code class="literal">order</code> parameter, with lower order being applied first, and higher
orders overriding them. For example:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">PUT /_template/template_1
{
    "index_patterns" : ["*"],
    "order" : 0,
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "_source" : { "enabled" : false }
    }
}

PUT /_template/template_2
{
    "index_patterns" : ["te*"],
    "order" : 1,
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "_source" : { "enabled" : true }
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1407.console"></div><p>The above will disable storing the <code class="literal">_source</code>, but
for indices that start with <code class="literal">te*</code>, <code class="literal">_source</code> will still be enabled.
Note, for mappings, the merging is "deep", meaning that specific
object/property based mappings can easily be added/overridden on higher
order templates, with lower order templates providing the basis.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Multiple matching templates with the same order value will
result in a non-deterministic merging order.</p></div></div><h4><a id="versioning-templates"></a>Template Versioning<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/indices/templates.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Templates can optionally add a <code class="literal">version</code> number, which can be any integer value,
in order to simplify template management by external systems. The <code class="literal">version</code>
field is completely optional and it is meant solely for external management of
templates. To unset a <code class="literal">version</code>, simply replace the template without specifying
one.</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">PUT /_template/template_1
{
    "index_patterns" : ["*"],
    "order" : 0,
    "settings" : {
        "number_of_shards" : 1
    },
    "version": 123
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1408.console"></div><p>To check the <code class="literal">version</code>, you can
<a class="link" href="common-options.html#common-options-response-filtering" title="Response Filtering">filter responses</a>
using <code class="literal">filter_path</code> to limit the response to just the <code class="literal">version</code>:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">GET /_template/template_1?filter_path=*.version</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1409.console"></div><p>This should give a small response that makes it both easy and inexpensive to parse:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "template_1" : {
    "version" : 123
  }
}</pre></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="indices-template-exists.html">
              « 
              Index template exists API</a>
           
        </span><span class="next">
           
          <a href="indices-stats.html">Indices Stats
               »
            </a></span></div></body></html>