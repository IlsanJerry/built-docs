<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Nodes reload secure settings API | Elasticsearch Reference [master] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [master]"/>
<link rel="up" href="cluster.html" title="Cluster APIs"/>
<link rel="prev" href="cluster-nodes-info.html" title="Nodes info API"/>
<link rel="next" href="cluster-nodes-stats.html" title="Nodes stats API"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [master]</a></span>
»
<span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
»
<span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span>
»
<span class="breadcrumb-node">Nodes reload secure settings API</span>
</div>
<div class="navheader">
<span class="prev">
<a href="cluster-nodes-info.html">« Nodes info API</a>
</span>
<span class="next">
<a href="cluster-nodes-stats.html">Nodes stats API »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="cluster-nodes-reload-secure-settings"></a>Nodes reload secure settings API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/cluster/nodes-reload-secure-settings.asciidoc">edit</a></h2>
</div></div></div>

<p>The cluster nodes reload secure settings API is used to re-load the keystore on each node.</p>
<a id="72f20e645e118715b6197c2087b4db86"></a>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST _nodes/reload_secure_settings
POST _nodes/nodeId1,nodeId2/reload_secure_settings</pre>
</div>
<div class="console_widget" data-snippet="snippets/1305.console"></div>
<p>The first command reloads the keystore on each node. The seconds allows
to selectively target <code class="literal">nodeId1</code> and <code class="literal">nodeId2</code>. The node selection options are
detailed <a class="xref" href="cluster.html#cluster-nodes" title="Node specification">here</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elasticsearch requires consistent secure settings across the cluster nodes, but this consistency is not enforced.
Hence, reloading specific nodes is not standard. It is only justifiable when retrying failed reload operations.</p>
</div>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_reload_password_protected_secure_settings"></a>Reload Password Protected Secure Settings<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/cluster/nodes-reload-secure-settings.asciidoc">edit</a></h3>
</div></div></div>
<p>When the Elasticsearch keystore is password protected and not simply obfuscated, the password for the keystore needs
to be provided in the request to reload the secure settings.
Reloading the settings for the whole cluster assumes that all nodes' keystores are protected with the same password
and is only allowed when <a href="/guide/en/elasticsearch/reference/master/configuring-tls.html#tls-transport" class="ulink" target="_top">node to node communications are encrypted</a></p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">POST _nodes/reload_secure_settings
{
  "reload_secure_settings": "s3cr3t" <a id="CO541-1"></a><i class="conum" data-value="1"></i>
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO541-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The common password that the Elasticsearch keystore is encrypted with in every node of the cluster.</p>
</td>
</tr>
</table>
</div>
<p>Alternatively the secure settings can be reloaded on a per node basis, locally accessing the API and passing the
node-specific Elasticsearch keystore password.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">POST _nodes/_local/reload_secure_settings
{
  "reload_secure_settings": "s3cr3t" <a id="CO542-1"></a><i class="conum" data-value="1"></i>
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO542-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The password that the Elasticsearch keystore is encrypted with on the local node.</p>
</td>
</tr>
</table>
</div>
<h4><a id="rest-reload-secure-settings"></a>REST Reload Secure Settings Response<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/cluster/nodes-reload-secure-settings.asciidoc">edit</a></h4>
<p>The response contains the <code class="literal">nodes</code> object, which is a map, keyed by the
node id. Each value has the node <code class="literal">name</code> and an optional <code class="literal">reload_exception</code>
field. The <code class="literal">reload_exception</code> field is a serialization of the exception
that was thrown during the reload process, if any.</p>
<a id="f141b94c4b48dc62c67cffc121320a8d"></a>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "_nodes": {
    "total": 1,
    "successful": 1,
    "failed": 0
  },
  "cluster_name": "my_cluster",
  "nodes": {
    "pQHNt5rXTTWNvUgOrdynKg": {
      "name": "node-0"
    }
  }
}</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="cluster-nodes-info.html">« Nodes info API</a>
</span>
<span class="next">
<a href="cluster-nodes-stats.html">Nodes stats API »</a>
</span>
</div>
</div>
</body>
</html>
