<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Data streams | Elasticsearch Reference [master] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [master]"/>
<link rel="up" href="index.html" title="Elasticsearch Reference [master]"/>
<link rel="prev" href="simulate-multi-component-templates.html" title="Simulate multi-component templates"/>
<link rel="next" href="set-up-a-data-stream.html" title="Set up a data stream"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [master]</a></span>
»
<span class="breadcrumb-node">Data streams</span>
</div>
<div class="navheader">
<span class="prev">
<a href="simulate-multi-component-templates.html">« Simulate multi-component templates</a>
</span>
<span class="next">
<a href="set-up-a-data-stream.html">Set up a data stream »</a>
</span>
</div>
<div class="part xpack">
<div class="titlepage"><div><div>
<h1 class="title"><a id="data-streams"></a>Data streams<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/data-streams/data-streams.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h1>
</div></div></div>
<div class="openblock partintro">
<div class="content">

<p>A <em>data stream</em> is a convenient, scalable way to ingest, search, and manage
continuously generated time-series data.</p>
<p>Time-series data, such as logs, tends to grow over time. While storing an entire
time series in a single Elasticsearch index is simpler, it is often more efficient and
cost-effective to store large volumes of data across multiple, time-based
indices. Multiple indices let you move indices containing older, less frequently
queried data to less expensive hardware and delete indices when they&#8217;re no
longer needed, reducing overhead and storage costs.</p>
<p>A data stream is designed to give you the best of both worlds:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The simplicity of a single named resource you can use for requests
</li>
<li class="listitem">
The storage, scalability, and cost-saving benefits of multiple indices
</li>
</ul>
</div>
<p>You can submit indexing and search requests directly to a data stream. The
stream automatically routes the requests to a collection of hidden
<em>backing indices</em> that store the stream&#8217;s data.</p>
<p>You can use <a class="xref" href="index-lifecycle-management.html" title="ILM: Manage the index lifecycle">index lifecycle management (ILM)</a> to automate the
management of these backing indices. ILM lets you automatically spin up
new backing indices, allocate indices to different hardware, delete old indices,
and take other automatic actions based on age or size criteria you set. Use data
streams and ILM to seamlessly scale your data storage based on your
budget, performance, resiliency, and retention needs.</p>
<h2><a id="when-to-use-data-streams"></a>When to use data streams<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>We recommend using data streams if you:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use Elasticsearch to ingest, search, and manage large volumes of time-series data
</li>
<li class="listitem">
Want to scale and reduce costs by using ILM to automate the management
of your indices
</li>
<li class="listitem">
Index large volumes of time-series data in Elasticsearch but rarely delete or update
individual documents
</li>
</ul>
</div>
<h2><a id="backing-indices"></a>Backing indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>A data stream consists of one or more <em>backing indices</em>. Backing indices are
<a class="xref" href="index-modules.html#index-hidden">hidden</a>, auto-generated indices used to store a stream&#8217;s
documents.</p>
<div class="imageblock text-center">
<div class="content">
<img src="images/data-streams/data-streams-diagram.svg" alt="data streams diagram">
</div>
</div>
<p>To create backing indices, each data stream requires a matching
<a class="xref" href="indices-templates.html" title="Index templates">index template</a>. This template acts as a blueprint for the
stream&#8217;s backing indices. It contains:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The mappings and settings applied to each backing index when it&#8217;s created.
</li>
<li class="listitem">
A name or wildcard (<code class="literal">*</code>) pattern that matches the data stream&#8217;s name.
</li>
<li class="listitem">
A <code class="literal">data_stream</code> object with an empty body (<code class="literal">{ }</code>). This object indicates the
template is used for data streams.
</li>
</ul>
</div>
<p>A <code class="literal">@timestamp</code> field must be included in every document indexed to the data
stream. This field can be mapped as a <a class="xref" href="date.html" title="Date data type"><code class="literal">date</code></a> or
<a class="xref" href="date_nanos.html" title="Date nanoseconds data type"><code class="literal">date_nanos</code></a> field data type in the stream&#8217;s matching index
template. If no mapping is specified in the template, the <code class="literal">date</code> field data type
with default options is used.</p>
<p>The same index template can be used to create multiple data streams.</p>
<h2><a id="data-streams-generation"></a>Generation<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>Each data stream tracks its <em>generation</em>: a six-digit, zero-padded integer
that acts as a cumulative count of the data stream&#8217;s backing indices. This count
includes any deleted indices for the stream. The generation is incremented
whenever a new backing index is added to the stream.</p>
<p>When a backing index is created, the index is named using the following
convention:</p>
<div class="pre_wrapper lang-text">
<pre class="programlisting prettyprint lang-text">.ds-&lt;data-stream&gt;-&lt;generation&gt;</pre>
</div>
<p>For example, the <code class="literal">web_server_logs</code> data stream has a generation of <code class="literal">34</code>. The
most recently created backing index for this data stream is named
<code class="literal">.ds-web_server_logs-000034</code>.</p>
<p>Because the generation increments with each new backing index, backing indices
with a higher generation contain more recent data. Backing indices with a lower
generation contain older data.</p>
<p>A backing index&#8217;s name can change after its creation due to a
<a class="xref" href="indices-shrink-index.html" title="Shrink index API">shrink</a>, <a class="xref" href="snapshots-restore-snapshot.html" title="Restore a snapshot">restore</a>, or
other operations. However, renaming a backing index does not detach it from a
data stream.</p>
<h2><a id="data-stream-read-requests"></a>Read requests<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>When a read request is sent to a data stream, it routes the request to all its
backing indices. For example, a search request sent to a data stream would query
all its backing indices.</p>
<div class="imageblock text-center">
<div class="content">
<img src="images/data-streams/data-streams-search-request.svg" alt="data streams search request">
</div>
</div>
<h2><a id="data-stream-write-index"></a>Write index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>The most recently created backing index is the data stream’s only
<em>write index</em>. The data stream routes all indexing requests for new documents to
this index.</p>
<div class="imageblock text-center">
<div class="content">
<img src="images/data-streams/data-streams-index-request.svg" alt="data streams index request">
</div>
</div>
<p>You cannot add new documents to a stream&#8217;s other backing indices, even by
sending requests directly to the index.</p>
<p>Because it&#8217;s the only index capable of ingesting new documents, you cannot
perform operations on a write index that might hinder indexing. These
prohibited operations include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="indices-clone-index.html" title="Clone index API">Clone</a>
</li>
<li class="listitem">
<a class="xref" href="indices-close.html" title="Close index API">Close</a>
</li>
<li class="listitem">
<a class="xref" href="indices-delete-index.html" title="Delete index API">Delete</a>
</li>
<li class="listitem">
<a class="xref" href="freeze-index-api.html" title="Freeze index API">Freeze</a>
</li>
<li class="listitem">
<a class="xref" href="indices-shrink-index.html" title="Shrink index API">Shrink</a>
</li>
<li class="listitem">
<a class="xref" href="indices-split-index.html" title="Split index API">Split</a>
</li>
</ul>
</div>
<h2><a id="data-streams-rollover"></a>Rollover<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>When a data stream is created, one backing index is automatically created.
Because this single index is also the most recently created backing index, it
acts as the stream&#8217;s write index.</p>
<p>A <a class="xref" href="indices-rollover-index.html" title="Rollover index API">rollover</a> creates a new backing index for a data
stream. This new backing index becomes the stream&#8217;s write index, replacing
the current one, and increments the stream&#8217;s generation.</p>
<p>In most cases, we recommend using <a class="xref" href="index-lifecycle-management.html" title="ILM: Manage the index lifecycle">index lifecycle management
(ILM)</a> to automate rollovers for data streams. This lets you
automatically roll over the current write index when it meets specified
criteria, such as a maximum age or size.</p>
<p>However, you can also use the <a class="xref" href="indices-rollover-index.html" title="Rollover index API">rollover API</a> to
manually perform a rollover. See <a class="xref" href="use-a-data-stream.html#manually-roll-over-a-data-stream" title="Manually roll over a data stream">Manually roll over a data stream</a>.</p>
<h2><a id="data-streams-append-only"></a>Append-only<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/data-streams/data-streams.asciidoc">edit</a></h2>
<p>For most time-series use cases, existing data is rarely, if ever, updated.
Because of this, data streams are designed to be append-only.</p>
<p>You can send <a class="xref" href="use-a-data-stream.html#add-documents-to-a-data-stream" title="Add documents to a data stream">indexing requests for new
documents</a> directly to a data stream. However, you cannot send the update or
deletion requests for existing documents directly to a data stream.</p>
<p>Instead, you can use the <a class="xref" href="docs-update-by-query.html" title="Update By Query API">update by query</a> and
<a class="xref" href="docs-delete-by-query.html" title="Delete by query API">delete by query</a> APIs to update or delete existing
documents in a data stream. See <a class="xref" href="use-a-data-stream.html#update-docs-in-a-data-stream-by-query" title="Update documents in a data stream by query">Update documents in a data stream by query</a> and <a class="xref" href="use-a-data-stream.html#delete-docs-in-a-data-stream-by-query" title="Delete documents in a data stream by query">Delete documents in a data stream by query</a>.</p>
<p>If needed, you can update or delete a document by submitting requests to the
backing index containing the document. See
<a class="xref" href="use-a-data-stream.html#update-delete-docs-in-a-backing-index" title="Update or delete documents in a backing index">Update or delete documents in a backing index</a>.</p>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you frequently update or delete existing documents,
we recommend using an <a class="xref" href="indices-add-alias.html" title="Add index alias API">index alias</a> and
<a class="xref" href="indices-templates.html" title="Index templates">index template</a> instead of a data stream. You can still
use <a class="xref" href="index-lifecycle-management.html" title="ILM: Manage the index lifecycle">ILM</a> to manage indices for the alias.</p>
</div>
</div>
</div>
</div>



</div>
<div class="navfooter">
<span class="prev">
<a href="simulate-multi-component-templates.html">« Simulate multi-component templates</a>
</span>
<span class="next">
<a href="set-up-a-data-stream.html">Set up a data stream »</a>
</span>
</div>
</div>
</body>
</html>
