<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using ILM with existing indices
        | Elasticsearch Reference [7.x]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Reference [7.x]" /><link rel="up" href="index-lifecycle-management.html" title="Managing the index lifecycle" /><link rel="prev" href="start-stop-ilm.html" title="Start and stop index lifecycle management" /><link rel="next" href="ilm-with-existing-periodic-indices.html" title="Managing existing periodic indices with ILM" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.x" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="7.x" /></head><body><div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [7.x]
    </a></span> » <span class="breadcrumb-link"><a href="index-lifecycle-management.html">Managing the index lifecycle</a></span> » <span class="breadcrumb-node">Using ILM with existing indices</span></div><div class="navheader"><span class="prev"><a href="start-stop-ilm.html">
              « 
              Start and stop index lifecycle management</a>
           
        </span><span class="next">
           
          <a href="ilm-with-existing-periodic-indices.html">Managing existing periodic indices with ILM
               »
            </a></span></div><div class="xpack chapter"><div class="titlepage"><div><div><h2 class="title"><a id="ilm-with-existing-indices"></a>Using ILM with existing indices<a href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/ilm/ilm-with-existing-indices.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>While it is recommended to use ILM to manage the index lifecycle from
start to finish, it may be useful to use ILM with existing indices,
particularly when transitioning from an alternative method of managing the index
lifecycle such as Curator, or when migrating from daily indices to
rollover-based indices. Such use cases are fully supported, but there are some
configuration differences from when ILM can manage the complete index
lifecycle.</p><p>This section describes strategies to leverage ILM for existing periodic
indices when migrating to fully ILM-manged indices, which can be done in
a few different ways, each providing different tradeoffs. As an example, we’ll
walk through a use case of a very simple logging index with just a field for the
log message and a timestamp.</p><p>First, we need to create a template for these indices:</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">PUT _template/mylogs_template
{
  "index_patterns": [
    "mylogs-*"
  ],
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1
  },
  "mappings": {
    "properties": {
      "message": {
        "type": "text"
      },
      "@timestamp": {
        "type": "date"
      }
    }
  }
}</pre></div><div class="console_widget" data-snippet="snippets/1045.console"></div><p>And we’ll ingest a few documents to create a few daily indices:</p><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">POST mylogs-pre-ilm-2019.06.24/_doc
{
  "@timestamp": "2019-06-24T10:34:00",
  "message": "this is one log message"
}</pre></div><div class="console_widget" data-snippet="snippets/1046.console"></div><div class="pre_wrapper lang-console"><pre class="programlisting prettyprint lang-console">POST mylogs-pre-ilm-2019.06.25/_doc
{
  "@timestamp": "2019-06-25T17:42:00",
  "message": "this is another log message"
}</pre></div><div class="console_widget" data-snippet="snippets/1047.console"></div><p>Now that we have these indices, we’ll look at a few different ways of migrating
these indices to ILM.</p></div><div class="navfooter"><span class="prev"><a href="start-stop-ilm.html">
              « 
              Start and stop index lifecycle management</a>
           
        </span><span class="next">
           
          <a href="ilm-with-existing-periodic-indices.html">Managing existing periodic indices with ILM
               »
            </a></span></div></body></html>
