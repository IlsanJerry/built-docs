<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Manage existing indices | Elasticsearch Reference [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.x]"/>
<link rel="up" href="index-lifecycle-management.html" title="Manage the index lifecycle"/>
<link rel="prev" href="skipping-rollover.html" title="Skipping Rollover"/>
<link rel="next" href="ilm-with-existing-periodic-indices.html" title="Managing existing periodic indices with ILM"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.x"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.x"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.x]</a></span>
»
<span class="breadcrumb-link"><a href="index-lifecycle-management.html">Manage the index lifecycle</a></span>
»
<span class="breadcrumb-node">Manage existing indices</span>
</div>
<div class="navheader">
<span class="prev">
<a href="skipping-rollover.html">« Skipping Rollover</a>
</span>
<span class="next">
<a href="ilm-with-existing-periodic-indices.html">Managing existing periodic indices with ILM »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="ilm-with-existing-indices"></a>Manage existing indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/ilm/ilm-with-existing-indices.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>While it is recommended to use ILM to manage the index lifecycle from
start to finish, it may be useful to use ILM with existing indices,
particularly when transitioning from an alternative method of managing the index
lifecycle such as Curator, or when migrating from daily indices to
rollover-based indices. Such use cases are fully supported, but there are some
configuration differences from when ILM can manage the complete index
lifecycle.</p>
<p>This section describes strategies to leverage ILM for existing periodic
indices when migrating to fully ILM-manged indices, which can be done in
a few different ways, each providing different tradeoffs. As an example, we&#8217;ll
walk through a use case of a very simple logging index with just a field for the
log message and a timestamp.</p>
<p>First, we need to create a template for these indices:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _template/mylogs_template
{
  "index_patterns": [
    "mylogs-*"
  ],
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1
  },
  "mappings": {
    "properties": {
      "message": {
        "type": "text"
      },
      "@timestamp": {
        "type": "date"
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1091.console"></div>
<p>And we&#8217;ll ingest a few documents to create a few daily indices:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST mylogs-pre-ilm-2019.06.24/_doc
{
  "@timestamp": "2019-06-24T10:34:00",
  "message": "this is one log message"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1092.console"></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST mylogs-pre-ilm-2019.06.25/_doc
{
  "@timestamp": "2019-06-25T17:42:00",
  "message": "this is another log message"
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1093.console"></div>
<p>Now that we have these indices, we&#8217;ll look at a few different ways of migrating
these indices to ILM.</p>


</div>
<div class="navfooter">
<span class="prev">
<a href="skipping-rollover.html">« Skipping Rollover</a>
</span>
<span class="next">
<a href="ilm-with-existing-periodic-indices.html">Managing existing periodic indices with ILM »</a>
</span>
</div>
</div>
</body>
</html>
