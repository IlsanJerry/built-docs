<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Enrich your data
        | Elasticsearch Reference [7.x]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Reference [7.x]" /><link rel="up" href="ingest.html" title="Ingest node" /><link rel="prev" href="handling-failure-in-pipelines.html" title="Handling Failures in Pipelines" /><link rel="next" href="enrich-setup.html" title="Set up an enrich processor" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.x" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="7.x" /></head><body><div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [7.x]
    </a></span> » <span class="breadcrumb-link"><a href="ingest.html">Ingest node</a></span> » <span class="breadcrumb-node">Enrich your data</span></div><div class="navheader"><span class="prev"><a href="handling-failure-in-pipelines.html">
              « 
              Handling Failures in Pipelines</a>
           
        </span><span class="next">
           
          <a href="enrich-setup.html">Set up an enrich processor
               »
            </a></span></div><div class="xpack chapter"><div class="titlepage"><div><div><h2 class="title"><a id="ingest-enriching-data"></a>Enrich your data<a href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/ingest/enrich.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>You can use the <a class="link" href="enrich-processor.html" title="Enrich Processor">enrich processor</a> to add data from your
existing indices to incoming documents during ingest.</p><p>For example, you can use the enrich processor to:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Identify web services or vendors based on known IP addresses</li><li class="listitem">Add product information to retail orders based on product IDs</li><li class="listitem">Supplement contact information based on an email address</li><li class="listitem">Add postal codes based on user coordinates</li></ul></div><h3><a id="how-enrich-works"></a>How the enrich processor works<a href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/ingest/enrich.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>An <a class="link" href="ingest.html" title="Ingest node">ingest pipeline</a> changes documents before they are actually
indexed. You can think of an ingest pipeline as an assembly line made up of a
series of workers, called <a class="link" href="ingest-processors.html" title="Processors">processors</a>. Each processor makes
specific changes, like lowercasing field values, to incoming documents before
moving on to the next. When all the processors in a pipeline are done, the
finished document is added to the target index.</p><div class="informalfigure"><div class="mediaobject" align="center"><img src="images/ingest/ingest-process.svg" align="middle" alt="ingest process" /></div></div><p>Most processors are self-contained and only change <span class="emphasis"><em>existing</em></span> data in incoming
documents. But the enrich processor adds <span class="emphasis"><em>new</em></span> data to incoming documents
and requires a few special components:</p><div class="informalfigure"><div class="mediaobject" align="center"><img src="images/ingest/enrich/enrich-process.svg" align="middle" alt="enrich process" /></div></div><div class="variablelist"><a id="enrich-policy"></a><dl class="variablelist"><dt><span class="term">enrich policy</span></dt><dd><p class="simpara">A set of configuration options used to add the right enrich data to the right
incoming documents.</p><p class="simpara">An enrich policy contains:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">A list of one or more <span class="emphasis"><em>source indices</em></span> which store enrich data as documents</li><li class="listitem">The <span class="emphasis"><em>policy type</em></span> which determines how the processor matches the enrich data
to incoming documents</li><li class="listitem">A <span class="emphasis"><em>match field</em></span> from the source indices used to match incoming documents</li><li class="listitem"><span class="emphasis"><em>Enrich fields</em></span> containing enrich data from the source indices you want to add
to incoming documents</li></ul></div><p class="simpara">Before it can be used with an enrich processor, an enrich policy must be
<a class="link" href="execute-enrich-policy-api.html" title="Execute enrich policy API">executed</a>. When executed, an enrich policy uses
enrich data from the policy’s source indices to create a streamlined system
index called the <span class="emphasis"><em>enrich index</em></span>. The processor uses this index to match and
enrich incoming documents.</p><p class="simpara">See <a class="xref" href="enrich-policy-definition.html" title="Enrich policy definition">Enrich policy definition</a> for a full list of enrich policy types and
configuration options.</p></dd></dl></div><div class="variablelist"><a id="source-index"></a><dl class="variablelist"><dt><span class="term">source index</span></dt><dd>An index which stores enrich data you’d like to add to incoming documents. You
can create and manage these indices just like a regular Elasticsearch index. You can use
multiple source indices in an enrich policy. You also can use the same source
index in multiple enrich policies.</dd></dl></div><div class="variablelist"><a id="enrich-index"></a><dl class="variablelist"><dt><span class="term">enrich index</span></dt><dd><p class="simpara">A special system index tied to a specific enrich policy.</p><p class="simpara">Directly matching incoming documents to documents in source indices could be
slow and resource intensive. To speed things up, the enrich processor uses an
enrich index.</p><p class="simpara">Enrich indices contain enrich data from source indices but have a few special
properties to help streamline them:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">They are system indices, meaning they’re managed internally by Elasticsearch and only
intended for use with enrich processors.</li><li class="listitem">They always begin with <code class="literal">.enrich-*</code>.</li><li class="listitem">They are read-only, meaning you can’t directly change them.</li><li class="listitem">They are <a class="link" href="indices-forcemerge.html" title="Force merge API">force merged</a> for fast retrieval.</li></ul></div></dd></dl></div></div><div class="navfooter"><span class="prev"><a href="handling-failure-in-pipelines.html">
              « 
              Handling Failures in Pipelines</a>
           
        </span><span class="next">
           
          <a href="enrich-setup.html">Set up an enrich processor
               »
            </a></span></div></body></html>
