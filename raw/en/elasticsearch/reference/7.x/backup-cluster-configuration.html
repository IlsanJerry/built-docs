<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Back up a cluster’s configuration
        | Elasticsearch Reference [7.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [7.x]" /><link rel="up" href="backup-cluster.html" title="Back up a cluster" /><link rel="prev" href="backup-cluster-data.html" title="Back up a cluster’s data" /><link rel="next" href="security-backup.html" title="Back up a cluster’s security configuration" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.x" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="7.x" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [7.x]
    </a></span> » <span class="breadcrumb-link"><a href="administer-elasticsearch.html">Administering Elasticsearch</a></span> » <span class="breadcrumb-link"><a href="backup-cluster.html">Back up a cluster</a></span> » <span class="breadcrumb-node">Back up a cluster’s configuration</span></div><div xmlns="" class="navheader"><span class="prev"><a href="backup-cluster-data.html">
              « 
              Back up a cluster’s data</a>
           
        </span><span class="next">
           
          <a href="security-backup.html">Back up a cluster’s security configuration
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="backup-cluster-configuration"></a>Back up a cluster’s configuration<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/administering/backup-cluster-config.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>In addition to backing up the data in a cluster, it is important to back up its configuration—​especially when the cluster becomes large and difficult to
reconstruct.</p><p>Configuration information resides in
<a class="link" href="settings.html#config-files-location" title="Config files location">regular text files</a> on every cluster node. Sensitive
setting values such as passwords for the Watcher notification servers, are
specified inside a binary secure container, the
<a class="link" href="secure-settings.html" title="Secure settings">elasticsearch.keystore</a> file. Some setting values are
file paths to the associated configuration data, such as the ingest geo ip
database. All these files are contained inside the <code class="literal">ES_PATH_CONF</code> directory.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">All changes to configuration files are done by manually editing the files
or using command line utilities, but <span class="strong strong"><strong>not</strong></span> through APIs. In practice, these
changes are infrequent after the initial setup.</p></div></div><p>We recommend that you take regular (ideally, daily) backups of your Elasticsearch config
(<code class="literal">$ES_PATH_CONF</code>) directory using the file backup software of your choice.</p><div xmlns="" class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">We recommend that you have a configuration management plan for these
configuration files. You may wish to check them into version control, or
provision them though your choice of configuration management tool.</p></div></div><p>Some of these files may contain sensitive data such as passwords and TLS keys,
therefore you should investigate whether your backup software and/or storage
solution are able to encrypt this data.</p><p>Some settings in configuration files might be overridden by
<a class="link" href="cluster-update-settings.html" title="Cluster Update Settings">cluster settings</a>. You can capture these settings in
a <span class="strong strong"><strong>data</strong></span> backup snapshot by specifying the <code class="literal">include_global_state: true</code> (default)
parameter for the snapshot API. Alternatively, you can extract these
configuration values in text format by using the
<a class="link" href="cluster-get-settings.html" title="Cluster Get Settings">get settings API</a>:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">GET _cluster/settings?pretty&amp;flat_settings&amp;filter_path=persistent</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1036.console"></div><p>You can store the output of this as a file together with the rest of
configuration files.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><div xmlns="http://www.w3.org/1999/xhtml" class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Transient settings are not considered for backup.</li><li class="listitem">Elasticsearch security features store configuration data such as role definitions and
API keys inside a dedicate special index. This "system" data,
complements the <a class="link" href="secure-settings.html" title="Secure settings">security settings</a> configuration and should
be <a class="link" href="security-backup.html#backup-security-index-configuration" title="Back up index-based security configuration">backed up as well</a>.</li><li class="listitem">Other Elastic Stack components, like Kibana and Machine learning, store their configuration
data inside other dedicated indices. From the Elasticsearch perspective these are just data
so you can use the regular <a class="link" href="backup-cluster-data.html" title="Back up a cluster’s data">data backup</a> process.</li></ul></div></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="backup-cluster-data.html">
              « 
              Back up a cluster’s data</a>
           
        </span><span class="next">
           
          <a href="security-backup.html">Back up a cluster’s security configuration
               »
            </a></span></div></body></html>