<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Get index template API | Elasticsearch Reference [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.x]"/>
<link rel="up" href="indices.html" title="Index APIs"/>
<link rel="prev" href="indices-templates.html" title="Index template API"/>
<link rel="next" href="indices-component-template.html" title="Component template API"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.x"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.x"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.x]</a></span>
»
<span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
»
<span class="breadcrumb-link"><a href="indices.html">Index APIs</a></span>
»
<span class="breadcrumb-node">Get index template API</span>
</div>
<div class="navheader">
<span class="prev">
<a href="indices-templates.html">« Index template API</a>
</span>
<span class="next">
<a href="indices-component-template.html">Component template API »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-get-template"></a>Get index template API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h2>
</div></div></div>

<p>Returns information about one or more index templates.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_index_template/template_1</pre>
</div>
<div class="console_widget" data-snippet="snippets/1705.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">GET /_index_template/&lt;index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-template&gt;</code>
</span>
</dt>
<dd>
<p>
(Required, string)
Comma-separated list or wildcard expression of index template names
used to limit the request.
</p>
<p>To return all index templates, omit this parameter or use a value of <code class="literal">*</code>.</p>
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">flat_settings</code>
</span>
</dt>
<dd>
(Optional, boolean) If <code class="literal">true</code>, returns settings in flat format. Defaults to
<code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">local</code>
</span>
</dt>
<dd>
(Optional, boolean) If <code class="literal">true</code>, the request retrieves information from the local
node only. Defaults to <code class="literal">false</code>, which means information is retrieved from
the master node.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="common-options.html#time-units" title="Time units">time units</a>) Specifies the period of time to wait for
a connection to the master node. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="get-template-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-template-api-wildcard-ex"></a>Get index templates using a wildcard expression<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_index_template/temp*</pre>
</div>
<div class="console_widget" data-snippet="snippets/1706.console"></div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="get-template-api-all-ex"></a>Get all index templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h4>
</div></div></div>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_index_template</pre>
</div>
<div class="console_widget" data-snippet="snippets/1707.console"></div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-path-params"></a>Path parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">&lt;index-template&gt;</code>
</span>
</dt>
<dd>
(Required, string)
Name of the index template to create.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-query-params"></a>Query parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">create</code>
</span>
</dt>
<dd>
(Optional, boolean)
If <code class="literal">true</code>, this request cannot replace or update existing index templates. Defaults to <code class="literal">false</code>.
</dd>
<dt>
<span class="term">
<code class="literal">master_timeout</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="common-options.html#time-units" title="Time units">time units</a>) Specifies the period of time to wait for
a connection to the master node. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code class="literal">30s</code>.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-request-body"></a>Request body<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h3>
</div></div></div>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">index_patterns</code>
</span>
</dt>
<dd>
(Required, array of strings)
Array of wildcard expressions
used to match the names of indices during creation.
</dd>
<dt>
<span class="term">
<code class="literal">aliases</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="indices-aliases.html" title="Update index alias API">alias object</a>) Index aliases which include the
index. See <a class="xref" href="indices-aliases.html" title="Update index alias API">Update index alias</a>.
</dd>
<dt>
<span class="term">
<code class="literal">mappings</code>
</span>
</dt>
<dd>
<p>(Optional, <a class="xref" href="mapping.html" title="Mapping">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Field names
</li>
<li class="listitem">
<a class="xref" href="mapping-types.html" title="Field datatypes">Field datatypes</a>
</li>
<li class="listitem">
<a class="xref" href="mapping-params.html" title="Mapping parameters">Mapping parameters</a>
</li>
</ul>
</div>
<p>See <a class="xref" href="mapping.html" title="Mapping">Mapping</a>.</p>
</dd>
<dt>
<span class="term">
<code class="literal">settings</code>
</span>
</dt>
<dd>
(Optional, <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">index setting object</a>) Configuration
options for the index. See <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">Index Settings</a>.
</dd>
<dt>
<span class="term">
<code class="literal">template</code>
</span>
</dt>
<dd>
(Optional, object)
This is the template to be applied, may optionally include a <code class="literal">mappings</code>,
<code class="literal">settings</code>, or <code class="literal">aliases</code> configuration.
</dd>
<dt>
<span class="term">
<code class="literal">composed_of</code>
</span>
</dt>
<dd>
(Optional, array of strings)
An ordered list of component template names. Component templates will be merged in the order
specified, meaning that the last component template specified has the highest precedence. See the
<a class="xref" href="indices-component-template.html" title="Component template API">component template</a> reference for information.
</dd>
<dt>
<span class="term">
<code class="literal">priority</code>
</span>
</dt>
<dd>
(Optional, integer)
Priority to determine index template precedence when a new index is created. The index template with
the highest priority is chosen. If no priority is specified the template is treated as though it is
of priority 0 (lowest priority).
This number is not automatically generated by Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">version</code>
</span>
</dt>
<dd>
(Optional, integer)
Version number used to manage index templates externally.
This number is not automatically generated by Elasticsearch.
</dd>
<dt>
<span class="term">
<code class="literal">_meta</code>
</span>
</dt>
<dd>
(Optional, object)
Optional user metadata about the index template. May have any contents.
This map is not automatically generated by Elasticsearch.
</dd>
</dl>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-example"></a>Examples<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h3>
</div></div></div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_composing_multiple_component_templates"></a>Composing multiple component templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h3>
</div></div></div>
<p>When multiple component templates are specified in the <code class="literal">composed_of</code> field for an index template,
they are merged in the order specified, meaning that later component templates override earlier
component templates.</p>
<p>For two component templates, the order they are specified changes the number of shards for an index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_component_template/template_with_2_shards
{
  "template": {
    "settings": {
      "index.number_of_shards": 2
    }
  }
}

PUT /_component_template/template_with_3_shards
{
  "template": {
    "settings": {
      "index.number_of_shards": 3
    }
  }
}

PUT /_index_template/template_1
{
  "index_patterns": ["t*"],
  "composed_of": ["template_with_2_shards", "template_with_3_shards"]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1708.console"></div>
<p>In this case, an index matching <code class="literal">t*</code> will have three primary shards. If the order of composed
templates were reversed, the index would have two primary shards.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="simulating-templates"></a>Simulating template composition<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h4>
</div></div></div>
<p>Since templates can be composed not only of multiple component templates, but also the index
template itself, there are two simulation APIs to determine what the resulting index settings will
be.</p>
<p>To simulate the settings that would be applied to a matching index name:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_index_template/_simulate_index/myindex</pre>
</div>
<div class="console_widget" data-snippet="snippets/1709.console"></div>
<p>To simulate the settings that would be applied from a particular template:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_index_template/_simulate/template_1

POST /_index_template/_simulate
{
  "index_patterns": ["foo"],
  "template": {
    "settings": {
      "number_of_replicas": 0
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1710.console"></div>
<p>Here&#8217;s an example demonstrating simulating both an index name and template name:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_component_template/ct1 <a id="CO580-1"></a><i class="conum" data-value="1"></i>
{
  "template": {
    "settings": {
      "index.number_of_shards": 2
    }
  }
}

PUT /_component_template/ct2 <a id="CO580-2"></a><i class="conum" data-value="2"></i>
{
  "template": {
    "settings": {
      "index.number_of_replicas": 0
    },
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        }
      }
    }
  }
}

PUT /_index_template/final-template <a id="CO580-3"></a><i class="conum" data-value="3"></i>
{
  "index_patterns": ["logdata-*"],
  "composed_of": ["ct1", "ct2"],
  "priority": 5
}

POST /_index_template/_simulate_index/logdata-2019-02-01 <a id="CO580-4"></a><i class="conum" data-value="4"></i>

POST /_index_template/_simulate/final-template <a id="CO580-5"></a><i class="conum" data-value="5"></i>

POST /_index_template/_simulate <a id="CO580-6"></a><i class="conum" data-value="6"></i>
{
  "index_patterns": ["logdata-*"],
  "composed_of": ["ct2"],
  "priority": 10,
  "template": {
    "settings": {
      "index.number_of_replicas": 1
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1711.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO580-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Creating a component template (ct1) setting the number of shards to two</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO580-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Creating another component template (ct2) setting the number of replicas to zero with mappings</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO580-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Creating an index template called "final" template using ct1 and ct2</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO580-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>Simulate the settings that would be applied for a new index "logdata-2019-02-01"</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO580-5"><i class="conum" data-value="5"></i></a></p>
</td>
<td align="left" valign="top">
<p>Simulate the settings composed using the "final-template" index template</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO580-6"><i class="conum" data-value="6"></i></a></p>
</td>
<td align="left" valign="top">
<p>Simulate the settings composed using a custom specified template</p>
</td>
</tr>
</table>
</div>
<p>The output of the simulate API from the last example call looks like:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "template" : {
    "settings" : {
      "index" : {
        "number_of_replicas" : "1" <a id="CO581-1"></a><i class="conum" data-value="1"></i>
      }
    },
    "mappings" : {
      "properties" : {
        "@timestamp" : { <a id="CO581-2"></a><i class="conum" data-value="2"></i>
          "type" : "date"
        }
      }
    },
    "aliases" : { }
  },
  "overlapping" : [ <a id="CO581-3"></a><i class="conum" data-value="3"></i>
    {
      "name" : "final-template",
      "index_patterns" : [
        "logdata-*"
      ]
    }
  ]
}</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO581-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The number of replicas from the simulated template body</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO581-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>The <code class="literal">@timestamp</code> field inherited from the "ct2" component template</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO581-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>Any overlapping templates that would have matched, but have lower priority</p>
</td>
</tr>
</table>
</div>
<p>When simulating a template and specifying a template in the body of the request, the simulated
template is not added to the existing templates, it is only used for the simulation.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_index_template_with_index_aliases"></a>Index template with index aliases<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h4>
</div></div></div>
<p>You can include <a class="xref" href="indices-aliases.html" title="Update index alias API">index aliases</a> in an index template.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _index_template/template_1
{
  "index_patterns" : ["te*"],
  "template": {
    "settings" : {
        "number_of_shards" : 1
    },
    "aliases" : {
        "alias1" : {},
        "alias2" : {
            "filter" : {
                "term" : {"user" : "kimchy" }
            },
            "routing" : "kimchy"
        },
        "{index}-alias" : {} <a id="CO582-1"></a><i class="conum" data-value="1"></i>
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1712.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO582-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>the <code class="literal">{index}</code> placeholder in the alias name will be replaced with the
actual index name that the template gets applied to, during index creation.</p>
</td>
</tr>
</table>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="multiple-templates"></a>Indices matching multiple templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h4>
</div></div></div>
<p>When an index is created that matches multiple index templates, only the index template with the
highest priority is applied. For example:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_index_template/template_1
{
  "index_patterns" : ["t*"],
  "priority" : 0,
  "template": {
    "settings" : {
      "number_of_shards" : 1,
      "number_of_replicas": 0
    },
    "mappings" : {
      "_source" : { "enabled" : false }
    }
  }
}

PUT /_index_template/template_2
{
  "index_patterns" : ["te*"],
  "priority" : 1,
  "template": {
    "settings" : {
      "number_of_shards" : 2
    },
    "mappings" : {
      "_source" : { "enabled" : true }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1713.console"></div>
<p>For indices that start with <code class="literal">te*</code>, <code class="literal">_source</code> will enabled, and the index will have two primary
shards and one replica, because only <code class="literal">template_2</code> will be applied.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Multiple templates with overlapping index patterns at the same priority are not allowed, and
an error will be thrown when attempting to create a template matching an existing index template at
identical priorities.</p>
</div>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="versioning-templates"></a>Template versioning<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use the <code class="literal">version</code> parameter to add an optional version number to an index template. External
systems can use these version numbers to simplify template management.</p>
<p>The <code class="literal">version</code> parameter is completely optional and not automatically generated by Elasticsearch.</p>
<p>To unset a <code class="literal">version</code>, replace the template without specifying one.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_index_template/template_1
{
  "index_patterns" : ["foo", "bar"],
  "priority" : 0,
  "template": {
    "settings" : {
        "number_of_shards" : 1
    }
  },
  "version": 123
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1714.console"></div>
<p>To check the <code class="literal">version</code>, you can use the <a class="xref" href="indices-get-template.html" title="Get index template API">get index template</a> API.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="template-metadata"></a>Template metadata<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use the <code class="literal">_meta</code> parameter to add optional metadata to an index template. This is a
user-defined map that can contain any data. This data will be stored in the cluster state however,
so keeping it short is preferrable.</p>
<p>The <code class="literal">_meta</code> parameter is completely optional and not automatically generated by Elasticsearch.</p>
<p>To unset <code class="literal">_meta</code>, replace the template without specifying one.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /_index_template/template_1
{
  "index_patterns": ["foo", "bar"],
  "template": {
    "settings" : {
        "number_of_shards" : 3
    }
  },
  "_meta": {
    "description": "set number of shards to three",
    "serialization": {
      "class": "MyIndexTemplate",
      "id": 17
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1715.console"></div>
<p>To check the <code class="literal">_meta</code>, you can use the <a class="xref" href="indices-get-template.html" title="Get index template API">get index template</a> API.</p>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="indices-templates.html">« Index template API</a>
</span>
<span class="next">
<a href="indices-component-template.html">Component template API »</a>
</span>
</div>
</div>
</body>
</html>
