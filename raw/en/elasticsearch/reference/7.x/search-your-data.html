<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Search your data | Elasticsearch Reference [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.x]"/>
<link rel="up" href="index.html" title="Elasticsearch Reference [7.x]"/>
<link rel="prev" href="data-streams-change-mappings-and-settings.html" title="Change mappings and settings for a data stream"/>
<link rel="next" href="collapse-search-results.html" title="Collapse search results"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.x"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.x"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.x]</a></span>
»
<span class="breadcrumb-node">Search your data</span>
</div>
<div class="navheader">
<span class="prev">
<a href="data-streams-change-mappings-and-settings.html">« Change mappings and settings for a data stream</a>
</span>
<span class="next">
<a href="collapse-search-results.html">Collapse search results »</a>
</span>
</div>
<div class="part">
<div class="titlepage"><div><div>
<h1 class="title"><a id="search-your-data"></a>Search your data<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/search/search-your-data.asciidoc">edit</a></h1>
</div></div></div>
<div class="openblock partintro">
<div class="content">
<p><a id="search-query"></a>A <em>search query</em>, or <em>query</em>, is a request for information about data in
Elasticsearch data streams or indices.</p>
<p>You can think of a query as a question, written in a way Elasticsearch understands.
Depending on your data, you can use a query to get answers to questions like:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
What processes on my server take longer than 500 milliseconds to respond?
</li>
<li class="listitem">
What users on my network ran <code class="literal">regsvr32.exe</code> within the last week?
</li>
<li class="listitem">
How many of my products have a price greater than $20?
</li>
<li class="listitem">
What pages on my website contain a specific word or phrase?
</li>
</ul>
</div>
<p>A <em>search</em> consists of one or more queries that are combined and sent to Elasticsearch.
Documents that match a search&#8217;s queries are returned in the <em>hits</em>, or
<em>search results</em>, of the response.</p>
<p>A search may also contain additional information used to better process its
queries. For example, a search may be limited to a specific index or only return
a specific number of results.</p>
<h2><a id="run-an-es-search"></a>Run a search<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/search/search-your-data.asciidoc">edit</a></h2>
<p>You can use the <a class="xref" href="search-search.html" title="Search API">search API</a> to search data stored in
Elasticsearch data streams or indices.</p>
<p>The API can run two types of searches, depending on how you provide
queries:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<a class="xref" href="search-your-data.html#run-uri-search" title="Run a URI search">URI searches</a>
</span>
</dt>
<dd>
Queries are provided through a query parameter. URI searches tend to be
simpler and best suited for testing.
</dd>
<dt>
<span class="term">
<a class="xref" href="search-your-data.html#run-request-body-search" title="Run a request body search">Request body searches</a>
</span>
</dt>
<dd>
Queries are provided through the JSON body of the API request. These queries
are written in <a class="xref" href="query-dsl.html" title="Query DSL">Query DSL</a>. We recommend using request body
searches in most production use cases.
</dd>
</dl>
</div>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you specify a query in both the URI and request body, the search API request
runs only the URI query.</p>
</div>
</div>
<h3><a id="run-uri-search"></a>Run a URI search<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/search/search-your-data.asciidoc">edit</a></h3>
<p>You can use the search API&#8217;s <a class="xref" href="search-search.html#search-api-query-params-q"><code class="literal">q</code> query string
parameter</a> to run a search in the request&#8217;s URI. The <code class="literal">q</code> parameter only accepts
queries written in Lucene&#8217;s <a class="xref" href="query-dsl-query-string-query.html#query-string-syntax" title="Query string syntax">query string syntax</a>.</p>
<p>To get started, ingest or add some data to an Elasticsearch data stream or index.</p>
<p>The following <a class="xref" href="docs-bulk.html" title="Bulk API">bulk API</a> request adds some example server access log
data to the <code class="literal">my-index-000001</code> index.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT /my-index-000001/_bulk?refresh
{ "index":{ } }
{ "@timestamp": "2099-11-15T14:12:12", "http": { "request": { "method": "get" }, "response": { "bytes": 1070000, "status_code": 200 }, "version": "1.1" }, "message": "GET /search HTTP/1.1 200 1070000", "source": { "ip": "127.0.0.1" }, "user": { "id": "kimchy" } }
{ "index":{ } }
{ "@timestamp": "2099-11-15T14:12:12", "http": { "request": { "method": "get" }, "response": { "bytes": 1070000, "status_code": 200 }, "version": "1.1" }, "message": "GET /search HTTP/1.1 200 1070000", "source": { "ip": "10.42.42.42" }, "user": { "id": "elkbee" } }
{ "index":{ } }
{ "@timestamp": "2099-11-15T14:12:12", "http": { "request": { "method": "get" }, "response": { "bytes": 1070000, "status_code": 200 }, "version": "1.1" }, "message": "GET /search HTTP/1.1 200 1070000", "source": { "ip": "10.42.42.42" }, "user": { "id": "elkbee" } }</pre>
</div>
<div class="console_widget" data-snippet="snippets/126.console"></div>
<p>You can now use the search API to run a URI search on this index.</p>
<p>The following URI search matches documents with a <code class="literal">user.id</code> value of <code class="literal">kimchy</code>.
Note the query is specified using the <code class="literal">q</code> query string parameter.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_search?q=user.id:kimchy</pre>
</div>
<div class="console_widget" data-snippet="snippets/127.console"></div>
<p>The API returns the following response. Note the <code class="literal">hits.hits</code> property contains
the document that matched the query.</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "took": 5,
  "timed_out": false,
  "_shards": {
    "total": 1,
    "successful": 1,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": {
      "value": 1,
      "relation": "eq"
    },
    "max_score": 0.9808291,
    "hits": [
      {
        "_index": "my-index-000001",
        "_type": "_doc",
        "_id": "kxWFcnMByiguvud1Z8vC",
        "_score": 0.9808291,
        "_source": {
          "@timestamp": "2099-11-15T14:12:12",
          "http": {
            "request": {
              "method": "get"
            },
            "response": {
              "bytes": 1070000,
              "status_code": 200
            },
            "version": "1.1"
          },
          "message": "GET /search HTTP/1.1 200 1070000",
          "source": {
            "ip": "127.0.0.1"
          },
          "user": {
            "id": "kimchy"
          }
        }
      }
    ]
  }
}</pre>
</div>
<h3><a id="run-request-body-search"></a>Run a request body search<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/search/search-your-data.asciidoc">edit</a></h3>
<p>You can use the search API&#8217;s <a class="xref" href="search-search.html#request-body-search-query"><code class="literal">query</code> request
body parameter</a> to provide a query as a JSON object, written in
<a class="xref" href="query-dsl.html" title="Query DSL">Query DSL</a>.</p>
<p>The following request body search uses the <a class="xref" href="query-dsl-match-query.html" title="Match query"><code class="literal">match</code></a>
query to match documents with a <code class="literal">user.id</code> value of <code class="literal">kimchy</code>. Note the
<code class="literal">match</code> query is specified as a JSON object in the <code class="literal">query</code> parameter.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001/_search
{
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/128.console"></div>
<p>The API returns the following response.</p>
<p>The <code class="literal">hits.hits</code> property contains matching documents. By default, the response
sorts these matching documents by <code class="literal">_score</code>, a <a class="xref" href="query-filter-context.html#relevance-scores" title="Relevance scores">relevance
score</a> that measures how well each document matches the query.</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "took": 5,
  "timed_out": false,
  "_shards": {
    "total": 1,
    "successful": 1,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": {
      "value": 1,
      "relation": "eq"
    },
    "max_score": 0.9808291,
    "hits": [
      {
        "_index": "my-index-000001",
        "_type": "_doc",
        "_id": "kxWFcnMByiguvud1Z8vC",
        "_score": 0.9808291,
        "_source": {
          "@timestamp": "2099-11-15T14:12:12",
          "http": {
            "request": {
              "method": "get"
            },
            "response": {
              "bytes": 1070000,
              "status_code": 200
            },
            "version": "1.1"
          },
          "message": "GET /search HTTP/1.1 200 1070000",
          "source": {
            "ip": "127.0.0.1"
          },
          "user": {
            "id": "kimchy"
          }
        }
      }
    ]
  }
}</pre>
</div>
<h3><a id="search-multiple-indices"></a>Search multiple data streams and indices<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/search/search-your-data.asciidoc">edit</a></h3>
<p>To search multiple data streams and indices, add them as comma-separated values
in the search API request path.</p>
<p>The following request searches the <code class="literal">my-index-000001</code> and <code class="literal">my-index-000002</code>
indices.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /my-index-000001,my-index-000002/_search
{
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/129.console"></div>
<p>You can also search multiple data streams and indices using a wildcard (<code class="literal">*</code>)
pattern.</p>
<p>The following request targets the wildcard pattern <code class="literal">user_logs*</code>. The request
searches any data streams or indices in the cluster that start with <code class="literal">user_logs</code>.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /user_logs*/_search
{
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/130.console"></div>
<p>To search all data streams and indices in a cluster, omit the target from the
request path. Alternatively, you can use <code class="literal">_all</code> or <code class="literal">*</code>.</p>
<p>The following requests are equivalent and search all data streams and indices in the cluster.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_search
{
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  }
}

GET /_all/_search
{
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  }
}

GET /*/_search
{
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/131.console"></div>
<h3><a id="paginate-search-results"></a>Paginate search results<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/search/request/from-size.asciidoc">edit</a></h3>
<p>By default, the search API returns the top 10 matching documents.</p>
<p>To paginate through a larger set of results, you can use the search API&#8217;s <code class="literal">size</code>
and <code class="literal">from</code> parameters. The <code class="literal">size</code> parameter is the number of matching documents
to return. The <code class="literal">from</code> parameter is a zero-indexed offset from the beginning of
the complete result set that indicates the document you want to start with.</p>
<p>The following search API request sets the <code class="literal">from</code> offset to <code class="literal">5</code>, meaning the
request offsets, or skips, the first five matching documents.</p>
<p>The <code class="literal">size</code> parameter is <code class="literal">20</code>, meaning the request can return up to 20 documents,
starting at the offset.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_search
{
  "from": 5,
  "size": 20,
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/132.console"></div>
<p>By default, you cannot page through more than 10,000 documents using the <code class="literal">from</code>
and <code class="literal">size</code> parameters. This limit is set using the
<a class="xref" href="index-modules.html#index-max-result-window"><code class="literal">index.max_result_window</code></a> index setting.</p>
<p>Deep paging or requesting many results at once can result in slow searches.
Results are sorted before being returned. Because search requests usually span
multiple shards, each shard must generate its own sorted results. These separate
results must then be combined and sorted to ensure that the overall sort order
is correct.</p>
<p>As an alternative to deep paging, we recommend using
<a class="xref" href="search-request-body.html#request-body-search-scroll" title="Scroll">scroll</a> or the
<a class="xref" href="search-request-body.html#request-body-search-search-after" title="Search After"><code class="literal">search_after</code></a> parameter.</p>
<div class="warning admon">
<div class="icon"></div>
<div class="admon_content">
<p>Elasticsearch uses Lucene&#8217;s internal doc IDs as tie-breakers. These internal
doc IDs can be completely different across replicas of the same
data. When paginating, you might occasionally see that documents with the same
sort values are not ordered consistently.</p>
</div>
</div>
<h3><a id="search-fields"></a>Retrieve selected fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/search/search-fields.asciidoc">edit</a></h3>
<p>By default, each hit in the search response includes the document
<a class="xref" href="mapping-source-field.html" title="_source field"><code class="literal">_source</code></a>, which is the entire JSON object that was
provided when indexing the document. To retrieve specific fields in the search
response, you can use the <code class="literal">fields</code> parameter:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST twitter/_search
{
  "query": {
    "match": {
      "message": "elasticsearch"
    }
  },
  "fields": ["user", "date"],
  "_source": false
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/133.console"></div>
<p>The <code class="literal">fields</code> parameter consults both a document&#8217;s <code class="literal">_source</code> and the index
mappings to load and return values. Because it makes use of the mappings,
<code class="literal">fields</code> has some advantages over referencing the <code class="literal">_source</code> directly: it
accepts <a class="xref" href="multi-fields.html" title="fields">multi-fields</a> and <a class="xref" href="alias.html" title="Alias data type">field aliases</a>, and
also formats field values like dates in a consistent way.</p>
<p>A document&#8217;s <code class="literal">_source</code> is stored as a single field in Lucene. So the whole
<code class="literal">_source</code> object must be loaded and parsed even if only a small number of
fields are requested. To avoid this limitation, you can try another option for
loading fields:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Use the <a class="xref" href="search-your-data.html#docvalue-fields" title="Doc value fields"><code class="literal">docvalue_fields</code></a>
parameter to get values for selected fields. This can be a good
choice when returning a fairly small number of fields that support doc values,
such as keywords and dates.
</li>
<li class="listitem">
Use the <a class="xref" href="search-request-body.html#request-body-search-stored-fields" title="Stored Fields"><code class="literal">stored_fields</code></a> parameter to
get the values for specific stored fields (fields that use the
<a class="xref" href="mapping-store.html" title="store"><code class="literal">store</code></a> mapping option).
</li>
</ul>
</div>
<p>You can find more detailed information on each of these methods in the
following sections:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="search-your-data.html#search-fields-param" title="Fields">Fields</a>
</li>
<li class="listitem">
<a class="xref" href="search-your-data.html#docvalue-fields" title="Doc value fields">Doc value fields</a>
</li>
<li class="listitem">
<a class="xref" href="search-your-data.html#stored-fields" title="Stored fields">Stored fields</a>
</li>
<li class="listitem">
<a class="xref" href="search-your-data.html#source-filtering" title="Source filtering">Source filtering</a>
</li>
</ul>
</div>
<h3><a id="search-fields-param"></a>Fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/search/search-fields.asciidoc">edit</a></h3>
<p>The <code class="literal">fields</code> parameter allows for retrieving a list of document fields in
the search response. It consults both the document <code class="literal">_source</code> and the index
mappings to return each value in a standardized way that matches its mapping
type. By default, date fields are formatted according to the
<a class="xref" href="mapping-date-format.html" title="format">date format</a> parameter in their mappings.</p>
<p>The following search request uses the <code class="literal">fields</code> parameter to retrieve values
for the <code class="literal">user</code> field, all fields starting with <code class="literal">location.</code>, and the
<code class="literal">date</code> field:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST twitter/_search
{
  "query": {
    "match": {
      "message": "elasticsearch"
    }
  },
  "fields": [
    "user",
    "location.*", <a id="CO26-1"></a><i class="conum" data-value="1"></i>
    {
      "field": "date",
      "format": "epoch_millis" <a id="CO26-2"></a><i class="conum" data-value="2"></i>
    }
  ],
  "_source": false
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/134.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO26-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Both full field names and wildcard patterns are accepted.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO26-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Using object notation, you can pass a <code class="literal">format</code> parameter to apply a custom
format for the field&#8217;s values. The date fields
<a class="xref" href="date.html" title="Date data type"><code class="literal">date</code></a> and <a class="xref" href="date_nanos.html" title="Date nanoseconds data type"><code class="literal">date_nanos</code></a> accept a
<a class="xref" href="mapping-date-format.html" title="format">date format</a>. <a class="xref" href="mapping-types.html#spatial_datatypes" title="Spatial data types">Spatial fields</a>
accept either <code class="literal">geojson</code> for <a href="http://www.geojson.org" class="ulink" target="_top">GeoJSON</a> (the default)
or <code class="literal">wkt</code> for
<a href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry" class="ulink" target="_top">Well Known Text</a>.
Other field types do not support the <code class="literal">format</code> parameter.</p>
</td>
</tr>
</table>
</div>
<p>The values are returned as a flat list in the <code class="literal">fields</code> section in each hit:</p>
<div class="pre_wrapper lang-console-result">
<pre class="programlisting prettyprint lang-console-result">{
  "took" : 2,
  "timed_out" : false,
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "skipped" : 0,
    "failed" : 0
  },
  "hits" : {
    "total" : {
      "value" : 1,
      "relation" : "eq"
    },
    "max_score" : 1.0,
    "hits" : [
      {
        "_index" : "twitter",
        "_id" : "0",
        "_score" : 1.0,
        "_type" : "_doc",
        "fields" : {
          "user" : [
            "kimchy"
          ],
          "date" : [
            "1258294332000"
          ],
          "location.city": [
            "Amsterdam"
          ],
          "location.country": [
            "Netherlands"
          ]
        }
      }
    ]
  }
}</pre>
</div>
<p>Only leaf fields are returned&#8201;&#8212;&#8201;<code class="literal">fields</code> does not allow for fetching entire
objects.</p>
<p>The <code class="literal">fields</code> parameter handles field types like <a class="xref" href="alias.html" title="Alias data type">field aliases</a> and
<a class="xref" href="constant-keyword.html" title="Constant keyword data type"><code class="literal">constant_keyword</code></a> whose values aren&#8217;t always present in
the <code class="literal">_source</code>. Other mapping options are also respected, including
<a class="xref" href="ignore-above.html" title="ignore_above"><code class="literal">ignore_above</code></a>, <a class="xref" href="ignore-malformed.html" title="ignore_malformed"><code class="literal">ignore_malformed</code></a> and
<a class="xref" href="null-value.html" title="null_value"><code class="literal">null_value</code></a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>The <code class="literal">fields</code> response always returns an array of values for each field,
even when there is a single value in the <code class="literal">_source</code>. This is because Elasticsearch has
no dedicated array type, and any field could contain multiple values. The
<code class="literal">fields</code> parameter also does not guarantee that array values are returned in
a specific order. See the mapping documentation on <a class="xref" href="array.html" title="Arrays">arrays</a> for more
background.</p>
</div>
</div>
<h3><a id="docvalue-fields"></a>Doc value fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/search/search-fields.asciidoc">edit</a></h3>
<p>You can use the <a class="xref" href="search-your-data.html#docvalue-fields" title="Doc value fields"><code class="literal">docvalue_fields</code></a> parameter to return
<a class="xref" href="doc-values.html" title="doc_values">doc values</a> for one or more fields in the search response.</p>
<p>Doc values store the same values as the <code class="literal">_source</code> but in an on-disk,
column-based structure that&#8217;s optimized for sorting and aggregations. Since each
field is stored separately, Elasticsearch only reads the field values that were requested
and can avoid loading the whole document <code class="literal">_source</code>.</p>
<p>Doc values are stored for supported fields by default. However, doc values are
not supported for <a class="xref" href="text.html" title="Text data type"><code class="literal">text</code></a> or
<a href="/guide/en/elasticsearch/plugins/7.x/mapper-annotated-text-usage.html" class="ulink" target="_top"><code class="literal">text_annotated</code></a> fields.</p>
<p>The following search request uses the <code class="literal">docvalue_fields</code> parameter to retrieve
doc values for the <code class="literal">user</code> field, all fields starting with <code class="literal">location.</code>, and the
<code class="literal">date</code> field:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET twitter/_search
{
  "query": {
    "match": {
      "message": "elasticsearch"
    }
  },
  "docvalue_fields": [
    "user",
    "location.*", <a id="CO27-1"></a><i class="conum" data-value="1"></i>
    {
      "field": "date",
      "format": "epoch_millis" <a id="CO27-2"></a><i class="conum" data-value="2"></i>
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/135.console"></div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO27-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>Both full field names and wildcard patterns are accepted.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO27-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>Using object notation, you can pass a <code class="literal">format</code> parameter to apply a custom
format for the field&#8217;s doc values. <a class="xref" href="date.html" title="Date data type">Date fields</a> support a
<a class="xref" href="mapping-date-format.html" title="format">date <code class="literal">format</code></a>. <a class="xref" href="number.html" title="Numeric data types">Numeric fields</a> support a
<a href="https://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html" class="ulink" target="_top">DecimalFormat
pattern</a>. Other field datatypes do not support the <code class="literal">format</code> parameter.</p>
</td>
</tr>
</table>
</div>
<div class="tip admon">
<div class="icon"></div>
<div class="admon_content">
<p>You cannot use the <code class="literal">docvalue_fields</code> parameter to retrieve doc values for
nested objects. If you specify a nested object, the search returns an empty
array (<code class="literal">[ ]</code>) for the field. To access nested fields, use the
<a class="xref" href="search-request-body.html#request-body-search-inner-hits" title="Inner hits"><code class="literal">inner_hits</code></a> parameter&#8217;s <code class="literal">docvalue_fields</code>
property.</p>
</div>
</div>
<h3><a id="stored-fields"></a>Stored fields<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/search/search-fields.asciidoc">edit</a></h3>
<p>It&#8217;s also possible to store an individual field&#8217;s values by using the
<a class="xref" href="mapping-store.html" title="store"><code class="literal">store</code></a> mapping option. You can use the
<a class="xref" href="search-request-body.html#request-body-search-stored-fields" title="Stored Fields"><code class="literal">stored_fields</code></a> parameter to include
these stored values in the search response.</p>
<h3><a id="source-filtering"></a>Source filtering<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/search/search-fields.asciidoc">edit</a></h3>
<p>You can use the <code class="literal">_source</code> parameter to select what fields of the source are
returned. This is called <em>source filtering</em>.</p>
<p>The following search API request sets the <code class="literal">_source</code> request body parameter to
<code class="literal">false</code>. The document source is not included in the response.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_search
{
  "_source": false,
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/136.console"></div>
<p>To return only a subset of source fields, specify a wildcard (<code class="literal">*</code>) pattern in
the <code class="literal">_source</code> parameter. The following search API request returns the source for
only the <code class="literal">obj</code> field and its properties.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_search
{
  "_source": "obj.*",
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/137.console"></div>
<p>You can also specify an array of wildcard patterns in the <code class="literal">_source</code> field. The
following search API request returns the source for only the <code class="literal">obj1</code> and
<code class="literal">obj2</code> fields and their properties.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_search
{
  "_source": [ "obj1.*", "obj2.*" ],
  "query": {
    "match": {
      "user.id": "kimchy"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/138.console"></div>
<p>For finer control, you can specify an object containing arrays of <code class="literal">includes</code> and
<code class="literal">excludes</code> patterns in the <code class="literal">_source</code> parameter.</p>
<p>If the <code class="literal">includes</code> property is specified, only source fields that match one of
its patterns are returned. You can exclude fields from this subset using the
<code class="literal">excludes</code> property.</p>
<p>If the <code class="literal">includes</code> property is not specified, the entire document source is
returned, excluding any fields that match a pattern in the <code class="literal">excludes</code> property.</p>
<p>The following search API request returns the source for only the <code class="literal">obj1</code> and
<code class="literal">obj2</code> fields and their properties, excluding any child <code class="literal">description</code> fields.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">GET /_search
{
  "_source": {
    "includes": [ "obj1.*", "obj2.*" ],
    "excludes": [ "*.description" ]
  },
  "query": {
    "term": {
      "user.id": "kimchy"
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/139.console"></div>
</div>
</div>






</div>
<div class="navfooter">
<span class="prev">
<a href="data-streams-change-mappings-and-settings.html">« Change mappings and settings for a data stream</a>
</span>
<span class="next">
<a href="collapse-search-results.html">Collapse search results »</a>
</span>
</div>
</div>
</body>
</html>
