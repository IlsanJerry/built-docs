<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Manage the snapshot lifecycle | Elasticsearch Reference [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.x]"/>
<link rel="up" href="snapshot-restore.html" title="Snapshot and restore"/>
<link rel="prev" href="snapshots-monitor-snapshot-restore.html" title="Monitor snapshot and restore progress"/>
<link rel="next" href="getting-started-snapshot-lifecycle-management.html" title="Configure snapshot lifecycle policies"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.x"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.x"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.x]</a></span>
»
<span class="breadcrumb-link"><a href="snapshot-restore.html">Snapshot and restore</a></span>
»
<span class="breadcrumb-node">Manage the snapshot lifecycle</span>
</div>
<div class="navheader">
<span class="prev">
<a href="snapshots-monitor-snapshot-restore.html">« Monitor snapshot and restore progress</a>
</span>
<span class="next">
<a href="getting-started-snapshot-lifecycle-management.html">Configure snapshot lifecycle policies »</a>
</span>
</div>
<div class="chapter xpack">
<div class="titlepage"><div><div>
<h2 class="title"><a id="snapshot-lifecycle-management"></a>Manage the snapshot lifecycle<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/slm/index.asciidoc">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2>
</div></div></div>
<p>You can set up snapshot lifecycle policies to automate the timing, frequency, and retention of snapshots.
Snapshot policies can apply to multiple indices.</p>
<p>The snapshot lifecycle management (SLM) <a class="xref" href="snapshot-lifecycle-management-api.html" title="Snapshot lifecycle management API">CRUD APIs</a> provide
the building blocks for the snapshot policy features that are part of the Management application in Kibana.
The  Snapshot and Restore UI makes it easy to set up policies, register snapshot repositories,
view and manage snapshots, and restore indices.</p>
<p>You can stop and restart SLM to temporarily pause automatic backups while performing
upgrades or other maintenance.
To disable SLM entirely, set <code class="literal">xpack.slm.enabled</code> to <code class="literal">false</code> in <code class="literal">elasticsearch.yml</code>.</p>
<h3><a id="slm-and-security"></a>Security and SLM<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/slm/index.asciidoc">edit</a></h3>
<p>Two built-in cluster privileges control access to the SLM actions when
Elasticsearch security features are enabled:</p>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">manage_slm</code>
</span>
</dt>
<dd>
Allows a user to perform all SLM actions, including creating and updating policies
and starting and stopping SLM.
</dd>
<dt>
<span class="term">
<code class="literal">read_slm</code>
</span>
</dt>
<dd>
Allows a user to perform all read-only SLM actions,
such as getting policies and checking the SLM status.
</dd>
<dt>
<span class="term">
<code class="literal">cluster:admin/snapshot/*</code>
</span>
</dt>
<dd>
Allows a user to take and delete snapshots of any
index, whether or not they have access to that index.
</dd>
</dl>
</div>
<p>For example, the following request configures an <code class="literal">slm-admin</code> role that grants the privileges
necessary for administering SLM.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_security/role/slm-admin
{
  "cluster": ["manage_slm", "cluster:admin/snapshot/*"],
  "indices": [
    {
      "names": [".slm-history-*"],
      "privileges": ["all"]
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1186.console"></div>
<p>Or, for a read-only role that can retrieve policies (but not update, execute, or
delete them), as well as only view the history index:</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">POST /_security/role/slm-read-only
{
  "cluster": ["read_slm"],
  "indices": [
    {
      "names": [".slm-history-*"],
      "privileges": ["read"]
    }
  ]
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1187.console"></div>


</div>
<div class="navfooter">
<span class="prev">
<a href="snapshots-monitor-snapshot-restore.html">« Monitor snapshot and restore progress</a>
</span>
<span class="next">
<a href="getting-started-snapshot-lifecycle-management.html">Configure snapshot lifecycle policies »</a>
</span>
</div>
</div>
</body>
</html>
