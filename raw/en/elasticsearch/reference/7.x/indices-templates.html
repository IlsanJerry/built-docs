<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Index template API | Elasticsearch Reference [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.x]"/>
<link rel="up" href="indices.html" title="Index APIs"/>
<link rel="prev" href="indices-open-close.html" title="Open index API"/>
<link rel="next" href="indices-get-template.html" title="Get index template API"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.x"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.x"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.x]</a></span>
»
<span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span>
»
<span class="breadcrumb-link"><a href="indices.html">Index APIs</a></span>
»
<span class="breadcrumb-node">Index template API</span>
</div>
<div class="navheader">
<span class="prev">
<a href="indices-open-close.html">« Open index API</a>
</span>
<span class="next">
<a href="indices-get-template.html">Get index template API »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="indices-templates"></a>Index template API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h2>
</div></div></div>

<p>This documentation is about composable templates. For legacy templates please see the
<a class="xref" href="indices-templates-v1.html" title="Put index template API">legacy template documentation</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>In Elasticsearch 7.8 composable templates were introduced. When a composable template matches a given index
it always takes precedence over a legacy template. If no composable template matches, a legacy
template may still match and be applied.</p>
</div>
</div>
<p>An index template is a way to tell Elasticsearch how to configure an index when it is created. Templates are
configured prior to index creation and then when an index is created either manually or through
indexing a document, the template settings are used as a basis for creating the index.</p>
<p>There are two types of templates, index templates and <a class="xref" href="indices-component-template.html" title="Component template API">component
templates</a>. Component templates are reusable building blocks that configure mappings, settings, and
aliases. You use component templates to construct index templates, they aren&#8217;t directly applied to a
set of indices. Index templates can contain a collection of component templates, as well as directly
specify settings, mappings, and aliases.</p>
<p>If a new index matches more than one index template, the index template with the highest priority is used.</p>
<p>If an index is created with explicit settings and also matches an index template,
the settings from the create index request take precedence over settings specified in the index template and its component templates.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _component_template/component_template1
{
  "template": {
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        }
      }
    }
  }
}

PUT _component_template/other_component_template
{
  "template": {
    "mappings": {
      "properties": {
        "ip_address": {
          "type": "ip"
        }
      }
    }
  }
}

PUT _index_template/template_1
{
  "index_patterns": ["te*", "bar*"],
  "template": {
    "settings": {
      "number_of_shards": 1
    },
    "mappings": {
      "_source": {
        "enabled": false
      },
      "properties": {
        "host_name": {
          "type": "keyword"
        },
        "created_at": {
          "type": "date",
          "format": "EEE MMM dd HH:mm:ss Z yyyy"
        }
      }
    },
    "aliases": {
      "mydata": { }
    }
  },
  "priority": 10,
  "composed_of": ["component_template1", "other_component_template"],
  "version": 3,
  "_meta": {
    "description": "my custom"
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1705.console"></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-request"></a>Request<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h3>
</div></div></div>
<p><code class="literal">PUT /_index_template/&lt;index-template&gt;</code></p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="put-index-template-api-desc"></a>Description<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h3>
</div></div></div>
<p>Creates or updates an index template.</p>
<p>Index templates define <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settings">settings</a> and <a class="xref" href="mapping.html" title="Mapping">mappings</a> that you can
automatically apply when creating new indices. Elasticsearch applies templates to new indices based on an
index pattern that matches the index name.</p>
<p>Index templates are only applied during index creation. Changes to index templates do not affect
existing indices. Settings and mappings specified in <a class="xref" href="indices-create-index.html" title="Create index API">create index</a> API
requests override any settings or mappings specified in an index template.</p>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_comments_in_index_templates"></a>Comments in index templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h4>
</div></div></div>
<p>You can use C-style /* */ block comments in index templates. You can include comments anywhere in
the request body, except before the opening curly bracket.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="getting"></a>Getting templates<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.x/docs/reference/indices/index-templates.asciidoc">edit</a></h4>
</div></div></div>

</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="indices-open-close.html">« Open index API</a>
</span>
<span class="next">
<a href="indices-get-template.html">Get index template API »</a>
</span>
</div>
</div>
</body>
</html>
