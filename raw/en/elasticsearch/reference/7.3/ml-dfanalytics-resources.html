<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Data frame analytics job resources
        | Elasticsearch Reference [7.3]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [7.3]" /><link rel="up" href="api-definitions.html" title="Definitions" /><link rel="prev" href="ml-datafeed-resource.html" title="Datafeed resources" /><link rel="next" href="data-frame-transform-resource.html" title="Data frame transform resources" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.3" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="7.3" /></head><body><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [7.3]
    </a></span> » <span class="breadcrumb-link"><a href="rest-apis.html">REST APIs</a></span> » <span class="breadcrumb-link"><a href="api-definitions.html">Definitions</a></span> » <span class="breadcrumb-node">Data frame analytics job resources</span></div><div xmlns="" class="navheader"><span class="prev"><a href="ml-datafeed-resource.html">
              « 
              Datafeed resources</a>
           
        </span><span class="next">
           
          <a href="data-frame-transform-resource.html">Data frame transform resources
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="ml-dfanalytics-resources"></a>Data frame analytics job resources<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/ml/df-analytics/apis/dfanalyticsresources.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a xmlns="" class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>Data frame analytics resources relate to APIs such as <a class="xref" href="put-dfanalytics.html" title="Create data frame analytics jobs API">Create data frame analytics jobs</a> and
<a class="xref" href="get-dfanalytics.html" title="Get data frame analytics jobs API">Get data frame analytics jobs</a>.</p><h4><a id="ml-dfanalytics-properties"></a>Properties<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/ml/df-analytics/apis/dfanalyticsresources.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">analysis</code></span></dt><dd>(object) The type of analysis that is performed on the <code class="literal">source</code>. For example:
<code class="literal">outlier_detection</code>. For more information, see <a class="xref" href="ml-dfanalytics-resources.html#dfanalytics-types" title="Analysis objects">Analysis objects</a>.</dd><dt><span class="term"><code class="literal">analyzed_fields</code></span></dt><dd><p class="simpara">(object) You can specify both <code class="literal">includes</code> and/or <code class="literal">excludes</code> patterns. If
<code class="literal">analyzed_fields</code> is not set, only the relevant fields will be included. For
example all the numeric fields for outlier detection.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">analyzed_fields.includes</code></span></dt><dd>(array) An array of strings that defines the fields that will be included in
the analysis.</dd><dt><span class="term"><code class="literal">analyzed_fields.excludes</code></span></dt><dd>(array) An array of strings that defines the fields that will be excluded
from the analysis.</dd></dl></div></dd></dl></div><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">PUT _ml/data_frame/analytics/loganalytics
{
  "source": {
    "index": "logdata"
  },
  "dest": {
    "index": "logdata_out"
  },
  "analysis": {
    "outlier_detection": {
    }
  },
  "analyzed_fields": {
        "includes": [ "request.bytes", "response.counts.error" ],
        "excludes": [ "source.geo" ]
  }
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1784.console"></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">dest</code></span></dt><dd><p class="simpara">(object) The destination configuration of the analysis.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">index</code></span></dt><dd>(Required, string) Defines the <span class="emphasis"><em>destination index</em></span> to store the results of
the data frame analytics job.</dd><dt><span class="term"><code class="literal">results_field</code></span></dt><dd>(Optional, string) Defines the name of the field in which to store the
results of the analysis. Default to <code class="literal">ml</code>.</dd></dl></div></dd><dt><span class="term"><code class="literal">id</code></span></dt><dd>(string) The unique identifier for the data frame analytics job. This identifier can
contain lowercase alphanumeric characters (a-z and 0-9), hyphens, and
underscores. It must start and end with alphanumeric characters. This property
is informational; you cannot change the identifier for existing jobs.</dd><dt><span class="term"><code class="literal">model_memory_limit</code></span></dt><dd>(string) The approximate maximum amount of memory resources that are
permitted for analytical processing. The default value for data frame analytics jobs
is <code class="literal">1gb</code>. If your <code class="literal">elasticsearch.yml</code> file contains an
<code class="literal">xpack.ml.max_model_memory_limit</code> setting, an error occurs when you try to
create data frame analytics jobs that have <code class="literal">model_memory_limit</code> values greater than
that setting. For more information, see <a class="xref" href="ml-settings.html" title="Machine learning settings in Elasticsearch">Machine learning settings</a>.</dd><dt><span class="term"><code class="literal">source</code></span></dt><dd><p class="simpara">(object) The source configuration consisting an <code class="literal">index</code> and optionally a
<code class="literal">query</code> object.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">index</code></span></dt><dd>(Required, string or array) Index or indices on which to perform the
analysis. It can be a single index or index pattern as well as an array of
indices or patterns.</dd><dt><span class="term"><code class="literal">query</code></span></dt><dd>(Optional, object) The Elasticsearch query domain-specific language
(<a class="link" href="query-dsl.html" title="Query DSL">DSL</a>). This value corresponds to the query object in an Elasticsearch
search POST body. All the options that are supported by Elasticsearch can be used,
as this object is passed verbatim to Elasticsearch. By default, this property has
the following value: <code class="literal">{"match_all": {}}</code>.</dd></dl></div></dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="dfanalytics-types"></a>Analysis objects<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/ml/df-analytics/apis/dfanalyticsresources.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Data frame analytics resources contain <code class="literal">analysis</code> objects. For example, when you
create a data frame analytics job, you must define the type of analysis it performs.
Currently, <code class="literal">outlier_detection</code> is the only available type of analysis, however,
other types will be added, for example <code class="literal">regression</code>.</p><h4><a id="oldetection-resources"></a>Outlier detection configuration objects<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.3/docs/reference/ml/df-analytics/apis/dfanalyticsresources.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>An outlier detection configuration object has the following properties:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">n_neighbors</code></span></dt><dd>(integer) Defines the value for how many nearest neighbors each method of
outlier detection will use to calculate its outlier score. When the value is
not set, the system will dynamically detect an appropriate value.</dd><dt><span class="term"><code class="literal">method</code></span></dt><dd>(string) Sets the method that outlier detection uses. If the method is not set
outlier detection uses an ensemble of different methods and normalises and
combines their individual outlier scores to obtain the overall outlier score. We
recommend to use the ensemble method. Available methods are <code class="literal">lof</code>, <code class="literal">ldof</code>,
<code class="literal">distance_kth_nn</code>, <code class="literal">distance_knn</code>.</dd><dt><span class="term"><code class="literal">feature_influence_threshold</code></span></dt><dd>(double) The minimum outlier score that a document needs to have in order to
calculate its feature influence score.
Value range: 0-1 (<code class="literal">0.1</code> by default).</dd></dl></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="ml-datafeed-resource.html">
              « 
              Datafeed resources</a>
           
        </span><span class="next">
           
          <a href="data-frame-transform-resource.html">Data frame transform resources
               »
            </a></span></div></body></html>