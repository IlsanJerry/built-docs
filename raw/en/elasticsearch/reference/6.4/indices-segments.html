<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Indices Segments
        | Elasticsearch Reference [6.4]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [6.4]" /><link rel="up" href="indices.html" title="Indices APIs" /><link rel="prev" href="indices-stats.html" title="Indices Stats" /><link rel="next" href="indices-recovery.html" title="Indices Recovery" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.4" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="6.4" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [6.4]
    </a></span> » <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span> » <span class="breadcrumb-node">Indices Segments</span></div><div xmlns="" class="navheader"><span class="prev"><a href="indices-stats.html">
              « 
              Indices Stats</a>
           
        </span><span class="next">
           
          <a href="indices-recovery.html">Indices Recovery
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-segments"></a>Indices Segments<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/indices/segments.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Provide low level segments information that a Lucene index (shard level)
is built with. Allows to be used to provide more information on the
state of a shard and an index, possibly optimization information, data
"wasted" on deletes, and so on.</p><p>Endpoints include segments for a specific index:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">GET /test/_segments</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/674.console"></div><p>For several indices:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">GET /test1,test2/_segments</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/675.console"></div><p>Or for all indices:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">GET /_segments</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/676.console"></div><p>Response:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "_shards": ...
  "indices": {
    "test": {
      "shards": {
        "0": [
          {
            "routing": {
              "state": "STARTED",
              "primary": true,
              "node": "zDC_RorJQCao9xf9pg3Fvw"
            },
            "num_committed_segments": 0,
            "num_search_segments": 1,
            "segments": {
              "_0": {
                "generation": 0,
                "num_docs": 1,
                "deleted_docs": 0,
                "size_in_bytes": 3800,
                "memory_in_bytes": 1410,
                "committed": false,
                "search": true,
                "version": "7.0.0",
                "compound": true,
                "attributes": {
                }
              }
            }
          }
        ]
      }
    }
  }
}</pre></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">_0</span></dt><dd>The key of the JSON document is the name of the segment. This name
is used to generate file names: all files starting with this
segment name in the directory of the shard belong to this segment.</dd><dt><span class="term">generation</span></dt><dd>A generation number that is basically incremented when needing to
write a new segment. The segment name is derived from this
generation number.</dd><dt><span class="term">num_docs</span></dt><dd>The number of non-deleted documents that are stored in this segment.</dd><dt><span class="term">deleted_docs</span></dt><dd>The number of deleted documents that are stored in this segment.
It is perfectly fine if this number is greater than 0, space is
going to be reclaimed when this segment gets merged.</dd><dt><span class="term">size_in_bytes</span></dt><dd>The amount of disk space that this segment uses, in bytes.</dd><dt><span class="term">memory_in_bytes</span></dt><dd>Segments need to store some data into memory in order to be
searchable efficiently. This number returns the number of bytes
that are used for that purpose. A value of -1 indicates that
Elasticsearch was not able to compute this number.</dd><dt><span class="term">committed</span></dt><dd>Whether the segment has been sync’ed on disk. Segments that are
committed would survive a hard reboot. No need to worry in case
of false, the data from uncommitted segments is also stored in
the transaction log so that Elasticsearch is able to replay
changes on the next start.</dd><dt><span class="term">search</span></dt><dd>Whether the segment is searchable. A value of false would most
likely mean that the segment has been written to disk but no
refresh occurred since then to make it searchable.</dd><dt><span class="term">version</span></dt><dd>The version of Lucene that has been used to write this segment.</dd><dt><span class="term">compound</span></dt><dd>Whether the segment is stored in a compound file. When true, this
means that Lucene merged all files from the segment in a single
one in order to save file descriptors.</dd><dt><span class="term">attributes</span></dt><dd>Contains information about whether high compression was enabled</dd></dl></div><h3><a id="_verbose_mode"></a>Verbose mode<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.4/docs/reference/indices/segments.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>To add additional information that can be used for debugging, use the <code class="literal">verbose</code> flag.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">The format of the additional detail information is labelled as experimental in Lucene and it may change in the future.</p></div></div><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">GET /test/_segments?verbose=true</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/677.console"></div><p>Response:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
    ...
        "_0": {
            ...
            "ram_tree": [
                {
                    "description": "postings [PerFieldPostings(format=1)]",
                    "size_in_bytes": 2696,
                    "children": [
                        {
                            "description": "format 'Lucene50_0' ...",
                            "size_in_bytes": 2608,
                            "children" :[ ... ]
                        },
                        ...
                    ]
                },
                ...
                ]

        }
    ...
}</pre></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="indices-stats.html">
              « 
              Indices Stats</a>
           
        </span><span class="next">
           
          <a href="indices-recovery.html">Indices Recovery
               »
            </a></span></div></body></html>