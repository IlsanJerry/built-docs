<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Discovery settings
        | Elasticsearch Reference [6.5]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [6.5]" /><link rel="up" href="important-settings.html" title="Important Elasticsearch configuration" /><link rel="prev" href="network.host.html" title="network.host" /><link rel="next" href="heap-size.html" title="Setting the heap size" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.5" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="6.5" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [6.5]
    </a></span> » <span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span> » <span class="breadcrumb-link"><a href="important-settings.html">Important Elasticsearch configuration</a></span> » <span class="breadcrumb-node">Discovery settings</span></div><div class="navheader"><span class="prev"><a href="network.host.html">
              « 
              <code class="literal">network.host</code></a>
           
        </span><span class="next">
           
          <a href="heap-size.html">Setting the heap size
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="discovery-settings"></a>Discovery settings<a href="https://github.com/elastic/elasticsearch/edit/6.5/docs/reference/setup/important-settings/discovery-settings.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Elasticsearch uses a custom discovery implementation called "Zen Discovery" for
node-to-node clustering and master election. There are two important discovery
settings that should be configured before going to production.</p><h4><a id="unicast.hosts"></a><code class="literal">discovery.zen.ping.unicast.hosts</code><a href="https://github.com/elastic/elasticsearch/edit/6.5/docs/reference/setup/important-settings/discovery-settings.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Out of the box, without any network configuration, Elasticsearch will bind to
the available loopback addresses and will scan ports 9300 to 9305 to try to
connect to other nodes running on the same server. This provides an auto-
clustering experience without having to do any configuration.</p><p>When the moment comes to form a cluster with nodes on other servers, you have to
provide a seed list of other nodes in the cluster that are likely to be live and
contactable. This can be specified as follows:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">discovery.zen.ping.unicast.hosts:
   - 192.168.1.10:9300
   - 192.168.1.11 <a id="CO8-1"></a><i class="conum" data-value="1"></i>
   - seeds.mydomain.com <a id="CO8-2"></a><i class="conum" data-value="2"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO8-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>The port will default to <code class="literal">transport.profiles.default.port</code> and fallback to
<code class="literal">transport.tcp.port</code> if not specified.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO8-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>A hostname that resolves to multiple IP addresses will try all resolved
addresses.</p></td></tr></table></div><h4><a id="minimum_master_nodes"></a><code class="literal">discovery.zen.minimum_master_nodes</code><a href="https://github.com/elastic/elasticsearch/edit/6.5/docs/reference/setup/important-settings/discovery-settings.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>To prevent data loss, it is vital to configure the
<code class="literal">discovery.zen.minimum_master_nodes</code> setting so that each master-eligible node
knows the <span class="emphasis"><em>minimum number of master-eligible nodes</em></span> that must be visible in
order to form a cluster.</p><p>Without this setting, a cluster that suffers a network failure is at risk of
having the cluster split into two independent clusters — a split brain — which
will lead to data loss. A more detailed explanation is provided in
<a class="xref" href="modules-node.html#split-brain" title="Avoiding split brain with minimum_master_nodes">Avoiding split brain with <code class="literal">minimum_master_nodes</code></a>.</p><p>To avoid a split brain, this setting should be set to a <span class="emphasis"><em>quorum</em></span> of
master-eligible nodes:</p><pre class="literallayout">(master_eligible_nodes / 2) + 1</pre><p>In other words, if there are three master-eligible nodes, then minimum master
nodes should be set to <code class="literal">(3 / 2) + 1</code> or <code class="literal">2</code>:</p><div class="pre_wrapper lang-yaml"><pre class="programlisting prettyprint lang-yaml">discovery.zen.minimum_master_nodes: 2</pre></div></div><div class="navfooter"><span class="prev"><a href="network.host.html">
              « 
              <code class="literal">network.host</code></a>
           
        </span><span class="next">
           
          <a href="heap-size.html">Setting the heap size
               »
            </a></span></div></body></html>
