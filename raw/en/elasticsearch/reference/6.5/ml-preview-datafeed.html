<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Preview datafeeds API
        | Elasticsearch Reference [6.5]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [6.5]" /><link rel="up" href="ml-apis.html" title="Machine learning APIs" /><link rel="prev" href="ml-post-data.html" title="Post data to jobs API" /><link rel="next" href="ml-revert-snapshot.html" title="Revert model snapshots API" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.5" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="6.5" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [6.5]
    </a></span> » <span class="breadcrumb-link"><a href="xpack-api.html">X-Pack APIs</a></span> » <span class="breadcrumb-link"><a href="ml-apis.html">Machine learning APIs</a></span> » <span class="breadcrumb-node">Preview datafeeds API</span></div><div xmlns="" class="navheader"><span class="prev"><a href="ml-post-data.html">
              « 
              Post data to jobs API</a>
           
        </span><span class="next">
           
          <a href="ml-revert-snapshot.html">Revert model snapshots API
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="ml-preview-datafeed"></a>Preview datafeeds API<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.5/docs/reference/ml/apis/preview-datafeed.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a xmlns="" class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>Previews a datafeed.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_request_53"></a>Request<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.5/docs/reference/ml/apis/preview-datafeed.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><code class="literal">GET _xpack/ml/datafeeds/&lt;datafeed_id&gt;/_preview</code></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_description_45"></a>Description<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.5/docs/reference/ml/apis/preview-datafeed.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The preview datafeeds API returns the first "page" of results from the <code class="literal">search</code>
that is created by using the current datafeed settings. This preview shows the
structure of the data that will be passed to the anomaly detection engine.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_path_parameters_40"></a>Path Parameters<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.5/docs/reference/ml/apis/preview-datafeed.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">datafeed_id</code> (required)</span></dt><dd>(string) Identifier for the datafeed</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_authorization_48"></a>Authorization<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.5/docs/reference/ml/apis/preview-datafeed.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>If Elasticsearch security features are enabled, you must have <code class="literal">monitor_ml</code>, <code class="literal">monitor</code>,
<code class="literal">manage_ml</code>, or <code class="literal">manage</code> cluster privileges to use this API. For more
information, see
<a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/6.5/security-privileges.html" target="_top">Security Privileges</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_security_integration_2"></a>Security Integration<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.5/docs/reference/ml/apis/preview-datafeed.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>When Elasticsearch security features are enabled, the datafeed query is previewed using
the credentials of the user calling the preview datafeed API.  When the datafeed
is started it runs the query using the roles of the last user to
create or update it.  If the two sets of roles differ then the preview may
not accurately reflect what the datafeed will return when started.  To avoid
such problems, the same user that creates/updates the datafeed should preview
it to ensure it is returning the expected data.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_examples_49"></a>Examples<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.5/docs/reference/ml/apis/preview-datafeed.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The following example obtains a preview of the <code class="literal">datafeed-farequote</code> datafeed:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">GET _xpack/ml/datafeeds/datafeed-farequote/_preview</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/1454.console"></div><p>The data that is returned for this example is as follows:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">[
  {
    "time": 1454803200000,
    "airline": "JZA",
    "doc_count": 5,
    "responsetime": 990.4628295898438
  },
  {
    "time": 1454803200000,
    "airline": "JBU",
    "doc_count": 23,
    "responsetime": 877.5927124023438
  },
  {
    "time": 1454803200000,
    "airline": "KLM",
    "doc_count": 42,
    "responsetime": 1355.481201171875
  }
]</pre></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="ml-post-data.html">
              « 
              Post data to jobs API</a>
           
        </span><span class="next">
           
          <a href="ml-revert-snapshot.html">Revert model snapshots API
               »
            </a></span></div></body></html>