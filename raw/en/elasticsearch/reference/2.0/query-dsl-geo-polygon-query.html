<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Geo Polygon Query
        | Elasticsearch Reference [2.0]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Reference [2.0]" /><link rel="up" href="geo-queries.html" title="Geo queries" /><link rel="prev" href="query-dsl-geo-distance-range-query.html" title="Geo Distance Range Query" /><link rel="next" href="query-dsl-geohash-cell-query.html" title="Geohash Cell Query" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/2.0" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="2.0" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [2.0]
    </a></span> » <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span> » <span class="breadcrumb-link"><a href="geo-queries.html">Geo queries</a></span> » <span class="breadcrumb-node">Geo Polygon Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-geo-distance-range-query.html">
              « 
              Geo Distance Range Query</a>
           
        </span><span class="next">
           
          <a href="query-dsl-geohash-cell-query.html">Geohash Cell Query
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-geo-polygon-query"></a>Geo Polygon Query<a href="https://github.com/elastic/elasticsearch/edit/2.0/docs/reference/query-dsl/geo-polygon-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>A query allowing to include hits that only fall within a polygon of
points. Here is an example:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
    "bool" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_polygon" : {
                "person.location" : {
                    "points" : [
                        {"lat" : 40, "lon" : -70},
                        {"lat" : 30, "lon" : -80},
                        {"lat" : 20, "lon" : -90}
                    ]
                }
            }
        }
    }
}</pre></div><h4><a id="_query_options_2"></a>Query Options<a href="https://github.com/elastic/elasticsearch/edit/2.0/docs/reference/query-dsl/geo-polygon-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Option</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">_name</code></p></td><td align="left" valign="top"><p>Optional name field to identify the filter</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">coerce</code></p></td><td align="left" valign="top"><p>Set to <code class="literal">true</code> to normalize longitude and latitude values to a
standard -180:180 / -90:90 coordinate system. (default is <code class="literal">false</code>).</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ignore_malformed</code></p></td><td align="left" valign="top"><p>Set to <code class="literal">true</code> to accept geo points with invalid latitude or
longitude (default is <code class="literal">false</code>).</p></td></tr></tbody></table></div><h4><a id="_allowed_formats"></a>Allowed Formats<a href="https://github.com/elastic/elasticsearch/edit/2.0/docs/reference/query-dsl/geo-polygon-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><h5><a id="_lat_long_as_array"></a>Lat Long as Array<a href="https://github.com/elastic/elasticsearch/edit/2.0/docs/reference/query-dsl/geo-polygon-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Format in <code class="literal">[lon, lat]</code>, note, the order of lon/lat here in order to
conform with <a class="ulink" href="http://geojson.org/" target="_top">GeoJSON</a>.</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
    "bool" : {
        "must" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_polygon" : {
                "person.location" : {
                    "points" : [
                        [-70, 40],
                        [-80, 30],
                        [-90, 20]
                    ]
                }
            }
        }
    }
}</pre></div><h5><a id="_lat_lon_as_string_4"></a>Lat Lon as String<a href="https://github.com/elastic/elasticsearch/edit/2.0/docs/reference/query-dsl/geo-polygon-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>Format in <code class="literal">lat,lon</code>.</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
    "bool" : {
        "must" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_polygon" : {
                "person.location" : {
                    "points" : [
                        "40, -70",
                        "30, -80",
                        "20, -90"
                    ]
                }
            }
        }
    }
}</pre></div><h5><a id="_geohash_4"></a>Geohash<a href="https://github.com/elastic/elasticsearch/edit/2.0/docs/reference/query-dsl/geo-polygon-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">{
    "bool" : {
        "must" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_polygon" : {
                "person.location" : {
                    "points" : [
                        "drn5x1g8cu2y",
                        "30, -80",
                        "20, -90"
                    ]
                }
            }
        }
    }
}</pre></div><h4><a id="_geo_point_type_3"></a>geo_point Type<a href="https://github.com/elastic/elasticsearch/edit/2.0/docs/reference/query-dsl/geo-polygon-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The query <span class="strong strong"><strong>requires</strong></span> the <a class="link" href="geo-point.html" title="Geo-point datatype"><code class="literal">geo_point</code></a> type to be set on the
relevant field.</p></div><div class="navfooter"><span class="prev"><a href="query-dsl-geo-distance-range-query.html">
              « 
              Geo Distance Range Query</a>
           
        </span><span class="next">
           
          <a href="query-dsl-geohash-cell-query.html">Geohash Cell Query
               »
            </a></span></div></body></html>
