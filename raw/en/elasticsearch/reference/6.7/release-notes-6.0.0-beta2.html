<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Elasticsearch version 6.0.0-beta2
        | Elasticsearch Reference [6.7]
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch Reference [6.7]" /><link rel="up" href="es-release-notes.html" title="Release Notes" /><link rel="prev" href="release-notes-6.0.0-rc1.html" title="Elasticsearch version 6.0.0-rc1" /><link rel="next" href="release-notes-6.0.0-beta1.html" title="Elasticsearch version 6.0.0-beta1" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.7" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="6.7" /><meta name="robots" content="noindex,nofollow" /></head><body><div class="page_header"><strong>IMPORTANT</strong>: No additional bug fixes or documentation updates 
will be released for this version. For the latest information, see the 
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [6.7]
    </a></span> » <span class="breadcrumb-link"><a href="es-release-notes.html">Release Notes</a></span> » <span class="breadcrumb-node">Elasticsearch version 6.0.0-beta2</span></div><div class="navheader"><span class="prev"><a href="release-notes-6.0.0-rc1.html">
              « 
              Elasticsearch version 6.0.0-rc1</a>
           
        </span><span class="next">
           
          <a href="release-notes-6.0.0-beta1.html">Elasticsearch version 6.0.0-beta1
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="release-notes-6.0.0-beta2"></a>Elasticsearch version 6.0.0-beta2</h2></div></div></div><h3><a id="breaking-6.0.0-beta2"></a>Breaking Changes</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Analysis</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Do not allow custom analyzers to have the same names as built-in analyzers <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/22349" target="_top">#22349</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/22263" target="_top">#22263</a>)</li></ul></div></dd><dt><span class="term">Cluster</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Disallow : in cluster and index/alias names <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26247" target="_top">#26247</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/23892" target="_top">#23892</a>)</li></ul></div></dd><dt><span class="term">Inner Hits</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Unfiltered nested source should keep its full path <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26102" target="_top">#26102</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18567" target="_top">#18567</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/23090" target="_top">#23090</a>)</li></ul></div></dd><dt><span class="term">Mapping</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Reject out of range numbers for float, double and half_float <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/25826" target="_top">#25826</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/25534" target="_top">#25534</a>)</li></ul></div></dd><dt><span class="term">Network</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Remove unused Netty-related settings <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26161" target="_top">#26161</a></li></ul></div></dd><dt><span class="term">Packaging</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Rename CONF_DIR to ES_PATH_CONF <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26197" target="_top">#26197</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26154" target="_top">#26154</a>)</li></ul></div></dd><dt><span class="term">Query DSL</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Throw exception in scroll requests using <code class="literal">from</code> <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26235" target="_top">#26235</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/9373" target="_top">#9373</a>)</li></ul></div></dd></dl></div><h3><a id="_breaking_java_changes_4"></a>Breaking Java Changes</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Aggregations</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fix NPE when <code class="literal">values</code> is omitted on percentile_ranks agg <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26046" target="_top">#26046</a></li></ul></div></dd></dl></div><h3><a id="_deprecations_6"></a>Deprecations</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Machine Learning</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">The <code class="literal">max_running_jobs</code> node property is deprecated and is replaced by
<code class="literal">xpack.ml.max_open_jobs</code>. See <a class="xref" href="ml-settings.html" title="Machine learning settings in Elasticsearch">Machine learning settings</a>.</li></ul></div></dd></dl></div><h3><a id="_enhancements_12"></a>Enhancements</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Aggregations</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Support distance units in GeoHashGrid aggregation precision <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26291" target="_top">#26291</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/5042" target="_top">#5042</a>)</li><li class="listitem">Reject multiple methods in <code class="literal">percentiles</code> aggregation <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26163" target="_top">#26163</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26095" target="_top">#26095</a>)</li><li class="listitem">Use <code class="literal">global_ordinals_hash</code> execution mode when sorting by sub aggregations. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26014" target="_top">#26014</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/24359" target="_top">#24359</a>)</li><li class="listitem">Add a specialized deferring collector for terms aggregator <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/25190" target="_top">#25190</a></li></ul></div></dd><dt><span class="term">Core</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Use Java 9 FilePermission model <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26302" target="_top">#26302</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/21534" target="_top">#21534</a>)</li><li class="listitem">Add friendlier message on bad keystore permissions <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26284" target="_top">#26284</a></li><li class="listitem">Epoch millis and second formats accept float implicitly <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26119" target="_top">#26119</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/14641" target="_top">#14641</a>)</li></ul></div></dd><dt><span class="term">Internal</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Prevent cluster internal <code class="literal">ClusterState.Custom</code> impls to leak to a client <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26232" target="_top">#26232</a></li><li class="listitem">Use holder pattern for lazy deprecation loggers <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26218" target="_top">#26218</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26210" target="_top">#26210</a>)</li><li class="listitem">Allow <code class="literal">ClusterState.Custom</code> to be created on initial cluster states <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26144" target="_top">#26144</a></li></ul></div></dd><dt><span class="term">Java High Level REST Client</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Make RestHighLevelClient Closeable and simplify its creation <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26180" target="_top">#26180</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26086" target="_top">#26086</a>)</li></ul></div></dd><dt><span class="term">Machine Learning</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Added <code class="literal">xpack.ml.max_open_jobs</code> as a node attribute. See <a class="xref" href="ml-settings.html" title="Machine learning settings in Elasticsearch">Machine learning settings</a>.</li></ul></div></dd><dt><span class="term">Mapping</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Loosen the restrictions on disabling _all in 6.x <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26259" target="_top">#26259</a></li></ul></div></dd><dt><span class="term">Percolator</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Store the QueryBuilder’s Writable representation instead of its XContent representation <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/25456" target="_top">#25456</a></li><li class="listitem">Add support for selecting percolator query candidate matches containing wildcard / prefix queries <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/25351" target="_top">#25351</a></li></ul></div></dd><dt><span class="term">Security</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Added the <code class="literal">keystore.seed</code> setting to create a randomly generated bootstrap
password if an actual password is not present.</li><li class="listitem">The <code class="literal">bootstrap.password</code> secure setting is now managed locally on each node
and no longer updates the security index.</li><li class="listitem">The <code class="literal">xpack.security.authc.token.passphrase</code> setting is no longer mandatory
when using the token service. The cluster automatically generates a secure key
on startup. See <a class="ulink" href="/guide/en/elasticsearch/reference/6.7/security-settings.html" target="_top">Security Settings in Elasticsearch</a>.</li><li class="listitem">Added reserved <code class="literal">kibana_dashboard_only_user</code> role. For more information, see
<a class="ulink" href="/guide/en/kibana/6.7/xpack-dashboard-only-mode.html" target="_top">Kibana Dashboard Only Mode</a>.</li></ul></div></dd><dt><span class="term">Settings</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Persist created keystore on startup unless keystore is present <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26253" target="_top">#26253</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26126" target="_top">#26126</a>)</li><li class="listitem">Settings: Add keystore.seed auto generated secure setting <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26149" target="_top">#26149</a></li><li class="listitem">Settings: Add keystore creation to add commands <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26126" target="_top">#26126</a></li></ul></div></dd></dl></div><h3><a id="_bug_fixes_16"></a>Bug Fixes</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Aggregations</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Check bucket metric ages point to a multi bucket agg <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26215" target="_top">#26215</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/25775" target="_top">#25775</a>)</li></ul></div></dd><dt><span class="term">Allocation</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fix DiskThresholdMonitor flood warning <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26204" target="_top">#26204</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26201" target="_top">#26201</a>)</li><li class="listitem">Allow wildcards for shard IP filtering <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26187" target="_top">#26187</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/22591" target="_top">#22591</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26184" target="_top">#26184</a>)</li></ul></div></dd><dt><span class="term">CRUD</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Serialize and expose timeout of acknowledged requests in REST layer <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26189" target="_top">#26189</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26213" target="_top">#26213</a>)</li><li class="listitem">Fix silent loss of last command to _bulk and _msearch due to missing newline <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/25740" target="_top">#25740</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/7601" target="_top">#7601</a>)</li></ul></div></dd><dt><span class="term">Cluster</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Register setting <code class="literal">cluster.indices.tombstones.size</code> <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26193" target="_top">#26193</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26191" target="_top">#26191</a>)</li></ul></div></dd><dt><span class="term">Highlighting</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fix nested query highlighting <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26305" target="_top">#26305</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26230" target="_top">#26230</a>)</li></ul></div></dd><dt><span class="term">Logging</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Allow not configure logging without config <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26209" target="_top">#26209</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/20575" target="_top">#20575</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/24076" target="_top">#24076</a>)</li></ul></div></dd><dt><span class="term">Machine Learning</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Fixed calculation of bucket count and empty bucket count statistics.</li></ul></div></dd><dt><span class="term">Mapping</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">ICUCollationKeywordFieldMapper use SortedSetDocValuesField <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26267" target="_top">#26267</a></li><li class="listitem">Fix serialization of the <code class="literal">_all</code> field. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26143" target="_top">#26143</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26136" target="_top">#26136</a>)</li></ul></div></dd><dt><span class="term">Network</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Release pipelined http responses on close <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26226" target="_top">#26226</a></li></ul></div></dd><dt><span class="term">Packaging</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Detect modified keystore on package removal <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26300" target="_top">#26300</a></li><li class="listitem">Create keystore on RPM and Debian package install <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26282" target="_top">#26282</a></li><li class="listitem">Add safer empty variable checking for Windows <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26268" target="_top">#26268</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26261" target="_top">#26261</a>)</li><li class="listitem">Export HOSTNAME environment variable <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26262" target="_top">#26262</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/25807" target="_top">#25807</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26255" target="_top">#26255</a>)</li><li class="listitem">Fix daemonization command status test <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26196" target="_top">#26196</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/26080" target="_top">#26080</a>)</li><li class="listitem">Set RuntimeDirectory in systemd service <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/23526" target="_top">#23526</a></li></ul></div></dd><dt><span class="term">Search</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Refactor simple_query_string to handle text part like multi_match and query_string <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26145" target="_top">#26145</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/25726" target="_top">#25726</a>)</li><li class="listitem">Fix <code class="literal">_exists_</code> in query_string on empty indices. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/25993" target="_top">#25993</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/25956" target="_top">#25956</a>)</li></ul></div></dd><dt><span class="term">Security</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">The <code class="literal">xpack.security.authc.token.enabled</code> setting now defaults to true when
HTTPS is enabled. See <a class="xref" href="security-settings.html#token-service-settings" title="Token service settings">Token service settings</a>.</li><li class="listitem">Improved the safety of file updates in the <code class="literal">x-pack/users</code> tool.</li><li class="listitem">Bootstrap checks no longer fail when checking secure settings.</li><li class="listitem">The <code class="literal">setup-password</code> tool no longer fails when using a default
<code class="literal">elasticsearch.yml</code> configuration file.</li><li class="listitem">Fixed validation of the input parameters in the
<a class="link" href="security-api-tokens.html" title="Token management APIs">create token API</a>.</li></ul></div></dd><dt><span class="term">Watcher</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Ensured that a watch can be activated and deactivated during execution.</li><li class="listitem">Ensured watch execution always uses the latest watch including its latest status.</li></ul></div></dd></dl></div><h3><a id="_upgrades_7"></a>Upgrades</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">Core</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Upgrade to lucene-7.0.0-snapshot-a128fcb. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/26090" target="_top">#26090</a></li></ul></div></dd></dl></div></div><div class="navfooter"><span class="prev"><a href="release-notes-6.0.0-rc1.html">
              « 
              Elasticsearch version 6.0.0-rc1</a>
           
        </span><span class="next">
           
          <a href="release-notes-6.0.0-beta1.html">Elasticsearch version 6.0.0-beta1
               »
            </a></span></div></body></html>
