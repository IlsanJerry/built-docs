<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Cluster Update Settings
        | Elasticsearch Reference [6.6]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [6.6]" /><link rel="up" href="cluster.html" title="Cluster APIs" /><link rel="prev" href="cluster-reroute.html" title="Cluster Reroute" /><link rel="next" href="cluster-get-settings.html" title="Cluster Get Settings" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.6" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="6.6" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [6.6]
    </a></span> » <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span> » <span class="breadcrumb-node">Cluster Update Settings</span></div><div xmlns="" class="navheader"><span class="prev"><a href="cluster-reroute.html">
              « 
              Cluster Reroute</a>
           
        </span><span class="next">
           
          <a href="cluster-get-settings.html">Cluster Get Settings
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cluster-update-settings"></a>Cluster Update Settings<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/cluster/update-settings.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Use this API to review and change cluster-wide settings.</p><p>To review cluster settings:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">GET /_cluster/settings</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/772.console"></div><p>By default, this API call only returns settings that have been explicitly defined, but can also <a class="link" href="cluster-get-settings.html" title="Cluster Get Settings">include the default settings</a>.</p><p>Updates to settings can be persistent, meaning they apply across restarts, or transient, where they don’t
survive a full cluster restart. Here is an example of a persistent update:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">PUT /_cluster/settings
{
    "persistent" : {
        "indices.recovery.max_bytes_per_sec" : "50mb"
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/773.console"></div><p>This update is transient:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">PUT /_cluster/settings?flat_settings=true
{
    "transient" : {
        "indices.recovery.max_bytes_per_sec" : "20mb"
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/774.console"></div><p>The response to an update returns the changed setting, as in this response to the transient example:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
    ...
    "persistent" : { },
    "transient" : {
        "indices.recovery.max_bytes_per_sec" : "20mb"
    }
}</pre></div><p>You can reset persistent or transient settings by assigning a
<code class="literal">null</code> value. If a transient setting is reset, the first one of these values that is defined is applied:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the persistent setting</li><li class="listitem">the setting in the configuration file</li><li class="listitem">the default value.</li></ul></div><p>This example resets a setting:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">PUT /_cluster/settings
{
    "transient" : {
        "indices.recovery.max_bytes_per_sec" : null
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/775.console"></div><p>The response does not include settings that have been reset:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
    ...
    "persistent" : {},
    "transient" : {}
}</pre></div><p>You can also reset settings using wildcards. For example, to reset
all dynamic <code class="literal">indices.recovery</code> settings:</p><div xmlns="" class="pre_wrapper lang-console"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-console">PUT /_cluster/settings
{
    "transient" : {
        "indices.recovery.*" : null
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet="snippets/776.console"></div><h3><a id="_order_of_precedence"></a>Order of Precedence<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/6.6/docs/reference/cluster/update-settings.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The order of precedence for cluster settings is:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">transient cluster settings</li><li class="listitem">persistent cluster settings</li><li class="listitem">settings in the <code class="literal">elasticsearch.yml</code> configuration file.</li></ol></div><p>It’s best to set all cluster-wide settings with the <code class="literal">settings</code> API and use the
<code class="literal">elasticsearch.yml</code> file only for local configurations. This way you can be sure that
the setting is the same on all nodes. If, on the other hand, you define different
settings on different nodes by accident using the configuration file, it is very
difficult to notice these discrepancies.</p><p>You can find the list of settings that you can dynamically update in <a class="link" href="modules.html" title="Modules">Modules</a>.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="cluster-reroute.html">
              « 
              Cluster Reroute</a>
           
        </span><span class="next">
           
          <a href="cluster-get-settings.html">Cluster Get Settings
               »
            </a></span></div></body></html>