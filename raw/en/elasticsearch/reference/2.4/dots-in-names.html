<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Dots in field names
        | Elasticsearch Reference [2.4]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [2.4]" /><link rel="up" href="mapping.html" title="Mapping" /><link rel="prev" href="mapping.html" title="Mapping" /><link rel="next" href="mapping-types.html" title="Field datatypes" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Elasticsearch/Reference/2.4" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="2.4" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [2.4]
    </a></span> » <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span> » <span class="breadcrumb-node">Dots in field names</span></div><div xmlns="" class="navheader"><span class="prev"><a href="mapping.html">
              « 
              Mapping</a>
           
        </span><span class="next">
           
          <a href="mapping-types.html">Field datatypes
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="dots-in-names"></a>Dots in field names<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/2.4/docs/reference/mapping/dots-in-names.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>In Elasticsearch 5.0, dots are permitted in field names and each step in the
path is interpreted as an object field, except for the last step.  For instance,
indexing the following document in Elasticsearch 5.0:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "server.latency.max": 100
}</pre></div><p>would result in the following mapping:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "properties": {
    "server": {
      "type": "object",
      "properties": {
        "latency": {
          "type": "object",
          "properties": {
            "max": {
              "type": "long"
            }
          }
        }
      }
    }
  }
}</pre></div><p>Elasticsearch 2.x does not support this <span class="emphasis"><em>dots-to-object</em></span> transformation and so
dots in field names are not allowed in versions 2.0 - 2.3.</p><h3><a id="_enabling_support_for_dots_in_field_names"></a>Enabling support for dots in field names<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/2.4/docs/reference/mapping/dots-in-names.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Elasticsearch 2.4.0 adds a system property called <code class="literal">mapper.allow_dots_in_name</code>
which will disable the check for dots in field names.  You can enable this
system property as follows:</p><div xmlns="" class="pre_wrapper lang-sh"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">export ES_JAVA_OPTS="-Dmapper.allow_dots_in_name=true"
./bin/elasticsearch</pre></div><p>(ES_JAVA_OPTS can be set in the <code class="literal">/etc/default/elasticsearch</code> file if you’re
using the Debian package, or in the <code class="literal">/etc/sysconfig/elasticsearch</code> file if
you’re using the RPM.)</p><p>With this sytem property enabled, indexing the document above in 2.4.0 will
result in the following mapping:</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "properties": {
    "server.latency.max": {
      "type": "long"
    }
  }
}</pre></div><h3><a id="_upgrading_fields_with_dots_to_5_x"></a>Upgrading fields with dots to 5.x<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/2.4/docs/reference/mapping/dots-in-names.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Indices created in 1.x must be reindexed in 2.4 before being upgraded to 5.x,
regardless of whether they have fields with dots or not. Alternatively,
indices from a 1.x cluster can be imported directly into a 5.x cluster using
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.0/reindex-upgrade.html#reindex-upgrade-remote" target="_top">reindex-from-remote</a>.</p><p>Indices created in 2.4 can be upgraded to 5.x directly, as long as there are
no conflicts (see below). If there are dots in field names, the mapping will
be automatically updated to the object-style mapping shown in
<a class="xref" href="dots-in-names.html" title="Dots in field names"><em>Dots in field names</em></a>.</p><div xmlns="" class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><h3>Dots can create conflicting fields</h3><p xmlns="http://www.w3.org/1999/xhtml">Indices containing fields that would produce conflicts when upgrading to the
object-style mapping cannot be upgraded to 5.x.  For instance, the following
mapping can be upgraded:</p><div class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "properties": {
    "server.latency": {<a id="CO156-1"></a><i xmlns="" class="conum" data-value="1"></i>
      "type": "long"
    },
    "server.name": {<a id="CO156-2"></a><i xmlns="" class="conum" data-value="2"></i>
      "type": "string"
    }
  }
}</pre></div><div xmlns="http://www.w3.org/1999/xhtml" class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO156-1"><i xmlns="" class="conum" data-value="1"></i></a> <a href="#CO156-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>The <code class="literal">server</code> field will become an <code class="literal">object</code> field in both cases.</p></td></tr></table></div><p xmlns="http://www.w3.org/1999/xhtml">This mapping <span class="strong strong"><strong>cannot</strong></span> be upgraded:</p><div class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "properties": {
    "server.latency": {<a id="CO157-1"></a><i xmlns="" class="conum" data-value="1"></i>
      "type": "long"
    },
    "server": {<a id="CO157-2"></a><i xmlns="" class="conum" data-value="2"></i>
      "type": "string"
    }
  }
}</pre></div><div xmlns="http://www.w3.org/1999/xhtml" class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO157-1"><i xmlns="" class="conum" data-value="1"></i></a> <a href="#CO157-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>The <code class="literal">server</code> field is an <code class="literal">object</code> in <code class="literal">server.latency</code>, but a <code class="literal">string</code> in <code class="literal">server</code>. This is a conflict and will prevent the index from being opened in 5.x.</p></td></tr></table></div></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="mapping.html">
              « 
              Mapping</a>
           
        </span><span class="next">
           
          <a href="mapping-types.html">Field datatypes
               »
            </a></span></div></body></html>