<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Full Policy | Elasticsearch Reference [7.6] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.6]"/>
<link rel="up" href="ilm-policy-definition.html" title="Policy phases and actions"/>
<link rel="prev" href="_actions.html" title="Actions"/>
<link rel="next" href="set-up-lifecycle-policy.html" title="Create lifecycle policy"/>
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.6"/>
<meta name="DC.subject" content="Elasticsearch"/>
<meta name="DC.identifier" content="7.6"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.6]</a></span>
»
<span class="breadcrumb-link"><a href="index-lifecycle-management.html">Manage the index lifecycle</a></span>
»
<span class="breadcrumb-link"><a href="ilm-policy-definition.html">Policy phases and actions</a></span>
»
<span class="breadcrumb-node">Full Policy</span>
</div>
<div class="navheader">
<span class="prev">
<a href="_actions.html">« Actions</a>
</span>
<span class="next">
<a href="set-up-lifecycle-policy.html">Create lifecycle policy »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_full_policy"></a>Full Policy<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch/edit/7.6/docs/reference/ilm/policy-definitions.asciidoc">edit</a></h2>
</div></div></div>
<p>With all of these actions, we can support complex management strategies for our
indices. This policy will define an index that will start in the hot phase,
rolling over every 50 GB or 7 days. After 30 days it enters the warm phase
and increases the replicas to 2, force merges and shrinks. After 60 days
it enters the cold phase and allocates to "cold" nodes, and after 90 days the
index is deleted.</p>
<div class="pre_wrapper lang-console">
<pre class="programlisting prettyprint lang-console">PUT _ilm/policy/full_policy
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_age": "7d",
            "max_size": "50G"
          }
        }
      },
      "warm": {
        "min_age": "30d",
        "actions": {
          "forcemerge": {
            "max_num_segments": 1
          },
          "shrink": {
            "number_of_shards": 1
          },
          "allocate": {
            "number_of_replicas": 2
          }
        }
      },
      "cold": {
        "min_age": "60d",
        "actions": {
          "allocate": {
            "require": {
              "type": "cold"
            }
          }
        }
      },
      "delete": {
        "min_age": "90d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}</pre>
</div>
<div class="console_widget" data-snippet="snippets/1049.console"></div>
</div>
<div class="navfooter">
<span class="prev">
<a href="_actions.html">« Actions</a>
</span>
<span class="next">
<a href="set-up-lifecycle-policy.html">Create lifecycle policy »</a>
</span>
</div>
</div>
</body>
</html>
