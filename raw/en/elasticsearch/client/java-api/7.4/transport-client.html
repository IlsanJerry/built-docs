<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Transport Client
        | Java API [7.4]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Java API [7.4]" /><link rel="up" href="client.html" title="Client" /><link rel="prev" href="client.html" title="Client" /><link rel="next" href="client-connected-to-client-node.html" title="Connecting a Client to a Coordinating Only Node" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Clients/Java/7.4" /><meta xmlns="" name="DC.subject" content="Clients" /><meta xmlns="" name="DC.identifier" content="7.4" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Java API
      [7.4]
    </a></span> » <span class="breadcrumb-link"><a href="client.html">Client</a></span> » <span class="breadcrumb-node">Transport Client</span></div><div xmlns="" class="navheader"><span class="prev"><a href="client.html">
              « 
              Client</a>
           
        </span><span class="next">
           
          <a href="client-connected-to-client-node.html">Connecting a Client to a Coordinating Only Node
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="transport-client"></a>Transport Client<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.4/docs/java-api/client.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div xmlns="" class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><h3>Deprecated in 7.0.0. </h3><p xmlns="http://www.w3.org/1999/xhtml">The <code class="literal">TransportClient</code> is deprecated in favour of the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/client/java-rest/7.4/java-rest-high.html" target="_top">Java High Level REST Client</a> and will be removed in Elasticsearch 8.0. The <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/client/java-rest/7.4/java-rest-high-level-migration.html" target="_top">migration guide</a> describes all the steps needed to migrate.</p></div></div><p>The <code class="literal">TransportClient</code> connects remotely to an Elasticsearch cluster
using the transport module. It does not join the cluster, but simply
gets one or more initial transport addresses and communicates with them
in round robin fashion on each action (though most actions will probably
be "two hop" operations).</p><div xmlns="" class="pre_wrapper lang-java"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-java">// on startup

TransportClient client = new PreBuiltTransportClient(Settings.EMPTY)
        .addTransportAddress(new TransportAddress(InetAddress.getByName("host1"), 9300))
        .addTransportAddress(new TransportAddress(InetAddress.getByName("host2"), 9300));

// on shutdown

client.close();</pre></div><p>Note that you have to set the cluster name if you use one different than
"elasticsearch":</p><div xmlns="" class="pre_wrapper lang-java"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-java">Settings settings = Settings.builder()
        .put("cluster.name", "myClusterName").build();
TransportClient client = new PreBuiltTransportClient(settings);
//Add transport addresses and do something with the client...</pre></div><p>The Transport client comes with a cluster sniffing feature which
allows it to dynamically add new hosts and remove old ones.
When sniffing is enabled, the transport client will connect to the nodes in its
internal node list, which is built via calls to <code class="literal">addTransportAddress</code>.
After this, the client will call the internal cluster state API on those nodes
to discover available data nodes. The internal node list of the client will
be replaced with those data nodes only. This list is refreshed every five seconds by default.
Note that the IP addresses the sniffer connects to are the ones declared as the <span class="emphasis"><em>publish</em></span>
address in those node’s Elasticsearch config.</p><p>Keep in mind that the list might possibly not include the original node it connected to
if that node is not a data node. If, for instance, you initially connect to a
master node, after sniffing, no further requests will go to that master node,
but rather to any data nodes instead. The reason the transport client excludes non-data
nodes is to avoid sending search traffic to master only nodes.</p><p>In order to enable sniffing, set <code class="literal">client.transport.sniff</code> to <code class="literal">true</code>:</p><div xmlns="" class="pre_wrapper lang-java"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-java">Settings settings = Settings.builder()
        .put("client.transport.sniff", true).build();
TransportClient client = new PreBuiltTransportClient(settings);</pre></div><p>Other transport client level settings include:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Parameter</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">client.transport.ignore_cluster_name</code></p></td><td align="left" valign="top"><p>Set to <code class="literal">true</code> to ignore cluster
name validation of connected nodes. (since 0.19.4)</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">client.transport.ping_timeout</code></p></td><td align="left" valign="top"><p>The time to wait for a ping response
from a node. Defaults to <code class="literal">5s</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">client.transport.nodes_sampler_interval</code></p></td><td align="left" valign="top"><p>How often to sample / ping
the nodes listed and connected. Defaults to <code class="literal">5s</code>.</p></td></tr></tbody></table></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="client.html">
              « 
              Client</a>
           
        </span><span class="next">
           
          <a href="client-connected-to-client-node.html">Connecting a Client to a Coordinating Only Node
               »
            </a></span></div></body></html>