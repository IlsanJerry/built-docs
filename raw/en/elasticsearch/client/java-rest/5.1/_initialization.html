<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Initialization
        | Java REST Client [5.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Java REST Client [5.1]" /><link rel="up" href="_getting_started.html" title="Getting started" /><link rel="prev" href="_dependencies.html" title="Dependencies" /><link rel="next" href="_performing_requests.html" title="Performing requests" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Clients/JavaREST/5.1" /><meta xmlns="" name="DC.subject" content="Clients" /><meta xmlns="" name="DC.identifier" content="5.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Java REST Client
      [5.1]
    </a></span> » <span class="breadcrumb-link"><a href="_getting_started.html">Getting started</a></span> » <span class="breadcrumb-node">Initialization</span></div><div xmlns="" class="navheader"><span class="prev"><a href="_dependencies.html">
              « 
              Dependencies</a>
           
        </span><span class="next">
           
          <a href="_performing_requests.html">Performing requests
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_initialization"></a>Initialization<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/java-rest/usage.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>A <code class="literal">RestClient</code> instance can be built through the corresponding
<code class="literal">RestClientBuilder</code> class, created via <code class="literal">RestClient#builder(HttpHost...)</code>
static method. The only required argument is one or more hosts that the
client will communicate with, provided as instances of
<a class="ulink" href="https://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpHost.html" target="_top">HttpHost</a>
 as follows:</p><div xmlns="" class="pre_wrapper lang-java"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-java">RestClient restClient = RestClient.builder(
        new HttpHost("localhost", 9200, "http"),
        new HttpHost("localhost", 9201, "http")).build();</pre></div><p>The <code class="literal">RestClient</code> class is thread-safe and ideally has the same lifecycle as
the application that uses it. It is important that it gets closed when no
longer needed so that all the resources used by it get properly released,
as well as the underlying http client instance and its threads:</p><div xmlns="" class="pre_wrapper lang-java"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-java">restClient.close();</pre></div><p><code class="literal">RestClientBuilder</code> also allows to optionally set the following configuration
parameters while building the <code class="literal">RestClient</code> instance:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">setDefaultHeaders</code></span></dt><dd>default headers that need to be sent with each request,
to prevent having to specify them with each single request</dd><dt><span class="term"><code class="literal">setMaxRetryTimeoutMillis</code></span></dt><dd>the timeout that should be honoured in case
multiple attempts are made for the same request. The default value is 10
seconds, same as the default socket timeout. In case the socket timeout is
customized, the maximum retry timeout should be adjusted accordingly</dd><dt><span class="term"><code class="literal">setFailureListener</code></span></dt><dd>a listener that gets notified every time a node
fails,  in case actions need to be taken. Used internally when sniffing on
failure is enabled</dd><dt><span class="term"><code class="literal">setRequestConfigCallback</code></span></dt><dd>callback that allows to modify the default
request configuration (e.g. request timeouts, authentication, or anything that
the <a class="ulink" href="https://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/config/RequestConfig.Builder.html" target="_top"><code class="literal">org.apache.http.client.config.RequestConfig.Builder</code></a>
 allows to set)</dd><dt><span class="term"><code class="literal">setHttpClientConfigCallback</code></span></dt><dd>callback that allows to modify the http client
 configuration (e.g. encrypted communication over ssl, or anything that the
<a class="ulink" href="http://hc.apache.org/httpcomponents-asyncclient-dev/httpasyncclient/apidocs/org/apache/http/impl/nio/client/HttpAsyncClientBuilder.html" target="_top"><code class="literal">org.apache.http.impl.nio.client.HttpAsyncClientBuilder</code></a>
 allows to set)</dd></dl></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="_dependencies.html">
              « 
              Dependencies</a>
           
        </span><span class="next">
           
          <a href="_performing_requests.html">Performing requests
               »
            </a></span></div></body></html>