<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Reading responses
        | Java REST Client [7.3]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Java REST Client [7.3]" /><link rel="up" href="java-rest-low-usage.html" title="Getting started" /><link rel="prev" href="java-rest-low-usage-requests.html" title="Performing requests" /><link rel="next" href="java-rest-low-usage-logging.html" title="Logging" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Clients/JavaREST/7.3" /><meta xmlns="" name="DC.subject" content="Clients" /><meta xmlns="" name="DC.identifier" content="7.3" /></head><body><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Java REST Client
      [7.3]
    </a></span> » <span class="breadcrumb-link"><a href="java-rest-low.html">Java Low Level REST Client</a></span> » <span class="breadcrumb-link"><a href="java-rest-low-usage.html">Getting started</a></span> » <span class="breadcrumb-node">Reading responses</span></div><div xmlns="" class="navheader"><span class="prev"><a href="java-rest-low-usage-requests.html">
              « 
              Performing requests</a>
           
        </span><span class="next">
           
          <a href="java-rest-low-usage-logging.html">Logging
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="java-rest-low-usage-responses"></a>Reading responses<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/7.3/docs/java-rest/low-level/usage.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The <code class="literal">Response</code> object, either returned by the synchronous <code class="literal">performRequest</code> methods or
received as an argument in <code class="literal">ResponseListener#onSuccess(Response)</code>, wraps the
response object returned by the http client and exposes some additional information.</p><div xmlns="" class="pre_wrapper lang-java"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-java">Response response = restClient.performRequest(new Request("GET", "/"));
RequestLine requestLine = response.getRequestLine(); <a id="CO10-1"></a><i xmlns="" class="conum" data-value="1"></i>
HttpHost host = response.getHost(); <a id="CO10-2"></a><i xmlns="" class="conum" data-value="2"></i>
int statusCode = response.getStatusLine().getStatusCode(); <a id="CO10-3"></a><i xmlns="" class="conum" data-value="3"></i>
Header[] headers = response.getHeaders(); <a id="CO10-4"></a><i xmlns="" class="conum" data-value="4"></i>
String responseBody = EntityUtils.toString(response.getEntity()); <a id="CO10-5"></a><i xmlns="" class="conum" data-value="5"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO10-1"><i xmlns="" class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p>Information about the performed request</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO10-2"><i xmlns="" class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p>The host that returned the response</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO10-3"><i xmlns="" class="conum" data-value="3"></i></a> </p></td><td valign="top" align="left"><p>The response status line, from which you can for instance retrieve the status code</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO10-4"><i xmlns="" class="conum" data-value="4"></i></a> </p></td><td valign="top" align="left"><p>The response headers, which can also be retrieved by name though <code class="literal">getHeader(String)</code></p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO10-5"><i xmlns="" class="conum" data-value="5"></i></a> </p></td><td valign="top" align="left"><p>The response body enclosed in an <a class="ulink" href="https://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpEntity.html" target="_top"><code class="literal">org.apache.http.HttpEntity</code></a>
object</p></td></tr></table></div><p>When performing a request, an exception is thrown (or received as an argument
 in <code class="literal">ResponseListener#onFailure(Exception)</code> in the following scenarios:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">IOException</code></span></dt><dd>communication problem (e.g. SocketTimeoutException)</dd><dt><span class="term"><code class="literal">ResponseException</code></span></dt><dd>a response was returned, but its status code indicated
an error (not <code class="literal">2xx</code>). A <code class="literal">ResponseException</code> originates from a valid
http response, hence it exposes its corresponding <code class="literal">Response</code> object which gives
access to the returned response.</dd></dl></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">A <code class="literal">ResponseException</code> is <span class="strong strong"><strong>not</strong></span> thrown for <code class="literal">HEAD</code> requests that return
a <code class="literal">404</code> status code because it is an expected <code class="literal">HEAD</code> response that simply
denotes that the resource is not found. All other HTTP methods (e.g., <code class="literal">GET</code>)
throw a <code class="literal">ResponseException</code> for <code class="literal">404</code> responses unless the <code class="literal">ignore</code> parameter
contains <code class="literal">404</code>. <code class="literal">ignore</code> is a special client parameter that doesn’t get sent
to Elasticsearch and contains a comma separated list of error status codes.
It allows to control whether some error status code should be treated as an
expected response rather than as an exception. This is useful for instance
with the get api as it can return <code class="literal">404</code> when the document is missing, in which
case the response body will not contain an error but rather the usual get api
response, just without the document as it was not found.</p></div></div><p>Note that the low-level client doesn’t expose any helper for json marshalling
and un-marshalling. Users are free to use the library that they prefer for that
purpose.</p><p>The underlying Apache Async Http Client ships with different
<a class="ulink" href="https://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/HttpEntity.html" target="_top"><code class="literal">org.apache.http.HttpEntity</code></a>
 implementations that allow to provide the request body in different formats
(stream, byte array, string etc.). As for reading the response body, the
<code class="literal">HttpEntity#getContent</code> method comes handy which returns an <code class="literal">InputStream</code>
reading from the previously buffered response body. As an alternative, it is
possible to provide a custom
<a class="ulink" href="http://hc.apache.org/httpcomponents-core-ga/httpcore-nio/apidocs/org/apache/http/nio/protocol/HttpAsyncResponseConsumer.html" target="_top"><code class="literal">org.apache.http.nio.protocol.HttpAsyncResponseConsumer</code></a>
 that controls how bytes are read and buffered.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="java-rest-low-usage-requests.html">
              « 
              Performing requests</a>
           
        </span><span class="next">
           
          <a href="java-rest-low-usage-logging.html">Logging
               »
            </a></span></div></body></html>