<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Breaking changes from 6.x | Elasticsearch-PHP [master] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch-PHP [master]"/>
<link rel="up" href="index.html" title="Elasticsearch-PHP [master]"/>
<link rel="prev" href="php_json_objects.html" title="Dealing with JSON arrays and objects in PHP"/>
<link rel="next" href="community_dsls.html" title="Community DSLs"/>
<meta name="DC.type" content="Learn/Docs/Clients/PHP/master"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch-PHP [master]</a></span>
»
<span class="breadcrumb-node">Breaking changes from 6.x</span>
</div>
<div class="navheader">
<span class="prev">
<a href="php_json_objects.html">« Dealing with JSON arrays and objects in PHP</a>
</span>
<span class="next">
<a href="community_dsls.html">Community DSLs »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="breaking_changes"></a>Breaking changes from 6.x<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/breaking-changes.asciidoc">edit</a></h1>
</div></div></div>
<h3><a id="_e_user_deprecated_notice_when_using_deprecated_parameters"></a>E_USER_DEPRECATED notice when using deprecated parameters<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/breaking-changes.asciidoc">edit</a></h3>
<p>Starting from elasticsearch-php 7.4.0, we generate a PHP
<a href="https://www.php.net/manual/en/errorfunc.constants.php" class="ulink" target="_top">E_USER_DEPRECATED</a> notice
every time you use a deprecated parameters for Elasticsearch. We decided to add this
notice to facilitate the code refactoring with the new API specification of Elasticsearch
(for example the usage of typeless APIs, see below).</p>
<p>From 7.4.1, we mitigated the usage of E_USER_DEPRICATED warning by using the <code class="literal">@</code>
<a href="https://www.php.net/manual/en/language.operators.errorcontrol.php" class="ulink" target="_top">operator</a>. The
operator suppresses the error message, however, it is still possible to catch it
by using a custom error handler:</p>
<div class="pre_wrapper lang-php">
<pre class="programlisting prettyprint lang-php">set_error_handler(function ($errno, $errstr) {
    var_dump($errstr);
}, E_USER_DEPRECATED);

@trigger_error('Deprecation message here', E_USER_DEPRECATED);</pre>
</div>
<h3><a id="_moving_from_types_to_typeless_apis_in_elasticsearch_7_0"></a>Moving from types to typeless APIs in Elasticsearch 7.0<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/breaking-changes.asciidoc">edit</a></h3>
<p>Elasticsearch 7.0 deprecated APIs that accept types, introduced new typeless APIs, and
removed support for the <em>default</em> mapping. Read
<a href="/blog/moving-from-types-to-typeless-apis-in-elasticsearch-7-0" class="ulink" target="_top">this</a>
blog post for more information.</p>
<h3><a id="_type_hint_and_return_type"></a>Type hint and return type<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/breaking-changes.asciidoc">edit</a></h3>
<p>Added type hints and return type declarations in all the code base where
possible. See PR <a href="https://github.com/elastic/elasticsearch-php/pull/897" class="ulink" target="_top">#897</a>.</p>
<h3><a id="_php_7_1_requirement"></a>PHP 7.1+ Requirement<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/breaking-changes.asciidoc">edit</a></h3>
<p>We require using PHP 7.1+ for elasticsearch-php. PHP 7.0 is not supported since
1st Jan 2019. Refer
<a href="https://www.php.net/supported-versions.php" class="ulink" target="_top">PHP supported version</a> for more
information.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="php_json_objects.html">« Dealing with JSON arrays and objects in PHP</a>
</span>
<span class="next">
<a href="community_dsls.html">Community DSLs »</a>
</span>
</div>
</div>
</body>
</html>
