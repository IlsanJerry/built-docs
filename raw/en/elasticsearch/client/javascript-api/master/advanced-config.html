<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Advanced configuration | Elasticsearch Node.js client [master] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Node.js client [master]"/>
<link rel="up" href="client-configuration.html" title="Configuration"/>
<link rel="prev" href="basic-config.html" title="Basic configuration"/>
<link rel="next" href="child.html" title="Creating a child client"/>
<meta name="DC.type" content="Learn/Docs/Clients/JavaScript/master"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Node.js client [master]</a></span>
»
<span class="breadcrumb-link"><a href="client-configuration.html">Configuration</a></span>
»
<span class="breadcrumb-node">Advanced configuration</span>
</div>
<div class="navheader">
<span class="prev">
<a href="basic-config.html">« Basic configuration</a>
</span>
<span class="next">
<a href="child.html">Creating a child client »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="advanced-config"></a>Advanced configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/master/docs/advanced-config.asciidoc">edit</a></h2>
</div></div></div>
<p>If you need to customize the client behavior heavily, you are in the right
place! The client enables you to customize the following internals:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">Transport</code> class
</li>
<li class="listitem">
<code class="literal">ConnectionPool</code> class
</li>
<li class="listitem">
<code class="literal">Connection</code> class
</li>
<li class="listitem">
<code class="literal">Serializer</code> class
</li>
</ul>
</div>
<h4><a id="_transport"></a><code class="literal">Transport</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/master/docs/advanced-config.asciidoc">edit</a></h4>
<p>This class is responsible for performing the request to Elasticsearch and handling
errors, it also handles the sniffing.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client, Transport } = require('@elastic/elasticsearch')

class MyTransport extends Transport {
  request (params, options, callback) {
    // your code
  }
}

const client = new Client({
    Transport: MyTransport
})</pre>
</div>
<p>Sometimes you need to inject a small snippet of your code and then continue to
use the usual client code. In such cases, call <code class="literal">super.method</code>:</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">class MyTransport extends Transport {
  request (params, options, callback) {
    // your code
    return super.request(params, options, callback)
  }
}</pre>
</div>
<h4><a id="_connectionpool"></a><code class="literal">ConnectionPool</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/master/docs/advanced-config.asciidoc">edit</a></h4>
<p>This class is responsible for keeping in memory all the Elasticsearch Connection that you
are using. There is a single Connection for every node. The connection pool
handles the resurrection strategies and the updates of the pool.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client, ConnectionPool } = require('@elastic/elasticsearch')

class MyConnectionPool extends ConnectionPool {
  markAlive (connection) {
    // your code
    super.markAlive(connection)
  }
}

const client = new Client({
    ConnectionPool: MyConnectionPool
})</pre>
</div>
<h4><a id="_connection"></a><code class="literal">Connection</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/master/docs/advanced-config.asciidoc">edit</a></h4>
<p>This class represents a single node, it holds every information we have on the
node, such as roles, id, URL, custom headers and so on. The actual HTTP request
is performed here, this means that if you want to swap the default HTTP client
(Node.js core), you should override the <code class="literal">request</code> method of this class.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client, Connection } = require('@elastic/elasticsearch')

class MyConnection extends Connection {
  request (params, callback) {
    // your code
  }
}

const client = new Client({
  Connection: MyConnection
})</pre>
</div>
<h4><a id="_serializer"></a><code class="literal">Serializer</code><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/master/docs/advanced-config.asciidoc">edit</a></h4>
<p>This class is responsible for the serialization of every request, it offers the
following methods:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<code class="literal">serialize(object: any): string;</code> serializes request objects.
</li>
<li class="listitem">
<code class="literal">deserialize(json: string): any;</code> deserializes response strings.
</li>
<li class="listitem">
<code class="literal">ndserialize(array: any[]): string;</code> serializes bulk request objects.
</li>
<li class="listitem">
<code class="literal">qserialize(object: any): string;</code> serializes request query parameters.
</li>
</ul>
</div>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client, Serializer } = require('@elastic/elasticsearch')

class MySerializer extends Serializer {
  serialize (object) {
    // your code
  }
}

const client = new Client({
  Serializer: MySerializer
})</pre>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="basic-config.html">« Basic configuration</a>
</span>
<span class="next">
<a href="child.html">Creating a child client »</a>
</span>
</div>
</div>
</body>
</html>
