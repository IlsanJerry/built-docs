<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Authentication | Elasticsearch Node.js client [master] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Node.js client [master]"/>
<link rel="up" href="index.html" title="Elasticsearch Node.js client [master]"/>
<link rel="prev" href="breaking-changes.html" title="Breaking changes coming from the old client"/>
<link rel="next" href="observability.html" title="Observability"/>
<meta name="DC.type" content="Learn/Docs/Clients/JavaScript/master"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="master"/>
</head>
<body><div class="page_header">
You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Node.js client [master]</a></span>
»
<span class="breadcrumb-node">Authentication</span>
</div>
<div class="navheader">
<span class="prev">
<a href="breaking-changes.html">« Breaking changes coming from the old client</a>
</span>
<span class="next">
<a href="observability.html">Observability »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="auth-reference"></a>Authentication<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/master/docs/authentication.asciidoc">edit</a></h1>
</div></div></div>
<p>This document contains code snippets to show you how to connect to various Elasticsearch
providers.</p>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_elastic_cloud"></a>Elastic Cloud<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/master/docs/authentication.asciidoc">edit</a></h2>
</div></div></div>
<p>If you are using <a href="/cloud" class="ulink" target="_top">Elastic Cloud</a>, the client offers
an easy way to connect to it via the <code class="literal">cloud</code> option. You must pass the Cloud ID
that you can find in the cloud console, then your username and password inside
the <code class="literal">auth</code> option.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>When connecting to Elastic Cloud, the client will automatically enable
both request and response compression by default, since it yields significant
throughput improvements. Moreover, the client will also set the ssl option
<code class="literal">secureProtocol</code> to <code class="literal">TLSv1_2_method</code> unless specified otherwise. You can still
override this option by configuring them.</p>
</div>
</div>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>Do not enable sniffing when using Elastic Cloud, since the nodes are
behind a load balancer, Elastic Cloud will take care of everything for you.
Take a look <a href="/blog/elasticsearch-sniffing-best-practices-what-when-why-how" class="ulink" target="_top">here</a>
to know more.</p>
</div>
</div>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client } = require('@elastic/elasticsearch')
const client = new Client({
  cloud: {
    id: 'name:bG9jYWxob3N0JGFiY2QkZWZnaA==',
  },
  auth: {
    username: 'elastic',
    password: 'changeme'
  }
})</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_basic_authentication"></a>Basic authentication<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/master/docs/authentication.asciidoc">edit</a></h2>
</div></div></div>
<p>You can provide your credentials by passing the <code class="literal">username</code> and <code class="literal">password</code>
parameters via the <code class="literal">auth</code> option.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you provide both basic authentication credentials and the Api Key configuration, the Api Key will take precedence.</p>
</div>
</div>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client } = require('@elastic/elasticsearch')
const client = new Client({
  node: 'https://localhost:9200',
  auth: {
    username: 'elastic',
    password: 'changeme'
  }
})</pre>
</div>
<p>Otherwise, you can provide your credentials in the node(s) URL.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client } = require('@elastic/elasticsearch')
const client = new Client({
  node: 'https://username:password@localhost:9200'
})</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_apikey_authentication"></a>ApiKey authentication<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/master/docs/authentication.asciidoc">edit</a></h2>
</div></div></div>
<p>You can use the
<a href="/guide/en/elasticsearch/reference/7.x/security-api-create-api-key.html" class="ulink" target="_top">ApiKey</a>
authentication by passing the <code class="literal">apiKey</code> parameter via the <code class="literal">auth</code> option. The
<code class="literal">apiKey</code> parameter can be either a base64 encoded string or an object with the
values that you can obtain from the
<a href="/guide/en/elasticsearch/reference/7.x/security-api-create-api-key.html" class="ulink" target="_top">create api key endpoint</a>.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>If you provide both basic authentication credentials and the Api Key configuration, the Api Key will take precedence.</p>
</div>
</div>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client } = require('@elastic/elasticsearch')
const client = new Client({
  node: 'https://localhost:9200',
  auth: {
    apiKey: 'base64EncodedKey'
  }
})</pre>
</div>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client } = require('@elastic/elasticsearch')
const client = new Client({
  node: 'https://localhost:9200',
  auth: {
    apiKey: {
      id: 'foo',
      api_key: 'bar'
    }
  }
})</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_ssl_configuration"></a>SSL configuration<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/master/docs/authentication.asciidoc">edit</a></h2>
</div></div></div>
<p>Without any additional configuration you can specify <code class="literal">https://</code> node urls, and
the certificates used to sign these requests will be verified. To turn off certificate verification, you must specify an <code class="literal">ssl</code> object in the top level config and set <code class="literal">rejectUnauthorized: false</code>. The default <code class="literal">ssl</code> values are the same that Node.js&#8217;s <a href="https://nodejs.org/api/tls.html#tls_tls_connect_options_callback" class="ulink" target="_top"><code class="literal">tls.connect()</code></a>
uses.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client } = require('@elastic/elasticsearch')
const client = new Client({
  node: 'https://localhost:9200',
  auth: {
    username: 'elastic',
    password: 'changeme'
  },
  ssl: {
    ca: fs.readFileSync('./cacert.pem'),
    rejectUnauthorized: false
  }
})</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="breaking-changes.html">« Breaking changes coming from the old client</a>
</span>
<span class="next">
<a href="observability.html">Observability »</a>
</span>
</div>
</div>
</body>
</html>
