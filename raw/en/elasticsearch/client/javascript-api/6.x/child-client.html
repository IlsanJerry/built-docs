<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Creating a child client
        | Elasticsearch Node.js client [6.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Node.js client [6.x]" /><link rel="up" href="index.html" title="Elasticsearch Node.js client [6.x]" /><link rel="prev" href="observability.html" title="Observability" /><link rel="next" href="extend-client.html" title="Extend the client" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Clients/JavaScript/6.x" /><meta xmlns="" name="DC.subject" content="Clients" /><meta xmlns="" name="DC.identifier" content="6.x" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Node.js client
      [6.x]
    </a></span> » <span class="breadcrumb-node">Creating a child client</span></div><div xmlns="" class="navheader"><span class="prev"><a href="observability.html">
              « 
              Observability</a>
           
        </span><span class="next">
           
          <a href="extend-client.html">Extend the client
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="child-client"></a>Creating a child client<a xmlns="" href="https://github.com/elastic/elasticsearch-js/edit/6.x/docs/child.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h1></div></div></div><p>There are some use cases where you may need multiple instances of the client. You can easily do that by calling <code class="literal">new Client()</code> as many times as you need, but you will lose all the benefits of using one single client, such as the long living connections and the connection pool handling.
To avoid this problem the client offers a <code class="literal">child</code> API, which returns a new client instance that shares the connection pool with the parent client.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">The event emitter is shared between the parent and the child(ren), and if you extend the parent client, the child client will have the same extensions, while if the child client adds an extension, the parent client will not be extended.</p></div></div><p>You can pass to the <code class="literal">child</code> every client option you would pass to a normal client, but the connection pool specific options (<code class="literal">ssl</code>, <code class="literal">agent</code>, <code class="literal">pingTimeout</code>, <code class="literal">Connection</code>, and <code class="literal">resurrectStrategy</code>).</p><div xmlns="" class="caution admon"><div class="icon"><img alt="Caution" src="images/icons/caution.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you call <code class="literal">close</code> in any of the parent/child clients, every client will be closed.</p></div></div><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">const { Client } = require('@elastic/elasticsearch')
const client = new Client({ node: 'http://localhost:9200' })
const child = client.child({
  headers: { 'x-foo': 'bar' },
  requestTimeout: 1000
})

client.info(console.log)
child.info(console.log)</pre></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="observability.html">
              « 
              Observability</a>
           
        </span><span class="next">
           
          <a href="extend-client.html">Extend the client
               »
            </a></span></div></body></html>