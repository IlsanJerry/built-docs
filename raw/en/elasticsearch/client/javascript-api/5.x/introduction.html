<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Introduction
        | Elasticsearch Node.js client [5.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Node.js client [5.x]" /><link rel="up" href="index.html" title="Elasticsearch Node.js client [5.x]" /><link rel="prev" href="index.html" title="Elasticsearch Node.js client [5.x]" /><link rel="next" href="client-usage.html" title="Usage" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Clients/JavaScript/5.x" /><meta name="DC.subject" content="Clients" /><meta name="DC.identifier" content="5.x" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Node.js client
      [5.x]
    </a></span> » <span class="breadcrumb-node">Introduction</span></div><div class="navheader"><span class="prev">
           
        </span><span class="next">
           
          <a href="client-usage.html">Usage
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="introduction"></a>Introduction<a href="https://github.com/elastic/elasticsearch-js/edit/5.x/docs/introduction.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h1></div></div></div><p>The official Node.js client for Elasticsearch.</p><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_features"></a>Features<a href="https://github.com/elastic/elasticsearch-js/edit/5.x/docs/introduction.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">One-to-one mapping with REST API.</li><li class="listitem">Generalized, pluggable architecture.</li><li class="listitem">Configurable, automatic discovery of cluster nodes.</li><li class="listitem">Persistent, Keep-Alive connections.</li><li class="listitem">Load balancing across all available nodes.</li><li class="listitem">Child client support.</li><li class="listitem">TypeScript support out of the box.</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_install"></a>Install<a href="https://github.com/elastic/elasticsearch-js/edit/5.x/docs/introduction.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">npm install @elastic/elasticsearch</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_compatibility"></a>Compatibility<a href="https://github.com/elastic/elasticsearch-js/edit/5.x/docs/introduction.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The minimum supported version of Node.js is <code class="literal">v8</code>.</p><p>The library is compatible with all Elasticsearch versions since 5.x, and you should use the same major version of the Elasticsearch instance that you are using.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Elasticsearch Version</th><th align="left" valign="top">Client Version</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">master</code></p></td><td align="left" valign="top"><p><code class="literal">master</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">7.x</code></p></td><td align="left" valign="top"><p><code class="literal">7.x</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">6.x</code></p></td><td align="left" valign="top"><p><code class="literal">6.x</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">5.x</code></p></td><td align="left" valign="top"><p><code class="literal">5.x</code></p></td></tr></tbody></table></div><p>To install a specific major of the client, run the following command:</p><pre class="screen">npm install @elastic/elasticsearch@&lt;major&gt;</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_browser"></a>Browser<a href="https://github.com/elastic/elasticsearch-js/edit/5.x/docs/introduction.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>There is no official support for the browser environment. It exposes your Elasticsearch instance to everyone, which could lead to security issues.
We recommend that you write a lightweight proxy that uses this client instead.</p></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_quick_start"></a>Quick start<a href="https://github.com/elastic/elasticsearch-js/edit/5.x/docs/introduction.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>First of all, require the client and initialize it:</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">const { Client } = require('@elastic/elasticsearch')
const client = new Client({ node: 'http://localhost:9200' })</pre></div><p>You can use both the callback-style API and the promise-style API, both behave the same way.</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">// promise API
const result = await client.search({
  index: 'my-index',
  body: { foo: 'bar' }
})

// callback API
client.search({
  index: 'my-index',
  body: { foo: 'bar' }
}, (err, result) =&gt; {
  if (err) console.log(err)
})</pre></div><p>The returned value of <span class="strong strong"><strong>every</strong></span> API call is formed as follows:</p><div class="pre_wrapper lang-ts"><pre class="programlisting prettyprint lang-ts">{
  body: object | boolean
  statusCode: number
  headers: object
  warnings: [string]
  meta: object
}</pre></div><p>Let’s see a complete example!</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">'use strict'

const { Client } = require('@elastic/elasticsearch')
const client = new Client({ node: 'http://localhost:9200' })

async function run () {
  // Let's start by indexing some data
  await client.index({
    index: 'game-of-thrones',
    // type: '_doc', // uncomment this line if you are using Elasticsearch ≤ 6
    body: {
      character: 'Ned Stark',
      quote: 'Winter is coming.'
    }
  })

  await client.index({
    index: 'game-of-thrones',
    // type: '_doc', // uncomment this line if you are using Elasticsearch ≤ 6
    body: {
      character: 'Daenerys Targaryen',
      quote: 'I am the blood of the dragon.'
    }
  })

  await client.index({
    index: 'game-of-thrones',
    // type: '_doc', // uncomment this line if you are using Elasticsearch ≤ 6
    body: {
      character: 'Tyrion Lannister',
      quote: 'A mind needs books like a sword needs a whetstone.'
    }
  })

  // here we are forcing an index refresh, otherwise we will not
  // get any result in the consequent search
  await client.indices.refresh({ index: 'game-of-thrones' })

  // Let's search!
  const { body } = await client.search({
    index: 'game-of-thrones',
    // type: '_doc', // uncomment this line if you are using Elasticsearch ≤ 6
    body: {
      query: {
        match: { quote: 'winter' }
      }
    }
  })

  console.log(body.hits.hits)
}

run().catch(console.log)</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_install_multiple_versions"></a>Install multiple versions<a href="https://github.com/elastic/elasticsearch-js/edit/5.x/docs/introduction.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>If you are using multiple versions of Elasticsearch, you need to use multiple versions of the client.
In the past, install multiple versions of the same package was not possible, but with <code class="literal">npm v6.9</code>, you can do that via aliasing.</p><p>The command you must run to install different version of the client is:</p><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">npm install &lt;alias&gt;@npm:@elastic/elasticsearch@&lt;version&gt;</pre></div><p>So for example if you need to install <code class="literal">7.x</code> and <code class="literal">6.x</code>, you will run</p><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">npm install es6@npm:@elastic/elasticsearch@6
npm install es7@npm:@elastic/elasticsearch@7</pre></div><p>And your <code class="literal">package.json</code> will look like the following:</p><div class="pre_wrapper lang-json"><pre class="programlisting prettyprint lang-json">"dependencies": {
  "es6": "npm:@elastic/elasticsearch@^6.7.0",
  "es7": "npm:@elastic/elasticsearch@^7.0.0"
}</pre></div><p>You will require the packages from your code by using the alias you have defined.</p><div class="pre_wrapper lang-js"><pre class="programlisting prettyprint lang-js">const { Client: Client6 } = require('es6')
const { Client: Client7 } = require('es7')

const client6 = new Client6({ node: 'http://localhost:9200' })
const client7 = new Client7({ node: 'http://localhost:9201' })

client6.info(console.log)
client7.info(console.log)</pre></div><p>Finally, if you want to install the client for the next version of Elasticsearch (the one that lives in Elasticsearch’s master branch), you can use the following command:</p><div class="pre_wrapper lang-sh"><pre class="programlisting prettyprint lang-sh">npm install esmaster@github:elastic/elasticsearch-js</pre></div><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>This command will install the master branch of the client, which is not considered stable.</p></div></div></div></div></div><div class="navfooter"><span class="prev">
           
        </span><span class="next">
           
          <a href="client-usage.html">Usage
               »
            </a></span></div></body></html>
