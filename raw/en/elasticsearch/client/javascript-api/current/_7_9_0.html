<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>7.9.0 | Elasticsearch Node.js client [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Node.js client [7.x]"/>
<link rel="up" href="changelog-client.html" title="Changelog"/>
<link rel="prev" href="_7_9_1.html" title="7.9.1"/>
<link rel="next" href="_7_8_0.html" title="7.8.0"/>
<meta name="DC.type" content="Learn/Docs/Clients/JavaScript/7.x"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="7.x"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Node.js client [7.x]</a></span>
»
<span class="breadcrumb-link"><a href="changelog-client.html">Changelog</a></span>
»
<span class="breadcrumb-node">7.9.0</span>
</div>
<div class="navheader">
<span class="prev">
<a href="_7_9_1.html">« 7.9.1</a>
</span>
<span class="next">
<a href="_7_8_0.html">7.8.0 »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_7_9_0"></a>7.9.0<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h2>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_features_3"></a>Features<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_add_ability_to_disable_the_http_agent_1251"></a>Add ability to disable the http agent <a href="https://github.com/elastic/elasticsearch-js/pull/1251" class="ulink" target="_top">#1251</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>If needed, the http agent can be disabled by setting it to <code class="literal">false</code></p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client } = require('@elastic/elasticsearch')
const client = new Client({
  node: 'http://localhost:9200'.
  agent: false
})</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_add_support_for_a_global_context_option_1256"></a>Add support for a global context option <a href="https://github.com/elastic/elasticsearch-js/pull/1256" class="ulink" target="_top">#1256</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>Before this, you could set a <code class="literal">context</code> option in each request, but there was no way of setting it globally.
Now you can by configuring the <code class="literal">context</code> object in the global configuration, that will be merged with the local one.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client } = require('@elastic/elasticsearch')
const client = new Client({
  node: 'http://localhost:9200'.
  context: { meta: 'data' }
})</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_esm_support_1235"></a>ESM support <a href="https://github.com/elastic/elasticsearch-js/pull/1235" class="ulink" target="_top">#1235</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>If you are using ES Modules, now you can easily import the client!</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">import { Client } from '@elastic/elasticsearch'</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fixes_3"></a>Fixes<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_allow_the_client_name_to_be_a_symbol_1254"></a>Allow the client name to be a symbol <a href="https://github.com/elastic/elasticsearch-js/pull/1254" class="ulink" target="_top">#1254</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>It was possible in plain JavaScript, but not in TypeScript, now you can do it in TypeScript as well.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client } = require('@elastic/elasticsearch')
const client = new Client({
  node: 'http://localhost:9200',
  name: Symbol('unique')
})</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_fixed_transport_request_querystring_type_1240"></a>Fixed transport.request querystring type <a href="https://github.com/elastic/elasticsearch-js/pull/1240" class="ulink" target="_top">#1240</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>Only <code class="literal">Record&lt;string, any&gt;</code> was allowed. Now <code class="literal">string</code> is allowed as well.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_fixed_type_definitions_1263"></a>Fixed type definitions <a href="https://github.com/elastic/elasticsearch-js/pull/1263" class="ulink" target="_top">#1263</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
The <code class="literal">transport.request</code> defintion was incorrect, it was returning a <code class="literal">Promise&lt;T&gt;</code> instead of <code class="literal">TransportRequestPromise&lt;T&gt;</code>.
</li>
<li class="listitem">
The <code class="literal">refresh</code> parameter of most APIs was declared as <code class="literal">'true' | 'false' | 'wait_for'</code>, which was clunky. Now is <code class="literal">'wait_for' | boolean</code>.
</li>
</ul>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_generate_response_type_as_boolean_if_the_request_is_head_only_1275"></a>Generate response type as boolean if the request is HEAD only <a href="https://github.com/elastic/elasticsearch-js/pull/1275" class="ulink" target="_top">#1275</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>All HEAD request will have the body casted to a boolean value, <code class="literal">true</code> in case of a 200 response, <code class="literal">false</code> in case of
a 404 response. The type definitions were not reflecting this behavior.</p>
<div class="pre_wrapper lang-ts">
<pre class="programlisting prettyprint lang-ts">import { Client } from '@elastic/elasticsearch'
const client = new Client({
  node: 'http://localhost:9200'
})

const { body } = await client.exist({ index: 'my-index', id: 'my-id' })
console.log(body) // either `true` or `false`</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_internals"></a>Internals<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_updated_default_http_agent_configuration_1242"></a>Updated default http agent configuration <a href="https://github.com/elastic/elasticsearch-js/pull/1242" class="ulink" target="_top">#1242</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>Added the scheduling: <em>lifo</em> option to the default HTTP agent configuration to avoid maximizing the open sockets
against Elasticsearch and lowering the risk of encountering socket timeouts.
This feature is only available from Node v14.5+, but it should be backported to v10 and v12. (<a href="https://github.com/nodejs/node/pull/33278" class="ulink" target="_top">nodejs/node#33278</a>)</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_improve_child_api_1245"></a>Improve child API <a href="https://github.com/elastic/elasticsearch-js/pull/1245" class="ulink" target="_top">#1245</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>This pr introduce two changes which should not impact the surface API:</p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
Refactored the <code class="literal">client.child</code> API to allocate fewer objects, this change improves memory consumption over time
and improves the child creation performances by ~12%.
</li>
<li class="listitem">
The client no longer inherits from the EventEmitter class, but instead has an internal event emitter and exposes
only the API useful for the users, namely <code class="literal">emit, `on</code>, <code class="literal">once</code>, and <code class="literal">off</code>. The type definitions have been updated accordingly.
</li>
</ul>
</div>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="_7_9_1.html">« 7.9.1</a>
</span>
<span class="next">
<a href="_7_8_0.html">7.8.0 »</a>
</span>
</div>
</div>
</body>
</html>
