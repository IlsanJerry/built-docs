<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>7.8.0 | Elasticsearch Node.js client [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch Node.js client [7.x]"/>
<link rel="up" href="changelog-client.html" title="Changelog"/>
<link rel="prev" href="_7_9_0.html" title="7.9.0"/>
<link rel="next" href="_7_7_1.html" title="7.7.1"/>
<meta name="DC.type" content="Learn/Docs/Clients/JavaScript/7.x"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="7.x"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Node.js client [7.x]</a></span>
»
<span class="breadcrumb-link"><a href="changelog-client.html">Changelog</a></span>
»
<span class="breadcrumb-node">7.8.0</span>
</div>
<div class="navheader">
<span class="prev">
<a href="_7_9_0.html">« 7.9.0</a>
</span>
<span class="next">
<a href="_7_7_1.html">7.7.1 »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="_7_8_0"></a>7.8.0<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h2>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_features_3"></a>Features<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_support_for_elasticsearch_v7_8"></a>Support for Elasticsearch <code class="literal">v7.8</code>.<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>You can find all the API changes <a href="/guide/en/elasticsearch/reference/7.8/release-notes-7.8.0.html" class="ulink" target="_top">here</a>.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_added_multi_search_helper_1186"></a>Added multi search helper <a href="https://github.com/elastic/elasticsearch-js/pull/1186" class="ulink" target="_top">#1186</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>If you are sending search request at a high rate, this helper might be useful for you.
It will use the mutli search API under the hood to batch the requests and improve the overall performances of your application.<br>
The <code class="literal">result</code> exposes a <code class="literal">documents</code> property as well, which allows you to access directly the hits sources.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const { Client } = require('@elastic/elasticsearch')

const client = new Client({ node: 'http://localhost:9200' })
const m = client.helpers.msearch()

// promise style API
m.search(
    { index: 'stackoverflow' },
    { query: { match: { title: 'javascript' } } }
  )
  .then(result =&gt; console.log(result.body)) // or result.documents
  .catch(err =&gt; console.error(err))

// callback style API
m.search(
  { index: 'stackoverflow' },
  { query: { match: { title: 'ruby' } } },
  (err, result) =&gt; {
    if (err) console.error(err)
    console.log(result.body)) // or result.documents
  }
)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_added_timeout_support_in_bulk_and_msearch_helpers_1206"></a>Added timeout support in bulk and msearch helpers <a href="https://github.com/elastic/elasticsearch-js/pull/1206" class="ulink" target="_top">#1206</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>If there is a slow producer, the bulk helper might send data with a very large period of time, and if the process crashes for any reason, the data would be lost.
This pr introduces a <code class="literal">flushInterval</code> option in the bulk helper to avoid this issue. By default, the bulk helper will flush the data automatically every 30 seconds, unless the threshold has been reached before.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const b = client.helpers.bulk({
  flushInterval: 30000
})</pre>
</div>
<p>The same problem might happen with the multi search helper, where the user is not sending search requests fast enough. A <code class="literal">flushInterval</code> options has been added as well, with a default value of 500 milliseconds.</p>
<div class="pre_wrapper lang-js">
<pre class="programlisting prettyprint lang-js">const m = client.helpers.msearch({
  flushInterval: 500
})</pre>
</div>
</div>

</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_internals_2"></a>Internals<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h3>
</div></div></div>
<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_use_filter_path_for_improving_the_search_helpers_performances_1199"></a>Use filter_path for improving the search helpers performances <a href="https://github.com/elastic/elasticsearch-js/pull/1199" class="ulink" target="_top">#1199</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>From now on, all he search helpers will use the <code class="literal">filter_path</code> option automatically when needed to retrieve only the hits source. This change will result in less netwprk traffic and improved deserialization performances.</p>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h4 class="title"><a id="_search_helpers_documents_getter_1186"></a>Search helpers documents getter <a href="https://github.com/elastic/elasticsearch-js/pull/1186" class="ulink" target="_top">#1186</a><a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-js/edit/7.x/docs/changelog.asciidoc">edit</a></h4>
</div></div></div>
<p>Before this, the <code class="literal">documents</code> key that you can access in any search helper was computed as soon as we got the search result from Elasticsearch. With this change the <code class="literal">documents</code> key is now a getter, which makes this procees lazy, resulting in better performances and lower memory impact.</p>
</div>

</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="_7_9_0.html">« 7.9.0</a>
</span>
<span class="next">
<a href="_7_7_1.html">7.7.1 »</a>
</span>
</div>
</div>
</body>
</html>
