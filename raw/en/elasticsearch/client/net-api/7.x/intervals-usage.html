<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Intervals Usage
        | Elasticsearch.Net and NEST: the .NET clients [7.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch.Net and NEST: the .NET clients [7.x]" /><link rel="up" href="full-text-queries.html" title="Full text queries" /><link rel="prev" href="common-terms-usage.html" title="Common Terms Usage" /><link rel="next" href="match-usage.html" title="Match Usage" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Learn/Docs/Clients/.Net/7.x" /><meta xmlns="" name="DC.subject" content="Clients" /><meta xmlns="" name="DC.identifier" content="7.x" /></head><body><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch.Net and NEST:  the .NET clients
      [7.x]
    </a></span> » <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span> » <span class="breadcrumb-link"><a href="full-text-queries.html">Full text queries</a></span> » <span class="breadcrumb-node">Intervals Usage</span></div><div xmlns="" class="navheader"><span class="prev"><a href="common-terms-usage.html">
              « 
              Common Terms Usage</a>
           
        </span><span class="next">
           
          <a href="match-usage.html">Match Usage
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="intervals-usage"></a>Intervals Usage<a xmlns="" href="https://github.com/elastic/elasticsearch-net/edit/7.x/docs/query-dsl/full-text/intervals/intervals-usage.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>An intervals query allows fine-grained control over the order and proximity of matching terms.
Matching rules are constructed from a small set of definitions, and the rules are then applied to terms from a particular field.</p><p>The definitions produce sequences of minimal intervals that span terms in a body of text. These intervals can be further combined and filtered by parent sources.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Only available in Elasticsearch 6.7.0+</p></div></div><p>Be sure to read the Elasticsearch documentation on <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/7.2/query-dsl-intervals-query.html" target="_top">Intervals query</a></p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_fluent_dsl_example_22"></a>Fluent DSL example<a xmlns="" href="https://github.com/elastic/elasticsearch-net/edit/7.x/docs/query-dsl/full-text/intervals/intervals-usage.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div xmlns="" class="pre_wrapper lang-csharp"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-csharp">q
.Intervals(c =&gt; c
    .Field(p =&gt; p.Description)
    .Name("named_query")
    .Boost(1.1)
    .AnyOf(any =&gt; any
        .Intervals(i =&gt; i
            .Match(m =&gt; m
                .Query("my favourite food")
                .MaxGaps(5)
                .Ordered()
                .Filter(f =&gt; f
                    .Containing(co =&gt; co
                        .Match(mm =&gt; mm
                            .Query("kimchy")
                        )
                    )
                )
            )
            .AllOf(all =&gt; all
                .Intervals(ii =&gt; ii
                    .Match(m =&gt; m
                        .Query("hot water")
                    )
                    .Match(m =&gt; m
                        .Query("cold porridge")
                    )
                )
                .Filter(f =&gt; f
                    .Script(s =&gt; s
                        .Source("interval.start &gt; 0 &amp;&amp; interval.end &lt; 200")
                    )
                )
            )
        )
    )
)</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_object_initializer_syntax_example_23"></a>Object Initializer syntax example<a xmlns="" href="https://github.com/elastic/elasticsearch-net/edit/7.x/docs/query-dsl/full-text/intervals/intervals-usage.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div xmlns="" class="pre_wrapper lang-csharp"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-csharp">new IntervalsQuery
{
    Field = Field&lt;Project&gt;(p =&gt; p.Description),
    Name = "named_query",
    Boost = 1.1,
    AnyOf = new IntervalsAnyOf
    {
        Intervals = new IntervalsContainer[]
        {
            new IntervalsMatch
            {
                Query = "my favourite food",
                MaxGaps = 5,
                Ordered = true,
                Filter = new IntervalsFilter
                {
                    Containing = new IntervalsMatch
                    {
                        Query = "kimchy"
                    }
                }
            },
            new IntervalsAllOf
            {
                Intervals = new IntervalsContainer[]
                {
                    new IntervalsMatch
                    {
                        Query = "hot water",
                    },
                    new IntervalsMatch
                    {
                        Query = "cold porridge",
                    },
                },
                Filter = new IntervalsFilter
                {
                    Script = new InlineScript("interval.start &gt; 0 &amp;&amp; interval.end &lt; 200")
                }
            }
        }
    }
}</pre></div><p><strong>Example json output. </strong>
</p><div xmlns="" class="pre_wrapper lang-javascript"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-javascript">{
  "intervals": {
    "description": {
      "_name": "named_query",
      "boost": 1.1,
      "any_of": {
        "intervals": [
          {
            "match": {
              "query": "my favourite food",
              "max_gaps": 5,
              "ordered": true,
              "filter": {
                "containing": {
                  "match": {
                    "query": "kimchy"
                  }
                }
              }
            }
          },
          {
            "all_of": {
              "intervals": [
                {
                  "match": {
                    "query": "hot water"
                  }
                },
                {
                  "match": {
                    "query": "cold porridge"
                  }
                }
              ],
              "filter": {
                "script": {
                  "source": "interval.start &gt; 0 &amp;&amp; interval.end &lt; 200"
                }
              }
            }
          }
        ]
      }
    }
  }
}</pre></div><p>
</p></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="common-terms-usage.html">
              « 
              Common Terms Usage</a>
           
        </span><span class="next">
           
          <a href="match-usage.html">Match Usage
               »
            </a></span></div></body></html>