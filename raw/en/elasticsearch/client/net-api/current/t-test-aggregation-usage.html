<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>T Test Aggregation Usage | Elasticsearch.Net and NEST: the .NET clients [7.x] | Elastic</title>
<link rel="home" href="index.html" title="Elasticsearch.Net and NEST: the .NET clients [7.x]"/>
<link rel="up" href="metric-aggregations.html" title="Metric Aggregations"/>
<link rel="prev" href="top-metrics-aggregation-usage.html" title="Top Metrics Aggregation Usage"/>
<link rel="next" href="value-count-aggregation-usage.html" title="Value Count Aggregation Usage"/>
<meta name="DC.type" content="Learn/Docs/Clients/.Net/7.x"/>
<meta name="DC.subject" content="Clients"/>
<meta name="DC.identifier" content="7.x"/>
</head>
<body>
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch.Net and NEST:  the .NET clients [7.x]</a></span>
»
<span class="breadcrumb-link"><a href="reference-aggregations.html">Aggregations</a></span>
»
<span class="breadcrumb-link"><a href="metric-aggregations.html">Metric Aggregations</a></span>
»
<span class="breadcrumb-node">T Test Aggregation Usage</span>
</div>
<div class="navheader">
<span class="prev">
<a href="top-metrics-aggregation-usage.html">« Top Metrics Aggregation Usage</a>
</span>
<span class="next">
<a href="value-count-aggregation-usage.html">Value Count Aggregation Usage »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a id="t-test-aggregation-usage"></a>T Test Aggregation Usage<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-net/edit/7.x/docs/aggregations/metric/t-test/t-test-aggregation-usage.asciidoc">edit</a></h2>
</div></div></div>
<p>A t_test metrics aggregation that performs a statistical hypothesis test in which the test statistic follows a
Student’s t-distribution under the null hypothesis on numeric values extracted from the aggregated documents or
generated by provided scripts. In practice, this will tell you if the difference between two population means
are statistically significant and did not occur by chance alone.</p>
<div class="note admon">
<div class="icon"></div>
<div class="admon_content">
<p>Available in Elasticsearch 7.8.0+ with at least basic license level</p>
</div>
</div>
<p>Be sure to read the Elasticsearch documentation on <a href="/guide/en/elasticsearch/reference/master/search-aggregations-metrics-ttest-aggregation.html" class="ulink" target="_top">T-Test Aggregation</a>.</p>
<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_fluent_dsl_example_137"></a>Fluent DSL example<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-net/edit/7.x/docs/aggregations/metric/t-test/t-test-aggregation-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">a =&gt; a
.TTest("commits_visibility", c =&gt; c
    .A(t =&gt; t
        .Field(f =&gt; f.NumberOfCommits)
        .Filter(f =&gt; f
            .Term(ff =&gt; ff.Visibility, Visibility.Public)
        )
    )
    .B(t =&gt; t
        .Field(f =&gt; f.NumberOfCommits)
        .Filter(f =&gt; f
            .Term(ff =&gt; ff.Visibility, Visibility.Private)
        )
    )
    .Type(TTestType.Heteroscedastic)
)</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_object_initializer_syntax_example_137"></a>Object Initializer syntax example<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-net/edit/7.x/docs/aggregations/metric/t-test/t-test-aggregation-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">new TTestAggregation("commits_visibility")
{
    A = new TTestPopulation
    {
        Field = Field&lt;Project&gt;(f =&gt; f.NumberOfCommits),
        Filter = new TermQuery
        {
            Field = Field&lt;Project&gt;(f =&gt; f.Visibility),
            Value = Visibility.Public
        }
    },
    B = new TTestPopulation
    {
        Field = Field&lt;Project&gt;(f =&gt; f.NumberOfCommits),
        Filter = new TermQuery
        {
            Field = Field&lt;Project&gt;(f =&gt; f.Visibility),
            Value = Visibility.Private
        }
    },
    Type = TTestType.Heteroscedastic
}</pre>
</div>
<p><strong>Example json output.</strong></p>
<div class="pre_wrapper lang-javascript">
<pre class="programlisting prettyprint lang-javascript">{
  "commits_visibility": {
    "t_test": {
      "a": {
        "field": "numberOfCommits",
        "filter": {
          "term": {
            "visibility": {
              "value": "Public"
            }
          }
        }
      },
      "b": {
        "field": "numberOfCommits",
        "filter": {
          "term": {
            "visibility": {
              "value": "Private"
            }
          }
        }
      },
      "type": "heteroscedastic"
    }
  }
}</pre>
</div>
</div>

<div class="section">
<div class="titlepage"><div><div>
<h3 class="title"><a id="_handling_responses_32"></a>Handling Responses<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-net/edit/7.x/docs/aggregations/metric/t-test/t-test-aggregation-usage.asciidoc">edit</a></h3>
</div></div></div>
<div class="pre_wrapper lang-csharp">
<pre class="programlisting prettyprint lang-csharp">response.ShouldBeValid();
var tTest = response.Aggregations.TTest("commits_visibility");
tTest.Should().NotBeNull();
tTest.Value.Should().BeGreaterThan(0);</pre>
</div>
</div>

</div>
<div class="navfooter">
<span class="prev">
<a href="top-metrics-aggregation-usage.html">« Top Metrics Aggregation Usage</a>
</span>
<span class="next">
<a href="value-count-aggregation-usage.html">Value Count Aggregation Usage »</a>
</span>
</div>
</div>
</body>
</html>
