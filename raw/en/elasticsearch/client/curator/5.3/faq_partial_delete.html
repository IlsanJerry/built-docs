<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Q: Can I delete only certain data from within indices?
        | Curator Reference [5.3]
      | Elastic
    </title><link rel="home" href="index.html" title="Curator Reference [5.3]" /><link rel="up" href="faq.html" title="Frequently Asked Questions" /><link rel="prev" href="faq_doc_error.html" title="Q: How can I report an error in the documentation?" /><link rel="next" href="faq_strange_chars.html" title="Q: Can Curator handle index names with strange characters?" /><meta name="DC.type" content="Learn/Docs/Clients/Curator/5.3" /><meta name="DC.subject" content="Clients" /><meta name="DC.identifier" content="5.3" /></head><body><div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Curator Reference
      [5.3]
    </a></span> » <span class="breadcrumb-link"><a href="faq.html">Frequently Asked Questions</a></span> » <span class="breadcrumb-node">Q: Can I delete only certain data from within indices?</span></div><div class="navheader"><span class="prev"><a href="faq_doc_error.html">
              « 
              Q: How can I report an error in the documentation?</a>
           
        </span><span class="next">
           
          <a href="faq_strange_chars.html">Q: Can Curator handle index names with strange characters?
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="faq_partial_delete"></a>Q: Can I delete only certain data from within indices?<a href="https://github.com/elastic/curator/edit/5.3/docs/asciidoc/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_a_its_complicated"></a>A: It’s complicated<a href="https://github.com/elastic/curator/edit/5.3/docs/asciidoc/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><h4><a id="_tldr_no_curator_can_only_delete_entire_indices"></a>TL;DR: No. Curator can only delete entire indices.<a href="https://github.com/elastic/curator/edit/5.3/docs/asciidoc/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><h4><a id="_full_answer"></a>Full answer:<a href="https://github.com/elastic/curator/edit/5.3/docs/asciidoc/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>As a thought exercise, think of Elasticsearch indices as being like databases,
or tablespaces within a database. If you had hundreds of millions of rows to
delete from your database, would you run a separate
<code class="literal">DELETE from TABLE where date&lt;YYYY.MM.dd</code> to assemble hundreds of millions of
individual delete operations every day, or would you partition your tables in a
way that you could simply run <code class="literal">DROP table TABLENAME.YYYY.MM.dd</code>? The strain on
your database would be astronomical on the former and next to nothing on the
latter. Elasticsearch works much the same way. While Elasticsearch <span class="emphasis"><em>can</em></span>
technically do both methods, for use-cases with time-series data (like logging),
we recommend dropping entire indices vs. the extremely I/O expensive search and
delete method. Curator was created to help fill that need.</p><p>While you can store different types within different indices (e.g.
syslog-2014.05.05, apache-2015.05.06), this gets very expensive, very quickly in
a totally different way. Each shard in Elasticsearch is a Lucene index. Each
index requires a portion of the heap to exist and be kept current. If you have 3
daily indices with 5 primary shards each, you suddenly have reduced the
available heap space for shard management by a factor of 3, having gone from 5
shards to 15, <span class="emphasis"><em>per index,</em></span> not counting multiple indexes per day. The ways to
mitigate this (if you pursue this route) include massive daily indexing boxes
and using shard allocation/routing to move indices to specific members of the
cluster where they can have less effect; keeping fewer days of information;
having more nodes in your cluster, and so forth.</p><h4><a id="_conclusion"></a>Conclusion:<a href="https://github.com/elastic/curator/edit/5.3/docs/asciidoc/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>While it may be desirable to have different life-cycles for your data, sometimes
it’s just easier and cheaper to store everything as long as the longest
life-cycle you wish to maintain.</p><h4><a id="_post_script"></a>Post-script:<a href="https://github.com/elastic/curator/edit/5.3/docs/asciidoc/faq.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>Even though it is neither recommended <a href="#ftn.id-1.13.4.2.9.1" class="footnote" id="id-1.13.4.2.9.1"><sup class="footnote">[1]</sup></a>,
nor best practices, it is still possible to perform these search &amp; delete
operations yourself, using the <a class="ulink" href="http://www.elastic.co/guide/en/elasticsearch/reference/5.6/docs-delete-by-query.html" target="_top">Delete-by-Query
API</a>. Curator will not be modified to perform operations such as these, however.
Curator is meant to manage at the index level, rather than the data level.</p><p></p></div><div class="footnotes"><br /><hr width="100" align="left" /><div id="ftn.id-1.13.4.2.9.1" class="footnote"><p><a href="#id-1.13.4.2.9.1" class="simpara"><sup class="simpara">[1] </sup></a>There are reasons Elasticsearch does not recommend this, particularly for time-series data. For more information read <a class="ulink" href="http://blog.mikemccandless.com/2011/02/visualizing-lucenes-segment-merges.html" target="_top">http://blog.mikemccandless.com/2011/02/visualizing-lucenes-segment-merges.html</a> and watch what happens to your segments when you delete data.</p></div></div></div><div class="navfooter"><span class="prev"><a href="faq_doc_error.html">
              « 
              Q: How can I report an error in the documentation?</a>
           
        </span><span class="next">
           
          <a href="faq_strange_chars.html">Q: Can Curator handle index names with strange characters?
               »
            </a></span></div></body></html>
