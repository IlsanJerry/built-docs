<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>高阶概念
        | Elasticsearch: 权威指南
      | Elastic
    </title><link rel="home" href="index.html" title="Elasticsearch: 权威指南" /><link rel="up" href="aggregations.html" title="聚合" /><link rel="prev" href="aggregations.html" title="聚合" /><link rel="next" href="_buckets.html" title="桶" /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Definitive Guide" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="cn" /></head><body><div class="page_header"><b>请注意:</b><br/>本书基于 Elasticsearch 2.x 版本，有些内容可能已经过时。
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch: 权威指南</a></span> » <span class="breadcrumb-link"><a href="aggregations.html">聚合</a></span> » <span class="breadcrumb-node">高阶概念</span></div><div class="navheader"><span class="prev"><a href="aggregations.html">
              « 
              聚合</a>
           
        </span><span class="next">
           
          <a href="_buckets.html">桶
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="aggs-high-level"></a>高阶概念<a href="https://github.com/elasticsearch-cn/elasticsearch-definitive-guide/edit/cn/301_Aggregation_Overview.asciidoc" class="edit_me" title="在 GitHub 上编辑本页" rel="nofollow">编辑</a></h2></div></div></div><p>类似于 DSL 查询表达式，<a id="id-1.7.3.2.1" class="indexterm"></a>聚合也有 <span class="emphasis"><em>可组合</em></span> 的语法：独立单元的功能可以被混合起来提供你需要的自定义行为。这意味着只需要学习很少的基本概念，就可以得到几乎无尽的组合。</p><p>要掌握聚合，你只需要明白两个主要的概念：</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>桶（Buckets）</em></span> </span></dt><dd>满足特定条件的文档的集合</dd><dt><span class="term"><span class="emphasis"><em>指标（Metrics）</em></span> </span></dt><dd>对桶内的文档进行统计计算</dd></dl></div><p>这就是全部了！每个聚合都是一个或者多个桶和零个或者多个指标的组合。翻译成粗略的SQL语句来解释吧：</p><div class="pre_wrapper lang-sql"><pre class="programlisting prettyprint lang-sql">SELECT COUNT(color) <a id="CO183-1"></a><i class="conum" data-value="1"></i>
FROM table
GROUP BY color <a id="CO183-2"></a><i class="conum" data-value="2"></i></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO183-1"><i class="conum" data-value="1"></i></a> </p></td><td valign="top" align="left"><p><code class="literal">COUNT(color)</code> 相当于指标。</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO183-2"><i class="conum" data-value="2"></i></a> </p></td><td valign="top" align="left"><p><code class="literal">GROUP BY color</code> 相当于桶。</p></td></tr></table></div><p>桶在概念上类似于 SQL 的分组（GROUP BY），而指标则类似于 <code class="literal">COUNT()</code> 、 <code class="literal">SUM()</code> 、 <code class="literal">MAX()</code> 等统计方法。</p><p>让我们深入这两个概念<a id="id-1.7.3.9.1" class="indexterm"></a><a id="id-1.7.3.9.2" class="indexterm"></a> 并且了解和这两个概念相关的东西。</p></div><div class="navfooter"><span class="prev"><a href="aggregations.html">
              « 
              聚合</a>
           
        </span><span class="next">
           
          <a href="_buckets.html">桶
               »
            </a></span></div></body></html>
