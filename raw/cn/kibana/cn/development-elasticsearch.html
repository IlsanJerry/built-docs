<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">与 Elasticsearch 通信
        | Kibana 用户手册
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Kibana 用户手册" /><link rel="up" href="core-development.html" title="核心开发" /><link rel="prev" href="development-modules.html" title="模块和自动加载" /><link rel="next" href="development-functional-tests.html" title="功能测试" /><meta xmlns="" name="description" content="有关如何使用 Elasticsearch、Kibana、Logstash、Beats、X-Pack、Elastic Cloud、Elasticsearch for Apache Hadoop 及我们各种语言的客户端的文档。" /><meta xmlns="" name="DC.type" content="Learn/Docs/Kibana/Reference" /><meta xmlns="" name="DC.subject" content="Kibana" /><meta xmlns="" name="DC.identifier" content="cn" /></head><body><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana 用户手册</a></span> » <span class="breadcrumb-link"><a href="development.html">贡献</a></span> » <span class="breadcrumb-link"><a href="core-development.html">核心开发</a></span> » <span class="breadcrumb-node">与 Elasticsearch 通信</span></div><div xmlns="" class="navheader"><span class="prev"><a href="development-modules.html">
              « 
              模块和自动加载</a>
           
        </span><span class="next">
           
          <a href="development-functional-tests.html">功能测试
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="development-elasticsearch"></a>与 Elasticsearch 通信<a xmlns="" href="https://github.com/elasticsearch-cn/kibana/edit/cn/docs/development/core/development-elasticsearch.asciidoc" class="edit_me" title="在 GitHub 上编辑本页" rel="nofollow">编辑</a></h2></div></div></div><p>Kibana 在服务器和浏览器上暴露了两个客户端用于和 elasticsearch 通信。其中一个为管理客户端，用于管理 Kibana 的状态；另外一个为数据客户端，用于处理其它所有的请求。客户端使用 elasticsearch.js 库。</p><h3><a id="client-server"></a>服务器客户端<a xmlns="" href="https://github.com/elasticsearch-cn/kibana/edit/cn/docs/development/core/development-elasticsearch.asciidoc" class="edit_me" title="在 GitHub 上编辑本页" rel="nofollow">编辑</a></h3><p>服务器客户端通过 elasticsearch 插件暴露。</p><div xmlns="" class="pre_wrapper lang-javascript"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-javascript">  const adminCluster = server.plugins.elasticsearch.getCluster('admin);
  const dataCluster = server.plugins.elasticsearch.getCluster('data);

  //ping as the configured elasticsearch.user in kibana.yml
  adminCluster.callWithInternalUser('ping');

  //ping as the user specified in the current requests header
  adminCluster.callWithRequest(req, 'ping');</pre></div><h3><a id="client-browser"></a>浏览器客户端<a xmlns="" href="https://github.com/elasticsearch-cn/kibana/edit/cn/docs/development/core/development-elasticsearch.asciidoc" class="edit_me" title="在 GitHub 上编辑本页" rel="nofollow">编辑</a></h3><p>浏览器客户端通过 AngularJS 服务暴露。</p><div xmlns="" class="pre_wrapper lang-javascript"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-javascript">uiModules.get('kibana')
.run(function (esAdmin, es) {
  es.ping()
  .then(() =&gt; esAdmin.ping())
  .catch(err =&gt; {
    console.log('error pinging servers');
  });
});</pre></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="development-modules.html">
              « 
              模块和自动加载</a>
           
        </span><span class="next">
           
          <a href="development-functional-tests.html">功能测试
               »
            </a></span></div></body></html>