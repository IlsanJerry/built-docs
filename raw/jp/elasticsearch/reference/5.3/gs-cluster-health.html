<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">クラスタヘルス
        | Elasticsearchリファレンス [5.3]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearchリファレンス [5.3]" /><link rel="up" href="gs-exploring-cluster.html" title="クラスタの調査" /><link rel="prev" href="gs-exploring-cluster.html" title="クラスタの調査" /><link rel="next" href="gs-list-all-indices.html" title="全インデックスのリスト" /><meta xmlns="" name="description" content="Elasticsearch、Kibana、Logstash、Beats、X-Pack、Elastic Cloud、Elasticsearch for Apache Hadoop そして、さまざまな言語のクライアントの使用方法に関するドキュメント。" /><meta xmlns="" name="DC.type" content="Learn/Docs/Elasticsearch/Reference/5.3" /><meta xmlns="" name="DC.subject" content="Elasticsearch" /><meta xmlns="" name="DC.identifier" content="5.3" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearchリファレンス
      [5.3]
    </a></span> » <span class="breadcrumb-link"><a href="getting-started.html">始めてみよう</a></span> » <span class="breadcrumb-link"><a href="gs-exploring-cluster.html">クラスタの調査</a></span> » <span class="breadcrumb-node">クラスタヘルス</span></div><div xmlns="" class="navheader"><span class="prev"><a href="gs-exploring-cluster.html">
              « 
              クラスタの調査</a>
           
        </span><span class="next">
           
          <a href="gs-list-all-indices.html">全インデックスのリスト
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="gs-cluster-health"></a>クラスタヘルス<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.3/docs/jp/reference/getting-started.asciidoc" class="edit_me" title="GitHub上で編集" rel="nofollow">編集</a></h2></div></div></div><p>まず、基本的なヘルスチェックについて説明します。これを使用して、クラスタがどのように動作しているかを確認できます。これを行うためにcurlを使用しますが、HTTP/RESTの呼び出しが可能なツールも使用できます。では、Elasticsearchを起動したノード上で、別のコマンドシェルを開いているものとします。</p><p>クラスタヘルスをチェックするために、<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.3/cat.html" target="_top"><code class="literal">_cat</code> API</a>を使用します。「VIEW IN CONSOLE」をクリックして<a class="ulink" href="https://www.elastic.co/guide/en/kibana/5.3/console-kibana.html" target="_top">Kibanaのコンソール</a>で以下のコマンドを実行します。または、以下の「COPY AS CURL」リンクをクリックしてターミナルに貼り付け、`curl`を使用して以下のコマンドを実行します。</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_cat/health?v</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>次のような応答が返ります。</p><div xmlns="" class="pre_wrapper lang-txt"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-txt">epoch      timestamp cluster       status node.total node.data shards pri relo init unassign pending_tasks max_task_wait_time active_shards_percent
1475247709 17:01:49  elasticsearch green           1         1      0   0    0    0        0             0                  -                100.0%</pre></div><p>「elasticsearch」という名前のクラスタはgreenステータスで稼働しているのがわかります。</p><p>クラスタヘルスを求めると、green、yellow、またはredのいずれかになります。greenはすべてが正常である（クラスタは完全に機能する）ことを示し、yellowはすべてのデータを利用できるが一部のレプリカがまだ割り当てられていない（クラスタは完全に機能する）ことを示し、redは何らかの理由で一部のデータが利用できないことを示します。クラスタはredステータスでも部分的に機能します（つまり、利用可能なシャードからの検索リクエストに対応し続ける）。ただし、失われたデータがあるため、可能な限り速やかに修正する必要があります。</p><p>また、上記の応答から、ノードの合計が1であることと、まだデータがないためシャードが0であることがわかります。デフォルトのクラスタ名（elasticsearch）を使用しており、Elasticsearchはデフォルトでユニキャストネットワーク検出を使用して同じマシン上にある別のノードを検索するため、自分のコンピュータ上に複数のノードを間違って起動し、それらをすべて単一クラスタに参加させてしまう可能性があります。このシナリオでは、上記の応答に複数のノードが表示される場合もあります。</p><p>次のように、クラスタ内にあるノードのリストを取得できます。</p><div xmlns="" class="pre_wrapper lang-js"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_cat/nodes?v</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>次のような応答が返ります。</p><div xmlns="" class="pre_wrapper lang-txt"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-txt">ip        heap.percent ram.percent cpu load_1m load_5m load_15m node.role master name
127.0.0.1           10           5   5    4.46                        mdi      *      PB2SGZY</pre></div><p>ここでは、「PB2SGZY」という名前のノードが1つ表示されます。これは、現在クラスタ内にある単一ノードです。</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="gs-exploring-cluster.html">
              « 
              クラスタの調査</a>
           
        </span><span class="next">
           
          <a href="gs-list-all-indices.html">全インデックスのリスト
               »
            </a></span></div></body></html>